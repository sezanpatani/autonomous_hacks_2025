"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
exports.id = "vendor-chunks/@ai-sdk";
exports.ids = ["vendor-chunks/@ai-sdk"];
exports.modules = {

/***/ "(rsc)/./node_modules/@ai-sdk/gateway/dist/index.mjs":
/*!*****************************************************!*\
  !*** ./node_modules/@ai-sdk/gateway/dist/index.mjs ***!
  \*****************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   GatewayAuthenticationError: () => (/* binding */ GatewayAuthenticationError),\n/* harmony export */   GatewayError: () => (/* binding */ GatewayError),\n/* harmony export */   GatewayInternalServerError: () => (/* binding */ GatewayInternalServerError),\n/* harmony export */   GatewayInvalidRequestError: () => (/* binding */ GatewayInvalidRequestError),\n/* harmony export */   GatewayModelNotFoundError: () => (/* binding */ GatewayModelNotFoundError),\n/* harmony export */   GatewayRateLimitError: () => (/* binding */ GatewayRateLimitError),\n/* harmony export */   GatewayResponseError: () => (/* binding */ GatewayResponseError),\n/* harmony export */   createGateway: () => (/* binding */ createGatewayProvider),\n/* harmony export */   createGatewayProvider: () => (/* binding */ createGatewayProvider),\n/* harmony export */   gateway: () => (/* binding */ gateway)\n/* harmony export */ });\n/* harmony import */ var _ai_sdk_provider_utils__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @ai-sdk/provider-utils */ \"(rsc)/./node_modules/@ai-sdk/provider-utils/dist/index.mjs\");\n/* harmony import */ var _ai_sdk_provider__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @ai-sdk/provider */ \"(rsc)/./node_modules/@ai-sdk/provider/dist/index.mjs\");\n/* harmony import */ var zod_v4__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! zod/v4 */ \"(rsc)/./node_modules/zod/v4/index.js\");\n/* harmony import */ var zod__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! zod */ \"(rsc)/./node_modules/zod/v4/classic/external.js\");\n/* harmony import */ var _vercel_oidc__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @vercel/oidc */ \"(rsc)/./node_modules/@vercel/oidc/dist/index.js\");\n// src/gateway-provider.ts\n\n\n// src/errors/as-gateway-error.ts\n\n\n// src/errors/create-gateway-error.ts\n\n\n// src/errors/gateway-error.ts\nvar marker = \"vercel.ai.gateway.error\";\nvar symbol = Symbol.for(marker);\nvar _a, _b;\nvar GatewayError = class _GatewayError extends (_b = Error, _a = symbol, _b) {\n  constructor({\n    message,\n    statusCode = 500,\n    cause\n  }) {\n    super(message);\n    this[_a] = true;\n    this.statusCode = statusCode;\n    this.cause = cause;\n  }\n  /**\n   * Checks if the given error is a Gateway Error.\n   * @param {unknown} error - The error to check.\n   * @returns {boolean} True if the error is a Gateway Error, false otherwise.\n   */\n  static isInstance(error) {\n    return _GatewayError.hasMarker(error);\n  }\n  static hasMarker(error) {\n    return typeof error === \"object\" && error !== null && symbol in error && error[symbol] === true;\n  }\n};\n\n// src/errors/gateway-authentication-error.ts\nvar name = \"GatewayAuthenticationError\";\nvar marker2 = `vercel.ai.gateway.error.${name}`;\nvar symbol2 = Symbol.for(marker2);\nvar _a2, _b2;\nvar GatewayAuthenticationError = class _GatewayAuthenticationError extends (_b2 = GatewayError, _a2 = symbol2, _b2) {\n  constructor({\n    message = \"Authentication failed\",\n    statusCode = 401,\n    cause\n  } = {}) {\n    super({ message, statusCode, cause });\n    this[_a2] = true;\n    // used in isInstance\n    this.name = name;\n    this.type = \"authentication_error\";\n  }\n  static isInstance(error) {\n    return GatewayError.hasMarker(error) && symbol2 in error;\n  }\n  /**\n   * Creates a contextual error message when authentication fails\n   */\n  static createContextualError({\n    apiKeyProvided,\n    oidcTokenProvided,\n    message = \"Authentication failed\",\n    statusCode = 401,\n    cause\n  }) {\n    let contextualMessage;\n    if (apiKeyProvided) {\n      contextualMessage = `AI Gateway authentication failed: Invalid API key.\n\nCreate a new API key: https://vercel.com/d?to=%2F%5Bteam%5D%2F%7E%2Fai%2Fapi-keys\n\nProvide via 'apiKey' option or 'AI_GATEWAY_API_KEY' environment variable.`;\n    } else if (oidcTokenProvided) {\n      contextualMessage = `AI Gateway authentication failed: Invalid OIDC token.\n\nRun 'npx vercel link' to link your project, then 'vc env pull' to fetch the token.\n\nAlternatively, use an API key: https://vercel.com/d?to=%2F%5Bteam%5D%2F%7E%2Fai%2Fapi-keys`;\n    } else {\n      contextualMessage = `AI Gateway authentication failed: No authentication provided.\n\nOption 1 - API key:\nCreate an API key: https://vercel.com/d?to=%2F%5Bteam%5D%2F%7E%2Fai%2Fapi-keys\nProvide via 'apiKey' option or 'AI_GATEWAY_API_KEY' environment variable.\n\nOption 2 - OIDC token:\nRun 'npx vercel link' to link your project, then 'vc env pull' to fetch the token.`;\n    }\n    return new _GatewayAuthenticationError({\n      message: contextualMessage,\n      statusCode,\n      cause\n    });\n  }\n};\n\n// src/errors/gateway-invalid-request-error.ts\nvar name2 = \"GatewayInvalidRequestError\";\nvar marker3 = `vercel.ai.gateway.error.${name2}`;\nvar symbol3 = Symbol.for(marker3);\nvar _a3, _b3;\nvar GatewayInvalidRequestError = class extends (_b3 = GatewayError, _a3 = symbol3, _b3) {\n  constructor({\n    message = \"Invalid request\",\n    statusCode = 400,\n    cause\n  } = {}) {\n    super({ message, statusCode, cause });\n    this[_a3] = true;\n    // used in isInstance\n    this.name = name2;\n    this.type = \"invalid_request_error\";\n  }\n  static isInstance(error) {\n    return GatewayError.hasMarker(error) && symbol3 in error;\n  }\n};\n\n// src/errors/gateway-rate-limit-error.ts\nvar name3 = \"GatewayRateLimitError\";\nvar marker4 = `vercel.ai.gateway.error.${name3}`;\nvar symbol4 = Symbol.for(marker4);\nvar _a4, _b4;\nvar GatewayRateLimitError = class extends (_b4 = GatewayError, _a4 = symbol4, _b4) {\n  constructor({\n    message = \"Rate limit exceeded\",\n    statusCode = 429,\n    cause\n  } = {}) {\n    super({ message, statusCode, cause });\n    this[_a4] = true;\n    // used in isInstance\n    this.name = name3;\n    this.type = \"rate_limit_exceeded\";\n  }\n  static isInstance(error) {\n    return GatewayError.hasMarker(error) && symbol4 in error;\n  }\n};\n\n// src/errors/gateway-model-not-found-error.ts\n\n\nvar name4 = \"GatewayModelNotFoundError\";\nvar marker5 = `vercel.ai.gateway.error.${name4}`;\nvar symbol5 = Symbol.for(marker5);\nvar modelNotFoundParamSchema = (0,_ai_sdk_provider_utils__WEBPACK_IMPORTED_MODULE_1__.lazySchema)(\n  () => (0,_ai_sdk_provider_utils__WEBPACK_IMPORTED_MODULE_1__.zodSchema)(\n    zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.object({\n      modelId: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.string()\n    })\n  )\n);\nvar _a5, _b5;\nvar GatewayModelNotFoundError = class extends (_b5 = GatewayError, _a5 = symbol5, _b5) {\n  constructor({\n    message = \"Model not found\",\n    statusCode = 404,\n    modelId,\n    cause\n  } = {}) {\n    super({ message, statusCode, cause });\n    this[_a5] = true;\n    // used in isInstance\n    this.name = name4;\n    this.type = \"model_not_found\";\n    this.modelId = modelId;\n  }\n  static isInstance(error) {\n    return GatewayError.hasMarker(error) && symbol5 in error;\n  }\n};\n\n// src/errors/gateway-internal-server-error.ts\nvar name5 = \"GatewayInternalServerError\";\nvar marker6 = `vercel.ai.gateway.error.${name5}`;\nvar symbol6 = Symbol.for(marker6);\nvar _a6, _b6;\nvar GatewayInternalServerError = class extends (_b6 = GatewayError, _a6 = symbol6, _b6) {\n  constructor({\n    message = \"Internal server error\",\n    statusCode = 500,\n    cause\n  } = {}) {\n    super({ message, statusCode, cause });\n    this[_a6] = true;\n    // used in isInstance\n    this.name = name5;\n    this.type = \"internal_server_error\";\n  }\n  static isInstance(error) {\n    return GatewayError.hasMarker(error) && symbol6 in error;\n  }\n};\n\n// src/errors/gateway-response-error.ts\nvar name6 = \"GatewayResponseError\";\nvar marker7 = `vercel.ai.gateway.error.${name6}`;\nvar symbol7 = Symbol.for(marker7);\nvar _a7, _b7;\nvar GatewayResponseError = class extends (_b7 = GatewayError, _a7 = symbol7, _b7) {\n  constructor({\n    message = \"Invalid response from Gateway\",\n    statusCode = 502,\n    response,\n    validationError,\n    cause\n  } = {}) {\n    super({ message, statusCode, cause });\n    this[_a7] = true;\n    // used in isInstance\n    this.name = name6;\n    this.type = \"response_error\";\n    this.response = response;\n    this.validationError = validationError;\n  }\n  static isInstance(error) {\n    return GatewayError.hasMarker(error) && symbol7 in error;\n  }\n};\n\n// src/errors/create-gateway-error.ts\n\nasync function createGatewayErrorFromResponse({\n  response,\n  statusCode,\n  defaultMessage = \"Gateway request failed\",\n  cause,\n  authMethod\n}) {\n  const parseResult = await (0,_ai_sdk_provider_utils__WEBPACK_IMPORTED_MODULE_1__.safeValidateTypes)({\n    value: response,\n    schema: gatewayErrorResponseSchema\n  });\n  if (!parseResult.success) {\n    return new GatewayResponseError({\n      message: `Invalid error response format: ${defaultMessage}`,\n      statusCode,\n      response,\n      validationError: parseResult.error,\n      cause\n    });\n  }\n  const validatedResponse = parseResult.value;\n  const errorType = validatedResponse.error.type;\n  const message = validatedResponse.error.message;\n  switch (errorType) {\n    case \"authentication_error\":\n      return GatewayAuthenticationError.createContextualError({\n        apiKeyProvided: authMethod === \"api-key\",\n        oidcTokenProvided: authMethod === \"oidc\",\n        statusCode,\n        cause\n      });\n    case \"invalid_request_error\":\n      return new GatewayInvalidRequestError({ message, statusCode, cause });\n    case \"rate_limit_exceeded\":\n      return new GatewayRateLimitError({ message, statusCode, cause });\n    case \"model_not_found\": {\n      const modelResult = await (0,_ai_sdk_provider_utils__WEBPACK_IMPORTED_MODULE_1__.safeValidateTypes)({\n        value: validatedResponse.error.param,\n        schema: modelNotFoundParamSchema\n      });\n      return new GatewayModelNotFoundError({\n        message,\n        statusCode,\n        modelId: modelResult.success ? modelResult.value.modelId : void 0,\n        cause\n      });\n    }\n    case \"internal_server_error\":\n      return new GatewayInternalServerError({ message, statusCode, cause });\n    default:\n      return new GatewayInternalServerError({ message, statusCode, cause });\n  }\n}\nvar gatewayErrorResponseSchema = (0,_ai_sdk_provider_utils__WEBPACK_IMPORTED_MODULE_1__.lazySchema)(\n  () => (0,_ai_sdk_provider_utils__WEBPACK_IMPORTED_MODULE_1__.zodSchema)(\n    zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.object({\n      error: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.object({\n        message: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.string(),\n        type: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.string().nullish(),\n        param: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.unknown().nullish(),\n        code: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.union([zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.string(), zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.number()]).nullish()\n      })\n    })\n  )\n);\n\n// src/errors/as-gateway-error.ts\nfunction asGatewayError(error, authMethod) {\n  var _a8;\n  if (GatewayError.isInstance(error)) {\n    return error;\n  }\n  if (_ai_sdk_provider__WEBPACK_IMPORTED_MODULE_2__.APICallError.isInstance(error)) {\n    return createGatewayErrorFromResponse({\n      response: extractApiCallResponse(error),\n      statusCode: (_a8 = error.statusCode) != null ? _a8 : 500,\n      defaultMessage: \"Gateway request failed\",\n      cause: error,\n      authMethod\n    });\n  }\n  return createGatewayErrorFromResponse({\n    response: {},\n    statusCode: 500,\n    defaultMessage: error instanceof Error ? `Gateway request failed: ${error.message}` : \"Unknown Gateway error\",\n    cause: error,\n    authMethod\n  });\n}\n\n// src/errors/extract-api-call-response.ts\nfunction extractApiCallResponse(error) {\n  if (error.data !== void 0) {\n    return error.data;\n  }\n  if (error.responseBody != null) {\n    try {\n      return JSON.parse(error.responseBody);\n    } catch (e) {\n      return error.responseBody;\n    }\n  }\n  return {};\n}\n\n// src/errors/parse-auth-method.ts\n\n\nvar GATEWAY_AUTH_METHOD_HEADER = \"ai-gateway-auth-method\";\nasync function parseAuthMethod(headers) {\n  const result = await (0,_ai_sdk_provider_utils__WEBPACK_IMPORTED_MODULE_1__.safeValidateTypes)({\n    value: headers[GATEWAY_AUTH_METHOD_HEADER],\n    schema: gatewayAuthMethodSchema\n  });\n  return result.success ? result.value : void 0;\n}\nvar gatewayAuthMethodSchema = (0,_ai_sdk_provider_utils__WEBPACK_IMPORTED_MODULE_1__.lazySchema)(\n  () => (0,_ai_sdk_provider_utils__WEBPACK_IMPORTED_MODULE_1__.zodSchema)(zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.union([zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.literal(\"api-key\"), zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.literal(\"oidc\")]))\n);\n\n// src/gateway-fetch-metadata.ts\n\n\nvar GatewayFetchMetadata = class {\n  constructor(config) {\n    this.config = config;\n  }\n  async getAvailableModels() {\n    try {\n      const { value } = await (0,_ai_sdk_provider_utils__WEBPACK_IMPORTED_MODULE_1__.getFromApi)({\n        url: `${this.config.baseURL}/config`,\n        headers: await (0,_ai_sdk_provider_utils__WEBPACK_IMPORTED_MODULE_1__.resolve)(this.config.headers()),\n        successfulResponseHandler: (0,_ai_sdk_provider_utils__WEBPACK_IMPORTED_MODULE_1__.createJsonResponseHandler)(\n          gatewayAvailableModelsResponseSchema\n        ),\n        failedResponseHandler: (0,_ai_sdk_provider_utils__WEBPACK_IMPORTED_MODULE_1__.createJsonErrorResponseHandler)({\n          errorSchema: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.any(),\n          errorToMessage: (data) => data\n        }),\n        fetch: this.config.fetch\n      });\n      return value;\n    } catch (error) {\n      throw await asGatewayError(error);\n    }\n  }\n  async getCredits() {\n    try {\n      const baseUrl = new URL(this.config.baseURL);\n      const { value } = await (0,_ai_sdk_provider_utils__WEBPACK_IMPORTED_MODULE_1__.getFromApi)({\n        url: `${baseUrl.origin}/v1/credits`,\n        headers: await (0,_ai_sdk_provider_utils__WEBPACK_IMPORTED_MODULE_1__.resolve)(this.config.headers()),\n        successfulResponseHandler: (0,_ai_sdk_provider_utils__WEBPACK_IMPORTED_MODULE_1__.createJsonResponseHandler)(\n          gatewayCreditsResponseSchema\n        ),\n        failedResponseHandler: (0,_ai_sdk_provider_utils__WEBPACK_IMPORTED_MODULE_1__.createJsonErrorResponseHandler)({\n          errorSchema: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.any(),\n          errorToMessage: (data) => data\n        }),\n        fetch: this.config.fetch\n      });\n      return value;\n    } catch (error) {\n      throw await asGatewayError(error);\n    }\n  }\n};\nvar gatewayAvailableModelsResponseSchema = (0,_ai_sdk_provider_utils__WEBPACK_IMPORTED_MODULE_1__.lazySchema)(\n  () => (0,_ai_sdk_provider_utils__WEBPACK_IMPORTED_MODULE_1__.zodSchema)(\n    zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.object({\n      models: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.array(\n        zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.object({\n          id: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.string(),\n          name: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.string(),\n          description: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.string().nullish(),\n          pricing: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.object({\n            input: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.string(),\n            output: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.string(),\n            input_cache_read: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.string().nullish(),\n            input_cache_write: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.string().nullish()\n          }).transform(\n            ({ input, output, input_cache_read, input_cache_write }) => ({\n              input,\n              output,\n              ...input_cache_read ? { cachedInputTokens: input_cache_read } : {},\n              ...input_cache_write ? { cacheCreationInputTokens: input_cache_write } : {}\n            })\n          ).nullish(),\n          specification: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.object({\n            specificationVersion: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.literal(\"v3\"),\n            provider: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.string(),\n            modelId: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.string()\n          }),\n          modelType: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z[\"enum\"]([\"language\", \"embedding\", \"image\"]).nullish()\n        })\n      )\n    })\n  )\n);\nvar gatewayCreditsResponseSchema = (0,_ai_sdk_provider_utils__WEBPACK_IMPORTED_MODULE_1__.lazySchema)(\n  () => (0,_ai_sdk_provider_utils__WEBPACK_IMPORTED_MODULE_1__.zodSchema)(\n    zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.object({\n      balance: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.string(),\n      total_used: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.string()\n    }).transform(({ balance, total_used }) => ({\n      balance,\n      totalUsed: total_used\n    }))\n  )\n);\n\n// src/gateway-language-model.ts\n\n\nvar GatewayLanguageModel = class {\n  constructor(modelId, config) {\n    this.modelId = modelId;\n    this.config = config;\n    this.specificationVersion = \"v3\";\n    this.supportedUrls = { \"*/*\": [/.*/] };\n  }\n  get provider() {\n    return this.config.provider;\n  }\n  async getArgs(options) {\n    const { abortSignal: _abortSignal, ...optionsWithoutSignal } = options;\n    return {\n      args: this.maybeEncodeFileParts(optionsWithoutSignal),\n      warnings: []\n    };\n  }\n  async doGenerate(options) {\n    const { args, warnings } = await this.getArgs(options);\n    const { abortSignal } = options;\n    const resolvedHeaders = await (0,_ai_sdk_provider_utils__WEBPACK_IMPORTED_MODULE_1__.resolve)(this.config.headers());\n    try {\n      const {\n        responseHeaders,\n        value: responseBody,\n        rawValue: rawResponse\n      } = await (0,_ai_sdk_provider_utils__WEBPACK_IMPORTED_MODULE_1__.postJsonToApi)({\n        url: this.getUrl(),\n        headers: (0,_ai_sdk_provider_utils__WEBPACK_IMPORTED_MODULE_1__.combineHeaders)(\n          resolvedHeaders,\n          options.headers,\n          this.getModelConfigHeaders(this.modelId, false),\n          await (0,_ai_sdk_provider_utils__WEBPACK_IMPORTED_MODULE_1__.resolve)(this.config.o11yHeaders)\n        ),\n        body: args,\n        successfulResponseHandler: (0,_ai_sdk_provider_utils__WEBPACK_IMPORTED_MODULE_1__.createJsonResponseHandler)(zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.any()),\n        failedResponseHandler: (0,_ai_sdk_provider_utils__WEBPACK_IMPORTED_MODULE_1__.createJsonErrorResponseHandler)({\n          errorSchema: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.any(),\n          errorToMessage: (data) => data\n        }),\n        ...abortSignal && { abortSignal },\n        fetch: this.config.fetch\n      });\n      return {\n        ...responseBody,\n        request: { body: args },\n        response: { headers: responseHeaders, body: rawResponse },\n        warnings\n      };\n    } catch (error) {\n      throw await asGatewayError(error, await parseAuthMethod(resolvedHeaders));\n    }\n  }\n  async doStream(options) {\n    const { args, warnings } = await this.getArgs(options);\n    const { abortSignal } = options;\n    const resolvedHeaders = await (0,_ai_sdk_provider_utils__WEBPACK_IMPORTED_MODULE_1__.resolve)(this.config.headers());\n    try {\n      const { value: response, responseHeaders } = await (0,_ai_sdk_provider_utils__WEBPACK_IMPORTED_MODULE_1__.postJsonToApi)({\n        url: this.getUrl(),\n        headers: (0,_ai_sdk_provider_utils__WEBPACK_IMPORTED_MODULE_1__.combineHeaders)(\n          resolvedHeaders,\n          options.headers,\n          this.getModelConfigHeaders(this.modelId, true),\n          await (0,_ai_sdk_provider_utils__WEBPACK_IMPORTED_MODULE_1__.resolve)(this.config.o11yHeaders)\n        ),\n        body: args,\n        successfulResponseHandler: (0,_ai_sdk_provider_utils__WEBPACK_IMPORTED_MODULE_1__.createEventSourceResponseHandler)(zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.any()),\n        failedResponseHandler: (0,_ai_sdk_provider_utils__WEBPACK_IMPORTED_MODULE_1__.createJsonErrorResponseHandler)({\n          errorSchema: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.any(),\n          errorToMessage: (data) => data\n        }),\n        ...abortSignal && { abortSignal },\n        fetch: this.config.fetch\n      });\n      return {\n        stream: response.pipeThrough(\n          new TransformStream({\n            start(controller) {\n              if (warnings.length > 0) {\n                controller.enqueue({ type: \"stream-start\", warnings });\n              }\n            },\n            transform(chunk, controller) {\n              if (chunk.success) {\n                const streamPart = chunk.value;\n                if (streamPart.type === \"raw\" && !options.includeRawChunks) {\n                  return;\n                }\n                if (streamPart.type === \"response-metadata\" && streamPart.timestamp && typeof streamPart.timestamp === \"string\") {\n                  streamPart.timestamp = new Date(streamPart.timestamp);\n                }\n                controller.enqueue(streamPart);\n              } else {\n                controller.error(\n                  chunk.error\n                );\n              }\n            }\n          })\n        ),\n        request: { body: args },\n        response: { headers: responseHeaders }\n      };\n    } catch (error) {\n      throw await asGatewayError(error, await parseAuthMethod(resolvedHeaders));\n    }\n  }\n  isFilePart(part) {\n    return part && typeof part === \"object\" && \"type\" in part && part.type === \"file\";\n  }\n  /**\n   * Encodes file parts in the prompt to base64. Mutates the passed options\n   * instance directly to avoid copying the file data.\n   * @param options - The options to encode.\n   * @returns The options with the file parts encoded.\n   */\n  maybeEncodeFileParts(options) {\n    for (const message of options.prompt) {\n      for (const part of message.content) {\n        if (this.isFilePart(part)) {\n          const filePart = part;\n          if (filePart.data instanceof Uint8Array) {\n            const buffer = Uint8Array.from(filePart.data);\n            const base64Data = Buffer.from(buffer).toString(\"base64\");\n            filePart.data = new URL(\n              `data:${filePart.mediaType || \"application/octet-stream\"};base64,${base64Data}`\n            );\n          }\n        }\n      }\n    }\n    return options;\n  }\n  getUrl() {\n    return `${this.config.baseURL}/language-model`;\n  }\n  getModelConfigHeaders(modelId, streaming) {\n    return {\n      \"ai-language-model-specification-version\": \"3\",\n      \"ai-language-model-id\": modelId,\n      \"ai-language-model-streaming\": String(streaming)\n    };\n  }\n};\n\n// src/gateway-embedding-model.ts\n\n\nvar GatewayEmbeddingModel = class {\n  constructor(modelId, config) {\n    this.modelId = modelId;\n    this.config = config;\n    this.specificationVersion = \"v3\";\n    this.maxEmbeddingsPerCall = 2048;\n    this.supportsParallelCalls = true;\n  }\n  get provider() {\n    return this.config.provider;\n  }\n  async doEmbed({\n    values,\n    headers,\n    abortSignal,\n    providerOptions\n  }) {\n    var _a8;\n    const resolvedHeaders = await (0,_ai_sdk_provider_utils__WEBPACK_IMPORTED_MODULE_1__.resolve)(this.config.headers());\n    try {\n      const {\n        responseHeaders,\n        value: responseBody,\n        rawValue\n      } = await (0,_ai_sdk_provider_utils__WEBPACK_IMPORTED_MODULE_1__.postJsonToApi)({\n        url: this.getUrl(),\n        headers: (0,_ai_sdk_provider_utils__WEBPACK_IMPORTED_MODULE_1__.combineHeaders)(\n          resolvedHeaders,\n          headers != null ? headers : {},\n          this.getModelConfigHeaders(),\n          await (0,_ai_sdk_provider_utils__WEBPACK_IMPORTED_MODULE_1__.resolve)(this.config.o11yHeaders)\n        ),\n        body: {\n          values,\n          ...providerOptions ? { providerOptions } : {}\n        },\n        successfulResponseHandler: (0,_ai_sdk_provider_utils__WEBPACK_IMPORTED_MODULE_1__.createJsonResponseHandler)(\n          gatewayEmbeddingResponseSchema\n        ),\n        failedResponseHandler: (0,_ai_sdk_provider_utils__WEBPACK_IMPORTED_MODULE_1__.createJsonErrorResponseHandler)({\n          errorSchema: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.any(),\n          errorToMessage: (data) => data\n        }),\n        ...abortSignal && { abortSignal },\n        fetch: this.config.fetch\n      });\n      return {\n        embeddings: responseBody.embeddings,\n        usage: (_a8 = responseBody.usage) != null ? _a8 : void 0,\n        providerMetadata: responseBody.providerMetadata,\n        response: { headers: responseHeaders, body: rawValue },\n        warnings: []\n      };\n    } catch (error) {\n      throw await asGatewayError(error, await parseAuthMethod(resolvedHeaders));\n    }\n  }\n  getUrl() {\n    return `${this.config.baseURL}/embedding-model`;\n  }\n  getModelConfigHeaders() {\n    return {\n      \"ai-embedding-model-specification-version\": \"3\",\n      \"ai-model-id\": this.modelId\n    };\n  }\n};\nvar gatewayEmbeddingResponseSchema = (0,_ai_sdk_provider_utils__WEBPACK_IMPORTED_MODULE_1__.lazySchema)(\n  () => (0,_ai_sdk_provider_utils__WEBPACK_IMPORTED_MODULE_1__.zodSchema)(\n    zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.object({\n      embeddings: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.array(zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.array(zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.number())),\n      usage: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.object({ tokens: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.number() }).nullish(),\n      providerMetadata: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.record(zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.string(), zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.record(zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.string(), zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.unknown())).optional()\n    })\n  )\n);\n\n// src/gateway-image-model.ts\n\n\nvar GatewayImageModel = class {\n  constructor(modelId, config) {\n    this.modelId = modelId;\n    this.config = config;\n    this.specificationVersion = \"v3\";\n    // Set a very large number to prevent client-side splitting of requests\n    this.maxImagesPerCall = Number.MAX_SAFE_INTEGER;\n  }\n  get provider() {\n    return this.config.provider;\n  }\n  async doGenerate({\n    prompt,\n    n,\n    size,\n    aspectRatio,\n    seed,\n    files,\n    mask,\n    providerOptions,\n    headers,\n    abortSignal\n  }) {\n    var _a8;\n    const resolvedHeaders = await (0,_ai_sdk_provider_utils__WEBPACK_IMPORTED_MODULE_1__.resolve)(this.config.headers());\n    try {\n      const {\n        responseHeaders,\n        value: responseBody,\n        rawValue\n      } = await (0,_ai_sdk_provider_utils__WEBPACK_IMPORTED_MODULE_1__.postJsonToApi)({\n        url: this.getUrl(),\n        headers: (0,_ai_sdk_provider_utils__WEBPACK_IMPORTED_MODULE_1__.combineHeaders)(\n          resolvedHeaders,\n          headers != null ? headers : {},\n          this.getModelConfigHeaders(),\n          await (0,_ai_sdk_provider_utils__WEBPACK_IMPORTED_MODULE_1__.resolve)(this.config.o11yHeaders)\n        ),\n        body: {\n          prompt,\n          n,\n          ...size && { size },\n          ...aspectRatio && { aspectRatio },\n          ...seed && { seed },\n          ...providerOptions && { providerOptions },\n          ...files && {\n            files: files.map((file) => maybeEncodeImageFile(file))\n          },\n          ...mask && { mask: maybeEncodeImageFile(mask) }\n        },\n        successfulResponseHandler: (0,_ai_sdk_provider_utils__WEBPACK_IMPORTED_MODULE_1__.createJsonResponseHandler)(\n          gatewayImageResponseSchema\n        ),\n        failedResponseHandler: (0,_ai_sdk_provider_utils__WEBPACK_IMPORTED_MODULE_1__.createJsonErrorResponseHandler)({\n          errorSchema: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.any(),\n          errorToMessage: (data) => data\n        }),\n        ...abortSignal && { abortSignal },\n        fetch: this.config.fetch\n      });\n      return {\n        images: responseBody.images,\n        // Always base64 strings from server\n        warnings: (_a8 = responseBody.warnings) != null ? _a8 : [],\n        providerMetadata: responseBody.providerMetadata,\n        response: {\n          timestamp: /* @__PURE__ */ new Date(),\n          modelId: this.modelId,\n          headers: responseHeaders\n        }\n      };\n    } catch (error) {\n      throw asGatewayError(error, await parseAuthMethod(resolvedHeaders));\n    }\n  }\n  getUrl() {\n    return `${this.config.baseURL}/image-model`;\n  }\n  getModelConfigHeaders() {\n    return {\n      \"ai-image-model-specification-version\": \"3\",\n      \"ai-model-id\": this.modelId\n    };\n  }\n};\nfunction maybeEncodeImageFile(file) {\n  if (file.type === \"file\" && file.data instanceof Uint8Array) {\n    return {\n      ...file,\n      data: (0,_ai_sdk_provider_utils__WEBPACK_IMPORTED_MODULE_1__.convertUint8ArrayToBase64)(file.data)\n    };\n  }\n  return file;\n}\nvar providerMetadataEntrySchema = zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.object({\n  images: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.array(zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.unknown()).optional()\n}).catchall(zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.unknown());\nvar gatewayImageResponseSchema = zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.object({\n  images: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.array(zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.string()),\n  // Always base64 strings over the wire\n  warnings: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.array(\n    zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.object({\n      type: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.literal(\"other\"),\n      message: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.string()\n    })\n  ).optional(),\n  providerMetadata: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.record(zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.string(), providerMetadataEntrySchema).optional()\n});\n\n// src/tool/perplexity-search.ts\n\n\nvar perplexitySearchInputSchema = (0,_ai_sdk_provider_utils__WEBPACK_IMPORTED_MODULE_1__.lazySchema)(\n  () => (0,_ai_sdk_provider_utils__WEBPACK_IMPORTED_MODULE_1__.zodSchema)(\n    zod__WEBPACK_IMPORTED_MODULE_3__.object({\n      query: zod__WEBPACK_IMPORTED_MODULE_3__.union([zod__WEBPACK_IMPORTED_MODULE_3__.string(), zod__WEBPACK_IMPORTED_MODULE_3__.array(zod__WEBPACK_IMPORTED_MODULE_3__.string())]).describe(\n        \"Search query (string) or multiple queries (array of up to 5 strings). Multi-query searches return combined results from all queries.\"\n      ),\n      max_results: zod__WEBPACK_IMPORTED_MODULE_3__.number().optional().describe(\n        \"Maximum number of search results to return (1-20, default: 10)\"\n      ),\n      max_tokens_per_page: zod__WEBPACK_IMPORTED_MODULE_3__.number().optional().describe(\n        \"Maximum number of tokens to extract per search result page (256-2048, default: 1024)\"\n      ),\n      country: zod__WEBPACK_IMPORTED_MODULE_3__.string().optional().describe(\n        \"Two-letter ISO 3166-1 alpha-2 country code for regional search results (e.g., 'US', 'GB', 'FR')\"\n      ),\n      search_domain_filter: zod__WEBPACK_IMPORTED_MODULE_3__.array(zod__WEBPACK_IMPORTED_MODULE_3__.string()).optional().describe(\n        \"List of domains to include or exclude from search results (max 20). To include: ['nature.com', 'science.org']. To exclude: ['-example.com', '-spam.net']\"\n      ),\n      search_language_filter: zod__WEBPACK_IMPORTED_MODULE_3__.array(zod__WEBPACK_IMPORTED_MODULE_3__.string()).optional().describe(\n        \"List of ISO 639-1 language codes to filter results (max 10, lowercase). Examples: ['en', 'fr', 'de']\"\n      ),\n      search_after_date: zod__WEBPACK_IMPORTED_MODULE_3__.string().optional().describe(\n        \"Include only results published after this date. Format: 'MM/DD/YYYY' (e.g., '3/1/2025'). Cannot be used with search_recency_filter.\"\n      ),\n      search_before_date: zod__WEBPACK_IMPORTED_MODULE_3__.string().optional().describe(\n        \"Include only results published before this date. Format: 'MM/DD/YYYY' (e.g., '3/15/2025'). Cannot be used with search_recency_filter.\"\n      ),\n      search_recency_filter: zod__WEBPACK_IMPORTED_MODULE_3__[\"enum\"]([\"day\", \"week\", \"month\", \"year\"]).optional().describe(\n        \"Filter results by relative time period. Cannot be used with search_after_date or search_before_date.\"\n      )\n    })\n  )\n);\nvar perplexitySearchOutputSchema = (0,_ai_sdk_provider_utils__WEBPACK_IMPORTED_MODULE_1__.lazySchema)(\n  () => (0,_ai_sdk_provider_utils__WEBPACK_IMPORTED_MODULE_1__.zodSchema)(\n    zod__WEBPACK_IMPORTED_MODULE_3__.union([\n      // Success response\n      zod__WEBPACK_IMPORTED_MODULE_3__.object({\n        results: zod__WEBPACK_IMPORTED_MODULE_3__.array(\n          zod__WEBPACK_IMPORTED_MODULE_3__.object({\n            title: zod__WEBPACK_IMPORTED_MODULE_3__.string(),\n            url: zod__WEBPACK_IMPORTED_MODULE_3__.string(),\n            snippet: zod__WEBPACK_IMPORTED_MODULE_3__.string(),\n            date: zod__WEBPACK_IMPORTED_MODULE_3__.string().optional(),\n            lastUpdated: zod__WEBPACK_IMPORTED_MODULE_3__.string().optional()\n          })\n        ),\n        id: zod__WEBPACK_IMPORTED_MODULE_3__.string()\n      }),\n      // Error response\n      zod__WEBPACK_IMPORTED_MODULE_3__.object({\n        error: zod__WEBPACK_IMPORTED_MODULE_3__[\"enum\"]([\n          \"api_error\",\n          \"rate_limit\",\n          \"timeout\",\n          \"invalid_input\",\n          \"unknown\"\n        ]),\n        statusCode: zod__WEBPACK_IMPORTED_MODULE_3__.number().optional(),\n        message: zod__WEBPACK_IMPORTED_MODULE_3__.string()\n      })\n    ])\n  )\n);\nvar perplexitySearchToolFactory = (0,_ai_sdk_provider_utils__WEBPACK_IMPORTED_MODULE_1__.createProviderToolFactoryWithOutputSchema)({\n  id: \"gateway.perplexity_search\",\n  inputSchema: perplexitySearchInputSchema,\n  outputSchema: perplexitySearchOutputSchema\n});\nvar perplexitySearch = (config = {}) => perplexitySearchToolFactory(config);\n\n// src/gateway-tools.ts\nvar gatewayTools = {\n  /**\n   * Search the web using Perplexity's Search API for real-time information,\n   * news, research papers, and articles.\n   *\n   * Provides ranked search results with advanced filtering options including\n   * domain, language, date range, and recency filters.\n   */\n  perplexitySearch\n};\n\n// src/vercel-environment.ts\n\n\nasync function getVercelRequestId() {\n  var _a8;\n  return (_a8 = (0,_vercel_oidc__WEBPACK_IMPORTED_MODULE_4__.getContext)().headers) == null ? void 0 : _a8[\"x-vercel-id\"];\n}\n\n// src/gateway-provider.ts\n\n\n// src/version.ts\nvar VERSION =  true ? \"3.0.11\" : 0;\n\n// src/gateway-provider.ts\nvar AI_GATEWAY_PROTOCOL_VERSION = \"0.0.1\";\nfunction createGatewayProvider(options = {}) {\n  var _a8, _b8;\n  let pendingMetadata = null;\n  let metadataCache = null;\n  const cacheRefreshMillis = (_a8 = options.metadataCacheRefreshMillis) != null ? _a8 : 1e3 * 60 * 5;\n  let lastFetchTime = 0;\n  const baseURL = (_b8 = (0,_ai_sdk_provider_utils__WEBPACK_IMPORTED_MODULE_1__.withoutTrailingSlash)(options.baseURL)) != null ? _b8 : \"https://ai-gateway.vercel.sh/v3/ai\";\n  const getHeaders = async () => {\n    try {\n      const auth = await getGatewayAuthToken(options);\n      return (0,_ai_sdk_provider_utils__WEBPACK_IMPORTED_MODULE_1__.withUserAgentSuffix)(\n        {\n          Authorization: `Bearer ${auth.token}`,\n          \"ai-gateway-protocol-version\": AI_GATEWAY_PROTOCOL_VERSION,\n          [GATEWAY_AUTH_METHOD_HEADER]: auth.authMethod,\n          ...options.headers\n        },\n        `ai-sdk/gateway/${VERSION}`\n      );\n    } catch (error) {\n      throw GatewayAuthenticationError.createContextualError({\n        apiKeyProvided: false,\n        oidcTokenProvided: false,\n        statusCode: 401,\n        cause: error\n      });\n    }\n  };\n  const createO11yHeaders = () => {\n    const deploymentId = (0,_ai_sdk_provider_utils__WEBPACK_IMPORTED_MODULE_1__.loadOptionalSetting)({\n      settingValue: void 0,\n      environmentVariableName: \"VERCEL_DEPLOYMENT_ID\"\n    });\n    const environment = (0,_ai_sdk_provider_utils__WEBPACK_IMPORTED_MODULE_1__.loadOptionalSetting)({\n      settingValue: void 0,\n      environmentVariableName: \"VERCEL_ENV\"\n    });\n    const region = (0,_ai_sdk_provider_utils__WEBPACK_IMPORTED_MODULE_1__.loadOptionalSetting)({\n      settingValue: void 0,\n      environmentVariableName: \"VERCEL_REGION\"\n    });\n    return async () => {\n      const requestId = await getVercelRequestId();\n      return {\n        ...deploymentId && { \"ai-o11y-deployment-id\": deploymentId },\n        ...environment && { \"ai-o11y-environment\": environment },\n        ...region && { \"ai-o11y-region\": region },\n        ...requestId && { \"ai-o11y-request-id\": requestId }\n      };\n    };\n  };\n  const createLanguageModel = (modelId) => {\n    return new GatewayLanguageModel(modelId, {\n      provider: \"gateway\",\n      baseURL,\n      headers: getHeaders,\n      fetch: options.fetch,\n      o11yHeaders: createO11yHeaders()\n    });\n  };\n  const getAvailableModels = async () => {\n    var _a9, _b9, _c;\n    const now = (_c = (_b9 = (_a9 = options._internal) == null ? void 0 : _a9.currentDate) == null ? void 0 : _b9.call(_a9).getTime()) != null ? _c : Date.now();\n    if (!pendingMetadata || now - lastFetchTime > cacheRefreshMillis) {\n      lastFetchTime = now;\n      pendingMetadata = new GatewayFetchMetadata({\n        baseURL,\n        headers: getHeaders,\n        fetch: options.fetch\n      }).getAvailableModels().then((metadata) => {\n        metadataCache = metadata;\n        return metadata;\n      }).catch(async (error) => {\n        throw await asGatewayError(\n          error,\n          await parseAuthMethod(await getHeaders())\n        );\n      });\n    }\n    return metadataCache ? Promise.resolve(metadataCache) : pendingMetadata;\n  };\n  const getCredits = async () => {\n    return new GatewayFetchMetadata({\n      baseURL,\n      headers: getHeaders,\n      fetch: options.fetch\n    }).getCredits().catch(async (error) => {\n      throw await asGatewayError(\n        error,\n        await parseAuthMethod(await getHeaders())\n      );\n    });\n  };\n  const provider = function(modelId) {\n    if (new.target) {\n      throw new Error(\n        \"The Gateway Provider model function cannot be called with the new keyword.\"\n      );\n    }\n    return createLanguageModel(modelId);\n  };\n  provider.specificationVersion = \"v3\";\n  provider.getAvailableModels = getAvailableModels;\n  provider.getCredits = getCredits;\n  provider.imageModel = (modelId) => {\n    return new GatewayImageModel(modelId, {\n      provider: \"gateway\",\n      baseURL,\n      headers: getHeaders,\n      fetch: options.fetch,\n      o11yHeaders: createO11yHeaders()\n    });\n  };\n  provider.languageModel = createLanguageModel;\n  const createEmbeddingModel = (modelId) => {\n    return new GatewayEmbeddingModel(modelId, {\n      provider: \"gateway\",\n      baseURL,\n      headers: getHeaders,\n      fetch: options.fetch,\n      o11yHeaders: createO11yHeaders()\n    });\n  };\n  provider.embeddingModel = createEmbeddingModel;\n  provider.textEmbeddingModel = createEmbeddingModel;\n  provider.tools = gatewayTools;\n  return provider;\n}\nvar gateway = createGatewayProvider();\nasync function getGatewayAuthToken(options) {\n  const apiKey = (0,_ai_sdk_provider_utils__WEBPACK_IMPORTED_MODULE_1__.loadOptionalSetting)({\n    settingValue: options.apiKey,\n    environmentVariableName: \"AI_GATEWAY_API_KEY\"\n  });\n  if (apiKey) {\n    return {\n      token: apiKey,\n      authMethod: \"api-key\"\n    };\n  }\n  const oidcToken = await (0,_vercel_oidc__WEBPACK_IMPORTED_MODULE_4__.getVercelOidcToken)();\n  return {\n    token: oidcToken,\n    authMethod: \"oidc\"\n  };\n}\n\n//# sourceMappingURL=index.mjs.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGFpLXNkay9nYXRld2F5L2Rpc3QvaW5kZXgubWpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUFBO0FBSWdDOztBQUVoQztBQUNnRDs7QUFFaEQ7QUFDaUM7O0FBRWpDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWEsU0FBUztBQUN0QixlQUFlLFNBQVM7QUFDeEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EseUNBQXlDLEtBQUs7QUFDOUM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJLElBQUk7QUFDUixZQUFZLDRCQUE0QjtBQUN4QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBLE1BQU07QUFDTjs7QUFFQTs7QUFFQTtBQUNBLE1BQU07QUFDTjs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTs7QUFFQTtBQUNBO0FBQ0EseUNBQXlDLE1BQU07QUFDL0M7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJLElBQUk7QUFDUixZQUFZLDRCQUE0QjtBQUN4QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLHlDQUF5QyxNQUFNO0FBQy9DO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSSxJQUFJO0FBQ1IsWUFBWSw0QkFBNEI7QUFDeEM7QUFDQTtBQUNBO0FBQ0E7QUFD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O0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQkFBaUIsMkVBQW1CO0FBQ3BDO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsMEJBQTBCLGdFQUFrQjtBQUM1QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBWUU7QUFDRiIsInNvdXJjZXMiOlsid2VicGFjazovL2VzZy1jaXR5LWFwcC8uL25vZGVfbW9kdWxlcy9AYWktc2RrL2dhdGV3YXkvZGlzdC9pbmRleC5tanM/YjBmNyJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBzcmMvZ2F0ZXdheS1wcm92aWRlci50c1xuaW1wb3J0IHtcbiAgbG9hZE9wdGlvbmFsU2V0dGluZyxcbiAgd2l0aG91dFRyYWlsaW5nU2xhc2hcbn0gZnJvbSBcIkBhaS1zZGsvcHJvdmlkZXItdXRpbHNcIjtcblxuLy8gc3JjL2Vycm9ycy9hcy1nYXRld2F5LWVycm9yLnRzXG5pbXBvcnQgeyBBUElDYWxsRXJyb3IgfSBmcm9tIFwiQGFpLXNkay9wcm92aWRlclwiO1xuXG4vLyBzcmMvZXJyb3JzL2NyZWF0ZS1nYXRld2F5LWVycm9yLnRzXG5pbXBvcnQgeyB6IGFzIHoyIH0gZnJvbSBcInpvZC92NFwiO1xuXG4vLyBzcmMvZXJyb3JzL2dhdGV3YXktZXJyb3IudHNcbnZhciBtYXJrZXIgPSBcInZlcmNlbC5haS5nYXRld2F5LmVycm9yXCI7XG52YXIgc3ltYm9sID0gU3ltYm9sLmZvcihtYXJrZXIpO1xudmFyIF9hLCBfYjtcbnZhciBHYXRld2F5RXJyb3IgPSBjbGFzcyBfR2F0ZXdheUVycm9yIGV4dGVuZHMgKF9iID0gRXJyb3IsIF9hID0gc3ltYm9sLCBfYikge1xuICBjb25zdHJ1Y3Rvcih7XG4gICAgbWVzc2FnZSxcbiAgICBzdGF0dXNDb2RlID0gNTAwLFxuICAgIGNhdXNlXG4gIH0pIHtcbiAgICBzdXBlcihtZXNzYWdlKTtcbiAgICB0aGlzW19hXSA9IHRydWU7XG4gICAgdGhpcy5zdGF0dXNDb2RlID0gc3RhdHVzQ29kZTtcbiAgICB0aGlzLmNhdXNlID0gY2F1c2U7XG4gIH1cbiAgLyoqXG4gICAqIENoZWNrcyBpZiB0aGUgZ2l2ZW4gZXJyb3IgaXMgYSBHYXRld2F5IEVycm9yLlxuICAgKiBAcGFyYW0ge3Vua25vd259IGVycm9yIC0gVGhlIGVycm9yIHRvIGNoZWNrLlxuICAgKiBAcmV0dXJucyB7Ym9vbGVhbn0gVHJ1ZSBpZiB0aGUgZXJyb3IgaXMgYSBHYXRld2F5IEVycm9yLCBmYWxzZSBvdGhlcndpc2UuXG4gICAqL1xuICBzdGF0aWMgaXNJbnN0YW5jZShlcnJvcikge1xuICAgIHJldHVybiBfR2F0ZXdheUVycm9yLmhhc01hcmtlcihlcnJvcik7XG4gIH1cbiAgc3RhdGljIGhhc01hcmtlcihlcnJvcikge1xuICAgIHJldHVybiB0eXBlb2YgZXJyb3IgPT09IFwib2JqZWN0XCIgJiYgZXJyb3IgIT09IG51bGwgJiYgc3ltYm9sIGluIGVycm9yICYmIGVycm9yW3N5bWJvbF0gPT09IHRydWU7XG4gIH1cbn07XG5cbi8vIHNyYy9lcnJvcnMvZ2F0ZXdheS1hdXRoZW50aWNhdGlvbi1lcnJvci50c1xudmFyIG5hbWUgPSBcIkdhdGV3YXlBdXRoZW50aWNhdGlvbkVycm9yXCI7XG52YXIgbWFya2VyMiA9IGB2ZXJjZWwuYWkuZ2F0ZXdheS5lcnJvci4ke25hbWV9YDtcbnZhciBzeW1ib2wyID0gU3ltYm9sLmZvcihtYXJrZXIyKTtcbnZhciBfYTIsIF9iMjtcbnZhciBHYXRld2F5QXV0aGVudGljYXRpb25FcnJvciA9IGNsYXNzIF9HYXRld2F5QXV0aGVudGljYXRpb25FcnJvciBleHRlbmRzIChfYjIgPSBHYXRld2F5RXJyb3IsIF9hMiA9IHN5bWJvbDIsIF9iMikge1xuICBjb25zdHJ1Y3Rvcih7XG4gICAgbWVzc2FnZSA9IFwiQXV0aGVudGljYXRpb24gZmFpbGVkXCIsXG4gICAgc3RhdHVzQ29kZSA9IDQwMSxcbiAgICBjYXVzZVxuICB9ID0ge30pIHtcbiAgICBzdXBlcih7IG1lc3NhZ2UsIHN0YXR1c0NvZGUsIGNhdXNlIH0pO1xuICAgIHRoaXNbX2EyXSA9IHRydWU7XG4gICAgLy8gdXNlZCBpbiBpc0luc3RhbmNlXG4gICAgdGhpcy5uYW1lID0gbmFtZTtcbiAgICB0aGlzLnR5cGUgPSBcImF1dGhlbnRpY2F0aW9uX2Vycm9yXCI7XG4gIH1cbiAgc3RhdGljIGlzSW5zdGFuY2UoZXJyb3IpIHtcbiAgICByZXR1cm4gR2F0ZXdheUVycm9yLmhhc01hcmtlcihlcnJvcikgJiYgc3ltYm9sMiBpbiBlcnJvcjtcbiAgfVxuICAvKipcbiAgICogQ3JlYXRlcyBhIGNvbnRleHR1YWwgZXJyb3IgbWVzc2FnZSB3aGVuIGF1dGhlbnRpY2F0aW9uIGZhaWxzXG4gICAqL1xuICBzdGF0aWMgY3JlYXRlQ29udGV4dHVhbEVycm9yKHtcbiAgICBhcGlLZXlQcm92aWRlZCxcbiAgICBvaWRjVG9rZW5Qcm92aWRlZCxcbiAgICBtZXNzYWdlID0gXCJBdXRoZW50aWNhdGlvbiBmYWlsZWRcIixcbiAgICBzdGF0dXNDb2RlID0gNDAxLFxuICAgIGNhdXNlXG4gIH0pIHtcbiAgICBsZXQgY29udGV4dHVhbE1lc3NhZ2U7XG4gICAgaWYgKGFwaUtleVByb3ZpZGVkKSB7XG4gICAgICBjb250ZXh0dWFsTWVzc2FnZSA9IGBBSSBHYXRld2F5IGF1dGhlbnRpY2F0aW9uIGZhaWxlZDogSW52YWxpZCBBUEkga2V5LlxuXG5DcmVhdGUgYSBuZXcgQVBJIGtleTogaHR0cHM6Ly92ZXJjZWwuY29tL2Q/dG89JTJGJTVCdGVhbSU1RCUyRiU3RSUyRmFpJTJGYXBpLWtleXNcblxuUHJvdmlkZSB2aWEgJ2FwaUtleScgb3B0aW9uIG9yICdBSV9HQVRFV0FZX0FQSV9LRVknIGVudmlyb25tZW50IHZhcmlhYmxlLmA7XG4gICAgfSBlbHNlIGlmIChvaWRjVG9rZW5Qcm92aWRlZCkge1xuICAgICAgY29udGV4dHVhbE1lc3NhZ2UgPSBgQUkgR2F0ZXdheSBhdXRoZW50aWNhdGlvbiBmYWlsZWQ6IEludmFsaWQgT0lEQyB0b2tlbi5cblxuUnVuICducHggdmVyY2VsIGxpbmsnIHRvIGxpbmsgeW91ciBwcm9qZWN0LCB0aGVuICd2YyBlbnYgcHVsbCcgdG8gZmV0Y2ggdGhlIHRva2VuLlxuXG5BbHRlcm5hdGl2ZWx5LCB1c2UgYW4gQVBJIGtleTogaHR0cHM6Ly92ZXJjZWwuY29tL2Q/dG89JTJGJTVCdGVhbSU1RCUyRiU3RSUyRmFpJTJGYXBpLWtleXNgO1xuICAgIH0gZWxzZSB7XG4gICAgICBjb250ZXh0dWFsTWVzc2FnZSA9IGBBSSBHYXRld2F5IGF1dGhlbnRpY2F0aW9uIGZhaWxlZDogTm8gYXV0aGVudGljYXRpb24gcHJvdmlkZWQuXG5cbk9wdGlvbiAxIC0gQVBJIGtleTpcbkNyZWF0ZSBhbiBBUEkga2V5OiBodHRwczovL3ZlcmNlbC5jb20vZD90bz0lMkYlNUJ0ZWFtJTVEJTJGJTdFJTJGYWklMkZhcGkta2V5c1xuUHJvdmlkZSB2aWEgJ2FwaUtleScgb3B0aW9uIG9yICdBSV9HQVRFV0FZX0FQSV9LRVknIGVudmlyb25tZW50IHZhcmlhYmxlLlxuXG5PcHRpb24gMiAtIE9JREMgdG9rZW46XG5SdW4gJ25weCB2ZXJjZWwgbGluaycgdG8gbGluayB5b3VyIHByb2plY3QsIHRoZW4gJ3ZjIGVudiBwdWxsJyB0byBmZXRjaCB0aGUgdG9rZW4uYDtcbiAgICB9XG4gICAgcmV0dXJuIG5ldyBfR2F0ZXdheUF1dGhlbnRpY2F0aW9uRXJyb3Ioe1xuICAgICAgbWVzc2FnZTogY29udGV4dHVhbE1lc3NhZ2UsXG4gICAgICBzdGF0dXNDb2RlLFxuICAgICAgY2F1c2VcbiAgICB9KTtcbiAgfVxufTtcblxuLy8gc3JjL2Vycm9ycy9nYXRld2F5LWludmFsaWQtcmVxdWVzdC1lcnJvci50c1xudmFyIG5hbWUyID0gXCJHYXRld2F5SW52YWxpZFJlcXVlc3RFcnJvclwiO1xudmFyIG1hcmtlcjMgPSBgdmVyY2VsLmFpLmdhdGV3YXkuZXJyb3IuJHtuYW1lMn1gO1xudmFyIHN5bWJvbDMgPSBTeW1ib2wuZm9yKG1hcmtlcjMpO1xudmFyIF9hMywgX2IzO1xudmFyIEdhdGV3YXlJbnZhbGlkUmVxdWVzdEVycm9yID0gY2xhc3MgZXh0ZW5kcyAoX2IzID0gR2F0ZXdheUVycm9yLCBfYTMgPSBzeW1ib2wzLCBfYjMpIHtcbiAgY29uc3RydWN0b3Ioe1xuICAgIG1lc3NhZ2UgPSBcIkludmFsaWQgcmVxdWVzdFwiLFxuICAgIHN0YXR1c0NvZGUgPSA0MDAsXG4gICAgY2F1c2VcbiAgfSA9IHt9KSB7XG4gICAgc3VwZXIoeyBtZXNzYWdlLCBzdGF0dXNDb2RlLCBjYXVzZSB9KTtcbiAgICB0aGlzW19hM10gPSB0cnVlO1xuICAgIC8vIHVzZWQgaW4gaXNJbnN0YW5jZVxuICAgIHRoaXMubmFtZSA9IG5hbWUyO1xuICAgIHRoaXMudHlwZSA9IFwiaW52YWxpZF9yZXF1ZXN0X2Vycm9yXCI7XG4gIH1cbiAgc3RhdGljIGlzSW5zdGFuY2UoZXJyb3IpIHtcbiAgICByZXR1cm4gR2F0ZXdheUVycm9yLmhhc01hcmtlcihlcnJvcikgJiYgc3ltYm9sMyBpbiBlcnJvcjtcbiAgfVxufTtcblxuLy8gc3JjL2Vycm9ycy9nYXRld2F5LXJhdGUtbGltaXQtZXJyb3IudHNcbnZhciBuYW1lMyA9IFwiR2F0ZXdheVJhdGVMaW1pdEVycm9yXCI7XG52YXIgbWFya2VyNCA9IGB2ZXJjZWwuYWkuZ2F0ZXdheS5lcnJvci4ke25hbWUzfWA7XG52YXIgc3ltYm9sNCA9IFN5bWJvbC5mb3IobWFya2VyNCk7XG52YXIgX2E0LCBfYjQ7XG52YXIgR2F0ZXdheVJhdGVMaW1pdEVycm9yID0gY2xhc3MgZXh0ZW5kcyAoX2I0ID0gR2F0ZXdheUVycm9yLCBfYTQgPSBzeW1ib2w0LCBfYjQpIHtcbiAgY29uc3RydWN0b3Ioe1xuICAgIG1lc3NhZ2UgPSBcIlJhdGUgbGltaXQgZXhjZWVkZWRcIixcbiAgICBzdGF0dXNDb2RlID0gNDI5LFxuICAgIGNhdXNlXG4gIH0gPSB7fSkge1xuICAgIHN1cGVyKHsgbWVzc2FnZSwgc3RhdHVzQ29kZSwgY2F1c2UgfSk7XG4gICAgdGhpc1tfYTRdID0gdHJ1ZTtcbiAgICAvLyB1c2VkIGluIGlzSW5zdGFuY2VcbiAgICB0aGlzLm5hbWUgPSBuYW1lMztcbiAgICB0aGlzLnR5cGUgPSBcInJhdGVfbGltaXRfZXhjZWVkZWRcIjtcbiAgfVxuICBzdGF0aWMgaXNJbnN0YW5jZShlcnJvcikge1xuICAgIHJldHVybiBHYXRld2F5RXJyb3IuaGFzTWFya2VyKGVycm9yKSAmJiBzeW1ib2w0IGluIGVycm9yO1xuICB9XG59O1xuXG4vLyBzcmMvZXJyb3JzL2dhdGV3YXktbW9kZWwtbm90LWZvdW5kLWVycm9yLnRzXG5pbXBvcnQgeyB6IH0gZnJvbSBcInpvZC92NFwiO1xuaW1wb3J0IHsgbGF6eVNjaGVtYSwgem9kU2NoZW1hIH0gZnJvbSBcIkBhaS1zZGsvcHJvdmlkZXItdXRpbHNcIjtcbnZhciBuYW1lNCA9IFwiR2F0ZXdheU1vZGVsTm90Rm91bmRFcnJvclwiO1xudmFyIG1hcmtlcjUgPSBgdmVyY2VsLmFpLmdhdGV3YXkuZXJyb3IuJHtuYW1lNH1gO1xudmFyIHN5bWJvbDUgPSBTeW1ib2wuZm9yKG1hcmtlcjUpO1xudmFyIG1vZGVsTm90Rm91bmRQYXJhbVNjaGVtYSA9IGxhenlTY2hlbWEoXG4gICgpID0+IHpvZFNjaGVtYShcbiAgICB6Lm9iamVjdCh7XG4gICAgICBtb2RlbElkOiB6LnN0cmluZygpXG4gICAgfSlcbiAgKVxuKTtcbnZhciBfYTUsIF9iNTtcbnZhciBHYXRld2F5TW9kZWxOb3RGb3VuZEVycm9yID0gY2xhc3MgZXh0ZW5kcyAoX2I1ID0gR2F0ZXdheUVycm9yLCBfYTUgPSBzeW1ib2w1LCBfYjUpIHtcbiAgY29uc3RydWN0b3Ioe1xuICAgIG1lc3NhZ2UgPSBcIk1vZGVsIG5vdCBmb3VuZFwiLFxuICAgIHN0YXR1c0NvZGUgPSA0MDQsXG4gICAgbW9kZWxJZCxcbiAgICBjYXVzZVxuICB9ID0ge30pIHtcbiAgICBzdXBlcih7IG1lc3NhZ2UsIHN0YXR1c0NvZGUsIGNhdXNlIH0pO1xuICAgIHRoaXNbX2E1XSA9IHRydWU7XG4gICAgLy8gdXNlZCBpbiBpc0luc3RhbmNlXG4gICAgdGhpcy5uYW1lID0gbmFtZTQ7XG4gICAgdGhpcy50eXBlID0gXCJtb2RlbF9ub3RfZm91bmRcIjtcbiAgICB0aGlzLm1vZGVsSWQgPSBtb2RlbElkO1xuICB9XG4gIHN0YXRpYyBpc0luc3RhbmNlKGVycm9yKSB7XG4gICAgcmV0dXJuIEdhdGV3YXlFcnJvci5oYXNNYXJrZXIoZXJyb3IpICYmIHN5bWJvbDUgaW4gZXJyb3I7XG4gIH1cbn07XG5cbi8vIHNyYy9lcnJvcnMvZ2F0ZXdheS1pbnRlcm5hbC1zZXJ2ZXItZXJyb3IudHNcbnZhciBuYW1lNSA9IFwiR2F0ZXdheUludGVybmFsU2VydmVyRXJyb3JcIjtcbnZhciBtYXJrZXI2ID0gYHZlcmNlbC5haS5nYXRld2F5LmVycm9yLiR7bmFtZTV9YDtcbnZhciBzeW1ib2w2ID0gU3ltYm9sLmZvcihtYXJrZXI2KTtcbnZhciBfYTYsIF9iNjtcbnZhciBHYXRld2F5SW50ZXJuYWxTZXJ2ZXJFcnJvciA9IGNsYXNzIGV4dGVuZHMgKF9iNiA9IEdhdGV3YXlFcnJvciwgX2E2ID0gc3ltYm9sNiwgX2I2KSB7XG4gIGNvbnN0cnVjdG9yKHtcbiAgICBtZXNzYWdlID0gXCJJbnRlcm5hbCBzZXJ2ZXIgZXJyb3JcIixcbiAgICBzdGF0dXNDb2RlID0gNTAwLFxuICAgIGNhdXNlXG4gIH0gPSB7fSkge1xuICAgIHN1cGVyKHsgbWVzc2FnZSwgc3RhdHVzQ29kZSwgY2F1c2UgfSk7XG4gICAgdGhpc1tfYTZdID0gdHJ1ZTtcbiAgICAvLyB1c2VkIGluIGlzSW5zdGFuY2VcbiAgICB0aGlzLm5hbWUgPSBuYW1lNTtcbiAgICB0aGlzLnR5cGUgPSBcImludGVybmFsX3NlcnZlcl9lcnJvclwiO1xuICB9XG4gIHN0YXRpYyBpc0luc3RhbmNlKGVycm9yKSB7XG4gICAgcmV0dXJuIEdhdGV3YXlFcnJvci5oYXNNYXJrZXIoZXJyb3IpICYmIHN5bWJvbDYgaW4gZXJyb3I7XG4gIH1cbn07XG5cbi8vIHNyYy9lcnJvcnMvZ2F0ZXdheS1yZXNwb25zZS1lcnJvci50c1xudmFyIG5hbWU2ID0gXCJHYXRld2F5UmVzcG9uc2VFcnJvclwiO1xudmFyIG1hcmtlcjcgPSBgdmVyY2VsLmFpLmdhdGV3YXkuZXJyb3IuJHtuYW1lNn1gO1xudmFyIHN5bWJvbDcgPSBTeW1ib2wuZm9yKG1hcmtlcjcpO1xudmFyIF9hNywgX2I3O1xudmFyIEdhdGV3YXlSZXNwb25zZUVycm9yID0gY2xhc3MgZXh0ZW5kcyAoX2I3ID0gR2F0ZXdheUVycm9yLCBfYTcgPSBzeW1ib2w3LCBfYjcpIHtcbiAgY29uc3RydWN0b3Ioe1xuICAgIG1lc3NhZ2UgPSBcIkludmFsaWQgcmVzcG9uc2UgZnJvbSBHYXRld2F5XCIsXG4gICAgc3RhdHVzQ29kZSA9IDUwMixcbiAgICByZXNwb25zZSxcbiAgICB2YWxpZGF0aW9uRXJyb3IsXG4gICAgY2F1c2VcbiAgfSA9IHt9KSB7XG4gICAgc3VwZXIoeyBtZXNzYWdlLCBzdGF0dXNDb2RlLCBjYXVzZSB9KTtcbiAgICB0aGlzW19hN10gPSB0cnVlO1xuICAgIC8vIHVzZWQgaW4gaXNJbnN0YW5jZVxuICAgIHRoaXMubmFtZSA9IG5hbWU2O1xuICAgIHRoaXMudHlwZSA9IFwicmVzcG9uc2VfZXJyb3JcIjtcbiAgICB0aGlzLnJlc3BvbnNlID0gcmVzcG9uc2U7XG4gICAgdGhpcy52YWxpZGF0aW9uRXJyb3IgPSB2YWxpZGF0aW9uRXJyb3I7XG4gIH1cbiAgc3RhdGljIGlzSW5zdGFuY2UoZXJyb3IpIHtcbiAgICByZXR1cm4gR2F0ZXdheUVycm9yLmhhc01hcmtlcihlcnJvcikgJiYgc3ltYm9sNyBpbiBlcnJvcjtcbiAgfVxufTtcblxuLy8gc3JjL2Vycm9ycy9jcmVhdGUtZ2F0ZXdheS1lcnJvci50c1xuaW1wb3J0IHtcbiAgbGF6eVNjaGVtYSBhcyBsYXp5U2NoZW1hMixcbiAgc2FmZVZhbGlkYXRlVHlwZXMsXG4gIHpvZFNjaGVtYSBhcyB6b2RTY2hlbWEyXG59IGZyb20gXCJAYWktc2RrL3Byb3ZpZGVyLXV0aWxzXCI7XG5hc3luYyBmdW5jdGlvbiBjcmVhdGVHYXRld2F5RXJyb3JGcm9tUmVzcG9uc2Uoe1xuICByZXNwb25zZSxcbiAgc3RhdHVzQ29kZSxcbiAgZGVmYXVsdE1lc3NhZ2UgPSBcIkdhdGV3YXkgcmVxdWVzdCBmYWlsZWRcIixcbiAgY2F1c2UsXG4gIGF1dGhNZXRob2Rcbn0pIHtcbiAgY29uc3QgcGFyc2VSZXN1bHQgPSBhd2FpdCBzYWZlVmFsaWRhdGVUeXBlcyh7XG4gICAgdmFsdWU6IHJlc3BvbnNlLFxuICAgIHNjaGVtYTogZ2F0ZXdheUVycm9yUmVzcG9uc2VTY2hlbWFcbiAgfSk7XG4gIGlmICghcGFyc2VSZXN1bHQuc3VjY2Vzcykge1xuICAgIHJldHVybiBuZXcgR2F0ZXdheVJlc3BvbnNlRXJyb3Ioe1xuICAgICAgbWVzc2FnZTogYEludmFsaWQgZXJyb3IgcmVzcG9uc2UgZm9ybWF0OiAke2RlZmF1bHRNZXNzYWdlfWAsXG4gICAgICBzdGF0dXNDb2RlLFxuICAgICAgcmVzcG9uc2UsXG4gICAgICB2YWxpZGF0aW9uRXJyb3I6IHBhcnNlUmVzdWx0LmVycm9yLFxuICAgICAgY2F1c2VcbiAgICB9KTtcbiAgfVxuICBjb25zdCB2YWxpZGF0ZWRSZXNwb25zZSA9IHBhcnNlUmVzdWx0LnZhbHVlO1xuICBjb25zdCBlcnJvclR5cGUgPSB2YWxpZGF0ZWRSZXNwb25zZS5lcnJvci50eXBlO1xuICBjb25zdCBtZXNzYWdlID0gdmFsaWRhdGVkUmVzcG9uc2UuZXJyb3IubWVzc2FnZTtcbiAgc3dpdGNoIChlcnJvclR5cGUpIHtcbiAgICBjYXNlIFwiYXV0aGVudGljYXRpb25fZXJyb3JcIjpcbiAgICAgIHJldHVybiBHYXRld2F5QXV0aGVudGljYXRpb25FcnJvci5jcmVhdGVDb250ZXh0dWFsRXJyb3Ioe1xuICAgICAgICBhcGlLZXlQcm92aWRlZDogYXV0aE1ldGhvZCA9PT0gXCJhcGkta2V5XCIsXG4gICAgICAgIG9pZGNUb2tlblByb3ZpZGVkOiBhdXRoTWV0aG9kID09PSBcIm9pZGNcIixcbiAgICAgICAgc3RhdHVzQ29kZSxcbiAgICAgICAgY2F1c2VcbiAgICAgIH0pO1xuICAgIGNhc2UgXCJpbnZhbGlkX3JlcXVlc3RfZXJyb3JcIjpcbiAgICAgIHJldHVybiBuZXcgR2F0ZXdheUludmFsaWRSZXF1ZXN0RXJyb3IoeyBtZXNzYWdlLCBzdGF0dXNDb2RlLCBjYXVzZSB9KTtcbiAgICBjYXNlIFwicmF0ZV9saW1pdF9leGNlZWRlZFwiOlxuICAgICAgcmV0dXJuIG5ldyBHYXRld2F5UmF0ZUxpbWl0RXJyb3IoeyBtZXNzYWdlLCBzdGF0dXNDb2RlLCBjYXVzZSB9KTtcbiAgICBjYXNlIFwibW9kZWxfbm90X2ZvdW5kXCI6IHtcbiAgICAgIGNvbnN0IG1vZGVsUmVzdWx0ID0gYXdhaXQgc2FmZVZhbGlkYXRlVHlwZXMoe1xuICAgICAgICB2YWx1ZTogdmFsaWRhdGVkUmVzcG9uc2UuZXJyb3IucGFyYW0sXG4gICAgICAgIHNjaGVtYTogbW9kZWxOb3RGb3VuZFBhcmFtU2NoZW1hXG4gICAgICB9KTtcbiAgICAgIHJldHVybiBuZXcgR2F0ZXdheU1vZGVsTm90Rm91bmRFcnJvcih7XG4gICAgICAgIG1lc3NhZ2UsXG4gICAgICAgIHN0YXR1c0NvZGUsXG4gICAgICAgIG1vZGVsSWQ6IG1vZGVsUmVzdWx0LnN1Y2Nlc3MgPyBtb2RlbFJlc3VsdC52YWx1ZS5tb2RlbElkIDogdm9pZCAwLFxuICAgICAgICBjYXVzZVxuICAgICAgfSk7XG4gICAgfVxuICAgIGNhc2UgXCJpbnRlcm5hbF9zZXJ2ZXJfZXJyb3JcIjpcbiAgICAgIHJldHVybiBuZXcgR2F0ZXdheUludGVybmFsU2VydmVyRXJyb3IoeyBtZXNzYWdlLCBzdGF0dXNDb2RlLCBjYXVzZSB9KTtcbiAgICBkZWZhdWx0OlxuICAgICAgcmV0dXJuIG5ldyBHYXRld2F5SW50ZXJuYWxTZXJ2ZXJFcnJvcih7IG1lc3NhZ2UsIHN0YXR1c0NvZGUsIGNhdXNlIH0pO1xuICB9XG59XG52YXIgZ2F0ZXdheUVycm9yUmVzcG9uc2VTY2hlbWEgPSBsYXp5U2NoZW1hMihcbiAgKCkgPT4gem9kU2NoZW1hMihcbiAgICB6Mi5vYmplY3Qoe1xuICAgICAgZXJyb3I6IHoyLm9iamVjdCh7XG4gICAgICAgIG1lc3NhZ2U6IHoyLnN0cmluZygpLFxuICAgICAgICB0eXBlOiB6Mi5zdHJpbmcoKS5udWxsaXNoKCksXG4gICAgICAgIHBhcmFtOiB6Mi51bmtub3duKCkubnVsbGlzaCgpLFxuICAgICAgICBjb2RlOiB6Mi51bmlvbihbejIuc3RyaW5nKCksIHoyLm51bWJlcigpXSkubnVsbGlzaCgpXG4gICAgICB9KVxuICAgIH0pXG4gIClcbik7XG5cbi8vIHNyYy9lcnJvcnMvYXMtZ2F0ZXdheS1lcnJvci50c1xuZnVuY3Rpb24gYXNHYXRld2F5RXJyb3IoZXJyb3IsIGF1dGhNZXRob2QpIHtcbiAgdmFyIF9hODtcbiAgaWYgKEdhdGV3YXlFcnJvci5pc0luc3RhbmNlKGVycm9yKSkge1xuICAgIHJldHVybiBlcnJvcjtcbiAgfVxuICBpZiAoQVBJQ2FsbEVycm9yLmlzSW5zdGFuY2UoZXJyb3IpKSB7XG4gICAgcmV0dXJuIGNyZWF0ZUdhdGV3YXlFcnJvckZyb21SZXNwb25zZSh7XG4gICAgICByZXNwb25zZTogZXh0cmFjdEFwaUNhbGxSZXNwb25zZShlcnJvciksXG4gICAgICBzdGF0dXNDb2RlOiAoX2E4ID0gZXJyb3Iuc3RhdHVzQ29kZSkgIT0gbnVsbCA/IF9hOCA6IDUwMCxcbiAgICAgIGRlZmF1bHRNZXNzYWdlOiBcIkdhdGV3YXkgcmVxdWVzdCBmYWlsZWRcIixcbiAgICAgIGNhdXNlOiBlcnJvcixcbiAgICAgIGF1dGhNZXRob2RcbiAgICB9KTtcbiAgfVxuICByZXR1cm4gY3JlYXRlR2F0ZXdheUVycm9yRnJvbVJlc3BvbnNlKHtcbiAgICByZXNwb25zZToge30sXG4gICAgc3RhdHVzQ29kZTogNTAwLFxuICAgIGRlZmF1bHRNZXNzYWdlOiBlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gYEdhdGV3YXkgcmVxdWVzdCBmYWlsZWQ6ICR7ZXJyb3IubWVzc2FnZX1gIDogXCJVbmtub3duIEdhdGV3YXkgZXJyb3JcIixcbiAgICBjYXVzZTogZXJyb3IsXG4gICAgYXV0aE1ldGhvZFxuICB9KTtcbn1cblxuLy8gc3JjL2Vycm9ycy9leHRyYWN0LWFwaS1jYWxsLXJlc3BvbnNlLnRzXG5mdW5jdGlvbiBleHRyYWN0QXBpQ2FsbFJlc3BvbnNlKGVycm9yKSB7XG4gIGlmIChlcnJvci5kYXRhICE9PSB2b2lkIDApIHtcbiAgICByZXR1cm4gZXJyb3IuZGF0YTtcbiAgfVxuICBpZiAoZXJyb3IucmVzcG9uc2VCb2R5ICE9IG51bGwpIHtcbiAgICB0cnkge1xuICAgICAgcmV0dXJuIEpTT04ucGFyc2UoZXJyb3IucmVzcG9uc2VCb2R5KTtcbiAgICB9IGNhdGNoIChlKSB7XG4gICAgICByZXR1cm4gZXJyb3IucmVzcG9uc2VCb2R5O1xuICAgIH1cbiAgfVxuICByZXR1cm4ge307XG59XG5cbi8vIHNyYy9lcnJvcnMvcGFyc2UtYXV0aC1tZXRob2QudHNcbmltcG9ydCB7IHogYXMgejMgfSBmcm9tIFwiem9kL3Y0XCI7XG5pbXBvcnQge1xuICBsYXp5U2NoZW1hIGFzIGxhenlTY2hlbWEzLFxuICBzYWZlVmFsaWRhdGVUeXBlcyBhcyBzYWZlVmFsaWRhdGVUeXBlczIsXG4gIHpvZFNjaGVtYSBhcyB6b2RTY2hlbWEzXG59IGZyb20gXCJAYWktc2RrL3Byb3ZpZGVyLXV0aWxzXCI7XG52YXIgR0FURVdBWV9BVVRIX01FVEhPRF9IRUFERVIgPSBcImFpLWdhdGV3YXktYXV0aC1tZXRob2RcIjtcbmFzeW5jIGZ1bmN0aW9uIHBhcnNlQXV0aE1ldGhvZChoZWFkZXJzKSB7XG4gIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHNhZmVWYWxpZGF0ZVR5cGVzMih7XG4gICAgdmFsdWU6IGhlYWRlcnNbR0FURVdBWV9BVVRIX01FVEhPRF9IRUFERVJdLFxuICAgIHNjaGVtYTogZ2F0ZXdheUF1dGhNZXRob2RTY2hlbWFcbiAgfSk7XG4gIHJldHVybiByZXN1bHQuc3VjY2VzcyA/IHJlc3VsdC52YWx1ZSA6IHZvaWQgMDtcbn1cbnZhciBnYXRld2F5QXV0aE1ldGhvZFNjaGVtYSA9IGxhenlTY2hlbWEzKFxuICAoKSA9PiB6b2RTY2hlbWEzKHozLnVuaW9uKFt6My5saXRlcmFsKFwiYXBpLWtleVwiKSwgejMubGl0ZXJhbChcIm9pZGNcIildKSlcbik7XG5cbi8vIHNyYy9nYXRld2F5LWZldGNoLW1ldGFkYXRhLnRzXG5pbXBvcnQge1xuICBjcmVhdGVKc29uRXJyb3JSZXNwb25zZUhhbmRsZXIsXG4gIGNyZWF0ZUpzb25SZXNwb25zZUhhbmRsZXIsXG4gIGdldEZyb21BcGksXG4gIGxhenlTY2hlbWEgYXMgbGF6eVNjaGVtYTQsXG4gIHJlc29sdmUsXG4gIHpvZFNjaGVtYSBhcyB6b2RTY2hlbWE0XG59IGZyb20gXCJAYWktc2RrL3Byb3ZpZGVyLXV0aWxzXCI7XG5pbXBvcnQgeyB6IGFzIHo0IH0gZnJvbSBcInpvZC92NFwiO1xudmFyIEdhdGV3YXlGZXRjaE1ldGFkYXRhID0gY2xhc3Mge1xuICBjb25zdHJ1Y3Rvcihjb25maWcpIHtcbiAgICB0aGlzLmNvbmZpZyA9IGNvbmZpZztcbiAgfVxuICBhc3luYyBnZXRBdmFpbGFibGVNb2RlbHMoKSB7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IHsgdmFsdWUgfSA9IGF3YWl0IGdldEZyb21BcGkoe1xuICAgICAgICB1cmw6IGAke3RoaXMuY29uZmlnLmJhc2VVUkx9L2NvbmZpZ2AsXG4gICAgICAgIGhlYWRlcnM6IGF3YWl0IHJlc29sdmUodGhpcy5jb25maWcuaGVhZGVycygpKSxcbiAgICAgICAgc3VjY2Vzc2Z1bFJlc3BvbnNlSGFuZGxlcjogY3JlYXRlSnNvblJlc3BvbnNlSGFuZGxlcihcbiAgICAgICAgICBnYXRld2F5QXZhaWxhYmxlTW9kZWxzUmVzcG9uc2VTY2hlbWFcbiAgICAgICAgKSxcbiAgICAgICAgZmFpbGVkUmVzcG9uc2VIYW5kbGVyOiBjcmVhdGVKc29uRXJyb3JSZXNwb25zZUhhbmRsZXIoe1xuICAgICAgICAgIGVycm9yU2NoZW1hOiB6NC5hbnkoKSxcbiAgICAgICAgICBlcnJvclRvTWVzc2FnZTogKGRhdGEpID0+IGRhdGFcbiAgICAgICAgfSksXG4gICAgICAgIGZldGNoOiB0aGlzLmNvbmZpZy5mZXRjaFxuICAgICAgfSk7XG4gICAgICByZXR1cm4gdmFsdWU7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIHRocm93IGF3YWl0IGFzR2F0ZXdheUVycm9yKGVycm9yKTtcbiAgICB9XG4gIH1cbiAgYXN5bmMgZ2V0Q3JlZGl0cygpIHtcbiAgICB0cnkge1xuICAgICAgY29uc3QgYmFzZVVybCA9IG5ldyBVUkwodGhpcy5jb25maWcuYmFzZVVSTCk7XG4gICAgICBjb25zdCB7IHZhbHVlIH0gPSBhd2FpdCBnZXRGcm9tQXBpKHtcbiAgICAgICAgdXJsOiBgJHtiYXNlVXJsLm9yaWdpbn0vdjEvY3JlZGl0c2AsXG4gICAgICAgIGhlYWRlcnM6IGF3YWl0IHJlc29sdmUodGhpcy5jb25maWcuaGVhZGVycygpKSxcbiAgICAgICAgc3VjY2Vzc2Z1bFJlc3BvbnNlSGFuZGxlcjogY3JlYXRlSnNvblJlc3BvbnNlSGFuZGxlcihcbiAgICAgICAgICBnYXRld2F5Q3JlZGl0c1Jlc3BvbnNlU2NoZW1hXG4gICAgICAgICksXG4gICAgICAgIGZhaWxlZFJlc3BvbnNlSGFuZGxlcjogY3JlYXRlSnNvbkVycm9yUmVzcG9uc2VIYW5kbGVyKHtcbiAgICAgICAgICBlcnJvclNjaGVtYTogejQuYW55KCksXG4gICAgICAgICAgZXJyb3JUb01lc3NhZ2U6IChkYXRhKSA9PiBkYXRhXG4gICAgICAgIH0pLFxuICAgICAgICBmZXRjaDogdGhpcy5jb25maWcuZmV0Y2hcbiAgICAgIH0pO1xuICAgICAgcmV0dXJuIHZhbHVlO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICB0aHJvdyBhd2FpdCBhc0dhdGV3YXlFcnJvcihlcnJvcik7XG4gICAgfVxuICB9XG59O1xudmFyIGdhdGV3YXlBdmFpbGFibGVNb2RlbHNSZXNwb25zZVNjaGVtYSA9IGxhenlTY2hlbWE0KFxuICAoKSA9PiB6b2RTY2hlbWE0KFxuICAgIHo0Lm9iamVjdCh7XG4gICAgICBtb2RlbHM6IHo0LmFycmF5KFxuICAgICAgICB6NC5vYmplY3Qoe1xuICAgICAgICAgIGlkOiB6NC5zdHJpbmcoKSxcbiAgICAgICAgICBuYW1lOiB6NC5zdHJpbmcoKSxcbiAgICAgICAgICBkZXNjcmlwdGlvbjogejQuc3RyaW5nKCkubnVsbGlzaCgpLFxuICAgICAgICAgIHByaWNpbmc6IHo0Lm9iamVjdCh7XG4gICAgICAgICAgICBpbnB1dDogejQuc3RyaW5nKCksXG4gICAgICAgICAgICBvdXRwdXQ6IHo0LnN0cmluZygpLFxuICAgICAgICAgICAgaW5wdXRfY2FjaGVfcmVhZDogejQuc3RyaW5nKCkubnVsbGlzaCgpLFxuICAgICAgICAgICAgaW5wdXRfY2FjaGVfd3JpdGU6IHo0LnN0cmluZygpLm51bGxpc2goKVxuICAgICAgICAgIH0pLnRyYW5zZm9ybShcbiAgICAgICAgICAgICh7IGlucHV0LCBvdXRwdXQsIGlucHV0X2NhY2hlX3JlYWQsIGlucHV0X2NhY2hlX3dyaXRlIH0pID0+ICh7XG4gICAgICAgICAgICAgIGlucHV0LFxuICAgICAgICAgICAgICBvdXRwdXQsXG4gICAgICAgICAgICAgIC4uLmlucHV0X2NhY2hlX3JlYWQgPyB7IGNhY2hlZElucHV0VG9rZW5zOiBpbnB1dF9jYWNoZV9yZWFkIH0gOiB7fSxcbiAgICAgICAgICAgICAgLi4uaW5wdXRfY2FjaGVfd3JpdGUgPyB7IGNhY2hlQ3JlYXRpb25JbnB1dFRva2VuczogaW5wdXRfY2FjaGVfd3JpdGUgfSA6IHt9XG4gICAgICAgICAgICB9KVxuICAgICAgICAgICkubnVsbGlzaCgpLFxuICAgICAgICAgIHNwZWNpZmljYXRpb246IHo0Lm9iamVjdCh7XG4gICAgICAgICAgICBzcGVjaWZpY2F0aW9uVmVyc2lvbjogejQubGl0ZXJhbChcInYzXCIpLFxuICAgICAgICAgICAgcHJvdmlkZXI6IHo0LnN0cmluZygpLFxuICAgICAgICAgICAgbW9kZWxJZDogejQuc3RyaW5nKClcbiAgICAgICAgICB9KSxcbiAgICAgICAgICBtb2RlbFR5cGU6IHo0LmVudW0oW1wibGFuZ3VhZ2VcIiwgXCJlbWJlZGRpbmdcIiwgXCJpbWFnZVwiXSkubnVsbGlzaCgpXG4gICAgICAgIH0pXG4gICAgICApXG4gICAgfSlcbiAgKVxuKTtcbnZhciBnYXRld2F5Q3JlZGl0c1Jlc3BvbnNlU2NoZW1hID0gbGF6eVNjaGVtYTQoXG4gICgpID0+IHpvZFNjaGVtYTQoXG4gICAgejQub2JqZWN0KHtcbiAgICAgIGJhbGFuY2U6IHo0LnN0cmluZygpLFxuICAgICAgdG90YWxfdXNlZDogejQuc3RyaW5nKClcbiAgICB9KS50cmFuc2Zvcm0oKHsgYmFsYW5jZSwgdG90YWxfdXNlZCB9KSA9PiAoe1xuICAgICAgYmFsYW5jZSxcbiAgICAgIHRvdGFsVXNlZDogdG90YWxfdXNlZFxuICAgIH0pKVxuICApXG4pO1xuXG4vLyBzcmMvZ2F0ZXdheS1sYW5ndWFnZS1tb2RlbC50c1xuaW1wb3J0IHtcbiAgY29tYmluZUhlYWRlcnMsXG4gIGNyZWF0ZUV2ZW50U291cmNlUmVzcG9uc2VIYW5kbGVyLFxuICBjcmVhdGVKc29uRXJyb3JSZXNwb25zZUhhbmRsZXIgYXMgY3JlYXRlSnNvbkVycm9yUmVzcG9uc2VIYW5kbGVyMixcbiAgY3JlYXRlSnNvblJlc3BvbnNlSGFuZGxlciBhcyBjcmVhdGVKc29uUmVzcG9uc2VIYW5kbGVyMixcbiAgcG9zdEpzb25Ub0FwaSxcbiAgcmVzb2x2ZSBhcyByZXNvbHZlMlxufSBmcm9tIFwiQGFpLXNkay9wcm92aWRlci11dGlsc1wiO1xuaW1wb3J0IHsgeiBhcyB6NSB9IGZyb20gXCJ6b2QvdjRcIjtcbnZhciBHYXRld2F5TGFuZ3VhZ2VNb2RlbCA9IGNsYXNzIHtcbiAgY29uc3RydWN0b3IobW9kZWxJZCwgY29uZmlnKSB7XG4gICAgdGhpcy5tb2RlbElkID0gbW9kZWxJZDtcbiAgICB0aGlzLmNvbmZpZyA9IGNvbmZpZztcbiAgICB0aGlzLnNwZWNpZmljYXRpb25WZXJzaW9uID0gXCJ2M1wiO1xuICAgIHRoaXMuc3VwcG9ydGVkVXJscyA9IHsgXCIqLypcIjogWy8uKi9dIH07XG4gIH1cbiAgZ2V0IHByb3ZpZGVyKCkge1xuICAgIHJldHVybiB0aGlzLmNvbmZpZy5wcm92aWRlcjtcbiAgfVxuICBhc3luYyBnZXRBcmdzKG9wdGlvbnMpIHtcbiAgICBjb25zdCB7IGFib3J0U2lnbmFsOiBfYWJvcnRTaWduYWwsIC4uLm9wdGlvbnNXaXRob3V0U2lnbmFsIH0gPSBvcHRpb25zO1xuICAgIHJldHVybiB7XG4gICAgICBhcmdzOiB0aGlzLm1heWJlRW5jb2RlRmlsZVBhcnRzKG9wdGlvbnNXaXRob3V0U2lnbmFsKSxcbiAgICAgIHdhcm5pbmdzOiBbXVxuICAgIH07XG4gIH1cbiAgYXN5bmMgZG9HZW5lcmF0ZShvcHRpb25zKSB7XG4gICAgY29uc3QgeyBhcmdzLCB3YXJuaW5ncyB9ID0gYXdhaXQgdGhpcy5nZXRBcmdzKG9wdGlvbnMpO1xuICAgIGNvbnN0IHsgYWJvcnRTaWduYWwgfSA9IG9wdGlvbnM7XG4gICAgY29uc3QgcmVzb2x2ZWRIZWFkZXJzID0gYXdhaXQgcmVzb2x2ZTIodGhpcy5jb25maWcuaGVhZGVycygpKTtcbiAgICB0cnkge1xuICAgICAgY29uc3Qge1xuICAgICAgICByZXNwb25zZUhlYWRlcnMsXG4gICAgICAgIHZhbHVlOiByZXNwb25zZUJvZHksXG4gICAgICAgIHJhd1ZhbHVlOiByYXdSZXNwb25zZVxuICAgICAgfSA9IGF3YWl0IHBvc3RKc29uVG9BcGkoe1xuICAgICAgICB1cmw6IHRoaXMuZ2V0VXJsKCksXG4gICAgICAgIGhlYWRlcnM6IGNvbWJpbmVIZWFkZXJzKFxuICAgICAgICAgIHJlc29sdmVkSGVhZGVycyxcbiAgICAgICAgICBvcHRpb25zLmhlYWRlcnMsXG4gICAgICAgICAgdGhpcy5nZXRNb2RlbENvbmZpZ0hlYWRlcnModGhpcy5tb2RlbElkLCBmYWxzZSksXG4gICAgICAgICAgYXdhaXQgcmVzb2x2ZTIodGhpcy5jb25maWcubzExeUhlYWRlcnMpXG4gICAgICAgICksXG4gICAgICAgIGJvZHk6IGFyZ3MsXG4gICAgICAgIHN1Y2Nlc3NmdWxSZXNwb25zZUhhbmRsZXI6IGNyZWF0ZUpzb25SZXNwb25zZUhhbmRsZXIyKHo1LmFueSgpKSxcbiAgICAgICAgZmFpbGVkUmVzcG9uc2VIYW5kbGVyOiBjcmVhdGVKc29uRXJyb3JSZXNwb25zZUhhbmRsZXIyKHtcbiAgICAgICAgICBlcnJvclNjaGVtYTogejUuYW55KCksXG4gICAgICAgICAgZXJyb3JUb01lc3NhZ2U6IChkYXRhKSA9PiBkYXRhXG4gICAgICAgIH0pLFxuICAgICAgICAuLi5hYm9ydFNpZ25hbCAmJiB7IGFib3J0U2lnbmFsIH0sXG4gICAgICAgIGZldGNoOiB0aGlzLmNvbmZpZy5mZXRjaFxuICAgICAgfSk7XG4gICAgICByZXR1cm4ge1xuICAgICAgICAuLi5yZXNwb25zZUJvZHksXG4gICAgICAgIHJlcXVlc3Q6IHsgYm9keTogYXJncyB9LFxuICAgICAgICByZXNwb25zZTogeyBoZWFkZXJzOiByZXNwb25zZUhlYWRlcnMsIGJvZHk6IHJhd1Jlc3BvbnNlIH0sXG4gICAgICAgIHdhcm5pbmdzXG4gICAgICB9O1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICB0aHJvdyBhd2FpdCBhc0dhdGV3YXlFcnJvcihlcnJvciwgYXdhaXQgcGFyc2VBdXRoTWV0aG9kKHJlc29sdmVkSGVhZGVycykpO1xuICAgIH1cbiAgfVxuICBhc3luYyBkb1N0cmVhbShvcHRpb25zKSB7XG4gICAgY29uc3QgeyBhcmdzLCB3YXJuaW5ncyB9ID0gYXdhaXQgdGhpcy5nZXRBcmdzKG9wdGlvbnMpO1xuICAgIGNvbnN0IHsgYWJvcnRTaWduYWwgfSA9IG9wdGlvbnM7XG4gICAgY29uc3QgcmVzb2x2ZWRIZWFkZXJzID0gYXdhaXQgcmVzb2x2ZTIodGhpcy5jb25maWcuaGVhZGVycygpKTtcbiAgICB0cnkge1xuICAgICAgY29uc3QgeyB2YWx1ZTogcmVzcG9uc2UsIHJlc3BvbnNlSGVhZGVycyB9ID0gYXdhaXQgcG9zdEpzb25Ub0FwaSh7XG4gICAgICAgIHVybDogdGhpcy5nZXRVcmwoKSxcbiAgICAgICAgaGVhZGVyczogY29tYmluZUhlYWRlcnMoXG4gICAgICAgICAgcmVzb2x2ZWRIZWFkZXJzLFxuICAgICAgICAgIG9wdGlvbnMuaGVhZGVycyxcbiAgICAgICAgICB0aGlzLmdldE1vZGVsQ29uZmlnSGVhZGVycyh0aGlzLm1vZGVsSWQsIHRydWUpLFxuICAgICAgICAgIGF3YWl0IHJlc29sdmUyKHRoaXMuY29uZmlnLm8xMXlIZWFkZXJzKVxuICAgICAgICApLFxuICAgICAgICBib2R5OiBhcmdzLFxuICAgICAgICBzdWNjZXNzZnVsUmVzcG9uc2VIYW5kbGVyOiBjcmVhdGVFdmVudFNvdXJjZVJlc3BvbnNlSGFuZGxlcih6NS5hbnkoKSksXG4gICAgICAgIGZhaWxlZFJlc3BvbnNlSGFuZGxlcjogY3JlYXRlSnNvbkVycm9yUmVzcG9uc2VIYW5kbGVyMih7XG4gICAgICAgICAgZXJyb3JTY2hlbWE6IHo1LmFueSgpLFxuICAgICAgICAgIGVycm9yVG9NZXNzYWdlOiAoZGF0YSkgPT4gZGF0YVxuICAgICAgICB9KSxcbiAgICAgICAgLi4uYWJvcnRTaWduYWwgJiYgeyBhYm9ydFNpZ25hbCB9LFxuICAgICAgICBmZXRjaDogdGhpcy5jb25maWcuZmV0Y2hcbiAgICAgIH0pO1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgc3RyZWFtOiByZXNwb25zZS5waXBlVGhyb3VnaChcbiAgICAgICAgICBuZXcgVHJhbnNmb3JtU3RyZWFtKHtcbiAgICAgICAgICAgIHN0YXJ0KGNvbnRyb2xsZXIpIHtcbiAgICAgICAgICAgICAgaWYgKHdhcm5pbmdzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgICAgICBjb250cm9sbGVyLmVucXVldWUoeyB0eXBlOiBcInN0cmVhbS1zdGFydFwiLCB3YXJuaW5ncyB9KTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHRyYW5zZm9ybShjaHVuaywgY29udHJvbGxlcikge1xuICAgICAgICAgICAgICBpZiAoY2h1bmsuc3VjY2Vzcykge1xuICAgICAgICAgICAgICAgIGNvbnN0IHN0cmVhbVBhcnQgPSBjaHVuay52YWx1ZTtcbiAgICAgICAgICAgICAgICBpZiAoc3RyZWFtUGFydC50eXBlID09PSBcInJhd1wiICYmICFvcHRpb25zLmluY2x1ZGVSYXdDaHVua3MpIHtcbiAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKHN0cmVhbVBhcnQudHlwZSA9PT0gXCJyZXNwb25zZS1tZXRhZGF0YVwiICYmIHN0cmVhbVBhcnQudGltZXN0YW1wICYmIHR5cGVvZiBzdHJlYW1QYXJ0LnRpbWVzdGFtcCA9PT0gXCJzdHJpbmdcIikge1xuICAgICAgICAgICAgICAgICAgc3RyZWFtUGFydC50aW1lc3RhbXAgPSBuZXcgRGF0ZShzdHJlYW1QYXJ0LnRpbWVzdGFtcCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGNvbnRyb2xsZXIuZW5xdWV1ZShzdHJlYW1QYXJ0KTtcbiAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBjb250cm9sbGVyLmVycm9yKFxuICAgICAgICAgICAgICAgICAgY2h1bmsuZXJyb3JcbiAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSlcbiAgICAgICAgKSxcbiAgICAgICAgcmVxdWVzdDogeyBib2R5OiBhcmdzIH0sXG4gICAgICAgIHJlc3BvbnNlOiB7IGhlYWRlcnM6IHJlc3BvbnNlSGVhZGVycyB9XG4gICAgICB9O1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICB0aHJvdyBhd2FpdCBhc0dhdGV3YXlFcnJvcihlcnJvciwgYXdhaXQgcGFyc2VBdXRoTWV0aG9kKHJlc29sdmVkSGVhZGVycykpO1xuICAgIH1cbiAgfVxuICBpc0ZpbGVQYXJ0KHBhcnQpIHtcbiAgICByZXR1cm4gcGFydCAmJiB0eXBlb2YgcGFydCA9PT0gXCJvYmplY3RcIiAmJiBcInR5cGVcIiBpbiBwYXJ0ICYmIHBhcnQudHlwZSA9PT0gXCJmaWxlXCI7XG4gIH1cbiAgLyoqXG4gICAqIEVuY29kZXMgZmlsZSBwYXJ0cyBpbiB0aGUgcHJvbXB0IHRvIGJhc2U2NC4gTXV0YXRlcyB0aGUgcGFzc2VkIG9wdGlvbnNcbiAgICogaW5zdGFuY2UgZGlyZWN0bHkgdG8gYXZvaWQgY29weWluZyB0aGUgZmlsZSBkYXRhLlxuICAgKiBAcGFyYW0gb3B0aW9ucyAtIFRoZSBvcHRpb25zIHRvIGVuY29kZS5cbiAgICogQHJldHVybnMgVGhlIG9wdGlvbnMgd2l0aCB0aGUgZmlsZSBwYXJ0cyBlbmNvZGVkLlxuICAgKi9cbiAgbWF5YmVFbmNvZGVGaWxlUGFydHMob3B0aW9ucykge1xuICAgIGZvciAoY29uc3QgbWVzc2FnZSBvZiBvcHRpb25zLnByb21wdCkge1xuICAgICAgZm9yIChjb25zdCBwYXJ0IG9mIG1lc3NhZ2UuY29udGVudCkge1xuICAgICAgICBpZiAodGhpcy5pc0ZpbGVQYXJ0KHBhcnQpKSB7XG4gICAgICAgICAgY29uc3QgZmlsZVBhcnQgPSBwYXJ0O1xuICAgICAgICAgIGlmIChmaWxlUGFydC5kYXRhIGluc3RhbmNlb2YgVWludDhBcnJheSkge1xuICAgICAgICAgICAgY29uc3QgYnVmZmVyID0gVWludDhBcnJheS5mcm9tKGZpbGVQYXJ0LmRhdGEpO1xuICAgICAgICAgICAgY29uc3QgYmFzZTY0RGF0YSA9IEJ1ZmZlci5mcm9tKGJ1ZmZlcikudG9TdHJpbmcoXCJiYXNlNjRcIik7XG4gICAgICAgICAgICBmaWxlUGFydC5kYXRhID0gbmV3IFVSTChcbiAgICAgICAgICAgICAgYGRhdGE6JHtmaWxlUGFydC5tZWRpYVR5cGUgfHwgXCJhcHBsaWNhdGlvbi9vY3RldC1zdHJlYW1cIn07YmFzZTY0LCR7YmFzZTY0RGF0YX1gXG4gICAgICAgICAgICApO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gb3B0aW9ucztcbiAgfVxuICBnZXRVcmwoKSB7XG4gICAgcmV0dXJuIGAke3RoaXMuY29uZmlnLmJhc2VVUkx9L2xhbmd1YWdlLW1vZGVsYDtcbiAgfVxuICBnZXRNb2RlbENvbmZpZ0hlYWRlcnMobW9kZWxJZCwgc3RyZWFtaW5nKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIFwiYWktbGFuZ3VhZ2UtbW9kZWwtc3BlY2lmaWNhdGlvbi12ZXJzaW9uXCI6IFwiM1wiLFxuICAgICAgXCJhaS1sYW5ndWFnZS1tb2RlbC1pZFwiOiBtb2RlbElkLFxuICAgICAgXCJhaS1sYW5ndWFnZS1tb2RlbC1zdHJlYW1pbmdcIjogU3RyaW5nKHN0cmVhbWluZylcbiAgICB9O1xuICB9XG59O1xuXG4vLyBzcmMvZ2F0ZXdheS1lbWJlZGRpbmctbW9kZWwudHNcbmltcG9ydCB7XG4gIGNvbWJpbmVIZWFkZXJzIGFzIGNvbWJpbmVIZWFkZXJzMixcbiAgY3JlYXRlSnNvbkVycm9yUmVzcG9uc2VIYW5kbGVyIGFzIGNyZWF0ZUpzb25FcnJvclJlc3BvbnNlSGFuZGxlcjMsXG4gIGNyZWF0ZUpzb25SZXNwb25zZUhhbmRsZXIgYXMgY3JlYXRlSnNvblJlc3BvbnNlSGFuZGxlcjMsXG4gIGxhenlTY2hlbWEgYXMgbGF6eVNjaGVtYTUsXG4gIHBvc3RKc29uVG9BcGkgYXMgcG9zdEpzb25Ub0FwaTIsXG4gIHJlc29sdmUgYXMgcmVzb2x2ZTMsXG4gIHpvZFNjaGVtYSBhcyB6b2RTY2hlbWE1XG59IGZyb20gXCJAYWktc2RrL3Byb3ZpZGVyLXV0aWxzXCI7XG5pbXBvcnQgeyB6IGFzIHo2IH0gZnJvbSBcInpvZC92NFwiO1xudmFyIEdhdGV3YXlFbWJlZGRpbmdNb2RlbCA9IGNsYXNzIHtcbiAgY29uc3RydWN0b3IobW9kZWxJZCwgY29uZmlnKSB7XG4gICAgdGhpcy5tb2RlbElkID0gbW9kZWxJZDtcbiAgICB0aGlzLmNvbmZpZyA9IGNvbmZpZztcbiAgICB0aGlzLnNwZWNpZmljYXRpb25WZXJzaW9uID0gXCJ2M1wiO1xuICAgIHRoaXMubWF4RW1iZWRkaW5nc1BlckNhbGwgPSAyMDQ4O1xuICAgIHRoaXMuc3VwcG9ydHNQYXJhbGxlbENhbGxzID0gdHJ1ZTtcbiAgfVxuICBnZXQgcHJvdmlkZXIoKSB7XG4gICAgcmV0dXJuIHRoaXMuY29uZmlnLnByb3ZpZGVyO1xuICB9XG4gIGFzeW5jIGRvRW1iZWQoe1xuICAgIHZhbHVlcyxcbiAgICBoZWFkZXJzLFxuICAgIGFib3J0U2lnbmFsLFxuICAgIHByb3ZpZGVyT3B0aW9uc1xuICB9KSB7XG4gICAgdmFyIF9hODtcbiAgICBjb25zdCByZXNvbHZlZEhlYWRlcnMgPSBhd2FpdCByZXNvbHZlMyh0aGlzLmNvbmZpZy5oZWFkZXJzKCkpO1xuICAgIHRyeSB7XG4gICAgICBjb25zdCB7XG4gICAgICAgIHJlc3BvbnNlSGVhZGVycyxcbiAgICAgICAgdmFsdWU6IHJlc3BvbnNlQm9keSxcbiAgICAgICAgcmF3VmFsdWVcbiAgICAgIH0gPSBhd2FpdCBwb3N0SnNvblRvQXBpMih7XG4gICAgICAgIHVybDogdGhpcy5nZXRVcmwoKSxcbiAgICAgICAgaGVhZGVyczogY29tYmluZUhlYWRlcnMyKFxuICAgICAgICAgIHJlc29sdmVkSGVhZGVycyxcbiAgICAgICAgICBoZWFkZXJzICE9IG51bGwgPyBoZWFkZXJzIDoge30sXG4gICAgICAgICAgdGhpcy5nZXRNb2RlbENvbmZpZ0hlYWRlcnMoKSxcbiAgICAgICAgICBhd2FpdCByZXNvbHZlMyh0aGlzLmNvbmZpZy5vMTF5SGVhZGVycylcbiAgICAgICAgKSxcbiAgICAgICAgYm9keToge1xuICAgICAgICAgIHZhbHVlcyxcbiAgICAgICAgICAuLi5wcm92aWRlck9wdGlvbnMgPyB7IHByb3ZpZGVyT3B0aW9ucyB9IDoge31cbiAgICAgICAgfSxcbiAgICAgICAgc3VjY2Vzc2Z1bFJlc3BvbnNlSGFuZGxlcjogY3JlYXRlSnNvblJlc3BvbnNlSGFuZGxlcjMoXG4gICAgICAgICAgZ2F0ZXdheUVtYmVkZGluZ1Jlc3BvbnNlU2NoZW1hXG4gICAgICAgICksXG4gICAgICAgIGZhaWxlZFJlc3BvbnNlSGFuZGxlcjogY3JlYXRlSnNvbkVycm9yUmVzcG9uc2VIYW5kbGVyMyh7XG4gICAgICAgICAgZXJyb3JTY2hlbWE6IHo2LmFueSgpLFxuICAgICAgICAgIGVycm9yVG9NZXNzYWdlOiAoZGF0YSkgPT4gZGF0YVxuICAgICAgICB9KSxcbiAgICAgICAgLi4uYWJvcnRTaWduYWwgJiYgeyBhYm9ydFNpZ25hbCB9LFxuICAgICAgICBmZXRjaDogdGhpcy5jb25maWcuZmV0Y2hcbiAgICAgIH0pO1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgZW1iZWRkaW5nczogcmVzcG9uc2VCb2R5LmVtYmVkZGluZ3MsXG4gICAgICAgIHVzYWdlOiAoX2E4ID0gcmVzcG9uc2VCb2R5LnVzYWdlKSAhPSBudWxsID8gX2E4IDogdm9pZCAwLFxuICAgICAgICBwcm92aWRlck1ldGFkYXRhOiByZXNwb25zZUJvZHkucHJvdmlkZXJNZXRhZGF0YSxcbiAgICAgICAgcmVzcG9uc2U6IHsgaGVhZGVyczogcmVzcG9uc2VIZWFkZXJzLCBib2R5OiByYXdWYWx1ZSB9LFxuICAgICAgICB3YXJuaW5nczogW11cbiAgICAgIH07XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIHRocm93IGF3YWl0IGFzR2F0ZXdheUVycm9yKGVycm9yLCBhd2FpdCBwYXJzZUF1dGhNZXRob2QocmVzb2x2ZWRIZWFkZXJzKSk7XG4gICAgfVxuICB9XG4gIGdldFVybCgpIHtcbiAgICByZXR1cm4gYCR7dGhpcy5jb25maWcuYmFzZVVSTH0vZW1iZWRkaW5nLW1vZGVsYDtcbiAgfVxuICBnZXRNb2RlbENvbmZpZ0hlYWRlcnMoKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIFwiYWktZW1iZWRkaW5nLW1vZGVsLXNwZWNpZmljYXRpb24tdmVyc2lvblwiOiBcIjNcIixcbiAgICAgIFwiYWktbW9kZWwtaWRcIjogdGhpcy5tb2RlbElkXG4gICAgfTtcbiAgfVxufTtcbnZhciBnYXRld2F5RW1iZWRkaW5nUmVzcG9uc2VTY2hlbWEgPSBsYXp5U2NoZW1hNShcbiAgKCkgPT4gem9kU2NoZW1hNShcbiAgICB6Ni5vYmplY3Qoe1xuICAgICAgZW1iZWRkaW5nczogejYuYXJyYXkoejYuYXJyYXkoejYubnVtYmVyKCkpKSxcbiAgICAgIHVzYWdlOiB6Ni5vYmplY3QoeyB0b2tlbnM6IHo2Lm51bWJlcigpIH0pLm51bGxpc2goKSxcbiAgICAgIHByb3ZpZGVyTWV0YWRhdGE6IHo2LnJlY29yZCh6Ni5zdHJpbmcoKSwgejYucmVjb3JkKHo2LnN0cmluZygpLCB6Ni51bmtub3duKCkpKS5vcHRpb25hbCgpXG4gICAgfSlcbiAgKVxuKTtcblxuLy8gc3JjL2dhdGV3YXktaW1hZ2UtbW9kZWwudHNcbmltcG9ydCB7XG4gIGNvbWJpbmVIZWFkZXJzIGFzIGNvbWJpbmVIZWFkZXJzMyxcbiAgY29udmVydFVpbnQ4QXJyYXlUb0Jhc2U2NCxcbiAgY3JlYXRlSnNvblJlc3BvbnNlSGFuZGxlciBhcyBjcmVhdGVKc29uUmVzcG9uc2VIYW5kbGVyNCxcbiAgY3JlYXRlSnNvbkVycm9yUmVzcG9uc2VIYW5kbGVyIGFzIGNyZWF0ZUpzb25FcnJvclJlc3BvbnNlSGFuZGxlcjQsXG4gIHBvc3RKc29uVG9BcGkgYXMgcG9zdEpzb25Ub0FwaTMsXG4gIHJlc29sdmUgYXMgcmVzb2x2ZTRcbn0gZnJvbSBcIkBhaS1zZGsvcHJvdmlkZXItdXRpbHNcIjtcbmltcG9ydCB7IHogYXMgejcgfSBmcm9tIFwiem9kL3Y0XCI7XG52YXIgR2F0ZXdheUltYWdlTW9kZWwgPSBjbGFzcyB7XG4gIGNvbnN0cnVjdG9yKG1vZGVsSWQsIGNvbmZpZykge1xuICAgIHRoaXMubW9kZWxJZCA9IG1vZGVsSWQ7XG4gICAgdGhpcy5jb25maWcgPSBjb25maWc7XG4gICAgdGhpcy5zcGVjaWZpY2F0aW9uVmVyc2lvbiA9IFwidjNcIjtcbiAgICAvLyBTZXQgYSB2ZXJ5IGxhcmdlIG51bWJlciB0byBwcmV2ZW50IGNsaWVudC1zaWRlIHNwbGl0dGluZyBvZiByZXF1ZXN0c1xuICAgIHRoaXMubWF4SW1hZ2VzUGVyQ2FsbCA9IE51bWJlci5NQVhfU0FGRV9JTlRFR0VSO1xuICB9XG4gIGdldCBwcm92aWRlcigpIHtcbiAgICByZXR1cm4gdGhpcy5jb25maWcucHJvdmlkZXI7XG4gIH1cbiAgYXN5bmMgZG9HZW5lcmF0ZSh7XG4gICAgcHJvbXB0LFxuICAgIG4sXG4gICAgc2l6ZSxcbiAgICBhc3BlY3RSYXRpbyxcbiAgICBzZWVkLFxuICAgIGZpbGVzLFxuICAgIG1hc2ssXG4gICAgcHJvdmlkZXJPcHRpb25zLFxuICAgIGhlYWRlcnMsXG4gICAgYWJvcnRTaWduYWxcbiAgfSkge1xuICAgIHZhciBfYTg7XG4gICAgY29uc3QgcmVzb2x2ZWRIZWFkZXJzID0gYXdhaXQgcmVzb2x2ZTQodGhpcy5jb25maWcuaGVhZGVycygpKTtcbiAgICB0cnkge1xuICAgICAgY29uc3Qge1xuICAgICAgICByZXNwb25zZUhlYWRlcnMsXG4gICAgICAgIHZhbHVlOiByZXNwb25zZUJvZHksXG4gICAgICAgIHJhd1ZhbHVlXG4gICAgICB9ID0gYXdhaXQgcG9zdEpzb25Ub0FwaTMoe1xuICAgICAgICB1cmw6IHRoaXMuZ2V0VXJsKCksXG4gICAgICAgIGhlYWRlcnM6IGNvbWJpbmVIZWFkZXJzMyhcbiAgICAgICAgICByZXNvbHZlZEhlYWRlcnMsXG4gICAgICAgICAgaGVhZGVycyAhPSBudWxsID8gaGVhZGVycyA6IHt9LFxuICAgICAgICAgIHRoaXMuZ2V0TW9kZWxDb25maWdIZWFkZXJzKCksXG4gICAgICAgICAgYXdhaXQgcmVzb2x2ZTQodGhpcy5jb25maWcubzExeUhlYWRlcnMpXG4gICAgICAgICksXG4gICAgICAgIGJvZHk6IHtcbiAgICAgICAgICBwcm9tcHQsXG4gICAgICAgICAgbixcbiAgICAgICAgICAuLi5zaXplICYmIHsgc2l6ZSB9LFxuICAgICAgICAgIC4uLmFzcGVjdFJhdGlvICYmIHsgYXNwZWN0UmF0aW8gfSxcbiAgICAgICAgICAuLi5zZWVkICYmIHsgc2VlZCB9LFxuICAgICAgICAgIC4uLnByb3ZpZGVyT3B0aW9ucyAmJiB7IHByb3ZpZGVyT3B0aW9ucyB9LFxuICAgICAgICAgIC4uLmZpbGVzICYmIHtcbiAgICAgICAgICAgIGZpbGVzOiBmaWxlcy5tYXAoKGZpbGUpID0+IG1heWJlRW5jb2RlSW1hZ2VGaWxlKGZpbGUpKVxuICAgICAgICAgIH0sXG4gICAgICAgICAgLi4ubWFzayAmJiB7IG1hc2s6IG1heWJlRW5jb2RlSW1hZ2VGaWxlKG1hc2spIH1cbiAgICAgICAgfSxcbiAgICAgICAgc3VjY2Vzc2Z1bFJlc3BvbnNlSGFuZGxlcjogY3JlYXRlSnNvblJlc3BvbnNlSGFuZGxlcjQoXG4gICAgICAgICAgZ2F0ZXdheUltYWdlUmVzcG9uc2VTY2hlbWFcbiAgICAgICAgKSxcbiAgICAgICAgZmFpbGVkUmVzcG9uc2VIYW5kbGVyOiBjcmVhdGVKc29uRXJyb3JSZXNwb25zZUhhbmRsZXI0KHtcbiAgICAgICAgICBlcnJvclNjaGVtYTogejcuYW55KCksXG4gICAgICAgICAgZXJyb3JUb01lc3NhZ2U6IChkYXRhKSA9PiBkYXRhXG4gICAgICAgIH0pLFxuICAgICAgICAuLi5hYm9ydFNpZ25hbCAmJiB7IGFib3J0U2lnbmFsIH0sXG4gICAgICAgIGZldGNoOiB0aGlzLmNvbmZpZy5mZXRjaFxuICAgICAgfSk7XG4gICAgICByZXR1cm4ge1xuICAgICAgICBpbWFnZXM6IHJlc3BvbnNlQm9keS5pbWFnZXMsXG4gICAgICAgIC8vIEFsd2F5cyBiYXNlNjQgc3RyaW5ncyBmcm9tIHNlcnZlclxuICAgICAgICB3YXJuaW5nczogKF9hOCA9IHJlc3BvbnNlQm9keS53YXJuaW5ncykgIT0gbnVsbCA/IF9hOCA6IFtdLFxuICAgICAgICBwcm92aWRlck1ldGFkYXRhOiByZXNwb25zZUJvZHkucHJvdmlkZXJNZXRhZGF0YSxcbiAgICAgICAgcmVzcG9uc2U6IHtcbiAgICAgICAgICB0aW1lc3RhbXA6IC8qIEBfX1BVUkVfXyAqLyBuZXcgRGF0ZSgpLFxuICAgICAgICAgIG1vZGVsSWQ6IHRoaXMubW9kZWxJZCxcbiAgICAgICAgICBoZWFkZXJzOiByZXNwb25zZUhlYWRlcnNcbiAgICAgICAgfVxuICAgICAgfTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgdGhyb3cgYXNHYXRld2F5RXJyb3IoZXJyb3IsIGF3YWl0IHBhcnNlQXV0aE1ldGhvZChyZXNvbHZlZEhlYWRlcnMpKTtcbiAgICB9XG4gIH1cbiAgZ2V0VXJsKCkge1xuICAgIHJldHVybiBgJHt0aGlzLmNvbmZpZy5iYXNlVVJMfS9pbWFnZS1tb2RlbGA7XG4gIH1cbiAgZ2V0TW9kZWxDb25maWdIZWFkZXJzKCkge1xuICAgIHJldHVybiB7XG4gICAgICBcImFpLWltYWdlLW1vZGVsLXNwZWNpZmljYXRpb24tdmVyc2lvblwiOiBcIjNcIixcbiAgICAgIFwiYWktbW9kZWwtaWRcIjogdGhpcy5tb2RlbElkXG4gICAgfTtcbiAgfVxufTtcbmZ1bmN0aW9uIG1heWJlRW5jb2RlSW1hZ2VGaWxlKGZpbGUpIHtcbiAgaWYgKGZpbGUudHlwZSA9PT0gXCJmaWxlXCIgJiYgZmlsZS5kYXRhIGluc3RhbmNlb2YgVWludDhBcnJheSkge1xuICAgIHJldHVybiB7XG4gICAgICAuLi5maWxlLFxuICAgICAgZGF0YTogY29udmVydFVpbnQ4QXJyYXlUb0Jhc2U2NChmaWxlLmRhdGEpXG4gICAgfTtcbiAgfVxuICByZXR1cm4gZmlsZTtcbn1cbnZhciBwcm92aWRlck1ldGFkYXRhRW50cnlTY2hlbWEgPSB6Ny5vYmplY3Qoe1xuICBpbWFnZXM6IHo3LmFycmF5KHo3LnVua25vd24oKSkub3B0aW9uYWwoKVxufSkuY2F0Y2hhbGwoejcudW5rbm93bigpKTtcbnZhciBnYXRld2F5SW1hZ2VSZXNwb25zZVNjaGVtYSA9IHo3Lm9iamVjdCh7XG4gIGltYWdlczogejcuYXJyYXkoejcuc3RyaW5nKCkpLFxuICAvLyBBbHdheXMgYmFzZTY0IHN0cmluZ3Mgb3ZlciB0aGUgd2lyZVxuICB3YXJuaW5nczogejcuYXJyYXkoXG4gICAgejcub2JqZWN0KHtcbiAgICAgIHR5cGU6IHo3LmxpdGVyYWwoXCJvdGhlclwiKSxcbiAgICAgIG1lc3NhZ2U6IHo3LnN0cmluZygpXG4gICAgfSlcbiAgKS5vcHRpb25hbCgpLFxuICBwcm92aWRlck1ldGFkYXRhOiB6Ny5yZWNvcmQoejcuc3RyaW5nKCksIHByb3ZpZGVyTWV0YWRhdGFFbnRyeVNjaGVtYSkub3B0aW9uYWwoKVxufSk7XG5cbi8vIHNyYy90b29sL3BlcnBsZXhpdHktc2VhcmNoLnRzXG5pbXBvcnQge1xuICBjcmVhdGVQcm92aWRlclRvb2xGYWN0b3J5V2l0aE91dHB1dFNjaGVtYSxcbiAgbGF6eVNjaGVtYSBhcyBsYXp5U2NoZW1hNixcbiAgem9kU2NoZW1hIGFzIHpvZFNjaGVtYTZcbn0gZnJvbSBcIkBhaS1zZGsvcHJvdmlkZXItdXRpbHNcIjtcbmltcG9ydCB7IHogYXMgejggfSBmcm9tIFwiem9kXCI7XG52YXIgcGVycGxleGl0eVNlYXJjaElucHV0U2NoZW1hID0gbGF6eVNjaGVtYTYoXG4gICgpID0+IHpvZFNjaGVtYTYoXG4gICAgejgub2JqZWN0KHtcbiAgICAgIHF1ZXJ5OiB6OC51bmlvbihbejguc3RyaW5nKCksIHo4LmFycmF5KHo4LnN0cmluZygpKV0pLmRlc2NyaWJlKFxuICAgICAgICBcIlNlYXJjaCBxdWVyeSAoc3RyaW5nKSBvciBtdWx0aXBsZSBxdWVyaWVzIChhcnJheSBvZiB1cCB0byA1IHN0cmluZ3MpLiBNdWx0aS1xdWVyeSBzZWFyY2hlcyByZXR1cm4gY29tYmluZWQgcmVzdWx0cyBmcm9tIGFsbCBxdWVyaWVzLlwiXG4gICAgICApLFxuICAgICAgbWF4X3Jlc3VsdHM6IHo4Lm51bWJlcigpLm9wdGlvbmFsKCkuZGVzY3JpYmUoXG4gICAgICAgIFwiTWF4aW11bSBudW1iZXIgb2Ygc2VhcmNoIHJlc3VsdHMgdG8gcmV0dXJuICgxLTIwLCBkZWZhdWx0OiAxMClcIlxuICAgICAgKSxcbiAgICAgIG1heF90b2tlbnNfcGVyX3BhZ2U6IHo4Lm51bWJlcigpLm9wdGlvbmFsKCkuZGVzY3JpYmUoXG4gICAgICAgIFwiTWF4aW11bSBudW1iZXIgb2YgdG9rZW5zIHRvIGV4dHJhY3QgcGVyIHNlYXJjaCByZXN1bHQgcGFnZSAoMjU2LTIwNDgsIGRlZmF1bHQ6IDEwMjQpXCJcbiAgICAgICksXG4gICAgICBjb3VudHJ5OiB6OC5zdHJpbmcoKS5vcHRpb25hbCgpLmRlc2NyaWJlKFxuICAgICAgICBcIlR3by1sZXR0ZXIgSVNPIDMxNjYtMSBhbHBoYS0yIGNvdW50cnkgY29kZSBmb3IgcmVnaW9uYWwgc2VhcmNoIHJlc3VsdHMgKGUuZy4sICdVUycsICdHQicsICdGUicpXCJcbiAgICAgICksXG4gICAgICBzZWFyY2hfZG9tYWluX2ZpbHRlcjogejguYXJyYXkoejguc3RyaW5nKCkpLm9wdGlvbmFsKCkuZGVzY3JpYmUoXG4gICAgICAgIFwiTGlzdCBvZiBkb21haW5zIHRvIGluY2x1ZGUgb3IgZXhjbHVkZSBmcm9tIHNlYXJjaCByZXN1bHRzIChtYXggMjApLiBUbyBpbmNsdWRlOiBbJ25hdHVyZS5jb20nLCAnc2NpZW5jZS5vcmcnXS4gVG8gZXhjbHVkZTogWyctZXhhbXBsZS5jb20nLCAnLXNwYW0ubmV0J11cIlxuICAgICAgKSxcbiAgICAgIHNlYXJjaF9sYW5ndWFnZV9maWx0ZXI6IHo4LmFycmF5KHo4LnN0cmluZygpKS5vcHRpb25hbCgpLmRlc2NyaWJlKFxuICAgICAgICBcIkxpc3Qgb2YgSVNPIDYzOS0xIGxhbmd1YWdlIGNvZGVzIHRvIGZpbHRlciByZXN1bHRzIChtYXggMTAsIGxvd2VyY2FzZSkuIEV4YW1wbGVzOiBbJ2VuJywgJ2ZyJywgJ2RlJ11cIlxuICAgICAgKSxcbiAgICAgIHNlYXJjaF9hZnRlcl9kYXRlOiB6OC5zdHJpbmcoKS5vcHRpb25hbCgpLmRlc2NyaWJlKFxuICAgICAgICBcIkluY2x1ZGUgb25seSByZXN1bHRzIHB1Ymxpc2hlZCBhZnRlciB0aGlzIGRhdGUuIEZvcm1hdDogJ01NL0REL1lZWVknIChlLmcuLCAnMy8xLzIwMjUnKS4gQ2Fubm90IGJlIHVzZWQgd2l0aCBzZWFyY2hfcmVjZW5jeV9maWx0ZXIuXCJcbiAgICAgICksXG4gICAgICBzZWFyY2hfYmVmb3JlX2RhdGU6IHo4LnN0cmluZygpLm9wdGlvbmFsKCkuZGVzY3JpYmUoXG4gICAgICAgIFwiSW5jbHVkZSBvbmx5IHJlc3VsdHMgcHVibGlzaGVkIGJlZm9yZSB0aGlzIGRhdGUuIEZvcm1hdDogJ01NL0REL1lZWVknIChlLmcuLCAnMy8xNS8yMDI1JykuIENhbm5vdCBiZSB1c2VkIHdpdGggc2VhcmNoX3JlY2VuY3lfZmlsdGVyLlwiXG4gICAgICApLFxuICAgICAgc2VhcmNoX3JlY2VuY3lfZmlsdGVyOiB6OC5lbnVtKFtcImRheVwiLCBcIndlZWtcIiwgXCJtb250aFwiLCBcInllYXJcIl0pLm9wdGlvbmFsKCkuZGVzY3JpYmUoXG4gICAgICAgIFwiRmlsdGVyIHJlc3VsdHMgYnkgcmVsYXRpdmUgdGltZSBwZXJpb2QuIENhbm5vdCBiZSB1c2VkIHdpdGggc2VhcmNoX2FmdGVyX2RhdGUgb3Igc2VhcmNoX2JlZm9yZV9kYXRlLlwiXG4gICAgICApXG4gICAgfSlcbiAgKVxuKTtcbnZhciBwZXJwbGV4aXR5U2VhcmNoT3V0cHV0U2NoZW1hID0gbGF6eVNjaGVtYTYoXG4gICgpID0+IHpvZFNjaGVtYTYoXG4gICAgejgudW5pb24oW1xuICAgICAgLy8gU3VjY2VzcyByZXNwb25zZVxuICAgICAgejgub2JqZWN0KHtcbiAgICAgICAgcmVzdWx0czogejguYXJyYXkoXG4gICAgICAgICAgejgub2JqZWN0KHtcbiAgICAgICAgICAgIHRpdGxlOiB6OC5zdHJpbmcoKSxcbiAgICAgICAgICAgIHVybDogejguc3RyaW5nKCksXG4gICAgICAgICAgICBzbmlwcGV0OiB6OC5zdHJpbmcoKSxcbiAgICAgICAgICAgIGRhdGU6IHo4LnN0cmluZygpLm9wdGlvbmFsKCksXG4gICAgICAgICAgICBsYXN0VXBkYXRlZDogejguc3RyaW5nKCkub3B0aW9uYWwoKVxuICAgICAgICAgIH0pXG4gICAgICAgICksXG4gICAgICAgIGlkOiB6OC5zdHJpbmcoKVxuICAgICAgfSksXG4gICAgICAvLyBFcnJvciByZXNwb25zZVxuICAgICAgejgub2JqZWN0KHtcbiAgICAgICAgZXJyb3I6IHo4LmVudW0oW1xuICAgICAgICAgIFwiYXBpX2Vycm9yXCIsXG4gICAgICAgICAgXCJyYXRlX2xpbWl0XCIsXG4gICAgICAgICAgXCJ0aW1lb3V0XCIsXG4gICAgICAgICAgXCJpbnZhbGlkX2lucHV0XCIsXG4gICAgICAgICAgXCJ1bmtub3duXCJcbiAgICAgICAgXSksXG4gICAgICAgIHN0YXR1c0NvZGU6IHo4Lm51bWJlcigpLm9wdGlvbmFsKCksXG4gICAgICAgIG1lc3NhZ2U6IHo4LnN0cmluZygpXG4gICAgICB9KVxuICAgIF0pXG4gIClcbik7XG52YXIgcGVycGxleGl0eVNlYXJjaFRvb2xGYWN0b3J5ID0gY3JlYXRlUHJvdmlkZXJUb29sRmFjdG9yeVdpdGhPdXRwdXRTY2hlbWEoe1xuICBpZDogXCJnYXRld2F5LnBlcnBsZXhpdHlfc2VhcmNoXCIsXG4gIGlucHV0U2NoZW1hOiBwZXJwbGV4aXR5U2VhcmNoSW5wdXRTY2hlbWEsXG4gIG91dHB1dFNjaGVtYTogcGVycGxleGl0eVNlYXJjaE91dHB1dFNjaGVtYVxufSk7XG52YXIgcGVycGxleGl0eVNlYXJjaCA9IChjb25maWcgPSB7fSkgPT4gcGVycGxleGl0eVNlYXJjaFRvb2xGYWN0b3J5KGNvbmZpZyk7XG5cbi8vIHNyYy9nYXRld2F5LXRvb2xzLnRzXG52YXIgZ2F0ZXdheVRvb2xzID0ge1xuICAvKipcbiAgICogU2VhcmNoIHRoZSB3ZWIgdXNpbmcgUGVycGxleGl0eSdzIFNlYXJjaCBBUEkgZm9yIHJlYWwtdGltZSBpbmZvcm1hdGlvbixcbiAgICogbmV3cywgcmVzZWFyY2ggcGFwZXJzLCBhbmQgYXJ0aWNsZXMuXG4gICAqXG4gICAqIFByb3ZpZGVzIHJhbmtlZCBzZWFyY2ggcmVzdWx0cyB3aXRoIGFkdmFuY2VkIGZpbHRlcmluZyBvcHRpb25zIGluY2x1ZGluZ1xuICAgKiBkb21haW4sIGxhbmd1YWdlLCBkYXRlIHJhbmdlLCBhbmQgcmVjZW5jeSBmaWx0ZXJzLlxuICAgKi9cbiAgcGVycGxleGl0eVNlYXJjaFxufTtcblxuLy8gc3JjL3ZlcmNlbC1lbnZpcm9ubWVudC50c1xuaW1wb3J0IHsgZ2V0Q29udGV4dCB9IGZyb20gXCJAdmVyY2VsL29pZGNcIjtcbmltcG9ydCB7IGdldFZlcmNlbE9pZGNUb2tlbiB9IGZyb20gXCJAdmVyY2VsL29pZGNcIjtcbmFzeW5jIGZ1bmN0aW9uIGdldFZlcmNlbFJlcXVlc3RJZCgpIHtcbiAgdmFyIF9hODtcbiAgcmV0dXJuIChfYTggPSBnZXRDb250ZXh0KCkuaGVhZGVycykgPT0gbnVsbCA/IHZvaWQgMCA6IF9hOFtcIngtdmVyY2VsLWlkXCJdO1xufVxuXG4vLyBzcmMvZ2F0ZXdheS1wcm92aWRlci50c1xuaW1wb3J0IHsgd2l0aFVzZXJBZ2VudFN1ZmZpeCB9IGZyb20gXCJAYWktc2RrL3Byb3ZpZGVyLXV0aWxzXCI7XG5cbi8vIHNyYy92ZXJzaW9uLnRzXG52YXIgVkVSU0lPTiA9IHRydWUgPyBcIjMuMC4xMVwiIDogXCIwLjAuMC10ZXN0XCI7XG5cbi8vIHNyYy9nYXRld2F5LXByb3ZpZGVyLnRzXG52YXIgQUlfR0FURVdBWV9QUk9UT0NPTF9WRVJTSU9OID0gXCIwLjAuMVwiO1xuZnVuY3Rpb24gY3JlYXRlR2F0ZXdheVByb3ZpZGVyKG9wdGlvbnMgPSB7fSkge1xuICB2YXIgX2E4LCBfYjg7XG4gIGxldCBwZW5kaW5nTWV0YWRhdGEgPSBudWxsO1xuICBsZXQgbWV0YWRhdGFDYWNoZSA9IG51bGw7XG4gIGNvbnN0IGNhY2hlUmVmcmVzaE1pbGxpcyA9IChfYTggPSBvcHRpb25zLm1ldGFkYXRhQ2FjaGVSZWZyZXNoTWlsbGlzKSAhPSBudWxsID8gX2E4IDogMWUzICogNjAgKiA1O1xuICBsZXQgbGFzdEZldGNoVGltZSA9IDA7XG4gIGNvbnN0IGJhc2VVUkwgPSAoX2I4ID0gd2l0aG91dFRyYWlsaW5nU2xhc2gob3B0aW9ucy5iYXNlVVJMKSkgIT0gbnVsbCA/IF9iOCA6IFwiaHR0cHM6Ly9haS1nYXRld2F5LnZlcmNlbC5zaC92My9haVwiO1xuICBjb25zdCBnZXRIZWFkZXJzID0gYXN5bmMgKCkgPT4ge1xuICAgIHRyeSB7XG4gICAgICBjb25zdCBhdXRoID0gYXdhaXQgZ2V0R2F0ZXdheUF1dGhUb2tlbihvcHRpb25zKTtcbiAgICAgIHJldHVybiB3aXRoVXNlckFnZW50U3VmZml4KFxuICAgICAgICB7XG4gICAgICAgICAgQXV0aG9yaXphdGlvbjogYEJlYXJlciAke2F1dGgudG9rZW59YCxcbiAgICAgICAgICBcImFpLWdhdGV3YXktcHJvdG9jb2wtdmVyc2lvblwiOiBBSV9HQVRFV0FZX1BST1RPQ09MX1ZFUlNJT04sXG4gICAgICAgICAgW0dBVEVXQVlfQVVUSF9NRVRIT0RfSEVBREVSXTogYXV0aC5hdXRoTWV0aG9kLFxuICAgICAgICAgIC4uLm9wdGlvbnMuaGVhZGVyc1xuICAgICAgICB9LFxuICAgICAgICBgYWktc2RrL2dhdGV3YXkvJHtWRVJTSU9OfWBcbiAgICAgICk7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIHRocm93IEdhdGV3YXlBdXRoZW50aWNhdGlvbkVycm9yLmNyZWF0ZUNvbnRleHR1YWxFcnJvcih7XG4gICAgICAgIGFwaUtleVByb3ZpZGVkOiBmYWxzZSxcbiAgICAgICAgb2lkY1Rva2VuUHJvdmlkZWQ6IGZhbHNlLFxuICAgICAgICBzdGF0dXNDb2RlOiA0MDEsXG4gICAgICAgIGNhdXNlOiBlcnJvclxuICAgICAgfSk7XG4gICAgfVxuICB9O1xuICBjb25zdCBjcmVhdGVPMTF5SGVhZGVycyA9ICgpID0+IHtcbiAgICBjb25zdCBkZXBsb3ltZW50SWQgPSBsb2FkT3B0aW9uYWxTZXR0aW5nKHtcbiAgICAgIHNldHRpbmdWYWx1ZTogdm9pZCAwLFxuICAgICAgZW52aXJvbm1lbnRWYXJpYWJsZU5hbWU6IFwiVkVSQ0VMX0RFUExPWU1FTlRfSURcIlxuICAgIH0pO1xuICAgIGNvbnN0IGVudmlyb25tZW50ID0gbG9hZE9wdGlvbmFsU2V0dGluZyh7XG4gICAgICBzZXR0aW5nVmFsdWU6IHZvaWQgMCxcbiAgICAgIGVudmlyb25tZW50VmFyaWFibGVOYW1lOiBcIlZFUkNFTF9FTlZcIlxuICAgIH0pO1xuICAgIGNvbnN0IHJlZ2lvbiA9IGxvYWRPcHRpb25hbFNldHRpbmcoe1xuICAgICAgc2V0dGluZ1ZhbHVlOiB2b2lkIDAsXG4gICAgICBlbnZpcm9ubWVudFZhcmlhYmxlTmFtZTogXCJWRVJDRUxfUkVHSU9OXCJcbiAgICB9KTtcbiAgICByZXR1cm4gYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgcmVxdWVzdElkID0gYXdhaXQgZ2V0VmVyY2VsUmVxdWVzdElkKCk7XG4gICAgICByZXR1cm4ge1xuICAgICAgICAuLi5kZXBsb3ltZW50SWQgJiYgeyBcImFpLW8xMXktZGVwbG95bWVudC1pZFwiOiBkZXBsb3ltZW50SWQgfSxcbiAgICAgICAgLi4uZW52aXJvbm1lbnQgJiYgeyBcImFpLW8xMXktZW52aXJvbm1lbnRcIjogZW52aXJvbm1lbnQgfSxcbiAgICAgICAgLi4ucmVnaW9uICYmIHsgXCJhaS1vMTF5LXJlZ2lvblwiOiByZWdpb24gfSxcbiAgICAgICAgLi4ucmVxdWVzdElkICYmIHsgXCJhaS1vMTF5LXJlcXVlc3QtaWRcIjogcmVxdWVzdElkIH1cbiAgICAgIH07XG4gICAgfTtcbiAgfTtcbiAgY29uc3QgY3JlYXRlTGFuZ3VhZ2VNb2RlbCA9IChtb2RlbElkKSA9PiB7XG4gICAgcmV0dXJuIG5ldyBHYXRld2F5TGFuZ3VhZ2VNb2RlbChtb2RlbElkLCB7XG4gICAgICBwcm92aWRlcjogXCJnYXRld2F5XCIsXG4gICAgICBiYXNlVVJMLFxuICAgICAgaGVhZGVyczogZ2V0SGVhZGVycyxcbiAgICAgIGZldGNoOiBvcHRpb25zLmZldGNoLFxuICAgICAgbzExeUhlYWRlcnM6IGNyZWF0ZU8xMXlIZWFkZXJzKClcbiAgICB9KTtcbiAgfTtcbiAgY29uc3QgZ2V0QXZhaWxhYmxlTW9kZWxzID0gYXN5bmMgKCkgPT4ge1xuICAgIHZhciBfYTksIF9iOSwgX2M7XG4gICAgY29uc3Qgbm93ID0gKF9jID0gKF9iOSA9IChfYTkgPSBvcHRpb25zLl9pbnRlcm5hbCkgPT0gbnVsbCA/IHZvaWQgMCA6IF9hOS5jdXJyZW50RGF0ZSkgPT0gbnVsbCA/IHZvaWQgMCA6IF9iOS5jYWxsKF9hOSkuZ2V0VGltZSgpKSAhPSBudWxsID8gX2MgOiBEYXRlLm5vdygpO1xuICAgIGlmICghcGVuZGluZ01ldGFkYXRhIHx8IG5vdyAtIGxhc3RGZXRjaFRpbWUgPiBjYWNoZVJlZnJlc2hNaWxsaXMpIHtcbiAgICAgIGxhc3RGZXRjaFRpbWUgPSBub3c7XG4gICAgICBwZW5kaW5nTWV0YWRhdGEgPSBuZXcgR2F0ZXdheUZldGNoTWV0YWRhdGEoe1xuICAgICAgICBiYXNlVVJMLFxuICAgICAgICBoZWFkZXJzOiBnZXRIZWFkZXJzLFxuICAgICAgICBmZXRjaDogb3B0aW9ucy5mZXRjaFxuICAgICAgfSkuZ2V0QXZhaWxhYmxlTW9kZWxzKCkudGhlbigobWV0YWRhdGEpID0+IHtcbiAgICAgICAgbWV0YWRhdGFDYWNoZSA9IG1ldGFkYXRhO1xuICAgICAgICByZXR1cm4gbWV0YWRhdGE7XG4gICAgICB9KS5jYXRjaChhc3luYyAoZXJyb3IpID0+IHtcbiAgICAgICAgdGhyb3cgYXdhaXQgYXNHYXRld2F5RXJyb3IoXG4gICAgICAgICAgZXJyb3IsXG4gICAgICAgICAgYXdhaXQgcGFyc2VBdXRoTWV0aG9kKGF3YWl0IGdldEhlYWRlcnMoKSlcbiAgICAgICAgKTtcbiAgICAgIH0pO1xuICAgIH1cbiAgICByZXR1cm4gbWV0YWRhdGFDYWNoZSA/IFByb21pc2UucmVzb2x2ZShtZXRhZGF0YUNhY2hlKSA6IHBlbmRpbmdNZXRhZGF0YTtcbiAgfTtcbiAgY29uc3QgZ2V0Q3JlZGl0cyA9IGFzeW5jICgpID0+IHtcbiAgICByZXR1cm4gbmV3IEdhdGV3YXlGZXRjaE1ldGFkYXRhKHtcbiAgICAgIGJhc2VVUkwsXG4gICAgICBoZWFkZXJzOiBnZXRIZWFkZXJzLFxuICAgICAgZmV0Y2g6IG9wdGlvbnMuZmV0Y2hcbiAgICB9KS5nZXRDcmVkaXRzKCkuY2F0Y2goYXN5bmMgKGVycm9yKSA9PiB7XG4gICAgICB0aHJvdyBhd2FpdCBhc0dhdGV3YXlFcnJvcihcbiAgICAgICAgZXJyb3IsXG4gICAgICAgIGF3YWl0IHBhcnNlQXV0aE1ldGhvZChhd2FpdCBnZXRIZWFkZXJzKCkpXG4gICAgICApO1xuICAgIH0pO1xuICB9O1xuICBjb25zdCBwcm92aWRlciA9IGZ1bmN0aW9uKG1vZGVsSWQpIHtcbiAgICBpZiAobmV3LnRhcmdldCkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKFxuICAgICAgICBcIlRoZSBHYXRld2F5IFByb3ZpZGVyIG1vZGVsIGZ1bmN0aW9uIGNhbm5vdCBiZSBjYWxsZWQgd2l0aCB0aGUgbmV3IGtleXdvcmQuXCJcbiAgICAgICk7XG4gICAgfVxuICAgIHJldHVybiBjcmVhdGVMYW5ndWFnZU1vZGVsKG1vZGVsSWQpO1xuICB9O1xuICBwcm92aWRlci5zcGVjaWZpY2F0aW9uVmVyc2lvbiA9IFwidjNcIjtcbiAgcHJvdmlkZXIuZ2V0QXZhaWxhYmxlTW9kZWxzID0gZ2V0QXZhaWxhYmxlTW9kZWxzO1xuICBwcm92aWRlci5nZXRDcmVkaXRzID0gZ2V0Q3JlZGl0cztcbiAgcHJvdmlkZXIuaW1hZ2VNb2RlbCA9IChtb2RlbElkKSA9PiB7XG4gICAgcmV0dXJuIG5ldyBHYXRld2F5SW1hZ2VNb2RlbChtb2RlbElkLCB7XG4gICAgICBwcm92aWRlcjogXCJnYXRld2F5XCIsXG4gICAgICBiYXNlVVJMLFxuICAgICAgaGVhZGVyczogZ2V0SGVhZGVycyxcbiAgICAgIGZldGNoOiBvcHRpb25zLmZldGNoLFxuICAgICAgbzExeUhlYWRlcnM6IGNyZWF0ZU8xMXlIZWFkZXJzKClcbiAgICB9KTtcbiAgfTtcbiAgcHJvdmlkZXIubGFuZ3VhZ2VNb2RlbCA9IGNyZWF0ZUxhbmd1YWdlTW9kZWw7XG4gIGNvbnN0IGNyZWF0ZUVtYmVkZGluZ01vZGVsID0gKG1vZGVsSWQpID0+IHtcbiAgICByZXR1cm4gbmV3IEdhdGV3YXlFbWJlZGRpbmdNb2RlbChtb2RlbElkLCB7XG4gICAgICBwcm92aWRlcjogXCJnYXRld2F5XCIsXG4gICAgICBiYXNlVVJMLFxuICAgICAgaGVhZGVyczogZ2V0SGVhZGVycyxcbiAgICAgIGZldGNoOiBvcHRpb25zLmZldGNoLFxuICAgICAgbzExeUhlYWRlcnM6IGNyZWF0ZU8xMXlIZWFkZXJzKClcbiAgICB9KTtcbiAgfTtcbiAgcHJvdmlkZXIuZW1iZWRkaW5nTW9kZWwgPSBjcmVhdGVFbWJlZGRpbmdNb2RlbDtcbiAgcHJvdmlkZXIudGV4dEVtYmVkZGluZ01vZGVsID0gY3JlYXRlRW1iZWRkaW5nTW9kZWw7XG4gIHByb3ZpZGVyLnRvb2xzID0gZ2F0ZXdheVRvb2xzO1xuICByZXR1cm4gcHJvdmlkZXI7XG59XG52YXIgZ2F0ZXdheSA9IGNyZWF0ZUdhdGV3YXlQcm92aWRlcigpO1xuYXN5bmMgZnVuY3Rpb24gZ2V0R2F0ZXdheUF1dGhUb2tlbihvcHRpb25zKSB7XG4gIGNvbnN0IGFwaUtleSA9IGxvYWRPcHRpb25hbFNldHRpbmcoe1xuICAgIHNldHRpbmdWYWx1ZTogb3B0aW9ucy5hcGlLZXksXG4gICAgZW52aXJvbm1lbnRWYXJpYWJsZU5hbWU6IFwiQUlfR0FURVdBWV9BUElfS0VZXCJcbiAgfSk7XG4gIGlmIChhcGlLZXkpIHtcbiAgICByZXR1cm4ge1xuICAgICAgdG9rZW46IGFwaUtleSxcbiAgICAgIGF1dGhNZXRob2Q6IFwiYXBpLWtleVwiXG4gICAgfTtcbiAgfVxuICBjb25zdCBvaWRjVG9rZW4gPSBhd2FpdCBnZXRWZXJjZWxPaWRjVG9rZW4oKTtcbiAgcmV0dXJuIHtcbiAgICB0b2tlbjogb2lkY1Rva2VuLFxuICAgIGF1dGhNZXRob2Q6IFwib2lkY1wiXG4gIH07XG59XG5leHBvcnQge1xuICBHYXRld2F5QXV0aGVudGljYXRpb25FcnJvcixcbiAgR2F0ZXdheUVycm9yLFxuICBHYXRld2F5SW50ZXJuYWxTZXJ2ZXJFcnJvcixcbiAgR2F0ZXdheUludmFsaWRSZXF1ZXN0RXJyb3IsXG4gIEdhdGV3YXlNb2RlbE5vdEZvdW5kRXJyb3IsXG4gIEdhdGV3YXlSYXRlTGltaXRFcnJvcixcbiAgR2F0ZXdheVJlc3BvbnNlRXJyb3IsXG4gIGNyZWF0ZUdhdGV3YXlQcm92aWRlciBhcyBjcmVhdGVHYXRld2F5LFxuICBjcmVhdGVHYXRld2F5UHJvdmlkZXIsXG4gIGdhdGV3YXlcbn07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1pbmRleC5tanMubWFwIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@ai-sdk/gateway/dist/index.mjs\n");

/***/ }),

/***/ "(rsc)/./node_modules/@ai-sdk/openai/dist/index.mjs":
/*!****************************************************!*\
  !*** ./node_modules/@ai-sdk/openai/dist/index.mjs ***!
  \****************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   VERSION: () => (/* binding */ VERSION),\n/* harmony export */   createOpenAI: () => (/* binding */ createOpenAI),\n/* harmony export */   openai: () => (/* binding */ openai)\n/* harmony export */ });\n/* harmony import */ var _ai_sdk_provider_utils__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @ai-sdk/provider-utils */ \"(rsc)/./node_modules/@ai-sdk/provider-utils/dist/index.mjs\");\n/* harmony import */ var _ai_sdk_provider__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @ai-sdk/provider */ \"(rsc)/./node_modules/@ai-sdk/provider/dist/index.mjs\");\n/* harmony import */ var zod_v4__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! zod/v4 */ \"(rsc)/./node_modules/zod/v4/index.js\");\n// src/openai-provider.ts\n\n\n// src/chat/openai-chat-language-model.ts\n\n\n\n// src/openai-error.ts\n\n\nvar openaiErrorDataSchema = zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.object({\n  error: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.object({\n    message: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.string(),\n    // The additional information below is handled loosely to support\n    // OpenAI-compatible providers that have slightly different error\n    // responses:\n    type: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.string().nullish(),\n    param: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.any().nullish(),\n    code: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.union([zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.string(), zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.number()]).nullish()\n  })\n});\nvar openaiFailedResponseHandler = (0,_ai_sdk_provider_utils__WEBPACK_IMPORTED_MODULE_1__.createJsonErrorResponseHandler)({\n  errorSchema: openaiErrorDataSchema,\n  errorToMessage: (data) => data.error.message\n});\n\n// src/openai-language-model-capabilities.ts\nfunction getOpenAILanguageModelCapabilities(modelId) {\n  const supportsFlexProcessing = modelId.startsWith(\"o3\") || modelId.startsWith(\"o4-mini\") || modelId.startsWith(\"gpt-5\") && !modelId.startsWith(\"gpt-5-chat\");\n  const supportsPriorityProcessing = modelId.startsWith(\"gpt-4\") || modelId.startsWith(\"gpt-5-mini\") || modelId.startsWith(\"gpt-5\") && !modelId.startsWith(\"gpt-5-nano\") && !modelId.startsWith(\"gpt-5-chat\") || modelId.startsWith(\"o3\") || modelId.startsWith(\"o4-mini\");\n  const isReasoningModel = modelId.startsWith(\"o1\") || modelId.startsWith(\"o3\") || modelId.startsWith(\"o4-mini\") || modelId.startsWith(\"codex-mini\") || modelId.startsWith(\"computer-use-preview\") || modelId.startsWith(\"gpt-5\") && !modelId.startsWith(\"gpt-5-chat\");\n  const supportsNonReasoningParameters = modelId.startsWith(\"gpt-5.1\") || modelId.startsWith(\"gpt-5.2\");\n  const systemMessageMode = isReasoningModel ? \"developer\" : \"system\";\n  return {\n    supportsFlexProcessing,\n    supportsPriorityProcessing,\n    isReasoningModel,\n    systemMessageMode,\n    supportsNonReasoningParameters\n  };\n}\n\n// src/chat/convert-openai-chat-usage.ts\nfunction convertOpenAIChatUsage(usage) {\n  var _a, _b, _c, _d, _e, _f;\n  if (usage == null) {\n    return {\n      inputTokens: {\n        total: void 0,\n        noCache: void 0,\n        cacheRead: void 0,\n        cacheWrite: void 0\n      },\n      outputTokens: {\n        total: void 0,\n        text: void 0,\n        reasoning: void 0\n      },\n      raw: void 0\n    };\n  }\n  const promptTokens = (_a = usage.prompt_tokens) != null ? _a : 0;\n  const completionTokens = (_b = usage.completion_tokens) != null ? _b : 0;\n  const cachedTokens = (_d = (_c = usage.prompt_tokens_details) == null ? void 0 : _c.cached_tokens) != null ? _d : 0;\n  const reasoningTokens = (_f = (_e = usage.completion_tokens_details) == null ? void 0 : _e.reasoning_tokens) != null ? _f : 0;\n  return {\n    inputTokens: {\n      total: promptTokens,\n      noCache: promptTokens - cachedTokens,\n      cacheRead: cachedTokens,\n      cacheWrite: void 0\n    },\n    outputTokens: {\n      total: completionTokens,\n      text: completionTokens - reasoningTokens,\n      reasoning: reasoningTokens\n    },\n    raw: usage\n  };\n}\n\n// src/chat/convert-to-openai-chat-messages.ts\n\n\nfunction convertToOpenAIChatMessages({\n  prompt,\n  systemMessageMode = \"system\"\n}) {\n  var _a;\n  const messages = [];\n  const warnings = [];\n  for (const { role, content } of prompt) {\n    switch (role) {\n      case \"system\": {\n        switch (systemMessageMode) {\n          case \"system\": {\n            messages.push({ role: \"system\", content });\n            break;\n          }\n          case \"developer\": {\n            messages.push({ role: \"developer\", content });\n            break;\n          }\n          case \"remove\": {\n            warnings.push({\n              type: \"other\",\n              message: \"system messages are removed for this model\"\n            });\n            break;\n          }\n          default: {\n            const _exhaustiveCheck = systemMessageMode;\n            throw new Error(\n              `Unsupported system message mode: ${_exhaustiveCheck}`\n            );\n          }\n        }\n        break;\n      }\n      case \"user\": {\n        if (content.length === 1 && content[0].type === \"text\") {\n          messages.push({ role: \"user\", content: content[0].text });\n          break;\n        }\n        messages.push({\n          role: \"user\",\n          content: content.map((part, index) => {\n            var _a2, _b, _c;\n            switch (part.type) {\n              case \"text\": {\n                return { type: \"text\", text: part.text };\n              }\n              case \"file\": {\n                if (part.mediaType.startsWith(\"image/\")) {\n                  const mediaType = part.mediaType === \"image/*\" ? \"image/jpeg\" : part.mediaType;\n                  return {\n                    type: \"image_url\",\n                    image_url: {\n                      url: part.data instanceof URL ? part.data.toString() : `data:${mediaType};base64,${(0,_ai_sdk_provider_utils__WEBPACK_IMPORTED_MODULE_1__.convertToBase64)(part.data)}`,\n                      // OpenAI specific extension: image detail\n                      detail: (_b = (_a2 = part.providerOptions) == null ? void 0 : _a2.openai) == null ? void 0 : _b.imageDetail\n                    }\n                  };\n                } else if (part.mediaType.startsWith(\"audio/\")) {\n                  if (part.data instanceof URL) {\n                    throw new _ai_sdk_provider__WEBPACK_IMPORTED_MODULE_2__.UnsupportedFunctionalityError({\n                      functionality: \"audio file parts with URLs\"\n                    });\n                  }\n                  switch (part.mediaType) {\n                    case \"audio/wav\": {\n                      return {\n                        type: \"input_audio\",\n                        input_audio: {\n                          data: (0,_ai_sdk_provider_utils__WEBPACK_IMPORTED_MODULE_1__.convertToBase64)(part.data),\n                          format: \"wav\"\n                        }\n                      };\n                    }\n                    case \"audio/mp3\":\n                    case \"audio/mpeg\": {\n                      return {\n                        type: \"input_audio\",\n                        input_audio: {\n                          data: (0,_ai_sdk_provider_utils__WEBPACK_IMPORTED_MODULE_1__.convertToBase64)(part.data),\n                          format: \"mp3\"\n                        }\n                      };\n                    }\n                    default: {\n                      throw new _ai_sdk_provider__WEBPACK_IMPORTED_MODULE_2__.UnsupportedFunctionalityError({\n                        functionality: `audio content parts with media type ${part.mediaType}`\n                      });\n                    }\n                  }\n                } else if (part.mediaType === \"application/pdf\") {\n                  if (part.data instanceof URL) {\n                    throw new _ai_sdk_provider__WEBPACK_IMPORTED_MODULE_2__.UnsupportedFunctionalityError({\n                      functionality: \"PDF file parts with URLs\"\n                    });\n                  }\n                  return {\n                    type: \"file\",\n                    file: typeof part.data === \"string\" && part.data.startsWith(\"file-\") ? { file_id: part.data } : {\n                      filename: (_c = part.filename) != null ? _c : `part-${index}.pdf`,\n                      file_data: `data:application/pdf;base64,${(0,_ai_sdk_provider_utils__WEBPACK_IMPORTED_MODULE_1__.convertToBase64)(part.data)}`\n                    }\n                  };\n                } else {\n                  throw new _ai_sdk_provider__WEBPACK_IMPORTED_MODULE_2__.UnsupportedFunctionalityError({\n                    functionality: `file part media type ${part.mediaType}`\n                  });\n                }\n              }\n            }\n          })\n        });\n        break;\n      }\n      case \"assistant\": {\n        let text = \"\";\n        const toolCalls = [];\n        for (const part of content) {\n          switch (part.type) {\n            case \"text\": {\n              text += part.text;\n              break;\n            }\n            case \"tool-call\": {\n              toolCalls.push({\n                id: part.toolCallId,\n                type: \"function\",\n                function: {\n                  name: part.toolName,\n                  arguments: JSON.stringify(part.input)\n                }\n              });\n              break;\n            }\n          }\n        }\n        messages.push({\n          role: \"assistant\",\n          content: text,\n          tool_calls: toolCalls.length > 0 ? toolCalls : void 0\n        });\n        break;\n      }\n      case \"tool\": {\n        for (const toolResponse of content) {\n          if (toolResponse.type === \"tool-approval-response\") {\n            continue;\n          }\n          const output = toolResponse.output;\n          let contentValue;\n          switch (output.type) {\n            case \"text\":\n            case \"error-text\":\n              contentValue = output.value;\n              break;\n            case \"execution-denied\":\n              contentValue = (_a = output.reason) != null ? _a : \"Tool execution denied.\";\n              break;\n            case \"content\":\n            case \"json\":\n            case \"error-json\":\n              contentValue = JSON.stringify(output.value);\n              break;\n          }\n          messages.push({\n            role: \"tool\",\n            tool_call_id: toolResponse.toolCallId,\n            content: contentValue\n          });\n        }\n        break;\n      }\n      default: {\n        const _exhaustiveCheck = role;\n        throw new Error(`Unsupported role: ${_exhaustiveCheck}`);\n      }\n    }\n  }\n  return { messages, warnings };\n}\n\n// src/chat/get-response-metadata.ts\nfunction getResponseMetadata({\n  id,\n  model,\n  created\n}) {\n  return {\n    id: id != null ? id : void 0,\n    modelId: model != null ? model : void 0,\n    timestamp: created ? new Date(created * 1e3) : void 0\n  };\n}\n\n// src/chat/map-openai-finish-reason.ts\nfunction mapOpenAIFinishReason(finishReason) {\n  switch (finishReason) {\n    case \"stop\":\n      return \"stop\";\n    case \"length\":\n      return \"length\";\n    case \"content_filter\":\n      return \"content-filter\";\n    case \"function_call\":\n    case \"tool_calls\":\n      return \"tool-calls\";\n    default:\n      return \"other\";\n  }\n}\n\n// src/chat/openai-chat-api.ts\n\n\nvar openaiChatResponseSchema = (0,_ai_sdk_provider_utils__WEBPACK_IMPORTED_MODULE_1__.lazySchema)(\n  () => (0,_ai_sdk_provider_utils__WEBPACK_IMPORTED_MODULE_1__.zodSchema)(\n    zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.object({\n      id: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.string().nullish(),\n      created: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.number().nullish(),\n      model: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.string().nullish(),\n      choices: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.array(\n        zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.object({\n          message: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.object({\n            role: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.literal(\"assistant\").nullish(),\n            content: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.string().nullish(),\n            tool_calls: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.array(\n              zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.object({\n                id: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.string().nullish(),\n                type: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.literal(\"function\"),\n                function: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.object({\n                  name: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.string(),\n                  arguments: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.string()\n                })\n              })\n            ).nullish(),\n            annotations: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.array(\n              zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.object({\n                type: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.literal(\"url_citation\"),\n                url_citation: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.object({\n                  start_index: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.number(),\n                  end_index: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.number(),\n                  url: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.string(),\n                  title: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.string()\n                })\n              })\n            ).nullish()\n          }),\n          index: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.number(),\n          logprobs: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.object({\n            content: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.array(\n              zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.object({\n                token: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.string(),\n                logprob: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.number(),\n                top_logprobs: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.array(\n                  zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.object({\n                    token: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.string(),\n                    logprob: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.number()\n                  })\n                )\n              })\n            ).nullish()\n          }).nullish(),\n          finish_reason: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.string().nullish()\n        })\n      ),\n      usage: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.object({\n        prompt_tokens: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.number().nullish(),\n        completion_tokens: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.number().nullish(),\n        total_tokens: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.number().nullish(),\n        prompt_tokens_details: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.object({\n          cached_tokens: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.number().nullish()\n        }).nullish(),\n        completion_tokens_details: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.object({\n          reasoning_tokens: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.number().nullish(),\n          accepted_prediction_tokens: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.number().nullish(),\n          rejected_prediction_tokens: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.number().nullish()\n        }).nullish()\n      }).nullish()\n    })\n  )\n);\nvar openaiChatChunkSchema = (0,_ai_sdk_provider_utils__WEBPACK_IMPORTED_MODULE_1__.lazySchema)(\n  () => (0,_ai_sdk_provider_utils__WEBPACK_IMPORTED_MODULE_1__.zodSchema)(\n    zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.union([\n      zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.object({\n        id: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.string().nullish(),\n        created: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.number().nullish(),\n        model: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.string().nullish(),\n        choices: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.array(\n          zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.object({\n            delta: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.object({\n              role: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z[\"enum\"]([\"assistant\"]).nullish(),\n              content: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.string().nullish(),\n              tool_calls: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.array(\n                zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.object({\n                  index: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.number(),\n                  id: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.string().nullish(),\n                  type: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.literal(\"function\").nullish(),\n                  function: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.object({\n                    name: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.string().nullish(),\n                    arguments: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.string().nullish()\n                  })\n                })\n              ).nullish(),\n              annotations: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.array(\n                zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.object({\n                  type: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.literal(\"url_citation\"),\n                  url_citation: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.object({\n                    start_index: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.number(),\n                    end_index: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.number(),\n                    url: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.string(),\n                    title: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.string()\n                  })\n                })\n              ).nullish()\n            }).nullish(),\n            logprobs: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.object({\n              content: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.array(\n                zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.object({\n                  token: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.string(),\n                  logprob: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.number(),\n                  top_logprobs: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.array(\n                    zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.object({\n                      token: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.string(),\n                      logprob: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.number()\n                    })\n                  )\n                })\n              ).nullish()\n            }).nullish(),\n            finish_reason: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.string().nullish(),\n            index: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.number()\n          })\n        ),\n        usage: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.object({\n          prompt_tokens: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.number().nullish(),\n          completion_tokens: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.number().nullish(),\n          total_tokens: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.number().nullish(),\n          prompt_tokens_details: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.object({\n            cached_tokens: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.number().nullish()\n          }).nullish(),\n          completion_tokens_details: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.object({\n            reasoning_tokens: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.number().nullish(),\n            accepted_prediction_tokens: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.number().nullish(),\n            rejected_prediction_tokens: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.number().nullish()\n          }).nullish()\n        }).nullish()\n      }),\n      openaiErrorDataSchema\n    ])\n  )\n);\n\n// src/chat/openai-chat-options.ts\n\n\nvar openaiChatLanguageModelOptions = (0,_ai_sdk_provider_utils__WEBPACK_IMPORTED_MODULE_1__.lazySchema)(\n  () => (0,_ai_sdk_provider_utils__WEBPACK_IMPORTED_MODULE_1__.zodSchema)(\n    zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.object({\n      /**\n       * Modify the likelihood of specified tokens appearing in the completion.\n       *\n       * Accepts a JSON object that maps tokens (specified by their token ID in\n       * the GPT tokenizer) to an associated bias value from -100 to 100.\n       */\n      logitBias: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.record(zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.coerce.number(), zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.number()).optional(),\n      /**\n       * Return the log probabilities of the tokens.\n       *\n       * Setting to true will return the log probabilities of the tokens that\n       * were generated.\n       *\n       * Setting to a number will return the log probabilities of the top n\n       * tokens that were generated.\n       */\n      logprobs: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.union([zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.boolean(), zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.number()]).optional(),\n      /**\n       * Whether to enable parallel function calling during tool use. Default to true.\n       */\n      parallelToolCalls: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.boolean().optional(),\n      /**\n       * A unique identifier representing your end-user, which can help OpenAI to\n       * monitor and detect abuse.\n       */\n      user: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.string().optional(),\n      /**\n       * Reasoning effort for reasoning models. Defaults to `medium`.\n       */\n      reasoningEffort: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z[\"enum\"]([\"none\", \"minimal\", \"low\", \"medium\", \"high\", \"xhigh\"]).optional(),\n      /**\n       * Maximum number of completion tokens to generate. Useful for reasoning models.\n       */\n      maxCompletionTokens: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.number().optional(),\n      /**\n       * Whether to enable persistence in responses API.\n       */\n      store: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.boolean().optional(),\n      /**\n       * Metadata to associate with the request.\n       */\n      metadata: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.record(zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.string().max(64), zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.string().max(512)).optional(),\n      /**\n       * Parameters for prediction mode.\n       */\n      prediction: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.record(zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.string(), zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.any()).optional(),\n      /**\n       * Service tier for the request.\n       * - 'auto': Default service tier. The request will be processed with the service tier configured in the\n       *           Project settings. Unless otherwise configured, the Project will use 'default'.\n       * - 'flex': 50% cheaper processing at the cost of increased latency. Only available for o3 and o4-mini models.\n       * - 'priority': Higher-speed processing with predictably low latency at premium cost. Available for Enterprise customers.\n       * - 'default': The request will be processed with the standard pricing and performance for the selected model.\n       *\n       * @default 'auto'\n       */\n      serviceTier: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z[\"enum\"]([\"auto\", \"flex\", \"priority\", \"default\"]).optional(),\n      /**\n       * Whether to use strict JSON schema validation.\n       *\n       * @default true\n       */\n      strictJsonSchema: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.boolean().optional(),\n      /**\n       * Controls the verbosity of the model's responses.\n       * Lower values will result in more concise responses, while higher values will result in more verbose responses.\n       */\n      textVerbosity: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z[\"enum\"]([\"low\", \"medium\", \"high\"]).optional(),\n      /**\n       * A cache key for prompt caching. Allows manual control over prompt caching behavior.\n       * Useful for improving cache hit rates and working around automatic caching issues.\n       */\n      promptCacheKey: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.string().optional(),\n      /**\n       * The retention policy for the prompt cache.\n       * - 'in_memory': Default. Standard prompt caching behavior.\n       * - '24h': Extended prompt caching that keeps cached prefixes active for up to 24 hours.\n       *          Currently only available for 5.1 series models.\n       *\n       * @default 'in_memory'\n       */\n      promptCacheRetention: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z[\"enum\"]([\"in_memory\", \"24h\"]).optional(),\n      /**\n       * A stable identifier used to help detect users of your application\n       * that may be violating OpenAI's usage policies. The IDs should be a\n       * string that uniquely identifies each user. We recommend hashing their\n       * username or email address, in order to avoid sending us any identifying\n       * information.\n       */\n      safetyIdentifier: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.string().optional(),\n      /**\n       * Override the system message mode for this model.\n       * - 'system': Use the 'system' role for system messages (default for most models)\n       * - 'developer': Use the 'developer' role for system messages (used by reasoning models)\n       * - 'remove': Remove system messages entirely\n       *\n       * If not specified, the mode is automatically determined based on the model.\n       */\n      systemMessageMode: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z[\"enum\"]([\"system\", \"developer\", \"remove\"]).optional(),\n      /**\n       * Force treating this model as a reasoning model.\n       *\n       * This is useful for \"stealth\" reasoning models (e.g. via a custom baseURL)\n       * where the model ID is not recognized by the SDK's allowlist.\n       *\n       * When enabled, the SDK applies reasoning-model parameter compatibility rules\n       * and defaults `systemMessageMode` to `developer` unless overridden.\n       */\n      forceReasoning: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.boolean().optional()\n    })\n  )\n);\n\n// src/chat/openai-chat-prepare-tools.ts\n\nfunction prepareChatTools({\n  tools,\n  toolChoice\n}) {\n  tools = (tools == null ? void 0 : tools.length) ? tools : void 0;\n  const toolWarnings = [];\n  if (tools == null) {\n    return { tools: void 0, toolChoice: void 0, toolWarnings };\n  }\n  const openaiTools2 = [];\n  for (const tool of tools) {\n    switch (tool.type) {\n      case \"function\":\n        openaiTools2.push({\n          type: \"function\",\n          function: {\n            name: tool.name,\n            description: tool.description,\n            parameters: tool.inputSchema,\n            ...tool.strict != null ? { strict: tool.strict } : {}\n          }\n        });\n        break;\n      default:\n        toolWarnings.push({\n          type: \"unsupported\",\n          feature: `tool type: ${tool.type}`\n        });\n        break;\n    }\n  }\n  if (toolChoice == null) {\n    return { tools: openaiTools2, toolChoice: void 0, toolWarnings };\n  }\n  const type = toolChoice.type;\n  switch (type) {\n    case \"auto\":\n    case \"none\":\n    case \"required\":\n      return { tools: openaiTools2, toolChoice: type, toolWarnings };\n    case \"tool\":\n      return {\n        tools: openaiTools2,\n        toolChoice: {\n          type: \"function\",\n          function: {\n            name: toolChoice.toolName\n          }\n        },\n        toolWarnings\n      };\n    default: {\n      const _exhaustiveCheck = type;\n      throw new _ai_sdk_provider__WEBPACK_IMPORTED_MODULE_2__.UnsupportedFunctionalityError({\n        functionality: `tool choice type: ${_exhaustiveCheck}`\n      });\n    }\n  }\n}\n\n// src/chat/openai-chat-language-model.ts\nvar OpenAIChatLanguageModel = class {\n  constructor(modelId, config) {\n    this.specificationVersion = \"v3\";\n    this.supportedUrls = {\n      \"image/*\": [/^https?:\\/\\/.*$/]\n    };\n    this.modelId = modelId;\n    this.config = config;\n  }\n  get provider() {\n    return this.config.provider;\n  }\n  async getArgs({\n    prompt,\n    maxOutputTokens,\n    temperature,\n    topP,\n    topK,\n    frequencyPenalty,\n    presencePenalty,\n    stopSequences,\n    responseFormat,\n    seed,\n    tools,\n    toolChoice,\n    providerOptions\n  }) {\n    var _a, _b, _c, _d, _e;\n    const warnings = [];\n    const openaiOptions = (_a = await (0,_ai_sdk_provider_utils__WEBPACK_IMPORTED_MODULE_1__.parseProviderOptions)({\n      provider: \"openai\",\n      providerOptions,\n      schema: openaiChatLanguageModelOptions\n    })) != null ? _a : {};\n    const modelCapabilities = getOpenAILanguageModelCapabilities(this.modelId);\n    const isReasoningModel = (_b = openaiOptions.forceReasoning) != null ? _b : modelCapabilities.isReasoningModel;\n    if (topK != null) {\n      warnings.push({ type: \"unsupported\", feature: \"topK\" });\n    }\n    const { messages, warnings: messageWarnings } = convertToOpenAIChatMessages(\n      {\n        prompt,\n        systemMessageMode: (_c = openaiOptions.systemMessageMode) != null ? _c : isReasoningModel ? \"developer\" : modelCapabilities.systemMessageMode\n      }\n    );\n    warnings.push(...messageWarnings);\n    const strictJsonSchema = (_d = openaiOptions.strictJsonSchema) != null ? _d : true;\n    const baseArgs = {\n      // model id:\n      model: this.modelId,\n      // model specific settings:\n      logit_bias: openaiOptions.logitBias,\n      logprobs: openaiOptions.logprobs === true || typeof openaiOptions.logprobs === \"number\" ? true : void 0,\n      top_logprobs: typeof openaiOptions.logprobs === \"number\" ? openaiOptions.logprobs : typeof openaiOptions.logprobs === \"boolean\" ? openaiOptions.logprobs ? 0 : void 0 : void 0,\n      user: openaiOptions.user,\n      parallel_tool_calls: openaiOptions.parallelToolCalls,\n      // standardized settings:\n      max_tokens: maxOutputTokens,\n      temperature,\n      top_p: topP,\n      frequency_penalty: frequencyPenalty,\n      presence_penalty: presencePenalty,\n      response_format: (responseFormat == null ? void 0 : responseFormat.type) === \"json\" ? responseFormat.schema != null ? {\n        type: \"json_schema\",\n        json_schema: {\n          schema: responseFormat.schema,\n          strict: strictJsonSchema,\n          name: (_e = responseFormat.name) != null ? _e : \"response\",\n          description: responseFormat.description\n        }\n      } : { type: \"json_object\" } : void 0,\n      stop: stopSequences,\n      seed,\n      verbosity: openaiOptions.textVerbosity,\n      // openai specific settings:\n      // TODO AI SDK 6: remove, we auto-map maxOutputTokens now\n      max_completion_tokens: openaiOptions.maxCompletionTokens,\n      store: openaiOptions.store,\n      metadata: openaiOptions.metadata,\n      prediction: openaiOptions.prediction,\n      reasoning_effort: openaiOptions.reasoningEffort,\n      service_tier: openaiOptions.serviceTier,\n      prompt_cache_key: openaiOptions.promptCacheKey,\n      prompt_cache_retention: openaiOptions.promptCacheRetention,\n      safety_identifier: openaiOptions.safetyIdentifier,\n      // messages:\n      messages\n    };\n    if (isReasoningModel) {\n      if (openaiOptions.reasoningEffort !== \"none\" || !modelCapabilities.supportsNonReasoningParameters) {\n        if (baseArgs.temperature != null) {\n          baseArgs.temperature = void 0;\n          warnings.push({\n            type: \"unsupported\",\n            feature: \"temperature\",\n            details: \"temperature is not supported for reasoning models\"\n          });\n        }\n        if (baseArgs.top_p != null) {\n          baseArgs.top_p = void 0;\n          warnings.push({\n            type: \"unsupported\",\n            feature: \"topP\",\n            details: \"topP is not supported for reasoning models\"\n          });\n        }\n        if (baseArgs.logprobs != null) {\n          baseArgs.logprobs = void 0;\n          warnings.push({\n            type: \"other\",\n            message: \"logprobs is not supported for reasoning models\"\n          });\n        }\n      }\n      if (baseArgs.frequency_penalty != null) {\n        baseArgs.frequency_penalty = void 0;\n        warnings.push({\n          type: \"unsupported\",\n          feature: \"frequencyPenalty\",\n          details: \"frequencyPenalty is not supported for reasoning models\"\n        });\n      }\n      if (baseArgs.presence_penalty != null) {\n        baseArgs.presence_penalty = void 0;\n        warnings.push({\n          type: \"unsupported\",\n          feature: \"presencePenalty\",\n          details: \"presencePenalty is not supported for reasoning models\"\n        });\n      }\n      if (baseArgs.logit_bias != null) {\n        baseArgs.logit_bias = void 0;\n        warnings.push({\n          type: \"other\",\n          message: \"logitBias is not supported for reasoning models\"\n        });\n      }\n      if (baseArgs.top_logprobs != null) {\n        baseArgs.top_logprobs = void 0;\n        warnings.push({\n          type: \"other\",\n          message: \"topLogprobs is not supported for reasoning models\"\n        });\n      }\n      if (baseArgs.max_tokens != null) {\n        if (baseArgs.max_completion_tokens == null) {\n          baseArgs.max_completion_tokens = baseArgs.max_tokens;\n        }\n        baseArgs.max_tokens = void 0;\n      }\n    } else if (this.modelId.startsWith(\"gpt-4o-search-preview\") || this.modelId.startsWith(\"gpt-4o-mini-search-preview\")) {\n      if (baseArgs.temperature != null) {\n        baseArgs.temperature = void 0;\n        warnings.push({\n          type: \"unsupported\",\n          feature: \"temperature\",\n          details: \"temperature is not supported for the search preview models and has been removed.\"\n        });\n      }\n    }\n    if (openaiOptions.serviceTier === \"flex\" && !modelCapabilities.supportsFlexProcessing) {\n      warnings.push({\n        type: \"unsupported\",\n        feature: \"serviceTier\",\n        details: \"flex processing is only available for o3, o4-mini, and gpt-5 models\"\n      });\n      baseArgs.service_tier = void 0;\n    }\n    if (openaiOptions.serviceTier === \"priority\" && !modelCapabilities.supportsPriorityProcessing) {\n      warnings.push({\n        type: \"unsupported\",\n        feature: \"serviceTier\",\n        details: \"priority processing is only available for supported models (gpt-4, gpt-5, gpt-5-mini, o3, o4-mini) and requires Enterprise access. gpt-5-nano is not supported\"\n      });\n      baseArgs.service_tier = void 0;\n    }\n    const {\n      tools: openaiTools2,\n      toolChoice: openaiToolChoice,\n      toolWarnings\n    } = prepareChatTools({\n      tools,\n      toolChoice\n    });\n    return {\n      args: {\n        ...baseArgs,\n        tools: openaiTools2,\n        tool_choice: openaiToolChoice\n      },\n      warnings: [...warnings, ...toolWarnings]\n    };\n  }\n  async doGenerate(options) {\n    var _a, _b, _c, _d, _e, _f, _g;\n    const { args: body, warnings } = await this.getArgs(options);\n    const {\n      responseHeaders,\n      value: response,\n      rawValue: rawResponse\n    } = await (0,_ai_sdk_provider_utils__WEBPACK_IMPORTED_MODULE_1__.postJsonToApi)({\n      url: this.config.url({\n        path: \"/chat/completions\",\n        modelId: this.modelId\n      }),\n      headers: (0,_ai_sdk_provider_utils__WEBPACK_IMPORTED_MODULE_1__.combineHeaders)(this.config.headers(), options.headers),\n      body,\n      failedResponseHandler: openaiFailedResponseHandler,\n      successfulResponseHandler: (0,_ai_sdk_provider_utils__WEBPACK_IMPORTED_MODULE_1__.createJsonResponseHandler)(\n        openaiChatResponseSchema\n      ),\n      abortSignal: options.abortSignal,\n      fetch: this.config.fetch\n    });\n    const choice = response.choices[0];\n    const content = [];\n    const text = choice.message.content;\n    if (text != null && text.length > 0) {\n      content.push({ type: \"text\", text });\n    }\n    for (const toolCall of (_a = choice.message.tool_calls) != null ? _a : []) {\n      content.push({\n        type: \"tool-call\",\n        toolCallId: (_b = toolCall.id) != null ? _b : (0,_ai_sdk_provider_utils__WEBPACK_IMPORTED_MODULE_1__.generateId)(),\n        toolName: toolCall.function.name,\n        input: toolCall.function.arguments\n      });\n    }\n    for (const annotation of (_c = choice.message.annotations) != null ? _c : []) {\n      content.push({\n        type: \"source\",\n        sourceType: \"url\",\n        id: (0,_ai_sdk_provider_utils__WEBPACK_IMPORTED_MODULE_1__.generateId)(),\n        url: annotation.url_citation.url,\n        title: annotation.url_citation.title\n      });\n    }\n    const completionTokenDetails = (_d = response.usage) == null ? void 0 : _d.completion_tokens_details;\n    const promptTokenDetails = (_e = response.usage) == null ? void 0 : _e.prompt_tokens_details;\n    const providerMetadata = { openai: {} };\n    if ((completionTokenDetails == null ? void 0 : completionTokenDetails.accepted_prediction_tokens) != null) {\n      providerMetadata.openai.acceptedPredictionTokens = completionTokenDetails == null ? void 0 : completionTokenDetails.accepted_prediction_tokens;\n    }\n    if ((completionTokenDetails == null ? void 0 : completionTokenDetails.rejected_prediction_tokens) != null) {\n      providerMetadata.openai.rejectedPredictionTokens = completionTokenDetails == null ? void 0 : completionTokenDetails.rejected_prediction_tokens;\n    }\n    if (((_f = choice.logprobs) == null ? void 0 : _f.content) != null) {\n      providerMetadata.openai.logprobs = choice.logprobs.content;\n    }\n    return {\n      content,\n      finishReason: {\n        unified: mapOpenAIFinishReason(choice.finish_reason),\n        raw: (_g = choice.finish_reason) != null ? _g : void 0\n      },\n      usage: convertOpenAIChatUsage(response.usage),\n      request: { body },\n      response: {\n        ...getResponseMetadata(response),\n        headers: responseHeaders,\n        body: rawResponse\n      },\n      warnings,\n      providerMetadata\n    };\n  }\n  async doStream(options) {\n    const { args, warnings } = await this.getArgs(options);\n    const body = {\n      ...args,\n      stream: true,\n      stream_options: {\n        include_usage: true\n      }\n    };\n    const { responseHeaders, value: response } = await (0,_ai_sdk_provider_utils__WEBPACK_IMPORTED_MODULE_1__.postJsonToApi)({\n      url: this.config.url({\n        path: \"/chat/completions\",\n        modelId: this.modelId\n      }),\n      headers: (0,_ai_sdk_provider_utils__WEBPACK_IMPORTED_MODULE_1__.combineHeaders)(this.config.headers(), options.headers),\n      body,\n      failedResponseHandler: openaiFailedResponseHandler,\n      successfulResponseHandler: (0,_ai_sdk_provider_utils__WEBPACK_IMPORTED_MODULE_1__.createEventSourceResponseHandler)(\n        openaiChatChunkSchema\n      ),\n      abortSignal: options.abortSignal,\n      fetch: this.config.fetch\n    });\n    const toolCalls = [];\n    let finishReason = {\n      unified: \"other\",\n      raw: void 0\n    };\n    let usage = void 0;\n    let metadataExtracted = false;\n    let isActiveText = false;\n    const providerMetadata = { openai: {} };\n    return {\n      stream: response.pipeThrough(\n        new TransformStream({\n          start(controller) {\n            controller.enqueue({ type: \"stream-start\", warnings });\n          },\n          transform(chunk, controller) {\n            var _a, _b, _c, _d, _e, _f, _g, _h, _i, _j, _k, _l, _m, _n, _o, _p, _q;\n            if (options.includeRawChunks) {\n              controller.enqueue({ type: \"raw\", rawValue: chunk.rawValue });\n            }\n            if (!chunk.success) {\n              finishReason = { unified: \"error\", raw: void 0 };\n              controller.enqueue({ type: \"error\", error: chunk.error });\n              return;\n            }\n            const value = chunk.value;\n            if (\"error\" in value) {\n              finishReason = { unified: \"error\", raw: void 0 };\n              controller.enqueue({ type: \"error\", error: value.error });\n              return;\n            }\n            if (!metadataExtracted) {\n              const metadata = getResponseMetadata(value);\n              if (Object.values(metadata).some(Boolean)) {\n                metadataExtracted = true;\n                controller.enqueue({\n                  type: \"response-metadata\",\n                  ...getResponseMetadata(value)\n                });\n              }\n            }\n            if (value.usage != null) {\n              usage = value.usage;\n              if (((_a = value.usage.completion_tokens_details) == null ? void 0 : _a.accepted_prediction_tokens) != null) {\n                providerMetadata.openai.acceptedPredictionTokens = (_b = value.usage.completion_tokens_details) == null ? void 0 : _b.accepted_prediction_tokens;\n              }\n              if (((_c = value.usage.completion_tokens_details) == null ? void 0 : _c.rejected_prediction_tokens) != null) {\n                providerMetadata.openai.rejectedPredictionTokens = (_d = value.usage.completion_tokens_details) == null ? void 0 : _d.rejected_prediction_tokens;\n              }\n            }\n            const choice = value.choices[0];\n            if ((choice == null ? void 0 : choice.finish_reason) != null) {\n              finishReason = {\n                unified: mapOpenAIFinishReason(choice.finish_reason),\n                raw: choice.finish_reason\n              };\n            }\n            if (((_e = choice == null ? void 0 : choice.logprobs) == null ? void 0 : _e.content) != null) {\n              providerMetadata.openai.logprobs = choice.logprobs.content;\n            }\n            if ((choice == null ? void 0 : choice.delta) == null) {\n              return;\n            }\n            const delta = choice.delta;\n            if (delta.content != null) {\n              if (!isActiveText) {\n                controller.enqueue({ type: \"text-start\", id: \"0\" });\n                isActiveText = true;\n              }\n              controller.enqueue({\n                type: \"text-delta\",\n                id: \"0\",\n                delta: delta.content\n              });\n            }\n            if (delta.tool_calls != null) {\n              for (const toolCallDelta of delta.tool_calls) {\n                const index = toolCallDelta.index;\n                if (toolCalls[index] == null) {\n                  if (toolCallDelta.type !== \"function\") {\n                    throw new _ai_sdk_provider__WEBPACK_IMPORTED_MODULE_2__.InvalidResponseDataError({\n                      data: toolCallDelta,\n                      message: `Expected 'function' type.`\n                    });\n                  }\n                  if (toolCallDelta.id == null) {\n                    throw new _ai_sdk_provider__WEBPACK_IMPORTED_MODULE_2__.InvalidResponseDataError({\n                      data: toolCallDelta,\n                      message: `Expected 'id' to be a string.`\n                    });\n                  }\n                  if (((_f = toolCallDelta.function) == null ? void 0 : _f.name) == null) {\n                    throw new _ai_sdk_provider__WEBPACK_IMPORTED_MODULE_2__.InvalidResponseDataError({\n                      data: toolCallDelta,\n                      message: `Expected 'function.name' to be a string.`\n                    });\n                  }\n                  controller.enqueue({\n                    type: \"tool-input-start\",\n                    id: toolCallDelta.id,\n                    toolName: toolCallDelta.function.name\n                  });\n                  toolCalls[index] = {\n                    id: toolCallDelta.id,\n                    type: \"function\",\n                    function: {\n                      name: toolCallDelta.function.name,\n                      arguments: (_g = toolCallDelta.function.arguments) != null ? _g : \"\"\n                    },\n                    hasFinished: false\n                  };\n                  const toolCall2 = toolCalls[index];\n                  if (((_h = toolCall2.function) == null ? void 0 : _h.name) != null && ((_i = toolCall2.function) == null ? void 0 : _i.arguments) != null) {\n                    if (toolCall2.function.arguments.length > 0) {\n                      controller.enqueue({\n                        type: \"tool-input-delta\",\n                        id: toolCall2.id,\n                        delta: toolCall2.function.arguments\n                      });\n                    }\n                    if ((0,_ai_sdk_provider_utils__WEBPACK_IMPORTED_MODULE_1__.isParsableJson)(toolCall2.function.arguments)) {\n                      controller.enqueue({\n                        type: \"tool-input-end\",\n                        id: toolCall2.id\n                      });\n                      controller.enqueue({\n                        type: \"tool-call\",\n                        toolCallId: (_j = toolCall2.id) != null ? _j : (0,_ai_sdk_provider_utils__WEBPACK_IMPORTED_MODULE_1__.generateId)(),\n                        toolName: toolCall2.function.name,\n                        input: toolCall2.function.arguments\n                      });\n                      toolCall2.hasFinished = true;\n                    }\n                  }\n                  continue;\n                }\n                const toolCall = toolCalls[index];\n                if (toolCall.hasFinished) {\n                  continue;\n                }\n                if (((_k = toolCallDelta.function) == null ? void 0 : _k.arguments) != null) {\n                  toolCall.function.arguments += (_m = (_l = toolCallDelta.function) == null ? void 0 : _l.arguments) != null ? _m : \"\";\n                }\n                controller.enqueue({\n                  type: \"tool-input-delta\",\n                  id: toolCall.id,\n                  delta: (_n = toolCallDelta.function.arguments) != null ? _n : \"\"\n                });\n                if (((_o = toolCall.function) == null ? void 0 : _o.name) != null && ((_p = toolCall.function) == null ? void 0 : _p.arguments) != null && (0,_ai_sdk_provider_utils__WEBPACK_IMPORTED_MODULE_1__.isParsableJson)(toolCall.function.arguments)) {\n                  controller.enqueue({\n                    type: \"tool-input-end\",\n                    id: toolCall.id\n                  });\n                  controller.enqueue({\n                    type: \"tool-call\",\n                    toolCallId: (_q = toolCall.id) != null ? _q : (0,_ai_sdk_provider_utils__WEBPACK_IMPORTED_MODULE_1__.generateId)(),\n                    toolName: toolCall.function.name,\n                    input: toolCall.function.arguments\n                  });\n                  toolCall.hasFinished = true;\n                }\n              }\n            }\n            if (delta.annotations != null) {\n              for (const annotation of delta.annotations) {\n                controller.enqueue({\n                  type: \"source\",\n                  sourceType: \"url\",\n                  id: (0,_ai_sdk_provider_utils__WEBPACK_IMPORTED_MODULE_1__.generateId)(),\n                  url: annotation.url_citation.url,\n                  title: annotation.url_citation.title\n                });\n              }\n            }\n          },\n          flush(controller) {\n            if (isActiveText) {\n              controller.enqueue({ type: \"text-end\", id: \"0\" });\n            }\n            controller.enqueue({\n              type: \"finish\",\n              finishReason,\n              usage: convertOpenAIChatUsage(usage),\n              ...providerMetadata != null ? { providerMetadata } : {}\n            });\n          }\n        })\n      ),\n      request: { body },\n      response: { headers: responseHeaders }\n    };\n  }\n};\n\n// src/completion/openai-completion-language-model.ts\n\n\n// src/completion/convert-openai-completion-usage.ts\nfunction convertOpenAICompletionUsage(usage) {\n  var _a, _b, _c, _d;\n  if (usage == null) {\n    return {\n      inputTokens: {\n        total: void 0,\n        noCache: void 0,\n        cacheRead: void 0,\n        cacheWrite: void 0\n      },\n      outputTokens: {\n        total: void 0,\n        text: void 0,\n        reasoning: void 0\n      },\n      raw: void 0\n    };\n  }\n  const promptTokens = (_a = usage.prompt_tokens) != null ? _a : 0;\n  const completionTokens = (_b = usage.completion_tokens) != null ? _b : 0;\n  return {\n    inputTokens: {\n      total: (_c = usage.prompt_tokens) != null ? _c : void 0,\n      noCache: promptTokens,\n      cacheRead: void 0,\n      cacheWrite: void 0\n    },\n    outputTokens: {\n      total: (_d = usage.completion_tokens) != null ? _d : void 0,\n      text: completionTokens,\n      reasoning: void 0\n    },\n    raw: usage\n  };\n}\n\n// src/completion/convert-to-openai-completion-prompt.ts\n\nfunction convertToOpenAICompletionPrompt({\n  prompt,\n  user = \"user\",\n  assistant = \"assistant\"\n}) {\n  let text = \"\";\n  if (prompt[0].role === \"system\") {\n    text += `${prompt[0].content}\n\n`;\n    prompt = prompt.slice(1);\n  }\n  for (const { role, content } of prompt) {\n    switch (role) {\n      case \"system\": {\n        throw new _ai_sdk_provider__WEBPACK_IMPORTED_MODULE_2__.InvalidPromptError({\n          message: \"Unexpected system message in prompt: ${content}\",\n          prompt\n        });\n      }\n      case \"user\": {\n        const userMessage = content.map((part) => {\n          switch (part.type) {\n            case \"text\": {\n              return part.text;\n            }\n          }\n        }).filter(Boolean).join(\"\");\n        text += `${user}:\n${userMessage}\n\n`;\n        break;\n      }\n      case \"assistant\": {\n        const assistantMessage = content.map((part) => {\n          switch (part.type) {\n            case \"text\": {\n              return part.text;\n            }\n            case \"tool-call\": {\n              throw new _ai_sdk_provider__WEBPACK_IMPORTED_MODULE_2__.UnsupportedFunctionalityError({\n                functionality: \"tool-call messages\"\n              });\n            }\n          }\n        }).join(\"\");\n        text += `${assistant}:\n${assistantMessage}\n\n`;\n        break;\n      }\n      case \"tool\": {\n        throw new _ai_sdk_provider__WEBPACK_IMPORTED_MODULE_2__.UnsupportedFunctionalityError({\n          functionality: \"tool messages\"\n        });\n      }\n      default: {\n        const _exhaustiveCheck = role;\n        throw new Error(`Unsupported role: ${_exhaustiveCheck}`);\n      }\n    }\n  }\n  text += `${assistant}:\n`;\n  return {\n    prompt: text,\n    stopSequences: [`\n${user}:`]\n  };\n}\n\n// src/completion/get-response-metadata.ts\nfunction getResponseMetadata2({\n  id,\n  model,\n  created\n}) {\n  return {\n    id: id != null ? id : void 0,\n    modelId: model != null ? model : void 0,\n    timestamp: created != null ? new Date(created * 1e3) : void 0\n  };\n}\n\n// src/completion/map-openai-finish-reason.ts\nfunction mapOpenAIFinishReason2(finishReason) {\n  switch (finishReason) {\n    case \"stop\":\n      return \"stop\";\n    case \"length\":\n      return \"length\";\n    case \"content_filter\":\n      return \"content-filter\";\n    case \"function_call\":\n    case \"tool_calls\":\n      return \"tool-calls\";\n    default:\n      return \"other\";\n  }\n}\n\n// src/completion/openai-completion-api.ts\n\n\nvar openaiCompletionResponseSchema = (0,_ai_sdk_provider_utils__WEBPACK_IMPORTED_MODULE_1__.lazySchema)(\n  () => (0,_ai_sdk_provider_utils__WEBPACK_IMPORTED_MODULE_1__.zodSchema)(\n    zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.object({\n      id: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.string().nullish(),\n      created: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.number().nullish(),\n      model: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.string().nullish(),\n      choices: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.array(\n        zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.object({\n          text: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.string(),\n          finish_reason: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.string(),\n          logprobs: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.object({\n            tokens: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.array(zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.string()),\n            token_logprobs: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.array(zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.number()),\n            top_logprobs: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.array(zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.record(zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.string(), zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.number())).nullish()\n          }).nullish()\n        })\n      ),\n      usage: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.object({\n        prompt_tokens: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.number(),\n        completion_tokens: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.number(),\n        total_tokens: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.number()\n      }).nullish()\n    })\n  )\n);\nvar openaiCompletionChunkSchema = (0,_ai_sdk_provider_utils__WEBPACK_IMPORTED_MODULE_1__.lazySchema)(\n  () => (0,_ai_sdk_provider_utils__WEBPACK_IMPORTED_MODULE_1__.zodSchema)(\n    zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.union([\n      zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.object({\n        id: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.string().nullish(),\n        created: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.number().nullish(),\n        model: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.string().nullish(),\n        choices: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.array(\n          zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.object({\n            text: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.string(),\n            finish_reason: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.string().nullish(),\n            index: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.number(),\n            logprobs: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.object({\n              tokens: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.array(zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.string()),\n              token_logprobs: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.array(zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.number()),\n              top_logprobs: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.array(zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.record(zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.string(), zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.number())).nullish()\n            }).nullish()\n          })\n        ),\n        usage: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.object({\n          prompt_tokens: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.number(),\n          completion_tokens: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.number(),\n          total_tokens: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.number()\n        }).nullish()\n      }),\n      openaiErrorDataSchema\n    ])\n  )\n);\n\n// src/completion/openai-completion-options.ts\n\n\nvar openaiCompletionProviderOptions = (0,_ai_sdk_provider_utils__WEBPACK_IMPORTED_MODULE_1__.lazySchema)(\n  () => (0,_ai_sdk_provider_utils__WEBPACK_IMPORTED_MODULE_1__.zodSchema)(\n    zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.object({\n      /**\n      Echo back the prompt in addition to the completion.\n         */\n      echo: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.boolean().optional(),\n      /**\n      Modify the likelihood of specified tokens appearing in the completion.\n      \n      Accepts a JSON object that maps tokens (specified by their token ID in\n      the GPT tokenizer) to an associated bias value from -100 to 100. You\n      can use this tokenizer tool to convert text to token IDs. Mathematically,\n      the bias is added to the logits generated by the model prior to sampling.\n      The exact effect will vary per model, but values between -1 and 1 should\n      decrease or increase likelihood of selection; values like -100 or 100\n      should result in a ban or exclusive selection of the relevant token.\n      \n      As an example, you can pass {\"50256\": -100} to prevent the <|endoftext|>\n      token from being generated.\n       */\n      logitBias: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.record(zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.string(), zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.number()).optional(),\n      /**\n      The suffix that comes after a completion of inserted text.\n       */\n      suffix: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.string().optional(),\n      /**\n      A unique identifier representing your end-user, which can help OpenAI to\n      monitor and detect abuse. Learn more.\n       */\n      user: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.string().optional(),\n      /**\n      Return the log probabilities of the tokens. Including logprobs will increase\n      the response size and can slow down response times. However, it can\n      be useful to better understand how the model is behaving.\n      Setting to true will return the log probabilities of the tokens that\n      were generated.\n      Setting to a number will return the log probabilities of the top n\n      tokens that were generated.\n         */\n      logprobs: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.union([zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.boolean(), zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.number()]).optional()\n    })\n  )\n);\n\n// src/completion/openai-completion-language-model.ts\nvar OpenAICompletionLanguageModel = class {\n  constructor(modelId, config) {\n    this.specificationVersion = \"v3\";\n    this.supportedUrls = {\n      // No URLs are supported for completion models.\n    };\n    this.modelId = modelId;\n    this.config = config;\n  }\n  get providerOptionsName() {\n    return this.config.provider.split(\".\")[0].trim();\n  }\n  get provider() {\n    return this.config.provider;\n  }\n  async getArgs({\n    prompt,\n    maxOutputTokens,\n    temperature,\n    topP,\n    topK,\n    frequencyPenalty,\n    presencePenalty,\n    stopSequences: userStopSequences,\n    responseFormat,\n    tools,\n    toolChoice,\n    seed,\n    providerOptions\n  }) {\n    const warnings = [];\n    const openaiOptions = {\n      ...await (0,_ai_sdk_provider_utils__WEBPACK_IMPORTED_MODULE_1__.parseProviderOptions)({\n        provider: \"openai\",\n        providerOptions,\n        schema: openaiCompletionProviderOptions\n      }),\n      ...await (0,_ai_sdk_provider_utils__WEBPACK_IMPORTED_MODULE_1__.parseProviderOptions)({\n        provider: this.providerOptionsName,\n        providerOptions,\n        schema: openaiCompletionProviderOptions\n      })\n    };\n    if (topK != null) {\n      warnings.push({ type: \"unsupported\", feature: \"topK\" });\n    }\n    if (tools == null ? void 0 : tools.length) {\n      warnings.push({ type: \"unsupported\", feature: \"tools\" });\n    }\n    if (toolChoice != null) {\n      warnings.push({ type: \"unsupported\", feature: \"toolChoice\" });\n    }\n    if (responseFormat != null && responseFormat.type !== \"text\") {\n      warnings.push({\n        type: \"unsupported\",\n        feature: \"responseFormat\",\n        details: \"JSON response format is not supported.\"\n      });\n    }\n    const { prompt: completionPrompt, stopSequences } = convertToOpenAICompletionPrompt({ prompt });\n    const stop = [...stopSequences != null ? stopSequences : [], ...userStopSequences != null ? userStopSequences : []];\n    return {\n      args: {\n        // model id:\n        model: this.modelId,\n        // model specific settings:\n        echo: openaiOptions.echo,\n        logit_bias: openaiOptions.logitBias,\n        logprobs: (openaiOptions == null ? void 0 : openaiOptions.logprobs) === true ? 0 : (openaiOptions == null ? void 0 : openaiOptions.logprobs) === false ? void 0 : openaiOptions == null ? void 0 : openaiOptions.logprobs,\n        suffix: openaiOptions.suffix,\n        user: openaiOptions.user,\n        // standardized settings:\n        max_tokens: maxOutputTokens,\n        temperature,\n        top_p: topP,\n        frequency_penalty: frequencyPenalty,\n        presence_penalty: presencePenalty,\n        seed,\n        // prompt:\n        prompt: completionPrompt,\n        // stop sequences:\n        stop: stop.length > 0 ? stop : void 0\n      },\n      warnings\n    };\n  }\n  async doGenerate(options) {\n    var _a;\n    const { args, warnings } = await this.getArgs(options);\n    const {\n      responseHeaders,\n      value: response,\n      rawValue: rawResponse\n    } = await (0,_ai_sdk_provider_utils__WEBPACK_IMPORTED_MODULE_1__.postJsonToApi)({\n      url: this.config.url({\n        path: \"/completions\",\n        modelId: this.modelId\n      }),\n      headers: (0,_ai_sdk_provider_utils__WEBPACK_IMPORTED_MODULE_1__.combineHeaders)(this.config.headers(), options.headers),\n      body: args,\n      failedResponseHandler: openaiFailedResponseHandler,\n      successfulResponseHandler: (0,_ai_sdk_provider_utils__WEBPACK_IMPORTED_MODULE_1__.createJsonResponseHandler)(\n        openaiCompletionResponseSchema\n      ),\n      abortSignal: options.abortSignal,\n      fetch: this.config.fetch\n    });\n    const choice = response.choices[0];\n    const providerMetadata = { openai: {} };\n    if (choice.logprobs != null) {\n      providerMetadata.openai.logprobs = choice.logprobs;\n    }\n    return {\n      content: [{ type: \"text\", text: choice.text }],\n      usage: convertOpenAICompletionUsage(response.usage),\n      finishReason: {\n        unified: mapOpenAIFinishReason2(choice.finish_reason),\n        raw: (_a = choice.finish_reason) != null ? _a : void 0\n      },\n      request: { body: args },\n      response: {\n        ...getResponseMetadata2(response),\n        headers: responseHeaders,\n        body: rawResponse\n      },\n      providerMetadata,\n      warnings\n    };\n  }\n  async doStream(options) {\n    const { args, warnings } = await this.getArgs(options);\n    const body = {\n      ...args,\n      stream: true,\n      stream_options: {\n        include_usage: true\n      }\n    };\n    const { responseHeaders, value: response } = await (0,_ai_sdk_provider_utils__WEBPACK_IMPORTED_MODULE_1__.postJsonToApi)({\n      url: this.config.url({\n        path: \"/completions\",\n        modelId: this.modelId\n      }),\n      headers: (0,_ai_sdk_provider_utils__WEBPACK_IMPORTED_MODULE_1__.combineHeaders)(this.config.headers(), options.headers),\n      body,\n      failedResponseHandler: openaiFailedResponseHandler,\n      successfulResponseHandler: (0,_ai_sdk_provider_utils__WEBPACK_IMPORTED_MODULE_1__.createEventSourceResponseHandler)(\n        openaiCompletionChunkSchema\n      ),\n      abortSignal: options.abortSignal,\n      fetch: this.config.fetch\n    });\n    let finishReason = {\n      unified: \"other\",\n      raw: void 0\n    };\n    const providerMetadata = { openai: {} };\n    let usage = void 0;\n    let isFirstChunk = true;\n    return {\n      stream: response.pipeThrough(\n        new TransformStream({\n          start(controller) {\n            controller.enqueue({ type: \"stream-start\", warnings });\n          },\n          transform(chunk, controller) {\n            if (options.includeRawChunks) {\n              controller.enqueue({ type: \"raw\", rawValue: chunk.rawValue });\n            }\n            if (!chunk.success) {\n              finishReason = { unified: \"error\", raw: void 0 };\n              controller.enqueue({ type: \"error\", error: chunk.error });\n              return;\n            }\n            const value = chunk.value;\n            if (\"error\" in value) {\n              finishReason = { unified: \"error\", raw: void 0 };\n              controller.enqueue({ type: \"error\", error: value.error });\n              return;\n            }\n            if (isFirstChunk) {\n              isFirstChunk = false;\n              controller.enqueue({\n                type: \"response-metadata\",\n                ...getResponseMetadata2(value)\n              });\n              controller.enqueue({ type: \"text-start\", id: \"0\" });\n            }\n            if (value.usage != null) {\n              usage = value.usage;\n            }\n            const choice = value.choices[0];\n            if ((choice == null ? void 0 : choice.finish_reason) != null) {\n              finishReason = {\n                unified: mapOpenAIFinishReason2(choice.finish_reason),\n                raw: choice.finish_reason\n              };\n            }\n            if ((choice == null ? void 0 : choice.logprobs) != null) {\n              providerMetadata.openai.logprobs = choice.logprobs;\n            }\n            if ((choice == null ? void 0 : choice.text) != null && choice.text.length > 0) {\n              controller.enqueue({\n                type: \"text-delta\",\n                id: \"0\",\n                delta: choice.text\n              });\n            }\n          },\n          flush(controller) {\n            if (!isFirstChunk) {\n              controller.enqueue({ type: \"text-end\", id: \"0\" });\n            }\n            controller.enqueue({\n              type: \"finish\",\n              finishReason,\n              providerMetadata,\n              usage: convertOpenAICompletionUsage(usage)\n            });\n          }\n        })\n      ),\n      request: { body },\n      response: { headers: responseHeaders }\n    };\n  }\n};\n\n// src/embedding/openai-embedding-model.ts\n\n\n\n// src/embedding/openai-embedding-options.ts\n\n\nvar openaiEmbeddingProviderOptions = (0,_ai_sdk_provider_utils__WEBPACK_IMPORTED_MODULE_1__.lazySchema)(\n  () => (0,_ai_sdk_provider_utils__WEBPACK_IMPORTED_MODULE_1__.zodSchema)(\n    zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.object({\n      /**\n      The number of dimensions the resulting output embeddings should have.\n      Only supported in text-embedding-3 and later models.\n         */\n      dimensions: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.number().optional(),\n      /**\n      A unique identifier representing your end-user, which can help OpenAI to\n      monitor and detect abuse. Learn more.\n      */\n      user: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.string().optional()\n    })\n  )\n);\n\n// src/embedding/openai-embedding-api.ts\n\n\nvar openaiTextEmbeddingResponseSchema = (0,_ai_sdk_provider_utils__WEBPACK_IMPORTED_MODULE_1__.lazySchema)(\n  () => (0,_ai_sdk_provider_utils__WEBPACK_IMPORTED_MODULE_1__.zodSchema)(\n    zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.object({\n      data: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.array(zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.object({ embedding: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.array(zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.number()) })),\n      usage: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.object({ prompt_tokens: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.number() }).nullish()\n    })\n  )\n);\n\n// src/embedding/openai-embedding-model.ts\nvar OpenAIEmbeddingModel = class {\n  constructor(modelId, config) {\n    this.specificationVersion = \"v3\";\n    this.maxEmbeddingsPerCall = 2048;\n    this.supportsParallelCalls = true;\n    this.modelId = modelId;\n    this.config = config;\n  }\n  get provider() {\n    return this.config.provider;\n  }\n  async doEmbed({\n    values,\n    headers,\n    abortSignal,\n    providerOptions\n  }) {\n    var _a;\n    if (values.length > this.maxEmbeddingsPerCall) {\n      throw new _ai_sdk_provider__WEBPACK_IMPORTED_MODULE_2__.TooManyEmbeddingValuesForCallError({\n        provider: this.provider,\n        modelId: this.modelId,\n        maxEmbeddingsPerCall: this.maxEmbeddingsPerCall,\n        values\n      });\n    }\n    const openaiOptions = (_a = await (0,_ai_sdk_provider_utils__WEBPACK_IMPORTED_MODULE_1__.parseProviderOptions)({\n      provider: \"openai\",\n      providerOptions,\n      schema: openaiEmbeddingProviderOptions\n    })) != null ? _a : {};\n    const {\n      responseHeaders,\n      value: response,\n      rawValue\n    } = await (0,_ai_sdk_provider_utils__WEBPACK_IMPORTED_MODULE_1__.postJsonToApi)({\n      url: this.config.url({\n        path: \"/embeddings\",\n        modelId: this.modelId\n      }),\n      headers: (0,_ai_sdk_provider_utils__WEBPACK_IMPORTED_MODULE_1__.combineHeaders)(this.config.headers(), headers),\n      body: {\n        model: this.modelId,\n        input: values,\n        encoding_format: \"float\",\n        dimensions: openaiOptions.dimensions,\n        user: openaiOptions.user\n      },\n      failedResponseHandler: openaiFailedResponseHandler,\n      successfulResponseHandler: (0,_ai_sdk_provider_utils__WEBPACK_IMPORTED_MODULE_1__.createJsonResponseHandler)(\n        openaiTextEmbeddingResponseSchema\n      ),\n      abortSignal,\n      fetch: this.config.fetch\n    });\n    return {\n      warnings: [],\n      embeddings: response.data.map((item) => item.embedding),\n      usage: response.usage ? { tokens: response.usage.prompt_tokens } : void 0,\n      response: { headers: responseHeaders, body: rawValue }\n    };\n  }\n};\n\n// src/image/openai-image-model.ts\n\n\n// src/image/openai-image-api.ts\n\n\nvar openaiImageResponseSchema = (0,_ai_sdk_provider_utils__WEBPACK_IMPORTED_MODULE_1__.lazySchema)(\n  () => (0,_ai_sdk_provider_utils__WEBPACK_IMPORTED_MODULE_1__.zodSchema)(\n    zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.object({\n      created: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.number().nullish(),\n      data: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.array(\n        zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.object({\n          b64_json: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.string(),\n          revised_prompt: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.string().nullish()\n        })\n      ),\n      background: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.string().nullish(),\n      output_format: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.string().nullish(),\n      size: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.string().nullish(),\n      quality: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.string().nullish(),\n      usage: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.object({\n        input_tokens: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.number().nullish(),\n        output_tokens: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.number().nullish(),\n        total_tokens: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.number().nullish(),\n        input_tokens_details: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.object({\n          image_tokens: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.number().nullish(),\n          text_tokens: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.number().nullish()\n        }).nullish()\n      }).nullish()\n    })\n  )\n);\n\n// src/image/openai-image-options.ts\nvar modelMaxImagesPerCall = {\n  \"dall-e-3\": 1,\n  \"dall-e-2\": 10,\n  \"gpt-image-1\": 10,\n  \"gpt-image-1-mini\": 10,\n  \"gpt-image-1.5\": 10\n};\nvar defaultResponseFormatPrefixes = [\n  \"gpt-image-1-mini\",\n  \"gpt-image-1.5\",\n  \"gpt-image-1\"\n];\nfunction hasDefaultResponseFormat(modelId) {\n  return defaultResponseFormatPrefixes.some(\n    (prefix) => modelId.startsWith(prefix)\n  );\n}\n\n// src/image/openai-image-model.ts\nvar OpenAIImageModel = class {\n  constructor(modelId, config) {\n    this.modelId = modelId;\n    this.config = config;\n    this.specificationVersion = \"v3\";\n  }\n  get maxImagesPerCall() {\n    var _a;\n    return (_a = modelMaxImagesPerCall[this.modelId]) != null ? _a : 1;\n  }\n  get provider() {\n    return this.config.provider;\n  }\n  async doGenerate({\n    prompt,\n    files,\n    mask,\n    n,\n    size,\n    aspectRatio,\n    seed,\n    providerOptions,\n    headers,\n    abortSignal\n  }) {\n    var _a, _b, _c, _d, _e, _f, _g, _h, _i, _j, _k;\n    const warnings = [];\n    if (aspectRatio != null) {\n      warnings.push({\n        type: \"unsupported\",\n        feature: \"aspectRatio\",\n        details: \"This model does not support aspect ratio. Use `size` instead.\"\n      });\n    }\n    if (seed != null) {\n      warnings.push({ type: \"unsupported\", feature: \"seed\" });\n    }\n    const currentDate = (_c = (_b = (_a = this.config._internal) == null ? void 0 : _a.currentDate) == null ? void 0 : _b.call(_a)) != null ? _c : /* @__PURE__ */ new Date();\n    if (files != null) {\n      const { value: response2, responseHeaders: responseHeaders2 } = await (0,_ai_sdk_provider_utils__WEBPACK_IMPORTED_MODULE_1__.postFormDataToApi)({\n        url: this.config.url({\n          path: \"/images/edits\",\n          modelId: this.modelId\n        }),\n        headers: (0,_ai_sdk_provider_utils__WEBPACK_IMPORTED_MODULE_1__.combineHeaders)(this.config.headers(), headers),\n        formData: (0,_ai_sdk_provider_utils__WEBPACK_IMPORTED_MODULE_1__.convertToFormData)({\n          model: this.modelId,\n          prompt,\n          image: await Promise.all(\n            files.map(\n              (file) => file.type === \"file\" ? new Blob(\n                [\n                  file.data instanceof Uint8Array ? new Blob([file.data], {\n                    type: file.mediaType\n                  }) : new Blob([(0,_ai_sdk_provider_utils__WEBPACK_IMPORTED_MODULE_1__.convertBase64ToUint8Array)(file.data)], {\n                    type: file.mediaType\n                  })\n                ],\n                { type: file.mediaType }\n              ) : (0,_ai_sdk_provider_utils__WEBPACK_IMPORTED_MODULE_1__.downloadBlob)(file.url)\n            )\n          ),\n          mask: mask != null ? await fileToBlob(mask) : void 0,\n          n,\n          size,\n          ...(_d = providerOptions.openai) != null ? _d : {}\n        }),\n        failedResponseHandler: openaiFailedResponseHandler,\n        successfulResponseHandler: (0,_ai_sdk_provider_utils__WEBPACK_IMPORTED_MODULE_1__.createJsonResponseHandler)(\n          openaiImageResponseSchema\n        ),\n        abortSignal,\n        fetch: this.config.fetch\n      });\n      return {\n        images: response2.data.map((item) => item.b64_json),\n        warnings,\n        usage: response2.usage != null ? {\n          inputTokens: (_e = response2.usage.input_tokens) != null ? _e : void 0,\n          outputTokens: (_f = response2.usage.output_tokens) != null ? _f : void 0,\n          totalTokens: (_g = response2.usage.total_tokens) != null ? _g : void 0\n        } : void 0,\n        response: {\n          timestamp: currentDate,\n          modelId: this.modelId,\n          headers: responseHeaders2\n        },\n        providerMetadata: {\n          openai: {\n            images: response2.data.map((item) => {\n              var _a2, _b2, _c2, _d2, _e2;\n              return {\n                ...item.revised_prompt ? { revisedPrompt: item.revised_prompt } : {},\n                created: (_a2 = response2.created) != null ? _a2 : void 0,\n                size: (_b2 = response2.size) != null ? _b2 : void 0,\n                quality: (_c2 = response2.quality) != null ? _c2 : void 0,\n                background: (_d2 = response2.background) != null ? _d2 : void 0,\n                outputFormat: (_e2 = response2.output_format) != null ? _e2 : void 0\n              };\n            })\n          }\n        }\n      };\n    }\n    const { value: response, responseHeaders } = await (0,_ai_sdk_provider_utils__WEBPACK_IMPORTED_MODULE_1__.postJsonToApi)({\n      url: this.config.url({\n        path: \"/images/generations\",\n        modelId: this.modelId\n      }),\n      headers: (0,_ai_sdk_provider_utils__WEBPACK_IMPORTED_MODULE_1__.combineHeaders)(this.config.headers(), headers),\n      body: {\n        model: this.modelId,\n        prompt,\n        n,\n        size,\n        ...(_h = providerOptions.openai) != null ? _h : {},\n        ...!hasDefaultResponseFormat(this.modelId) ? { response_format: \"b64_json\" } : {}\n      },\n      failedResponseHandler: openaiFailedResponseHandler,\n      successfulResponseHandler: (0,_ai_sdk_provider_utils__WEBPACK_IMPORTED_MODULE_1__.createJsonResponseHandler)(\n        openaiImageResponseSchema\n      ),\n      abortSignal,\n      fetch: this.config.fetch\n    });\n    return {\n      images: response.data.map((item) => item.b64_json),\n      warnings,\n      usage: response.usage != null ? {\n        inputTokens: (_i = response.usage.input_tokens) != null ? _i : void 0,\n        outputTokens: (_j = response.usage.output_tokens) != null ? _j : void 0,\n        totalTokens: (_k = response.usage.total_tokens) != null ? _k : void 0\n      } : void 0,\n      response: {\n        timestamp: currentDate,\n        modelId: this.modelId,\n        headers: responseHeaders\n      },\n      providerMetadata: {\n        openai: {\n          images: response.data.map((item) => {\n            var _a2, _b2, _c2, _d2, _e2;\n            return {\n              ...item.revised_prompt ? { revisedPrompt: item.revised_prompt } : {},\n              created: (_a2 = response.created) != null ? _a2 : void 0,\n              size: (_b2 = response.size) != null ? _b2 : void 0,\n              quality: (_c2 = response.quality) != null ? _c2 : void 0,\n              background: (_d2 = response.background) != null ? _d2 : void 0,\n              outputFormat: (_e2 = response.output_format) != null ? _e2 : void 0\n            };\n          })\n        }\n      }\n    };\n  }\n};\nasync function fileToBlob(file) {\n  if (!file) return void 0;\n  if (file.type === \"url\") {\n    return (0,_ai_sdk_provider_utils__WEBPACK_IMPORTED_MODULE_1__.downloadBlob)(file.url);\n  }\n  const data = file.data instanceof Uint8Array ? file.data : (0,_ai_sdk_provider_utils__WEBPACK_IMPORTED_MODULE_1__.convertBase64ToUint8Array)(file.data);\n  return new Blob([data], { type: file.mediaType });\n}\n\n// src/tool/apply-patch.ts\n\n\nvar applyPatchInputSchema = (0,_ai_sdk_provider_utils__WEBPACK_IMPORTED_MODULE_1__.lazySchema)(\n  () => (0,_ai_sdk_provider_utils__WEBPACK_IMPORTED_MODULE_1__.zodSchema)(\n    zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.object({\n      callId: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.string(),\n      operation: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.discriminatedUnion(\"type\", [\n        zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.object({\n          type: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.literal(\"create_file\"),\n          path: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.string(),\n          diff: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.string()\n        }),\n        zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.object({\n          type: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.literal(\"delete_file\"),\n          path: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.string()\n        }),\n        zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.object({\n          type: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.literal(\"update_file\"),\n          path: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.string(),\n          diff: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.string()\n        })\n      ])\n    })\n  )\n);\nvar applyPatchOutputSchema = (0,_ai_sdk_provider_utils__WEBPACK_IMPORTED_MODULE_1__.lazySchema)(\n  () => (0,_ai_sdk_provider_utils__WEBPACK_IMPORTED_MODULE_1__.zodSchema)(\n    zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.object({\n      status: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z[\"enum\"]([\"completed\", \"failed\"]),\n      output: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.string().optional()\n    })\n  )\n);\nvar applyPatchArgsSchema = (0,_ai_sdk_provider_utils__WEBPACK_IMPORTED_MODULE_1__.lazySchema)(() => (0,_ai_sdk_provider_utils__WEBPACK_IMPORTED_MODULE_1__.zodSchema)(zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.object({})));\nvar applyPatchToolFactory = (0,_ai_sdk_provider_utils__WEBPACK_IMPORTED_MODULE_1__.createProviderToolFactoryWithOutputSchema)({\n  id: \"openai.apply_patch\",\n  inputSchema: applyPatchInputSchema,\n  outputSchema: applyPatchOutputSchema\n});\nvar applyPatch = applyPatchToolFactory;\n\n// src/tool/code-interpreter.ts\n\n\nvar codeInterpreterInputSchema = (0,_ai_sdk_provider_utils__WEBPACK_IMPORTED_MODULE_1__.lazySchema)(\n  () => (0,_ai_sdk_provider_utils__WEBPACK_IMPORTED_MODULE_1__.zodSchema)(\n    zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.object({\n      code: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.string().nullish(),\n      containerId: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.string()\n    })\n  )\n);\nvar codeInterpreterOutputSchema = (0,_ai_sdk_provider_utils__WEBPACK_IMPORTED_MODULE_1__.lazySchema)(\n  () => (0,_ai_sdk_provider_utils__WEBPACK_IMPORTED_MODULE_1__.zodSchema)(\n    zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.object({\n      outputs: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.array(\n        zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.discriminatedUnion(\"type\", [\n          zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.object({ type: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.literal(\"logs\"), logs: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.string() }),\n          zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.object({ type: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.literal(\"image\"), url: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.string() })\n        ])\n      ).nullish()\n    })\n  )\n);\nvar codeInterpreterArgsSchema = (0,_ai_sdk_provider_utils__WEBPACK_IMPORTED_MODULE_1__.lazySchema)(\n  () => (0,_ai_sdk_provider_utils__WEBPACK_IMPORTED_MODULE_1__.zodSchema)(\n    zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.object({\n      container: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.union([\n        zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.string(),\n        zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.object({\n          fileIds: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.array(zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.string()).optional()\n        })\n      ]).optional()\n    })\n  )\n);\nvar codeInterpreterToolFactory = (0,_ai_sdk_provider_utils__WEBPACK_IMPORTED_MODULE_1__.createProviderToolFactoryWithOutputSchema)({\n  id: \"openai.code_interpreter\",\n  inputSchema: codeInterpreterInputSchema,\n  outputSchema: codeInterpreterOutputSchema\n});\nvar codeInterpreter = (args = {}) => {\n  return codeInterpreterToolFactory(args);\n};\n\n// src/tool/file-search.ts\n\n\nvar comparisonFilterSchema = zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.object({\n  key: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.string(),\n  type: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z[\"enum\"]([\"eq\", \"ne\", \"gt\", \"gte\", \"lt\", \"lte\", \"in\", \"nin\"]),\n  value: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.union([zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.string(), zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.number(), zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.boolean(), zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.array(zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.string())])\n});\nvar compoundFilterSchema = zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.object({\n  type: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z[\"enum\"]([\"and\", \"or\"]),\n  filters: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.array(\n    zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.union([comparisonFilterSchema, zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.lazy(() => compoundFilterSchema)])\n  )\n});\nvar fileSearchArgsSchema = (0,_ai_sdk_provider_utils__WEBPACK_IMPORTED_MODULE_1__.lazySchema)(\n  () => (0,_ai_sdk_provider_utils__WEBPACK_IMPORTED_MODULE_1__.zodSchema)(\n    zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.object({\n      vectorStoreIds: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.array(zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.string()),\n      maxNumResults: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.number().optional(),\n      ranking: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.object({\n        ranker: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.string().optional(),\n        scoreThreshold: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.number().optional()\n      }).optional(),\n      filters: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.union([comparisonFilterSchema, compoundFilterSchema]).optional()\n    })\n  )\n);\nvar fileSearchOutputSchema = (0,_ai_sdk_provider_utils__WEBPACK_IMPORTED_MODULE_1__.lazySchema)(\n  () => (0,_ai_sdk_provider_utils__WEBPACK_IMPORTED_MODULE_1__.zodSchema)(\n    zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.object({\n      queries: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.array(zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.string()),\n      results: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.array(\n        zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.object({\n          attributes: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.record(zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.string(), zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.unknown()),\n          fileId: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.string(),\n          filename: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.string(),\n          score: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.number(),\n          text: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.string()\n        })\n      ).nullable()\n    })\n  )\n);\nvar fileSearch = (0,_ai_sdk_provider_utils__WEBPACK_IMPORTED_MODULE_1__.createProviderToolFactoryWithOutputSchema)({\n  id: \"openai.file_search\",\n  inputSchema: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.object({}),\n  outputSchema: fileSearchOutputSchema\n});\n\n// src/tool/image-generation.ts\n\n\nvar imageGenerationArgsSchema = (0,_ai_sdk_provider_utils__WEBPACK_IMPORTED_MODULE_1__.lazySchema)(\n  () => (0,_ai_sdk_provider_utils__WEBPACK_IMPORTED_MODULE_1__.zodSchema)(\n    zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.object({\n      background: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z[\"enum\"]([\"auto\", \"opaque\", \"transparent\"]).optional(),\n      inputFidelity: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z[\"enum\"]([\"low\", \"high\"]).optional(),\n      inputImageMask: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.object({\n        fileId: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.string().optional(),\n        imageUrl: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.string().optional()\n      }).optional(),\n      model: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.string().optional(),\n      moderation: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z[\"enum\"]([\"auto\"]).optional(),\n      outputCompression: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.number().int().min(0).max(100).optional(),\n      outputFormat: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z[\"enum\"]([\"png\", \"jpeg\", \"webp\"]).optional(),\n      partialImages: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.number().int().min(0).max(3).optional(),\n      quality: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z[\"enum\"]([\"auto\", \"low\", \"medium\", \"high\"]).optional(),\n      size: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z[\"enum\"]([\"1024x1024\", \"1024x1536\", \"1536x1024\", \"auto\"]).optional()\n    }).strict()\n  )\n);\nvar imageGenerationInputSchema = (0,_ai_sdk_provider_utils__WEBPACK_IMPORTED_MODULE_1__.lazySchema)(() => (0,_ai_sdk_provider_utils__WEBPACK_IMPORTED_MODULE_1__.zodSchema)(zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.object({})));\nvar imageGenerationOutputSchema = (0,_ai_sdk_provider_utils__WEBPACK_IMPORTED_MODULE_1__.lazySchema)(\n  () => (0,_ai_sdk_provider_utils__WEBPACK_IMPORTED_MODULE_1__.zodSchema)(zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.object({ result: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.string() }))\n);\nvar imageGenerationToolFactory = (0,_ai_sdk_provider_utils__WEBPACK_IMPORTED_MODULE_1__.createProviderToolFactoryWithOutputSchema)({\n  id: \"openai.image_generation\",\n  inputSchema: imageGenerationInputSchema,\n  outputSchema: imageGenerationOutputSchema\n});\nvar imageGeneration = (args = {}) => {\n  return imageGenerationToolFactory(args);\n};\n\n// src/tool/local-shell.ts\n\n\nvar localShellInputSchema = (0,_ai_sdk_provider_utils__WEBPACK_IMPORTED_MODULE_1__.lazySchema)(\n  () => (0,_ai_sdk_provider_utils__WEBPACK_IMPORTED_MODULE_1__.zodSchema)(\n    zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.object({\n      action: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.object({\n        type: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.literal(\"exec\"),\n        command: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.array(zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.string()),\n        timeoutMs: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.number().optional(),\n        user: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.string().optional(),\n        workingDirectory: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.string().optional(),\n        env: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.record(zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.string(), zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.string()).optional()\n      })\n    })\n  )\n);\nvar localShellOutputSchema = (0,_ai_sdk_provider_utils__WEBPACK_IMPORTED_MODULE_1__.lazySchema)(\n  () => (0,_ai_sdk_provider_utils__WEBPACK_IMPORTED_MODULE_1__.zodSchema)(zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.object({ output: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.string() }))\n);\nvar localShell = (0,_ai_sdk_provider_utils__WEBPACK_IMPORTED_MODULE_1__.createProviderToolFactoryWithOutputSchema)({\n  id: \"openai.local_shell\",\n  inputSchema: localShellInputSchema,\n  outputSchema: localShellOutputSchema\n});\n\n// src/tool/shell.ts\n\n\nvar shellInputSchema = (0,_ai_sdk_provider_utils__WEBPACK_IMPORTED_MODULE_1__.lazySchema)(\n  () => (0,_ai_sdk_provider_utils__WEBPACK_IMPORTED_MODULE_1__.zodSchema)(\n    zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.object({\n      action: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.object({\n        commands: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.array(zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.string()),\n        timeoutMs: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.number().optional(),\n        maxOutputLength: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.number().optional()\n      })\n    })\n  )\n);\nvar shellOutputSchema = (0,_ai_sdk_provider_utils__WEBPACK_IMPORTED_MODULE_1__.lazySchema)(\n  () => (0,_ai_sdk_provider_utils__WEBPACK_IMPORTED_MODULE_1__.zodSchema)(\n    zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.object({\n      output: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.array(\n        zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.object({\n          stdout: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.string(),\n          stderr: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.string(),\n          outcome: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.discriminatedUnion(\"type\", [\n            zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.object({ type: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.literal(\"timeout\") }),\n            zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.object({ type: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.literal(\"exit\"), exitCode: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.number() })\n          ])\n        })\n      )\n    })\n  )\n);\nvar shell = (0,_ai_sdk_provider_utils__WEBPACK_IMPORTED_MODULE_1__.createProviderToolFactoryWithOutputSchema)({\n  id: \"openai.shell\",\n  inputSchema: shellInputSchema,\n  outputSchema: shellOutputSchema\n});\n\n// src/tool/web-search.ts\n\n\nvar webSearchArgsSchema = (0,_ai_sdk_provider_utils__WEBPACK_IMPORTED_MODULE_1__.lazySchema)(\n  () => (0,_ai_sdk_provider_utils__WEBPACK_IMPORTED_MODULE_1__.zodSchema)(\n    zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.object({\n      externalWebAccess: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.boolean().optional(),\n      filters: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.object({ allowedDomains: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.array(zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.string()).optional() }).optional(),\n      searchContextSize: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z[\"enum\"]([\"low\", \"medium\", \"high\"]).optional(),\n      userLocation: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.object({\n        type: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.literal(\"approximate\"),\n        country: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.string().optional(),\n        city: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.string().optional(),\n        region: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.string().optional(),\n        timezone: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.string().optional()\n      }).optional()\n    })\n  )\n);\nvar webSearchInputSchema = (0,_ai_sdk_provider_utils__WEBPACK_IMPORTED_MODULE_1__.lazySchema)(() => (0,_ai_sdk_provider_utils__WEBPACK_IMPORTED_MODULE_1__.zodSchema)(zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.object({})));\nvar webSearchOutputSchema = (0,_ai_sdk_provider_utils__WEBPACK_IMPORTED_MODULE_1__.lazySchema)(\n  () => (0,_ai_sdk_provider_utils__WEBPACK_IMPORTED_MODULE_1__.zodSchema)(\n    zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.object({\n      action: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.discriminatedUnion(\"type\", [\n        zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.object({\n          type: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.literal(\"search\"),\n          query: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.string().optional()\n        }),\n        zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.object({\n          type: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.literal(\"openPage\"),\n          url: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.string().nullish()\n        }),\n        zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.object({\n          type: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.literal(\"findInPage\"),\n          url: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.string().nullish(),\n          pattern: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.string().nullish()\n        })\n      ]),\n      sources: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.array(\n        zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.discriminatedUnion(\"type\", [\n          zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.object({ type: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.literal(\"url\"), url: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.string() }),\n          zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.object({ type: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.literal(\"api\"), name: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.string() })\n        ])\n      ).optional()\n    })\n  )\n);\nvar webSearchToolFactory = (0,_ai_sdk_provider_utils__WEBPACK_IMPORTED_MODULE_1__.createProviderToolFactoryWithOutputSchema)({\n  id: \"openai.web_search\",\n  inputSchema: webSearchInputSchema,\n  outputSchema: webSearchOutputSchema\n});\nvar webSearch = (args = {}) => webSearchToolFactory(args);\n\n// src/tool/web-search-preview.ts\n\n\nvar webSearchPreviewArgsSchema = (0,_ai_sdk_provider_utils__WEBPACK_IMPORTED_MODULE_1__.lazySchema)(\n  () => (0,_ai_sdk_provider_utils__WEBPACK_IMPORTED_MODULE_1__.zodSchema)(\n    zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.object({\n      searchContextSize: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z[\"enum\"]([\"low\", \"medium\", \"high\"]).optional(),\n      userLocation: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.object({\n        type: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.literal(\"approximate\"),\n        country: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.string().optional(),\n        city: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.string().optional(),\n        region: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.string().optional(),\n        timezone: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.string().optional()\n      }).optional()\n    })\n  )\n);\nvar webSearchPreviewInputSchema = (0,_ai_sdk_provider_utils__WEBPACK_IMPORTED_MODULE_1__.lazySchema)(\n  () => (0,_ai_sdk_provider_utils__WEBPACK_IMPORTED_MODULE_1__.zodSchema)(zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.object({}))\n);\nvar webSearchPreviewOutputSchema = (0,_ai_sdk_provider_utils__WEBPACK_IMPORTED_MODULE_1__.lazySchema)(\n  () => (0,_ai_sdk_provider_utils__WEBPACK_IMPORTED_MODULE_1__.zodSchema)(\n    zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.object({\n      action: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.discriminatedUnion(\"type\", [\n        zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.object({\n          type: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.literal(\"search\"),\n          query: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.string().optional()\n        }),\n        zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.object({\n          type: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.literal(\"openPage\"),\n          url: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.string().nullish()\n        }),\n        zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.object({\n          type: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.literal(\"findInPage\"),\n          url: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.string().nullish(),\n          pattern: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.string().nullish()\n        })\n      ])\n    })\n  )\n);\nvar webSearchPreview = (0,_ai_sdk_provider_utils__WEBPACK_IMPORTED_MODULE_1__.createProviderToolFactoryWithOutputSchema)({\n  id: \"openai.web_search_preview\",\n  inputSchema: webSearchPreviewInputSchema,\n  outputSchema: webSearchPreviewOutputSchema\n});\n\n// src/tool/mcp.ts\n\n\nvar jsonValueSchema = zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.lazy(\n  () => zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.union([\n    zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.string(),\n    zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.number(),\n    zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.boolean(),\n    zod_v4__WEBPACK_IMPORTED_MODULE_0__.z[\"null\"](),\n    zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.array(jsonValueSchema),\n    zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.record(zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.string(), jsonValueSchema)\n  ])\n);\nvar mcpArgsSchema = (0,_ai_sdk_provider_utils__WEBPACK_IMPORTED_MODULE_1__.lazySchema)(\n  () => (0,_ai_sdk_provider_utils__WEBPACK_IMPORTED_MODULE_1__.zodSchema)(\n    zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.object({\n      serverLabel: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.string(),\n      allowedTools: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.union([\n        zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.array(zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.string()),\n        zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.object({\n          readOnly: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.boolean().optional(),\n          toolNames: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.array(zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.string()).optional()\n        })\n      ]).optional(),\n      authorization: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.string().optional(),\n      connectorId: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.string().optional(),\n      headers: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.record(zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.string(), zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.string()).optional(),\n      requireApproval: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.union([\n        zod_v4__WEBPACK_IMPORTED_MODULE_0__.z[\"enum\"]([\"always\", \"never\"]),\n        zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.object({\n          never: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.object({\n            toolNames: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.array(zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.string()).optional()\n          }).optional()\n        })\n      ]).optional(),\n      serverDescription: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.string().optional(),\n      serverUrl: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.string().optional()\n    }).refine(\n      (v) => v.serverUrl != null || v.connectorId != null,\n      \"One of serverUrl or connectorId must be provided.\"\n    )\n  )\n);\nvar mcpInputSchema = (0,_ai_sdk_provider_utils__WEBPACK_IMPORTED_MODULE_1__.lazySchema)(() => (0,_ai_sdk_provider_utils__WEBPACK_IMPORTED_MODULE_1__.zodSchema)(zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.object({})));\nvar mcpOutputSchema = (0,_ai_sdk_provider_utils__WEBPACK_IMPORTED_MODULE_1__.lazySchema)(\n  () => (0,_ai_sdk_provider_utils__WEBPACK_IMPORTED_MODULE_1__.zodSchema)(\n    zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.object({\n      type: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.literal(\"call\"),\n      serverLabel: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.string(),\n      name: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.string(),\n      arguments: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.string(),\n      output: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.string().nullish(),\n      error: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.union([zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.string(), jsonValueSchema]).optional()\n    })\n  )\n);\nvar mcpToolFactory = (0,_ai_sdk_provider_utils__WEBPACK_IMPORTED_MODULE_1__.createProviderToolFactoryWithOutputSchema)({\n  id: \"openai.mcp\",\n  inputSchema: mcpInputSchema,\n  outputSchema: mcpOutputSchema\n});\nvar mcp = (args) => mcpToolFactory(args);\n\n// src/openai-tools.ts\nvar openaiTools = {\n  /**\n   * The apply_patch tool lets GPT-5.1 create, update, and delete files in your\n   * codebase using structured diffs. Instead of just suggesting edits, the model\n   * emits patch operations that your application applies and then reports back on,\n   * enabling iterative, multi-step code editing workflows.\n   *\n   */\n  applyPatch,\n  /**\n   * The Code Interpreter tool allows models to write and run Python code in a\n   * sandboxed environment to solve complex problems in domains like data analysis,\n   * coding, and math.\n   *\n   * @param container - The container to use for the code interpreter.\n   */\n  codeInterpreter,\n  /**\n   * File search is a tool available in the Responses API. It enables models to\n   * retrieve information in a knowledge base of previously uploaded files through\n   * semantic and keyword search.\n   *\n   * @param vectorStoreIds - The vector store IDs to use for the file search.\n   * @param maxNumResults - The maximum number of results to return.\n   * @param ranking - The ranking options to use for the file search.\n   * @param filters - The filters to use for the file search.\n   */\n  fileSearch,\n  /**\n   * The image generation tool allows you to generate images using a text prompt,\n   * and optionally image inputs. It leverages the GPT Image model,\n   * and automatically optimizes text inputs for improved performance.\n   *\n   * @param background - Background type for the generated image. One of 'auto', 'opaque', or 'transparent'.\n   * @param inputFidelity - Input fidelity for the generated image. One of 'low' or 'high'.\n   * @param inputImageMask - Optional mask for inpainting. Contains fileId and/or imageUrl.\n   * @param model - The image generation model to use. Default: gpt-image-1.\n   * @param moderation - Moderation level for the generated image. Default: 'auto'.\n   * @param outputCompression - Compression level for the output image (0-100).\n   * @param outputFormat - The output format of the generated image. One of 'png', 'jpeg', or 'webp'.\n   * @param partialImages - Number of partial images to generate in streaming mode (0-3).\n   * @param quality - The quality of the generated image. One of 'auto', 'low', 'medium', or 'high'.\n   * @param size - The size of the generated image. One of 'auto', '1024x1024', '1024x1536', or '1536x1024'.\n   */\n  imageGeneration,\n  /**\n   * Local shell is a tool that allows agents to run shell commands locally\n   * on a machine you or the user provides.\n   *\n   * Supported models: `gpt-5-codex` and `codex-mini-latest`\n   */\n  localShell,\n  /**\n   * The shell tool allows the model to interact with your local computer through\n   * a controlled command-line interface. The model proposes shell commands; your\n   * integration executes them and returns the outputs.\n   *\n   * Available through the Responses API for use with GPT-5.1.\n   *\n   * WARNING: Running arbitrary shell commands can be dangerous. Always sandbox\n   * execution or add strict allow-/deny-lists before forwarding a command to\n   * the system shell.\n   */\n  shell,\n  /**\n   * Web search allows models to access up-to-date information from the internet\n   * and provide answers with sourced citations.\n   *\n   * @param searchContextSize - The search context size to use for the web search.\n   * @param userLocation - The user location to use for the web search.\n   */\n  webSearchPreview,\n  /**\n   * Web search allows models to access up-to-date information from the internet\n   * and provide answers with sourced citations.\n   *\n   * @param filters - The filters to use for the web search.\n   * @param searchContextSize - The search context size to use for the web search.\n   * @param userLocation - The user location to use for the web search.\n   */\n  webSearch,\n  /**\n   * MCP (Model Context Protocol) allows models to call tools exposed by\n   * remote MCP servers or service connectors.\n   *\n   * @param serverLabel - Label to identify the MCP server.\n   * @param allowedTools - Allowed tool names or filter object.\n   * @param authorization - OAuth access token for the MCP server/connector.\n   * @param connectorId - Identifier for a service connector.\n   * @param headers - Optional headers to include in MCP requests.\n   * // param requireApproval - Approval policy ('always'|'never'|filter object). (Removed - always 'never')\n   * @param serverDescription - Optional description of the server.\n   * @param serverUrl - URL for the MCP server.\n   */\n  mcp\n};\n\n// src/responses/openai-responses-language-model.ts\n\n\n\n// src/responses/convert-openai-responses-usage.ts\nfunction convertOpenAIResponsesUsage(usage) {\n  var _a, _b, _c, _d;\n  if (usage == null) {\n    return {\n      inputTokens: {\n        total: void 0,\n        noCache: void 0,\n        cacheRead: void 0,\n        cacheWrite: void 0\n      },\n      outputTokens: {\n        total: void 0,\n        text: void 0,\n        reasoning: void 0\n      },\n      raw: void 0\n    };\n  }\n  const inputTokens = usage.input_tokens;\n  const outputTokens = usage.output_tokens;\n  const cachedTokens = (_b = (_a = usage.input_tokens_details) == null ? void 0 : _a.cached_tokens) != null ? _b : 0;\n  const reasoningTokens = (_d = (_c = usage.output_tokens_details) == null ? void 0 : _c.reasoning_tokens) != null ? _d : 0;\n  return {\n    inputTokens: {\n      total: inputTokens,\n      noCache: inputTokens - cachedTokens,\n      cacheRead: cachedTokens,\n      cacheWrite: void 0\n    },\n    outputTokens: {\n      total: outputTokens,\n      text: outputTokens - reasoningTokens,\n      reasoning: reasoningTokens\n    },\n    raw: usage\n  };\n}\n\n// src/responses/convert-to-openai-responses-input.ts\n\n\n\nfunction isFileId(data, prefixes) {\n  if (!prefixes) return false;\n  return prefixes.some((prefix) => data.startsWith(prefix));\n}\nasync function convertToOpenAIResponsesInput({\n  prompt,\n  toolNameMapping,\n  systemMessageMode,\n  providerOptionsName,\n  fileIdPrefixes,\n  store,\n  hasLocalShellTool = false,\n  hasShellTool = false,\n  hasApplyPatchTool = false\n}) {\n  var _a, _b, _c, _d, _e, _f, _g, _h, _i, _j, _k, _l, _m;\n  const input = [];\n  const warnings = [];\n  const processedApprovalIds = /* @__PURE__ */ new Set();\n  for (const { role, content } of prompt) {\n    switch (role) {\n      case \"system\": {\n        switch (systemMessageMode) {\n          case \"system\": {\n            input.push({ role: \"system\", content });\n            break;\n          }\n          case \"developer\": {\n            input.push({ role: \"developer\", content });\n            break;\n          }\n          case \"remove\": {\n            warnings.push({\n              type: \"other\",\n              message: \"system messages are removed for this model\"\n            });\n            break;\n          }\n          default: {\n            const _exhaustiveCheck = systemMessageMode;\n            throw new Error(\n              `Unsupported system message mode: ${_exhaustiveCheck}`\n            );\n          }\n        }\n        break;\n      }\n      case \"user\": {\n        input.push({\n          role: \"user\",\n          content: content.map((part, index) => {\n            var _a2, _b2, _c2;\n            switch (part.type) {\n              case \"text\": {\n                return { type: \"input_text\", text: part.text };\n              }\n              case \"file\": {\n                if (part.mediaType.startsWith(\"image/\")) {\n                  const mediaType = part.mediaType === \"image/*\" ? \"image/jpeg\" : part.mediaType;\n                  return {\n                    type: \"input_image\",\n                    ...part.data instanceof URL ? { image_url: part.data.toString() } : typeof part.data === \"string\" && isFileId(part.data, fileIdPrefixes) ? { file_id: part.data } : {\n                      image_url: `data:${mediaType};base64,${(0,_ai_sdk_provider_utils__WEBPACK_IMPORTED_MODULE_1__.convertToBase64)(part.data)}`\n                    },\n                    detail: (_b2 = (_a2 = part.providerOptions) == null ? void 0 : _a2[providerOptionsName]) == null ? void 0 : _b2.imageDetail\n                  };\n                } else if (part.mediaType === \"application/pdf\") {\n                  if (part.data instanceof URL) {\n                    return {\n                      type: \"input_file\",\n                      file_url: part.data.toString()\n                    };\n                  }\n                  return {\n                    type: \"input_file\",\n                    ...typeof part.data === \"string\" && isFileId(part.data, fileIdPrefixes) ? { file_id: part.data } : {\n                      filename: (_c2 = part.filename) != null ? _c2 : `part-${index}.pdf`,\n                      file_data: `data:application/pdf;base64,${(0,_ai_sdk_provider_utils__WEBPACK_IMPORTED_MODULE_1__.convertToBase64)(part.data)}`\n                    }\n                  };\n                } else {\n                  throw new _ai_sdk_provider__WEBPACK_IMPORTED_MODULE_2__.UnsupportedFunctionalityError({\n                    functionality: `file part media type ${part.mediaType}`\n                  });\n                }\n              }\n            }\n          })\n        });\n        break;\n      }\n      case \"assistant\": {\n        const reasoningMessages = {};\n        for (const part of content) {\n          switch (part.type) {\n            case \"text\": {\n              const id = (_b = (_a = part.providerOptions) == null ? void 0 : _a[providerOptionsName]) == null ? void 0 : _b.itemId;\n              if (store && id != null) {\n                input.push({ type: \"item_reference\", id });\n                break;\n              }\n              input.push({\n                role: \"assistant\",\n                content: [{ type: \"output_text\", text: part.text }],\n                id\n              });\n              break;\n            }\n            case \"tool-call\": {\n              const id = (_g = (_d = (_c = part.providerOptions) == null ? void 0 : _c[providerOptionsName]) == null ? void 0 : _d.itemId) != null ? _g : (_f = (_e = part.providerMetadata) == null ? void 0 : _e[providerOptionsName]) == null ? void 0 : _f.itemId;\n              if (part.providerExecuted) {\n                if (store && id != null) {\n                  input.push({ type: \"item_reference\", id });\n                }\n                break;\n              }\n              if (store && id != null) {\n                input.push({ type: \"item_reference\", id });\n                break;\n              }\n              const resolvedToolName = toolNameMapping.toProviderToolName(\n                part.toolName\n              );\n              if (hasLocalShellTool && resolvedToolName === \"local_shell\") {\n                const parsedInput = await (0,_ai_sdk_provider_utils__WEBPACK_IMPORTED_MODULE_1__.validateTypes)({\n                  value: part.input,\n                  schema: localShellInputSchema\n                });\n                input.push({\n                  type: \"local_shell_call\",\n                  call_id: part.toolCallId,\n                  id,\n                  action: {\n                    type: \"exec\",\n                    command: parsedInput.action.command,\n                    timeout_ms: parsedInput.action.timeoutMs,\n                    user: parsedInput.action.user,\n                    working_directory: parsedInput.action.workingDirectory,\n                    env: parsedInput.action.env\n                  }\n                });\n                break;\n              }\n              if (hasShellTool && resolvedToolName === \"shell\") {\n                const parsedInput = await (0,_ai_sdk_provider_utils__WEBPACK_IMPORTED_MODULE_1__.validateTypes)({\n                  value: part.input,\n                  schema: shellInputSchema\n                });\n                input.push({\n                  type: \"shell_call\",\n                  call_id: part.toolCallId,\n                  id,\n                  status: \"completed\",\n                  action: {\n                    commands: parsedInput.action.commands,\n                    timeout_ms: parsedInput.action.timeoutMs,\n                    max_output_length: parsedInput.action.maxOutputLength\n                  }\n                });\n                break;\n              }\n              input.push({\n                type: \"function_call\",\n                call_id: part.toolCallId,\n                name: resolvedToolName,\n                arguments: JSON.stringify(part.input),\n                id\n              });\n              break;\n            }\n            // assistant tool result parts are from provider-executed tools:\n            case \"tool-result\": {\n              if (part.output.type === \"execution-denied\" || part.output.type === \"json\" && typeof part.output.value === \"object\" && part.output.value != null && \"type\" in part.output.value && part.output.value.type === \"execution-denied\") {\n                break;\n              }\n              if (store) {\n                const itemId = (_j = (_i = (_h = part.providerMetadata) == null ? void 0 : _h[providerOptionsName]) == null ? void 0 : _i.itemId) != null ? _j : part.toolCallId;\n                input.push({ type: \"item_reference\", id: itemId });\n              } else {\n                warnings.push({\n                  type: \"other\",\n                  message: `Results for OpenAI tool ${part.toolName} are not sent to the API when store is false`\n                });\n              }\n              break;\n            }\n            case \"reasoning\": {\n              const providerOptions = await (0,_ai_sdk_provider_utils__WEBPACK_IMPORTED_MODULE_1__.parseProviderOptions)({\n                provider: providerOptionsName,\n                providerOptions: part.providerOptions,\n                schema: openaiResponsesReasoningProviderOptionsSchema\n              });\n              const reasoningId = providerOptions == null ? void 0 : providerOptions.itemId;\n              if (reasoningId != null) {\n                const reasoningMessage = reasoningMessages[reasoningId];\n                if (store) {\n                  if (reasoningMessage === void 0) {\n                    input.push({ type: \"item_reference\", id: reasoningId });\n                    reasoningMessages[reasoningId] = {\n                      type: \"reasoning\",\n                      id: reasoningId,\n                      summary: []\n                    };\n                  }\n                } else {\n                  const summaryParts = [];\n                  if (part.text.length > 0) {\n                    summaryParts.push({\n                      type: \"summary_text\",\n                      text: part.text\n                    });\n                  } else if (reasoningMessage !== void 0) {\n                    warnings.push({\n                      type: \"other\",\n                      message: `Cannot append empty reasoning part to existing reasoning sequence. Skipping reasoning part: ${JSON.stringify(part)}.`\n                    });\n                  }\n                  if (reasoningMessage === void 0) {\n                    reasoningMessages[reasoningId] = {\n                      type: \"reasoning\",\n                      id: reasoningId,\n                      encrypted_content: providerOptions == null ? void 0 : providerOptions.reasoningEncryptedContent,\n                      summary: summaryParts\n                    };\n                    input.push(reasoningMessages[reasoningId]);\n                  } else {\n                    reasoningMessage.summary.push(...summaryParts);\n                    if ((providerOptions == null ? void 0 : providerOptions.reasoningEncryptedContent) != null) {\n                      reasoningMessage.encrypted_content = providerOptions.reasoningEncryptedContent;\n                    }\n                  }\n                }\n              } else {\n                warnings.push({\n                  type: \"other\",\n                  message: `Non-OpenAI reasoning parts are not supported. Skipping reasoning part: ${JSON.stringify(part)}.`\n                });\n              }\n              break;\n            }\n          }\n        }\n        break;\n      }\n      case \"tool\": {\n        for (const part of content) {\n          if (part.type === \"tool-approval-response\") {\n            const approvalResponse = part;\n            if (processedApprovalIds.has(approvalResponse.approvalId)) {\n              continue;\n            }\n            processedApprovalIds.add(approvalResponse.approvalId);\n            if (store) {\n              input.push({\n                type: \"item_reference\",\n                id: approvalResponse.approvalId\n              });\n            }\n            input.push({\n              type: \"mcp_approval_response\",\n              approval_request_id: approvalResponse.approvalId,\n              approve: approvalResponse.approved\n            });\n            continue;\n          }\n          const output = part.output;\n          if (output.type === \"execution-denied\") {\n            const approvalId = (_l = (_k = output.providerOptions) == null ? void 0 : _k.openai) == null ? void 0 : _l.approvalId;\n            if (approvalId) {\n              continue;\n            }\n          }\n          const resolvedToolName = toolNameMapping.toProviderToolName(\n            part.toolName\n          );\n          if (hasLocalShellTool && resolvedToolName === \"local_shell\" && output.type === \"json\") {\n            const parsedOutput = await (0,_ai_sdk_provider_utils__WEBPACK_IMPORTED_MODULE_1__.validateTypes)({\n              value: output.value,\n              schema: localShellOutputSchema\n            });\n            input.push({\n              type: \"local_shell_call_output\",\n              call_id: part.toolCallId,\n              output: parsedOutput.output\n            });\n            continue;\n          }\n          if (hasShellTool && resolvedToolName === \"shell\" && output.type === \"json\") {\n            const parsedOutput = await (0,_ai_sdk_provider_utils__WEBPACK_IMPORTED_MODULE_1__.validateTypes)({\n              value: output.value,\n              schema: shellOutputSchema\n            });\n            input.push({\n              type: \"shell_call_output\",\n              call_id: part.toolCallId,\n              output: parsedOutput.output.map((item) => ({\n                stdout: item.stdout,\n                stderr: item.stderr,\n                outcome: item.outcome.type === \"timeout\" ? { type: \"timeout\" } : {\n                  type: \"exit\",\n                  exit_code: item.outcome.exitCode\n                }\n              }))\n            });\n            continue;\n          }\n          if (hasApplyPatchTool && part.toolName === \"apply_patch\" && output.type === \"json\") {\n            const parsedOutput = await (0,_ai_sdk_provider_utils__WEBPACK_IMPORTED_MODULE_1__.validateTypes)({\n              value: output.value,\n              schema: applyPatchOutputSchema\n            });\n            input.push({\n              type: \"apply_patch_call_output\",\n              call_id: part.toolCallId,\n              status: parsedOutput.status,\n              output: parsedOutput.output\n            });\n            continue;\n          }\n          let contentValue;\n          switch (output.type) {\n            case \"text\":\n            case \"error-text\":\n              contentValue = output.value;\n              break;\n            case \"execution-denied\":\n              contentValue = (_m = output.reason) != null ? _m : \"Tool execution denied.\";\n              break;\n            case \"json\":\n            case \"error-json\":\n              contentValue = JSON.stringify(output.value);\n              break;\n            case \"content\":\n              contentValue = output.value.map((item) => {\n                var _a2;\n                switch (item.type) {\n                  case \"text\": {\n                    return { type: \"input_text\", text: item.text };\n                  }\n                  case \"image-data\": {\n                    return {\n                      type: \"input_image\",\n                      image_url: `data:${item.mediaType};base64,${item.data}`\n                    };\n                  }\n                  case \"image-url\": {\n                    return {\n                      type: \"input_image\",\n                      image_url: item.url\n                    };\n                  }\n                  case \"file-data\": {\n                    return {\n                      type: \"input_file\",\n                      filename: (_a2 = item.filename) != null ? _a2 : \"data\",\n                      file_data: `data:${item.mediaType};base64,${item.data}`\n                    };\n                  }\n                  default: {\n                    warnings.push({\n                      type: \"other\",\n                      message: `unsupported tool content part type: ${item.type}`\n                    });\n                    return void 0;\n                  }\n                }\n              }).filter(_ai_sdk_provider_utils__WEBPACK_IMPORTED_MODULE_1__.isNonNullable);\n              break;\n          }\n          input.push({\n            type: \"function_call_output\",\n            call_id: part.toolCallId,\n            output: contentValue\n          });\n        }\n        break;\n      }\n      default: {\n        const _exhaustiveCheck = role;\n        throw new Error(`Unsupported role: ${_exhaustiveCheck}`);\n      }\n    }\n  }\n  return { input, warnings };\n}\nvar openaiResponsesReasoningProviderOptionsSchema = zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.object({\n  itemId: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.string().nullish(),\n  reasoningEncryptedContent: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.string().nullish()\n});\n\n// src/responses/map-openai-responses-finish-reason.ts\nfunction mapOpenAIResponseFinishReason({\n  finishReason,\n  hasFunctionCall\n}) {\n  switch (finishReason) {\n    case void 0:\n    case null:\n      return hasFunctionCall ? \"tool-calls\" : \"stop\";\n    case \"max_output_tokens\":\n      return \"length\";\n    case \"content_filter\":\n      return \"content-filter\";\n    default:\n      return hasFunctionCall ? \"tool-calls\" : \"other\";\n  }\n}\n\n// src/responses/openai-responses-api.ts\n\n\nvar openaiResponsesChunkSchema = (0,_ai_sdk_provider_utils__WEBPACK_IMPORTED_MODULE_1__.lazySchema)(\n  () => (0,_ai_sdk_provider_utils__WEBPACK_IMPORTED_MODULE_1__.zodSchema)(\n    zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.union([\n      zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.object({\n        type: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.literal(\"response.output_text.delta\"),\n        item_id: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.string(),\n        delta: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.string(),\n        logprobs: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.array(\n          zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.object({\n            token: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.string(),\n            logprob: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.number(),\n            top_logprobs: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.array(\n              zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.object({\n                token: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.string(),\n                logprob: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.number()\n              })\n            )\n          })\n        ).nullish()\n      }),\n      zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.object({\n        type: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z[\"enum\"]([\"response.completed\", \"response.incomplete\"]),\n        response: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.object({\n          incomplete_details: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.object({ reason: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.string() }).nullish(),\n          usage: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.object({\n            input_tokens: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.number(),\n            input_tokens_details: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.object({ cached_tokens: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.number().nullish() }).nullish(),\n            output_tokens: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.number(),\n            output_tokens_details: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.object({ reasoning_tokens: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.number().nullish() }).nullish()\n          }),\n          service_tier: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.string().nullish()\n        })\n      }),\n      zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.object({\n        type: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.literal(\"response.created\"),\n        response: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.object({\n          id: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.string(),\n          created_at: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.number(),\n          model: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.string(),\n          service_tier: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.string().nullish()\n        })\n      }),\n      zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.object({\n        type: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.literal(\"response.output_item.added\"),\n        output_index: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.number(),\n        item: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.discriminatedUnion(\"type\", [\n          zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.object({\n            type: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.literal(\"message\"),\n            id: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.string()\n          }),\n          zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.object({\n            type: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.literal(\"reasoning\"),\n            id: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.string(),\n            encrypted_content: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.string().nullish()\n          }),\n          zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.object({\n            type: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.literal(\"function_call\"),\n            id: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.string(),\n            call_id: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.string(),\n            name: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.string(),\n            arguments: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.string()\n          }),\n          zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.object({\n            type: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.literal(\"web_search_call\"),\n            id: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.string(),\n            status: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.string()\n          }),\n          zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.object({\n            type: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.literal(\"computer_call\"),\n            id: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.string(),\n            status: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.string()\n          }),\n          zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.object({\n            type: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.literal(\"file_search_call\"),\n            id: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.string()\n          }),\n          zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.object({\n            type: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.literal(\"image_generation_call\"),\n            id: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.string()\n          }),\n          zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.object({\n            type: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.literal(\"code_interpreter_call\"),\n            id: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.string(),\n            container_id: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.string(),\n            code: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.string().nullable(),\n            outputs: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.array(\n              zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.discriminatedUnion(\"type\", [\n                zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.object({ type: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.literal(\"logs\"), logs: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.string() }),\n                zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.object({ type: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.literal(\"image\"), url: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.string() })\n              ])\n            ).nullable(),\n            status: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.string()\n          }),\n          zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.object({\n            type: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.literal(\"mcp_call\"),\n            id: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.string(),\n            status: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.string(),\n            approval_request_id: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.string().nullish()\n          }),\n          zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.object({\n            type: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.literal(\"mcp_list_tools\"),\n            id: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.string()\n          }),\n          zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.object({\n            type: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.literal(\"mcp_approval_request\"),\n            id: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.string()\n          }),\n          zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.object({\n            type: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.literal(\"apply_patch_call\"),\n            id: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.string(),\n            call_id: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.string(),\n            status: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z[\"enum\"]([\"in_progress\", \"completed\"]),\n            operation: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.discriminatedUnion(\"type\", [\n              zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.object({\n                type: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.literal(\"create_file\"),\n                path: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.string(),\n                diff: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.string()\n              }),\n              zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.object({\n                type: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.literal(\"delete_file\"),\n                path: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.string()\n              }),\n              zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.object({\n                type: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.literal(\"update_file\"),\n                path: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.string(),\n                diff: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.string()\n              })\n            ])\n          }),\n          zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.object({\n            type: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.literal(\"shell_call\"),\n            id: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.string(),\n            call_id: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.string(),\n            status: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z[\"enum\"]([\"in_progress\", \"completed\", \"incomplete\"]),\n            action: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.object({\n              commands: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.array(zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.string())\n            })\n          })\n        ])\n      }),\n      zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.object({\n        type: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.literal(\"response.output_item.done\"),\n        output_index: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.number(),\n        item: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.discriminatedUnion(\"type\", [\n          zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.object({\n            type: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.literal(\"message\"),\n            id: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.string()\n          }),\n          zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.object({\n            type: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.literal(\"reasoning\"),\n            id: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.string(),\n            encrypted_content: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.string().nullish()\n          }),\n          zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.object({\n            type: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.literal(\"function_call\"),\n            id: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.string(),\n            call_id: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.string(),\n            name: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.string(),\n            arguments: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.string(),\n            status: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.literal(\"completed\")\n          }),\n          zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.object({\n            type: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.literal(\"code_interpreter_call\"),\n            id: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.string(),\n            code: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.string().nullable(),\n            container_id: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.string(),\n            outputs: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.array(\n              zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.discriminatedUnion(\"type\", [\n                zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.object({ type: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.literal(\"logs\"), logs: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.string() }),\n                zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.object({ type: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.literal(\"image\"), url: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.string() })\n              ])\n            ).nullable()\n          }),\n          zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.object({\n            type: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.literal(\"image_generation_call\"),\n            id: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.string(),\n            result: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.string()\n          }),\n          zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.object({\n            type: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.literal(\"web_search_call\"),\n            id: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.string(),\n            status: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.string(),\n            action: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.discriminatedUnion(\"type\", [\n              zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.object({\n                type: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.literal(\"search\"),\n                query: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.string().nullish(),\n                sources: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.array(\n                  zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.discriminatedUnion(\"type\", [\n                    zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.object({ type: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.literal(\"url\"), url: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.string() }),\n                    zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.object({ type: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.literal(\"api\"), name: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.string() })\n                  ])\n                ).nullish()\n              }),\n              zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.object({\n                type: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.literal(\"open_page\"),\n                url: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.string().nullish()\n              }),\n              zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.object({\n                type: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.literal(\"find_in_page\"),\n                url: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.string().nullish(),\n                pattern: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.string().nullish()\n              })\n            ])\n          }),\n          zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.object({\n            type: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.literal(\"file_search_call\"),\n            id: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.string(),\n            queries: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.array(zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.string()),\n            results: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.array(\n              zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.object({\n                attributes: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.record(\n                  zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.string(),\n                  zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.union([zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.string(), zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.number(), zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.boolean()])\n                ),\n                file_id: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.string(),\n                filename: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.string(),\n                score: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.number(),\n                text: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.string()\n              })\n            ).nullish()\n          }),\n          zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.object({\n            type: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.literal(\"local_shell_call\"),\n            id: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.string(),\n            call_id: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.string(),\n            action: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.object({\n              type: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.literal(\"exec\"),\n              command: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.array(zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.string()),\n              timeout_ms: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.number().optional(),\n              user: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.string().optional(),\n              working_directory: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.string().optional(),\n              env: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.record(zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.string(), zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.string()).optional()\n            })\n          }),\n          zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.object({\n            type: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.literal(\"computer_call\"),\n            id: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.string(),\n            status: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.literal(\"completed\")\n          }),\n          zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.object({\n            type: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.literal(\"mcp_call\"),\n            id: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.string(),\n            status: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.string(),\n            arguments: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.string(),\n            name: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.string(),\n            server_label: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.string(),\n            output: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.string().nullish(),\n            error: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.union([\n              zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.string(),\n              zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.object({\n                type: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.string().optional(),\n                code: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.union([zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.number(), zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.string()]).optional(),\n                message: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.string().optional()\n              }).loose()\n            ]).nullish(),\n            approval_request_id: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.string().nullish()\n          }),\n          zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.object({\n            type: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.literal(\"mcp_list_tools\"),\n            id: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.string(),\n            server_label: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.string(),\n            tools: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.array(\n              zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.object({\n                name: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.string(),\n                description: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.string().optional(),\n                input_schema: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.any(),\n                annotations: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.record(zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.string(), zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.unknown()).optional()\n              })\n            ),\n            error: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.union([\n              zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.string(),\n              zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.object({\n                type: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.string().optional(),\n                code: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.union([zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.number(), zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.string()]).optional(),\n                message: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.string().optional()\n              }).loose()\n            ]).optional()\n          }),\n          zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.object({\n            type: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.literal(\"mcp_approval_request\"),\n            id: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.string(),\n            server_label: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.string(),\n            name: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.string(),\n            arguments: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.string(),\n            approval_request_id: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.string().optional()\n          }),\n          zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.object({\n            type: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.literal(\"apply_patch_call\"),\n            id: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.string(),\n            call_id: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.string(),\n            status: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z[\"enum\"]([\"in_progress\", \"completed\"]),\n            operation: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.discriminatedUnion(\"type\", [\n              zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.object({\n                type: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.literal(\"create_file\"),\n                path: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.string(),\n                diff: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.string()\n              }),\n              zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.object({\n                type: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.literal(\"delete_file\"),\n                path: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.string()\n              }),\n              zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.object({\n                type: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.literal(\"update_file\"),\n                path: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.string(),\n                diff: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.string()\n              })\n            ])\n          }),\n          zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.object({\n            type: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.literal(\"shell_call\"),\n            id: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.string(),\n            call_id: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.string(),\n            status: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z[\"enum\"]([\"in_progress\", \"completed\", \"incomplete\"]),\n            action: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.object({\n              commands: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.array(zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.string())\n            })\n          })\n        ])\n      }),\n      zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.object({\n        type: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.literal(\"response.function_call_arguments.delta\"),\n        item_id: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.string(),\n        output_index: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.number(),\n        delta: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.string()\n      }),\n      zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.object({\n        type: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.literal(\"response.image_generation_call.partial_image\"),\n        item_id: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.string(),\n        output_index: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.number(),\n        partial_image_b64: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.string()\n      }),\n      zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.object({\n        type: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.literal(\"response.code_interpreter_call_code.delta\"),\n        item_id: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.string(),\n        output_index: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.number(),\n        delta: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.string()\n      }),\n      zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.object({\n        type: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.literal(\"response.code_interpreter_call_code.done\"),\n        item_id: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.string(),\n        output_index: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.number(),\n        code: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.string()\n      }),\n      zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.object({\n        type: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.literal(\"response.output_text.annotation.added\"),\n        annotation: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.discriminatedUnion(\"type\", [\n          zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.object({\n            type: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.literal(\"url_citation\"),\n            start_index: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.number(),\n            end_index: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.number(),\n            url: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.string(),\n            title: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.string()\n          }),\n          zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.object({\n            type: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.literal(\"file_citation\"),\n            file_id: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.string(),\n            filename: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.string().nullish(),\n            index: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.number().nullish(),\n            start_index: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.number().nullish(),\n            end_index: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.number().nullish(),\n            quote: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.string().nullish()\n          }),\n          zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.object({\n            type: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.literal(\"container_file_citation\"),\n            container_id: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.string(),\n            file_id: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.string(),\n            filename: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.string().nullish(),\n            start_index: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.number().nullish(),\n            end_index: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.number().nullish(),\n            index: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.number().nullish()\n          }),\n          zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.object({\n            type: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.literal(\"file_path\"),\n            file_id: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.string(),\n            index: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.number().nullish()\n          })\n        ])\n      }),\n      zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.object({\n        type: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.literal(\"response.reasoning_summary_part.added\"),\n        item_id: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.string(),\n        summary_index: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.number()\n      }),\n      zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.object({\n        type: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.literal(\"response.reasoning_summary_text.delta\"),\n        item_id: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.string(),\n        summary_index: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.number(),\n        delta: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.string()\n      }),\n      zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.object({\n        type: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.literal(\"response.reasoning_summary_part.done\"),\n        item_id: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.string(),\n        summary_index: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.number()\n      }),\n      zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.object({\n        type: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.literal(\"response.apply_patch_call_operation_diff.delta\"),\n        item_id: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.string(),\n        output_index: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.number(),\n        delta: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.string(),\n        obfuscation: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.string().nullish()\n      }),\n      zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.object({\n        type: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.literal(\"response.apply_patch_call_operation_diff.done\"),\n        item_id: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.string(),\n        output_index: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.number(),\n        diff: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.string()\n      }),\n      zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.object({\n        type: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.literal(\"error\"),\n        sequence_number: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.number(),\n        error: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.object({\n          type: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.string(),\n          code: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.string(),\n          message: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.string(),\n          param: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.string().nullish()\n        })\n      }),\n      zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.object({ type: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.string() }).loose().transform((value) => ({\n        type: \"unknown_chunk\",\n        message: value.type\n      }))\n      // fallback for unknown chunks\n    ])\n  )\n);\nvar openaiResponsesResponseSchema = (0,_ai_sdk_provider_utils__WEBPACK_IMPORTED_MODULE_1__.lazySchema)(\n  () => (0,_ai_sdk_provider_utils__WEBPACK_IMPORTED_MODULE_1__.zodSchema)(\n    zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.object({\n      id: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.string().optional(),\n      created_at: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.number().optional(),\n      error: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.object({\n        message: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.string(),\n        type: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.string(),\n        param: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.string().nullish(),\n        code: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.string()\n      }).nullish(),\n      model: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.string().optional(),\n      output: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.array(\n        zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.discriminatedUnion(\"type\", [\n          zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.object({\n            type: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.literal(\"message\"),\n            role: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.literal(\"assistant\"),\n            id: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.string(),\n            content: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.array(\n              zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.object({\n                type: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.literal(\"output_text\"),\n                text: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.string(),\n                logprobs: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.array(\n                  zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.object({\n                    token: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.string(),\n                    logprob: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.number(),\n                    top_logprobs: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.array(\n                      zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.object({\n                        token: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.string(),\n                        logprob: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.number()\n                      })\n                    )\n                  })\n                ).nullish(),\n                annotations: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.array(\n                  zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.discriminatedUnion(\"type\", [\n                    zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.object({\n                      type: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.literal(\"url_citation\"),\n                      start_index: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.number(),\n                      end_index: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.number(),\n                      url: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.string(),\n                      title: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.string()\n                    }),\n                    zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.object({\n                      type: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.literal(\"file_citation\"),\n                      file_id: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.string(),\n                      filename: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.string().nullish(),\n                      index: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.number().nullish(),\n                      start_index: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.number().nullish(),\n                      end_index: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.number().nullish(),\n                      quote: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.string().nullish()\n                    }),\n                    zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.object({\n                      type: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.literal(\"container_file_citation\"),\n                      container_id: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.string(),\n                      file_id: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.string(),\n                      filename: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.string().nullish(),\n                      start_index: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.number().nullish(),\n                      end_index: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.number().nullish(),\n                      index: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.number().nullish()\n                    }),\n                    zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.object({\n                      type: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.literal(\"file_path\"),\n                      file_id: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.string(),\n                      index: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.number().nullish()\n                    })\n                  ])\n                )\n              })\n            )\n          }),\n          zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.object({\n            type: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.literal(\"web_search_call\"),\n            id: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.string(),\n            status: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.string(),\n            action: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.discriminatedUnion(\"type\", [\n              zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.object({\n                type: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.literal(\"search\"),\n                query: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.string().nullish(),\n                sources: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.array(\n                  zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.discriminatedUnion(\"type\", [\n                    zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.object({ type: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.literal(\"url\"), url: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.string() }),\n                    zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.object({ type: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.literal(\"api\"), name: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.string() })\n                  ])\n                ).nullish()\n              }),\n              zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.object({\n                type: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.literal(\"open_page\"),\n                url: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.string().nullish()\n              }),\n              zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.object({\n                type: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.literal(\"find_in_page\"),\n                url: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.string().nullish(),\n                pattern: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.string().nullish()\n              })\n            ])\n          }),\n          zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.object({\n            type: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.literal(\"file_search_call\"),\n            id: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.string(),\n            queries: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.array(zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.string()),\n            results: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.array(\n              zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.object({\n                attributes: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.record(\n                  zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.string(),\n                  zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.union([zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.string(), zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.number(), zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.boolean()])\n                ),\n                file_id: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.string(),\n                filename: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.string(),\n                score: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.number(),\n                text: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.string()\n              })\n            ).nullish()\n          }),\n          zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.object({\n            type: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.literal(\"code_interpreter_call\"),\n            id: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.string(),\n            code: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.string().nullable(),\n            container_id: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.string(),\n            outputs: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.array(\n              zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.discriminatedUnion(\"type\", [\n                zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.object({ type: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.literal(\"logs\"), logs: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.string() }),\n                zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.object({ type: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.literal(\"image\"), url: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.string() })\n              ])\n            ).nullable()\n          }),\n          zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.object({\n            type: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.literal(\"image_generation_call\"),\n            id: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.string(),\n            result: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.string()\n          }),\n          zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.object({\n            type: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.literal(\"local_shell_call\"),\n            id: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.string(),\n            call_id: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.string(),\n            action: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.object({\n              type: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.literal(\"exec\"),\n              command: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.array(zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.string()),\n              timeout_ms: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.number().optional(),\n              user: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.string().optional(),\n              working_directory: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.string().optional(),\n              env: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.record(zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.string(), zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.string()).optional()\n            })\n          }),\n          zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.object({\n            type: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.literal(\"function_call\"),\n            call_id: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.string(),\n            name: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.string(),\n            arguments: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.string(),\n            id: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.string()\n          }),\n          zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.object({\n            type: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.literal(\"computer_call\"),\n            id: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.string(),\n            status: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.string().optional()\n          }),\n          zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.object({\n            type: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.literal(\"reasoning\"),\n            id: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.string(),\n            encrypted_content: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.string().nullish(),\n            summary: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.array(\n              zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.object({\n                type: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.literal(\"summary_text\"),\n                text: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.string()\n              })\n            )\n          }),\n          zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.object({\n            type: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.literal(\"mcp_call\"),\n            id: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.string(),\n            status: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.string(),\n            arguments: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.string(),\n            name: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.string(),\n            server_label: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.string(),\n            output: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.string().nullish(),\n            error: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.union([\n              zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.string(),\n              zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.object({\n                type: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.string().optional(),\n                code: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.union([zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.number(), zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.string()]).optional(),\n                message: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.string().optional()\n              }).loose()\n            ]).nullish(),\n            approval_request_id: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.string().nullish()\n          }),\n          zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.object({\n            type: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.literal(\"mcp_list_tools\"),\n            id: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.string(),\n            server_label: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.string(),\n            tools: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.array(\n              zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.object({\n                name: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.string(),\n                description: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.string().optional(),\n                input_schema: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.any(),\n                annotations: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.record(zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.string(), zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.unknown()).optional()\n              })\n            ),\n            error: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.union([\n              zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.string(),\n              zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.object({\n                type: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.string().optional(),\n                code: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.union([zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.number(), zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.string()]).optional(),\n                message: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.string().optional()\n              }).loose()\n            ]).optional()\n          }),\n          zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.object({\n            type: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.literal(\"mcp_approval_request\"),\n            id: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.string(),\n            server_label: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.string(),\n            name: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.string(),\n            arguments: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.string(),\n            approval_request_id: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.string().optional()\n          }),\n          zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.object({\n            type: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.literal(\"apply_patch_call\"),\n            id: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.string(),\n            call_id: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.string(),\n            status: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z[\"enum\"]([\"in_progress\", \"completed\"]),\n            operation: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.discriminatedUnion(\"type\", [\n              zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.object({\n                type: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.literal(\"create_file\"),\n                path: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.string(),\n                diff: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.string()\n              }),\n              zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.object({\n                type: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.literal(\"delete_file\"),\n                path: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.string()\n              }),\n              zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.object({\n                type: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.literal(\"update_file\"),\n                path: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.string(),\n                diff: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.string()\n              })\n            ])\n          }),\n          zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.object({\n            type: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.literal(\"shell_call\"),\n            id: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.string(),\n            call_id: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.string(),\n            status: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z[\"enum\"]([\"in_progress\", \"completed\", \"incomplete\"]),\n            action: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.object({\n              commands: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.array(zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.string())\n            })\n          })\n        ])\n      ).optional(),\n      service_tier: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.string().nullish(),\n      incomplete_details: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.object({ reason: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.string() }).nullish(),\n      usage: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.object({\n        input_tokens: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.number(),\n        input_tokens_details: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.object({ cached_tokens: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.number().nullish() }).nullish(),\n        output_tokens: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.number(),\n        output_tokens_details: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.object({ reasoning_tokens: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.number().nullish() }).nullish()\n      }).optional()\n    })\n  )\n);\n\n// src/responses/openai-responses-options.ts\n\n\nvar TOP_LOGPROBS_MAX = 20;\nvar openaiResponsesReasoningModelIds = [\n  \"o1\",\n  \"o1-2024-12-17\",\n  \"o3\",\n  \"o3-2025-04-16\",\n  \"o3-deep-research\",\n  \"o3-deep-research-2025-06-26\",\n  \"o3-mini\",\n  \"o3-mini-2025-01-31\",\n  \"o4-mini\",\n  \"o4-mini-2025-04-16\",\n  \"o4-mini-deep-research\",\n  \"o4-mini-deep-research-2025-06-26\",\n  \"codex-mini-latest\",\n  \"computer-use-preview\",\n  \"gpt-5\",\n  \"gpt-5-2025-08-07\",\n  \"gpt-5-codex\",\n  \"gpt-5-mini\",\n  \"gpt-5-mini-2025-08-07\",\n  \"gpt-5-nano\",\n  \"gpt-5-nano-2025-08-07\",\n  \"gpt-5-pro\",\n  \"gpt-5-pro-2025-10-06\",\n  \"gpt-5.1\",\n  \"gpt-5.1-chat-latest\",\n  \"gpt-5.1-codex-mini\",\n  \"gpt-5.1-codex\",\n  \"gpt-5.1-codex-max\",\n  \"gpt-5.2\",\n  \"gpt-5.2-chat-latest\",\n  \"gpt-5.2-pro\"\n];\nvar openaiResponsesModelIds = [\n  \"gpt-4.1\",\n  \"gpt-4.1-2025-04-14\",\n  \"gpt-4.1-mini\",\n  \"gpt-4.1-mini-2025-04-14\",\n  \"gpt-4.1-nano\",\n  \"gpt-4.1-nano-2025-04-14\",\n  \"gpt-4o\",\n  \"gpt-4o-2024-05-13\",\n  \"gpt-4o-2024-08-06\",\n  \"gpt-4o-2024-11-20\",\n  \"gpt-4o-audio-preview\",\n  \"gpt-4o-audio-preview-2024-10-01\",\n  \"gpt-4o-audio-preview-2024-12-17\",\n  \"gpt-4o-search-preview\",\n  \"gpt-4o-search-preview-2025-03-11\",\n  \"gpt-4o-mini-search-preview\",\n  \"gpt-4o-mini-search-preview-2025-03-11\",\n  \"gpt-4o-mini\",\n  \"gpt-4o-mini-2024-07-18\",\n  \"gpt-4-turbo\",\n  \"gpt-4-turbo-2024-04-09\",\n  \"gpt-4-turbo-preview\",\n  \"gpt-4-0125-preview\",\n  \"gpt-4-1106-preview\",\n  \"gpt-4\",\n  \"gpt-4-0613\",\n  \"gpt-4.5-preview\",\n  \"gpt-4.5-preview-2025-02-27\",\n  \"gpt-3.5-turbo-0125\",\n  \"gpt-3.5-turbo\",\n  \"gpt-3.5-turbo-1106\",\n  \"chatgpt-4o-latest\",\n  \"gpt-5-chat-latest\",\n  ...openaiResponsesReasoningModelIds\n];\nvar openaiResponsesProviderOptionsSchema = (0,_ai_sdk_provider_utils__WEBPACK_IMPORTED_MODULE_1__.lazySchema)(\n  () => (0,_ai_sdk_provider_utils__WEBPACK_IMPORTED_MODULE_1__.zodSchema)(\n    zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.object({\n      /**\n       * The ID of the OpenAI Conversation to continue.\n       * You must create a conversation first via the OpenAI API.\n       * Cannot be used in conjunction with `previousResponseId`.\n       * Defaults to `undefined`.\n       * @see https://platform.openai.com/docs/api-reference/conversations/create\n       */\n      conversation: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.string().nullish(),\n      /**\n       * The set of extra fields to include in the response (advanced, usually not needed).\n       * Example values: 'reasoning.encrypted_content', 'file_search_call.results', 'message.output_text.logprobs'.\n       */\n      include: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.array(\n        zod_v4__WEBPACK_IMPORTED_MODULE_0__.z[\"enum\"]([\n          \"reasoning.encrypted_content\",\n          // handled internally by default, only needed for unknown reasoning models\n          \"file_search_call.results\",\n          \"message.output_text.logprobs\"\n        ])\n      ).nullish(),\n      /**\n       * Instructions for the model.\n       * They can be used to change the system or developer message when continuing a conversation using the `previousResponseId` option.\n       * Defaults to `undefined`.\n       */\n      instructions: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.string().nullish(),\n      /**\n       * Return the log probabilities of the tokens. Including logprobs will increase\n       * the response size and can slow down response times. However, it can\n       * be useful to better understand how the model is behaving.\n       *\n       * Setting to true will return the log probabilities of the tokens that\n       * were generated.\n       *\n       * Setting to a number will return the log probabilities of the top n\n       * tokens that were generated.\n       *\n       * @see https://platform.openai.com/docs/api-reference/responses/create\n       * @see https://cookbook.openai.com/examples/using_logprobs\n       */\n      logprobs: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.union([zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.boolean(), zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.number().min(1).max(TOP_LOGPROBS_MAX)]).optional(),\n      /**\n       * The maximum number of total calls to built-in tools that can be processed in a response.\n       * This maximum number applies across all built-in tool calls, not per individual tool.\n       * Any further attempts to call a tool by the model will be ignored.\n       */\n      maxToolCalls: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.number().nullish(),\n      /**\n       * Additional metadata to store with the generation.\n       */\n      metadata: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.any().nullish(),\n      /**\n       * Whether to use parallel tool calls. Defaults to `true`.\n       */\n      parallelToolCalls: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.boolean().nullish(),\n      /**\n       * The ID of the previous response. You can use it to continue a conversation.\n       * Defaults to `undefined`.\n       */\n      previousResponseId: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.string().nullish(),\n      /**\n       * Sets a cache key to tie this prompt to cached prefixes for better caching performance.\n       */\n      promptCacheKey: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.string().nullish(),\n      /**\n       * The retention policy for the prompt cache.\n       * - 'in_memory': Default. Standard prompt caching behavior.\n       * - '24h': Extended prompt caching that keeps cached prefixes active for up to 24 hours.\n       *          Currently only available for 5.1 series models.\n       *\n       * @default 'in_memory'\n       */\n      promptCacheRetention: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z[\"enum\"]([\"in_memory\", \"24h\"]).nullish(),\n      /**\n       * Reasoning effort for reasoning models. Defaults to `medium`. If you use\n       * `providerOptions` to set the `reasoningEffort` option, this model setting will be ignored.\n       * Valid values: 'none' | 'minimal' | 'low' | 'medium' | 'high' | 'xhigh'\n       *\n       * The 'none' type for `reasoningEffort` is only available for OpenAI's GPT-5.1\n       * models. Also, the 'xhigh' type for `reasoningEffort` is only available for\n       * OpenAI's GPT-5.1-Codex-Max model. Setting `reasoningEffort` to 'none' or 'xhigh' with unsupported models will result in\n       * an error.\n       */\n      reasoningEffort: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.string().nullish(),\n      /**\n       * Controls reasoning summary output from the model.\n       * Set to \"auto\" to automatically receive the richest level available,\n       * or \"detailed\" for comprehensive summaries.\n       */\n      reasoningSummary: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.string().nullish(),\n      /**\n       * The identifier for safety monitoring and tracking.\n       */\n      safetyIdentifier: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.string().nullish(),\n      /**\n       * Service tier for the request.\n       * Set to 'flex' for 50% cheaper processing at the cost of increased latency (available for o3, o4-mini, and gpt-5 models).\n       * Set to 'priority' for faster processing with Enterprise access (available for gpt-4, gpt-5, gpt-5-mini, o3, o4-mini; gpt-5-nano is not supported).\n       *\n       * Defaults to 'auto'.\n       */\n      serviceTier: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z[\"enum\"]([\"auto\", \"flex\", \"priority\", \"default\"]).nullish(),\n      /**\n       * Whether to store the generation. Defaults to `true`.\n       */\n      store: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.boolean().nullish(),\n      /**\n       * Whether to use strict JSON schema validation.\n       * Defaults to `true`.\n       */\n      strictJsonSchema: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.boolean().nullish(),\n      /**\n       * Controls the verbosity of the model's responses. Lower values ('low') will result\n       * in more concise responses, while higher values ('high') will result in more verbose responses.\n       * Valid values: 'low', 'medium', 'high'.\n       */\n      textVerbosity: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z[\"enum\"]([\"low\", \"medium\", \"high\"]).nullish(),\n      /**\n       * Controls output truncation. 'auto' (default) performs truncation automatically;\n       * 'disabled' turns truncation off.\n       */\n      truncation: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z[\"enum\"]([\"auto\", \"disabled\"]).nullish(),\n      /**\n       * A unique identifier representing your end-user, which can help OpenAI to\n       * monitor and detect abuse.\n       * Defaults to `undefined`.\n       * @see https://platform.openai.com/docs/guides/safety-best-practices/end-user-ids\n       */\n      user: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.string().nullish(),\n      /**\n       * Override the system message mode for this model.\n       * - 'system': Use the 'system' role for system messages (default for most models)\n       * - 'developer': Use the 'developer' role for system messages (used by reasoning models)\n       * - 'remove': Remove system messages entirely\n       *\n       * If not specified, the mode is automatically determined based on the model.\n       */\n      systemMessageMode: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z[\"enum\"]([\"system\", \"developer\", \"remove\"]).optional(),\n      /**\n       * Force treating this model as a reasoning model.\n       *\n       * This is useful for \"stealth\" reasoning models (e.g. via a custom baseURL)\n       * where the model ID is not recognized by the SDK's allowlist.\n       *\n       * When enabled, the SDK applies reasoning-model parameter compatibility rules\n       * and defaults `systemMessageMode` to `developer` unless overridden.\n       */\n      forceReasoning: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.boolean().optional()\n    })\n  )\n);\n\n// src/responses/openai-responses-prepare-tools.ts\n\n\nasync function prepareResponsesTools({\n  tools,\n  toolChoice\n}) {\n  tools = (tools == null ? void 0 : tools.length) ? tools : void 0;\n  const toolWarnings = [];\n  if (tools == null) {\n    return { tools: void 0, toolChoice: void 0, toolWarnings };\n  }\n  const openaiTools2 = [];\n  for (const tool of tools) {\n    switch (tool.type) {\n      case \"function\":\n        openaiTools2.push({\n          type: \"function\",\n          name: tool.name,\n          description: tool.description,\n          parameters: tool.inputSchema,\n          ...tool.strict != null ? { strict: tool.strict } : {}\n        });\n        break;\n      case \"provider\": {\n        switch (tool.id) {\n          case \"openai.file_search\": {\n            const args = await (0,_ai_sdk_provider_utils__WEBPACK_IMPORTED_MODULE_1__.validateTypes)({\n              value: tool.args,\n              schema: fileSearchArgsSchema\n            });\n            openaiTools2.push({\n              type: \"file_search\",\n              vector_store_ids: args.vectorStoreIds,\n              max_num_results: args.maxNumResults,\n              ranking_options: args.ranking ? {\n                ranker: args.ranking.ranker,\n                score_threshold: args.ranking.scoreThreshold\n              } : void 0,\n              filters: args.filters\n            });\n            break;\n          }\n          case \"openai.local_shell\": {\n            openaiTools2.push({\n              type: \"local_shell\"\n            });\n            break;\n          }\n          case \"openai.shell\": {\n            openaiTools2.push({\n              type: \"shell\"\n            });\n            break;\n          }\n          case \"openai.apply_patch\": {\n            openaiTools2.push({\n              type: \"apply_patch\"\n            });\n            break;\n          }\n          case \"openai.web_search_preview\": {\n            const args = await (0,_ai_sdk_provider_utils__WEBPACK_IMPORTED_MODULE_1__.validateTypes)({\n              value: tool.args,\n              schema: webSearchPreviewArgsSchema\n            });\n            openaiTools2.push({\n              type: \"web_search_preview\",\n              search_context_size: args.searchContextSize,\n              user_location: args.userLocation\n            });\n            break;\n          }\n          case \"openai.web_search\": {\n            const args = await (0,_ai_sdk_provider_utils__WEBPACK_IMPORTED_MODULE_1__.validateTypes)({\n              value: tool.args,\n              schema: webSearchArgsSchema\n            });\n            openaiTools2.push({\n              type: \"web_search\",\n              filters: args.filters != null ? { allowed_domains: args.filters.allowedDomains } : void 0,\n              external_web_access: args.externalWebAccess,\n              search_context_size: args.searchContextSize,\n              user_location: args.userLocation\n            });\n            break;\n          }\n          case \"openai.code_interpreter\": {\n            const args = await (0,_ai_sdk_provider_utils__WEBPACK_IMPORTED_MODULE_1__.validateTypes)({\n              value: tool.args,\n              schema: codeInterpreterArgsSchema\n            });\n            openaiTools2.push({\n              type: \"code_interpreter\",\n              container: args.container == null ? { type: \"auto\", file_ids: void 0 } : typeof args.container === \"string\" ? args.container : { type: \"auto\", file_ids: args.container.fileIds }\n            });\n            break;\n          }\n          case \"openai.image_generation\": {\n            const args = await (0,_ai_sdk_provider_utils__WEBPACK_IMPORTED_MODULE_1__.validateTypes)({\n              value: tool.args,\n              schema: imageGenerationArgsSchema\n            });\n            openaiTools2.push({\n              type: \"image_generation\",\n              background: args.background,\n              input_fidelity: args.inputFidelity,\n              input_image_mask: args.inputImageMask ? {\n                file_id: args.inputImageMask.fileId,\n                image_url: args.inputImageMask.imageUrl\n              } : void 0,\n              model: args.model,\n              moderation: args.moderation,\n              partial_images: args.partialImages,\n              quality: args.quality,\n              output_compression: args.outputCompression,\n              output_format: args.outputFormat,\n              size: args.size\n            });\n            break;\n          }\n          case \"openai.mcp\": {\n            const args = await (0,_ai_sdk_provider_utils__WEBPACK_IMPORTED_MODULE_1__.validateTypes)({\n              value: tool.args,\n              schema: mcpArgsSchema\n            });\n            const mapApprovalFilter = (filter) => ({\n              tool_names: filter.toolNames\n            });\n            const requireApproval = args.requireApproval;\n            const requireApprovalParam = requireApproval == null ? void 0 : typeof requireApproval === \"string\" ? requireApproval : requireApproval.never != null ? { never: mapApprovalFilter(requireApproval.never) } : void 0;\n            openaiTools2.push({\n              type: \"mcp\",\n              server_label: args.serverLabel,\n              allowed_tools: Array.isArray(args.allowedTools) ? args.allowedTools : args.allowedTools ? {\n                read_only: args.allowedTools.readOnly,\n                tool_names: args.allowedTools.toolNames\n              } : void 0,\n              authorization: args.authorization,\n              connector_id: args.connectorId,\n              headers: args.headers,\n              require_approval: requireApprovalParam != null ? requireApprovalParam : \"never\",\n              server_description: args.serverDescription,\n              server_url: args.serverUrl\n            });\n            break;\n          }\n        }\n        break;\n      }\n      default:\n        toolWarnings.push({\n          type: \"unsupported\",\n          feature: `function tool ${tool}`\n        });\n        break;\n    }\n  }\n  if (toolChoice == null) {\n    return { tools: openaiTools2, toolChoice: void 0, toolWarnings };\n  }\n  const type = toolChoice.type;\n  switch (type) {\n    case \"auto\":\n    case \"none\":\n    case \"required\":\n      return { tools: openaiTools2, toolChoice: type, toolWarnings };\n    case \"tool\":\n      return {\n        tools: openaiTools2,\n        toolChoice: toolChoice.toolName === \"code_interpreter\" || toolChoice.toolName === \"file_search\" || toolChoice.toolName === \"image_generation\" || toolChoice.toolName === \"web_search_preview\" || toolChoice.toolName === \"web_search\" || toolChoice.toolName === \"mcp\" || toolChoice.toolName === \"apply_patch\" ? { type: toolChoice.toolName } : { type: \"function\", name: toolChoice.toolName },\n        toolWarnings\n      };\n    default: {\n      const _exhaustiveCheck = type;\n      throw new _ai_sdk_provider__WEBPACK_IMPORTED_MODULE_2__.UnsupportedFunctionalityError({\n        functionality: `tool choice type: ${_exhaustiveCheck}`\n      });\n    }\n  }\n}\n\n// src/responses/openai-responses-language-model.ts\nfunction extractApprovalRequestIdToToolCallIdMapping(prompt) {\n  var _a, _b;\n  const mapping = {};\n  for (const message of prompt) {\n    if (message.role !== \"assistant\") continue;\n    for (const part of message.content) {\n      if (part.type !== \"tool-call\") continue;\n      const approvalRequestId = (_b = (_a = part.providerOptions) == null ? void 0 : _a.openai) == null ? void 0 : _b.approvalRequestId;\n      if (approvalRequestId != null) {\n        mapping[approvalRequestId] = part.toolCallId;\n      }\n    }\n  }\n  return mapping;\n}\nvar OpenAIResponsesLanguageModel = class {\n  constructor(modelId, config) {\n    this.specificationVersion = \"v3\";\n    this.supportedUrls = {\n      \"image/*\": [/^https?:\\/\\/.*$/],\n      \"application/pdf\": [/^https?:\\/\\/.*$/]\n    };\n    this.modelId = modelId;\n    this.config = config;\n  }\n  get provider() {\n    return this.config.provider;\n  }\n  async getArgs({\n    maxOutputTokens,\n    temperature,\n    stopSequences,\n    topP,\n    topK,\n    presencePenalty,\n    frequencyPenalty,\n    seed,\n    prompt,\n    providerOptions,\n    tools,\n    toolChoice,\n    responseFormat\n  }) {\n    var _a, _b, _c, _d, _e, _f;\n    const warnings = [];\n    const modelCapabilities = getOpenAILanguageModelCapabilities(this.modelId);\n    if (topK != null) {\n      warnings.push({ type: \"unsupported\", feature: \"topK\" });\n    }\n    if (seed != null) {\n      warnings.push({ type: \"unsupported\", feature: \"seed\" });\n    }\n    if (presencePenalty != null) {\n      warnings.push({ type: \"unsupported\", feature: \"presencePenalty\" });\n    }\n    if (frequencyPenalty != null) {\n      warnings.push({ type: \"unsupported\", feature: \"frequencyPenalty\" });\n    }\n    if (stopSequences != null) {\n      warnings.push({ type: \"unsupported\", feature: \"stopSequences\" });\n    }\n    const providerOptionsName = this.config.provider.includes(\"azure\") ? \"azure\" : \"openai\";\n    let openaiOptions = await (0,_ai_sdk_provider_utils__WEBPACK_IMPORTED_MODULE_1__.parseProviderOptions)({\n      provider: providerOptionsName,\n      providerOptions,\n      schema: openaiResponsesProviderOptionsSchema\n    });\n    if (openaiOptions == null && providerOptionsName !== \"openai\") {\n      openaiOptions = await (0,_ai_sdk_provider_utils__WEBPACK_IMPORTED_MODULE_1__.parseProviderOptions)({\n        provider: \"openai\",\n        providerOptions,\n        schema: openaiResponsesProviderOptionsSchema\n      });\n    }\n    const isReasoningModel = (_a = openaiOptions == null ? void 0 : openaiOptions.forceReasoning) != null ? _a : modelCapabilities.isReasoningModel;\n    if ((openaiOptions == null ? void 0 : openaiOptions.conversation) && (openaiOptions == null ? void 0 : openaiOptions.previousResponseId)) {\n      warnings.push({\n        type: \"unsupported\",\n        feature: \"conversation\",\n        details: \"conversation and previousResponseId cannot be used together\"\n      });\n    }\n    const toolNameMapping = (0,_ai_sdk_provider_utils__WEBPACK_IMPORTED_MODULE_1__.createToolNameMapping)({\n      tools,\n      providerToolNames: {\n        \"openai.code_interpreter\": \"code_interpreter\",\n        \"openai.file_search\": \"file_search\",\n        \"openai.image_generation\": \"image_generation\",\n        \"openai.local_shell\": \"local_shell\",\n        \"openai.shell\": \"shell\",\n        \"openai.web_search\": \"web_search\",\n        \"openai.web_search_preview\": \"web_search_preview\",\n        \"openai.mcp\": \"mcp\",\n        \"openai.apply_patch\": \"apply_patch\"\n      }\n    });\n    const { input, warnings: inputWarnings } = await convertToOpenAIResponsesInput({\n      prompt,\n      toolNameMapping,\n      systemMessageMode: (_b = openaiOptions == null ? void 0 : openaiOptions.systemMessageMode) != null ? _b : isReasoningModel ? \"developer\" : modelCapabilities.systemMessageMode,\n      providerOptionsName,\n      fileIdPrefixes: this.config.fileIdPrefixes,\n      store: (_c = openaiOptions == null ? void 0 : openaiOptions.store) != null ? _c : true,\n      hasLocalShellTool: hasOpenAITool(\"openai.local_shell\"),\n      hasShellTool: hasOpenAITool(\"openai.shell\"),\n      hasApplyPatchTool: hasOpenAITool(\"openai.apply_patch\")\n    });\n    warnings.push(...inputWarnings);\n    const strictJsonSchema = (_d = openaiOptions == null ? void 0 : openaiOptions.strictJsonSchema) != null ? _d : true;\n    let include = openaiOptions == null ? void 0 : openaiOptions.include;\n    function addInclude(key) {\n      if (include == null) {\n        include = [key];\n      } else if (!include.includes(key)) {\n        include = [...include, key];\n      }\n    }\n    function hasOpenAITool(id) {\n      return (tools == null ? void 0 : tools.find((tool) => tool.type === \"provider\" && tool.id === id)) != null;\n    }\n    const topLogprobs = typeof (openaiOptions == null ? void 0 : openaiOptions.logprobs) === \"number\" ? openaiOptions == null ? void 0 : openaiOptions.logprobs : (openaiOptions == null ? void 0 : openaiOptions.logprobs) === true ? TOP_LOGPROBS_MAX : void 0;\n    if (topLogprobs) {\n      addInclude(\"message.output_text.logprobs\");\n    }\n    const webSearchToolName = (_e = tools == null ? void 0 : tools.find(\n      (tool) => tool.type === \"provider\" && (tool.id === \"openai.web_search\" || tool.id === \"openai.web_search_preview\")\n    )) == null ? void 0 : _e.name;\n    if (webSearchToolName) {\n      addInclude(\"web_search_call.action.sources\");\n    }\n    if (hasOpenAITool(\"openai.code_interpreter\")) {\n      addInclude(\"code_interpreter_call.outputs\");\n    }\n    const store = openaiOptions == null ? void 0 : openaiOptions.store;\n    if (store === false && isReasoningModel) {\n      addInclude(\"reasoning.encrypted_content\");\n    }\n    const baseArgs = {\n      model: this.modelId,\n      input,\n      temperature,\n      top_p: topP,\n      max_output_tokens: maxOutputTokens,\n      ...((responseFormat == null ? void 0 : responseFormat.type) === \"json\" || (openaiOptions == null ? void 0 : openaiOptions.textVerbosity)) && {\n        text: {\n          ...(responseFormat == null ? void 0 : responseFormat.type) === \"json\" && {\n            format: responseFormat.schema != null ? {\n              type: \"json_schema\",\n              strict: strictJsonSchema,\n              name: (_f = responseFormat.name) != null ? _f : \"response\",\n              description: responseFormat.description,\n              schema: responseFormat.schema\n            } : { type: \"json_object\" }\n          },\n          ...(openaiOptions == null ? void 0 : openaiOptions.textVerbosity) && {\n            verbosity: openaiOptions.textVerbosity\n          }\n        }\n      },\n      // provider options:\n      conversation: openaiOptions == null ? void 0 : openaiOptions.conversation,\n      max_tool_calls: openaiOptions == null ? void 0 : openaiOptions.maxToolCalls,\n      metadata: openaiOptions == null ? void 0 : openaiOptions.metadata,\n      parallel_tool_calls: openaiOptions == null ? void 0 : openaiOptions.parallelToolCalls,\n      previous_response_id: openaiOptions == null ? void 0 : openaiOptions.previousResponseId,\n      store,\n      user: openaiOptions == null ? void 0 : openaiOptions.user,\n      instructions: openaiOptions == null ? void 0 : openaiOptions.instructions,\n      service_tier: openaiOptions == null ? void 0 : openaiOptions.serviceTier,\n      include,\n      prompt_cache_key: openaiOptions == null ? void 0 : openaiOptions.promptCacheKey,\n      prompt_cache_retention: openaiOptions == null ? void 0 : openaiOptions.promptCacheRetention,\n      safety_identifier: openaiOptions == null ? void 0 : openaiOptions.safetyIdentifier,\n      top_logprobs: topLogprobs,\n      truncation: openaiOptions == null ? void 0 : openaiOptions.truncation,\n      // model-specific settings:\n      ...isReasoningModel && ((openaiOptions == null ? void 0 : openaiOptions.reasoningEffort) != null || (openaiOptions == null ? void 0 : openaiOptions.reasoningSummary) != null) && {\n        reasoning: {\n          ...(openaiOptions == null ? void 0 : openaiOptions.reasoningEffort) != null && {\n            effort: openaiOptions.reasoningEffort\n          },\n          ...(openaiOptions == null ? void 0 : openaiOptions.reasoningSummary) != null && {\n            summary: openaiOptions.reasoningSummary\n          }\n        }\n      }\n    };\n    if (isReasoningModel) {\n      if (!((openaiOptions == null ? void 0 : openaiOptions.reasoningEffort) === \"none\" && modelCapabilities.supportsNonReasoningParameters)) {\n        if (baseArgs.temperature != null) {\n          baseArgs.temperature = void 0;\n          warnings.push({\n            type: \"unsupported\",\n            feature: \"temperature\",\n            details: \"temperature is not supported for reasoning models\"\n          });\n        }\n        if (baseArgs.top_p != null) {\n          baseArgs.top_p = void 0;\n          warnings.push({\n            type: \"unsupported\",\n            feature: \"topP\",\n            details: \"topP is not supported for reasoning models\"\n          });\n        }\n      }\n    } else {\n      if ((openaiOptions == null ? void 0 : openaiOptions.reasoningEffort) != null) {\n        warnings.push({\n          type: \"unsupported\",\n          feature: \"reasoningEffort\",\n          details: \"reasoningEffort is not supported for non-reasoning models\"\n        });\n      }\n      if ((openaiOptions == null ? void 0 : openaiOptions.reasoningSummary) != null) {\n        warnings.push({\n          type: \"unsupported\",\n          feature: \"reasoningSummary\",\n          details: \"reasoningSummary is not supported for non-reasoning models\"\n        });\n      }\n    }\n    if ((openaiOptions == null ? void 0 : openaiOptions.serviceTier) === \"flex\" && !modelCapabilities.supportsFlexProcessing) {\n      warnings.push({\n        type: \"unsupported\",\n        feature: \"serviceTier\",\n        details: \"flex processing is only available for o3, o4-mini, and gpt-5 models\"\n      });\n      delete baseArgs.service_tier;\n    }\n    if ((openaiOptions == null ? void 0 : openaiOptions.serviceTier) === \"priority\" && !modelCapabilities.supportsPriorityProcessing) {\n      warnings.push({\n        type: \"unsupported\",\n        feature: \"serviceTier\",\n        details: \"priority processing is only available for supported models (gpt-4, gpt-5, gpt-5-mini, o3, o4-mini) and requires Enterprise access. gpt-5-nano is not supported\"\n      });\n      delete baseArgs.service_tier;\n    }\n    const {\n      tools: openaiTools2,\n      toolChoice: openaiToolChoice,\n      toolWarnings\n    } = await prepareResponsesTools({\n      tools,\n      toolChoice\n    });\n    return {\n      webSearchToolName,\n      args: {\n        ...baseArgs,\n        tools: openaiTools2,\n        tool_choice: openaiToolChoice\n      },\n      warnings: [...warnings, ...toolWarnings],\n      store,\n      toolNameMapping,\n      providerOptionsName\n    };\n  }\n  async doGenerate(options) {\n    var _a, _b, _c, _d, _e, _f, _g, _h, _i, _j, _k, _l, _m, _n, _o, _p, _q, _r, _s, _t, _u, _v, _w, _x, _y, _z, _A, _B, _C, _D, _E;\n    const {\n      args: body,\n      warnings,\n      webSearchToolName,\n      toolNameMapping,\n      providerOptionsName\n    } = await this.getArgs(options);\n    const url = this.config.url({\n      path: \"/responses\",\n      modelId: this.modelId\n    });\n    const approvalRequestIdToDummyToolCallIdFromPrompt = extractApprovalRequestIdToToolCallIdMapping(options.prompt);\n    const {\n      responseHeaders,\n      value: response,\n      rawValue: rawResponse\n    } = await (0,_ai_sdk_provider_utils__WEBPACK_IMPORTED_MODULE_1__.postJsonToApi)({\n      url,\n      headers: (0,_ai_sdk_provider_utils__WEBPACK_IMPORTED_MODULE_1__.combineHeaders)(this.config.headers(), options.headers),\n      body,\n      failedResponseHandler: openaiFailedResponseHandler,\n      successfulResponseHandler: (0,_ai_sdk_provider_utils__WEBPACK_IMPORTED_MODULE_1__.createJsonResponseHandler)(\n        openaiResponsesResponseSchema\n      ),\n      abortSignal: options.abortSignal,\n      fetch: this.config.fetch\n    });\n    if (response.error) {\n      throw new _ai_sdk_provider__WEBPACK_IMPORTED_MODULE_2__.APICallError({\n        message: response.error.message,\n        url,\n        requestBodyValues: body,\n        statusCode: 400,\n        responseHeaders,\n        responseBody: rawResponse,\n        isRetryable: false\n      });\n    }\n    const content = [];\n    const logprobs = [];\n    let hasFunctionCall = false;\n    for (const part of response.output) {\n      switch (part.type) {\n        case \"reasoning\": {\n          if (part.summary.length === 0) {\n            part.summary.push({ type: \"summary_text\", text: \"\" });\n          }\n          for (const summary of part.summary) {\n            content.push({\n              type: \"reasoning\",\n              text: summary.text,\n              providerMetadata: {\n                [providerOptionsName]: {\n                  itemId: part.id,\n                  reasoningEncryptedContent: (_a = part.encrypted_content) != null ? _a : null\n                }\n              }\n            });\n          }\n          break;\n        }\n        case \"image_generation_call\": {\n          content.push({\n            type: \"tool-call\",\n            toolCallId: part.id,\n            toolName: toolNameMapping.toCustomToolName(\"image_generation\"),\n            input: \"{}\",\n            providerExecuted: true\n          });\n          content.push({\n            type: \"tool-result\",\n            toolCallId: part.id,\n            toolName: toolNameMapping.toCustomToolName(\"image_generation\"),\n            result: {\n              result: part.result\n            }\n          });\n          break;\n        }\n        case \"local_shell_call\": {\n          content.push({\n            type: \"tool-call\",\n            toolCallId: part.call_id,\n            toolName: toolNameMapping.toCustomToolName(\"local_shell\"),\n            input: JSON.stringify({\n              action: part.action\n            }),\n            providerMetadata: {\n              [providerOptionsName]: {\n                itemId: part.id\n              }\n            }\n          });\n          break;\n        }\n        case \"shell_call\": {\n          content.push({\n            type: \"tool-call\",\n            toolCallId: part.call_id,\n            toolName: toolNameMapping.toCustomToolName(\"shell\"),\n            input: JSON.stringify({\n              action: {\n                commands: part.action.commands\n              }\n            }),\n            providerMetadata: {\n              [providerOptionsName]: {\n                itemId: part.id\n              }\n            }\n          });\n          break;\n        }\n        case \"message\": {\n          for (const contentPart of part.content) {\n            if (((_c = (_b = options.providerOptions) == null ? void 0 : _b[providerOptionsName]) == null ? void 0 : _c.logprobs) && contentPart.logprobs) {\n              logprobs.push(contentPart.logprobs);\n            }\n            const providerMetadata2 = {\n              itemId: part.id,\n              ...contentPart.annotations.length > 0 && {\n                annotations: contentPart.annotations\n              }\n            };\n            content.push({\n              type: \"text\",\n              text: contentPart.text,\n              providerMetadata: {\n                [providerOptionsName]: providerMetadata2\n              }\n            });\n            for (const annotation of contentPart.annotations) {\n              if (annotation.type === \"url_citation\") {\n                content.push({\n                  type: \"source\",\n                  sourceType: \"url\",\n                  id: (_f = (_e = (_d = this.config).generateId) == null ? void 0 : _e.call(_d)) != null ? _f : (0,_ai_sdk_provider_utils__WEBPACK_IMPORTED_MODULE_1__.generateId)(),\n                  url: annotation.url,\n                  title: annotation.title\n                });\n              } else if (annotation.type === \"file_citation\") {\n                content.push({\n                  type: \"source\",\n                  sourceType: \"document\",\n                  id: (_i = (_h = (_g = this.config).generateId) == null ? void 0 : _h.call(_g)) != null ? _i : (0,_ai_sdk_provider_utils__WEBPACK_IMPORTED_MODULE_1__.generateId)(),\n                  mediaType: \"text/plain\",\n                  title: (_k = (_j = annotation.quote) != null ? _j : annotation.filename) != null ? _k : \"Document\",\n                  filename: (_l = annotation.filename) != null ? _l : annotation.file_id,\n                  ...annotation.file_id ? {\n                    providerMetadata: {\n                      [providerOptionsName]: {\n                        fileId: annotation.file_id\n                      }\n                    }\n                  } : {}\n                });\n              } else if (annotation.type === \"container_file_citation\") {\n                content.push({\n                  type: \"source\",\n                  sourceType: \"document\",\n                  id: (_o = (_n = (_m = this.config).generateId) == null ? void 0 : _n.call(_m)) != null ? _o : (0,_ai_sdk_provider_utils__WEBPACK_IMPORTED_MODULE_1__.generateId)(),\n                  mediaType: \"text/plain\",\n                  title: (_q = (_p = annotation.filename) != null ? _p : annotation.file_id) != null ? _q : \"Document\",\n                  filename: (_r = annotation.filename) != null ? _r : annotation.file_id,\n                  providerMetadata: {\n                    [providerOptionsName]: {\n                      fileId: annotation.file_id,\n                      containerId: annotation.container_id,\n                      ...annotation.index != null ? { index: annotation.index } : {}\n                    }\n                  }\n                });\n              } else if (annotation.type === \"file_path\") {\n                content.push({\n                  type: \"source\",\n                  sourceType: \"document\",\n                  id: (_u = (_t = (_s = this.config).generateId) == null ? void 0 : _t.call(_s)) != null ? _u : (0,_ai_sdk_provider_utils__WEBPACK_IMPORTED_MODULE_1__.generateId)(),\n                  mediaType: \"application/octet-stream\",\n                  title: annotation.file_id,\n                  filename: annotation.file_id,\n                  providerMetadata: {\n                    [providerOptionsName]: {\n                      fileId: annotation.file_id,\n                      ...annotation.index != null ? { index: annotation.index } : {}\n                    }\n                  }\n                });\n              }\n            }\n          }\n          break;\n        }\n        case \"function_call\": {\n          hasFunctionCall = true;\n          content.push({\n            type: \"tool-call\",\n            toolCallId: part.call_id,\n            toolName: part.name,\n            input: part.arguments,\n            providerMetadata: {\n              [providerOptionsName]: {\n                itemId: part.id\n              }\n            }\n          });\n          break;\n        }\n        case \"web_search_call\": {\n          content.push({\n            type: \"tool-call\",\n            toolCallId: part.id,\n            toolName: toolNameMapping.toCustomToolName(\n              webSearchToolName != null ? webSearchToolName : \"web_search\"\n            ),\n            input: JSON.stringify({}),\n            providerExecuted: true\n          });\n          content.push({\n            type: \"tool-result\",\n            toolCallId: part.id,\n            toolName: toolNameMapping.toCustomToolName(\n              webSearchToolName != null ? webSearchToolName : \"web_search\"\n            ),\n            result: mapWebSearchOutput(part.action)\n          });\n          break;\n        }\n        case \"mcp_call\": {\n          const toolCallId = part.approval_request_id != null ? (_v = approvalRequestIdToDummyToolCallIdFromPrompt[part.approval_request_id]) != null ? _v : part.id : part.id;\n          const toolName = `mcp.${part.name}`;\n          content.push({\n            type: \"tool-call\",\n            toolCallId,\n            toolName,\n            input: part.arguments,\n            providerExecuted: true,\n            dynamic: true\n          });\n          content.push({\n            type: \"tool-result\",\n            toolCallId,\n            toolName,\n            result: {\n              type: \"call\",\n              serverLabel: part.server_label,\n              name: part.name,\n              arguments: part.arguments,\n              ...part.output != null ? { output: part.output } : {},\n              ...part.error != null ? { error: part.error } : {}\n            },\n            providerMetadata: {\n              [providerOptionsName]: {\n                itemId: part.id\n              }\n            }\n          });\n          break;\n        }\n        case \"mcp_list_tools\": {\n          break;\n        }\n        case \"mcp_approval_request\": {\n          const approvalRequestId = (_w = part.approval_request_id) != null ? _w : part.id;\n          const dummyToolCallId = (_z = (_y = (_x = this.config).generateId) == null ? void 0 : _y.call(_x)) != null ? _z : (0,_ai_sdk_provider_utils__WEBPACK_IMPORTED_MODULE_1__.generateId)();\n          const toolName = `mcp.${part.name}`;\n          content.push({\n            type: \"tool-call\",\n            toolCallId: dummyToolCallId,\n            toolName,\n            input: part.arguments,\n            providerExecuted: true,\n            dynamic: true\n          });\n          content.push({\n            type: \"tool-approval-request\",\n            approvalId: approvalRequestId,\n            toolCallId: dummyToolCallId\n          });\n          break;\n        }\n        case \"computer_call\": {\n          content.push({\n            type: \"tool-call\",\n            toolCallId: part.id,\n            toolName: toolNameMapping.toCustomToolName(\"computer_use\"),\n            input: \"\",\n            providerExecuted: true\n          });\n          content.push({\n            type: \"tool-result\",\n            toolCallId: part.id,\n            toolName: toolNameMapping.toCustomToolName(\"computer_use\"),\n            result: {\n              type: \"computer_use_tool_result\",\n              status: part.status || \"completed\"\n            }\n          });\n          break;\n        }\n        case \"file_search_call\": {\n          content.push({\n            type: \"tool-call\",\n            toolCallId: part.id,\n            toolName: toolNameMapping.toCustomToolName(\"file_search\"),\n            input: \"{}\",\n            providerExecuted: true\n          });\n          content.push({\n            type: \"tool-result\",\n            toolCallId: part.id,\n            toolName: toolNameMapping.toCustomToolName(\"file_search\"),\n            result: {\n              queries: part.queries,\n              results: (_B = (_A = part.results) == null ? void 0 : _A.map((result) => ({\n                attributes: result.attributes,\n                fileId: result.file_id,\n                filename: result.filename,\n                score: result.score,\n                text: result.text\n              }))) != null ? _B : null\n            }\n          });\n          break;\n        }\n        case \"code_interpreter_call\": {\n          content.push({\n            type: \"tool-call\",\n            toolCallId: part.id,\n            toolName: toolNameMapping.toCustomToolName(\"code_interpreter\"),\n            input: JSON.stringify({\n              code: part.code,\n              containerId: part.container_id\n            }),\n            providerExecuted: true\n          });\n          content.push({\n            type: \"tool-result\",\n            toolCallId: part.id,\n            toolName: toolNameMapping.toCustomToolName(\"code_interpreter\"),\n            result: {\n              outputs: part.outputs\n            }\n          });\n          break;\n        }\n        case \"apply_patch_call\": {\n          content.push({\n            type: \"tool-call\",\n            toolCallId: part.call_id,\n            toolName: toolNameMapping.toCustomToolName(\"apply_patch\"),\n            input: JSON.stringify({\n              callId: part.call_id,\n              operation: part.operation\n            }),\n            providerMetadata: {\n              [providerOptionsName]: {\n                itemId: part.id\n              }\n            }\n          });\n          break;\n        }\n      }\n    }\n    const providerMetadata = {\n      [providerOptionsName]: { responseId: response.id }\n    };\n    if (logprobs.length > 0) {\n      providerMetadata[providerOptionsName].logprobs = logprobs;\n    }\n    if (typeof response.service_tier === \"string\") {\n      providerMetadata[providerOptionsName].serviceTier = response.service_tier;\n    }\n    const usage = response.usage;\n    return {\n      content,\n      finishReason: {\n        unified: mapOpenAIResponseFinishReason({\n          finishReason: (_C = response.incomplete_details) == null ? void 0 : _C.reason,\n          hasFunctionCall\n        }),\n        raw: (_E = (_D = response.incomplete_details) == null ? void 0 : _D.reason) != null ? _E : void 0\n      },\n      usage: convertOpenAIResponsesUsage(usage),\n      request: { body },\n      response: {\n        id: response.id,\n        timestamp: new Date(response.created_at * 1e3),\n        modelId: response.model,\n        headers: responseHeaders,\n        body: rawResponse\n      },\n      providerMetadata,\n      warnings\n    };\n  }\n  async doStream(options) {\n    const {\n      args: body,\n      warnings,\n      webSearchToolName,\n      toolNameMapping,\n      store,\n      providerOptionsName\n    } = await this.getArgs(options);\n    const { responseHeaders, value: response } = await (0,_ai_sdk_provider_utils__WEBPACK_IMPORTED_MODULE_1__.postJsonToApi)({\n      url: this.config.url({\n        path: \"/responses\",\n        modelId: this.modelId\n      }),\n      headers: (0,_ai_sdk_provider_utils__WEBPACK_IMPORTED_MODULE_1__.combineHeaders)(this.config.headers(), options.headers),\n      body: {\n        ...body,\n        stream: true\n      },\n      failedResponseHandler: openaiFailedResponseHandler,\n      successfulResponseHandler: (0,_ai_sdk_provider_utils__WEBPACK_IMPORTED_MODULE_1__.createEventSourceResponseHandler)(\n        openaiResponsesChunkSchema\n      ),\n      abortSignal: options.abortSignal,\n      fetch: this.config.fetch\n    });\n    const self = this;\n    const approvalRequestIdToDummyToolCallIdFromPrompt = extractApprovalRequestIdToToolCallIdMapping(options.prompt);\n    const approvalRequestIdToDummyToolCallIdFromStream = /* @__PURE__ */ new Map();\n    let finishReason = {\n      unified: \"other\",\n      raw: void 0\n    };\n    let usage = void 0;\n    const logprobs = [];\n    let responseId = null;\n    const ongoingToolCalls = {};\n    const ongoingAnnotations = [];\n    let hasFunctionCall = false;\n    const activeReasoning = {};\n    let serviceTier;\n    return {\n      stream: response.pipeThrough(\n        new TransformStream({\n          start(controller) {\n            controller.enqueue({ type: \"stream-start\", warnings });\n          },\n          transform(chunk, controller) {\n            var _a, _b, _c, _d, _e, _f, _g, _h, _i, _j, _k, _l, _m, _n, _o, _p, _q, _r, _s, _t, _u, _v, _w, _x, _y, _z, _A, _B, _C, _D, _E, _F, _G, _H, _I, _J;\n            if (options.includeRawChunks) {\n              controller.enqueue({ type: \"raw\", rawValue: chunk.rawValue });\n            }\n            if (!chunk.success) {\n              finishReason = { unified: \"error\", raw: void 0 };\n              controller.enqueue({ type: \"error\", error: chunk.error });\n              return;\n            }\n            const value = chunk.value;\n            if (isResponseOutputItemAddedChunk(value)) {\n              if (value.item.type === \"function_call\") {\n                ongoingToolCalls[value.output_index] = {\n                  toolName: value.item.name,\n                  toolCallId: value.item.call_id\n                };\n                controller.enqueue({\n                  type: \"tool-input-start\",\n                  id: value.item.call_id,\n                  toolName: value.item.name\n                });\n              } else if (value.item.type === \"web_search_call\") {\n                ongoingToolCalls[value.output_index] = {\n                  toolName: toolNameMapping.toCustomToolName(\n                    webSearchToolName != null ? webSearchToolName : \"web_search\"\n                  ),\n                  toolCallId: value.item.id\n                };\n                controller.enqueue({\n                  type: \"tool-input-start\",\n                  id: value.item.id,\n                  toolName: toolNameMapping.toCustomToolName(\n                    webSearchToolName != null ? webSearchToolName : \"web_search\"\n                  ),\n                  providerExecuted: true\n                });\n                controller.enqueue({\n                  type: \"tool-input-end\",\n                  id: value.item.id\n                });\n                controller.enqueue({\n                  type: \"tool-call\",\n                  toolCallId: value.item.id,\n                  toolName: toolNameMapping.toCustomToolName(\n                    webSearchToolName != null ? webSearchToolName : \"web_search\"\n                  ),\n                  input: JSON.stringify({}),\n                  providerExecuted: true\n                });\n              } else if (value.item.type === \"computer_call\") {\n                ongoingToolCalls[value.output_index] = {\n                  toolName: toolNameMapping.toCustomToolName(\"computer_use\"),\n                  toolCallId: value.item.id\n                };\n                controller.enqueue({\n                  type: \"tool-input-start\",\n                  id: value.item.id,\n                  toolName: toolNameMapping.toCustomToolName(\"computer_use\"),\n                  providerExecuted: true\n                });\n              } else if (value.item.type === \"code_interpreter_call\") {\n                ongoingToolCalls[value.output_index] = {\n                  toolName: toolNameMapping.toCustomToolName(\"code_interpreter\"),\n                  toolCallId: value.item.id,\n                  codeInterpreter: {\n                    containerId: value.item.container_id\n                  }\n                };\n                controller.enqueue({\n                  type: \"tool-input-start\",\n                  id: value.item.id,\n                  toolName: toolNameMapping.toCustomToolName(\"code_interpreter\"),\n                  providerExecuted: true\n                });\n                controller.enqueue({\n                  type: \"tool-input-delta\",\n                  id: value.item.id,\n                  delta: `{\"containerId\":\"${value.item.container_id}\",\"code\":\"`\n                });\n              } else if (value.item.type === \"file_search_call\") {\n                controller.enqueue({\n                  type: \"tool-call\",\n                  toolCallId: value.item.id,\n                  toolName: toolNameMapping.toCustomToolName(\"file_search\"),\n                  input: \"{}\",\n                  providerExecuted: true\n                });\n              } else if (value.item.type === \"image_generation_call\") {\n                controller.enqueue({\n                  type: \"tool-call\",\n                  toolCallId: value.item.id,\n                  toolName: toolNameMapping.toCustomToolName(\"image_generation\"),\n                  input: \"{}\",\n                  providerExecuted: true\n                });\n              } else if (value.item.type === \"mcp_call\" || value.item.type === \"mcp_list_tools\" || value.item.type === \"mcp_approval_request\") {\n              } else if (value.item.type === \"apply_patch_call\") {\n                const { call_id: callId, operation } = value.item;\n                ongoingToolCalls[value.output_index] = {\n                  toolName: toolNameMapping.toCustomToolName(\"apply_patch\"),\n                  toolCallId: callId,\n                  applyPatch: {\n                    // delete_file doesn't have diff\n                    hasDiff: operation.type === \"delete_file\",\n                    endEmitted: operation.type === \"delete_file\"\n                  }\n                };\n                controller.enqueue({\n                  type: \"tool-input-start\",\n                  id: callId,\n                  toolName: toolNameMapping.toCustomToolName(\"apply_patch\")\n                });\n                if (operation.type === \"delete_file\") {\n                  const inputString = JSON.stringify({\n                    callId,\n                    operation\n                  });\n                  controller.enqueue({\n                    type: \"tool-input-delta\",\n                    id: callId,\n                    delta: inputString\n                  });\n                  controller.enqueue({\n                    type: \"tool-input-end\",\n                    id: callId\n                  });\n                } else {\n                  controller.enqueue({\n                    type: \"tool-input-delta\",\n                    id: callId,\n                    delta: `{\"callId\":\"${escapeJSONDelta(callId)}\",\"operation\":{\"type\":\"${escapeJSONDelta(operation.type)}\",\"path\":\"${escapeJSONDelta(operation.path)}\",\"diff\":\"`\n                  });\n                }\n              } else if (value.item.type === \"shell_call\") {\n                ongoingToolCalls[value.output_index] = {\n                  toolName: toolNameMapping.toCustomToolName(\"shell\"),\n                  toolCallId: value.item.call_id\n                };\n              } else if (value.item.type === \"message\") {\n                ongoingAnnotations.splice(0, ongoingAnnotations.length);\n                controller.enqueue({\n                  type: \"text-start\",\n                  id: value.item.id,\n                  providerMetadata: {\n                    [providerOptionsName]: {\n                      itemId: value.item.id\n                    }\n                  }\n                });\n              } else if (isResponseOutputItemAddedChunk(value) && value.item.type === \"reasoning\") {\n                activeReasoning[value.item.id] = {\n                  encryptedContent: value.item.encrypted_content,\n                  summaryParts: { 0: \"active\" }\n                };\n                controller.enqueue({\n                  type: \"reasoning-start\",\n                  id: `${value.item.id}:0`,\n                  providerMetadata: {\n                    [providerOptionsName]: {\n                      itemId: value.item.id,\n                      reasoningEncryptedContent: (_a = value.item.encrypted_content) != null ? _a : null\n                    }\n                  }\n                });\n              }\n            } else if (isResponseOutputItemDoneChunk(value)) {\n              if (value.item.type === \"message\") {\n                controller.enqueue({\n                  type: \"text-end\",\n                  id: value.item.id,\n                  providerMetadata: {\n                    [providerOptionsName]: {\n                      itemId: value.item.id,\n                      ...ongoingAnnotations.length > 0 && {\n                        annotations: ongoingAnnotations\n                      }\n                    }\n                  }\n                });\n              } else if (value.item.type === \"function_call\") {\n                ongoingToolCalls[value.output_index] = void 0;\n                hasFunctionCall = true;\n                controller.enqueue({\n                  type: \"tool-input-end\",\n                  id: value.item.call_id\n                });\n                controller.enqueue({\n                  type: \"tool-call\",\n                  toolCallId: value.item.call_id,\n                  toolName: value.item.name,\n                  input: value.item.arguments,\n                  providerMetadata: {\n                    [providerOptionsName]: {\n                      itemId: value.item.id\n                    }\n                  }\n                });\n              } else if (value.item.type === \"web_search_call\") {\n                ongoingToolCalls[value.output_index] = void 0;\n                controller.enqueue({\n                  type: \"tool-result\",\n                  toolCallId: value.item.id,\n                  toolName: toolNameMapping.toCustomToolName(\n                    webSearchToolName != null ? webSearchToolName : \"web_search\"\n                  ),\n                  result: mapWebSearchOutput(value.item.action)\n                });\n              } else if (value.item.type === \"computer_call\") {\n                ongoingToolCalls[value.output_index] = void 0;\n                controller.enqueue({\n                  type: \"tool-input-end\",\n                  id: value.item.id\n                });\n                controller.enqueue({\n                  type: \"tool-call\",\n                  toolCallId: value.item.id,\n                  toolName: toolNameMapping.toCustomToolName(\"computer_use\"),\n                  input: \"\",\n                  providerExecuted: true\n                });\n                controller.enqueue({\n                  type: \"tool-result\",\n                  toolCallId: value.item.id,\n                  toolName: toolNameMapping.toCustomToolName(\"computer_use\"),\n                  result: {\n                    type: \"computer_use_tool_result\",\n                    status: value.item.status || \"completed\"\n                  }\n                });\n              } else if (value.item.type === \"file_search_call\") {\n                ongoingToolCalls[value.output_index] = void 0;\n                controller.enqueue({\n                  type: \"tool-result\",\n                  toolCallId: value.item.id,\n                  toolName: toolNameMapping.toCustomToolName(\"file_search\"),\n                  result: {\n                    queries: value.item.queries,\n                    results: (_c = (_b = value.item.results) == null ? void 0 : _b.map((result) => ({\n                      attributes: result.attributes,\n                      fileId: result.file_id,\n                      filename: result.filename,\n                      score: result.score,\n                      text: result.text\n                    }))) != null ? _c : null\n                  }\n                });\n              } else if (value.item.type === \"code_interpreter_call\") {\n                ongoingToolCalls[value.output_index] = void 0;\n                controller.enqueue({\n                  type: \"tool-result\",\n                  toolCallId: value.item.id,\n                  toolName: toolNameMapping.toCustomToolName(\"code_interpreter\"),\n                  result: {\n                    outputs: value.item.outputs\n                  }\n                });\n              } else if (value.item.type === \"image_generation_call\") {\n                controller.enqueue({\n                  type: \"tool-result\",\n                  toolCallId: value.item.id,\n                  toolName: toolNameMapping.toCustomToolName(\"image_generation\"),\n                  result: {\n                    result: value.item.result\n                  }\n                });\n              } else if (value.item.type === \"mcp_call\") {\n                ongoingToolCalls[value.output_index] = void 0;\n                const approvalRequestId = (_d = value.item.approval_request_id) != null ? _d : void 0;\n                const aliasedToolCallId = approvalRequestId != null ? (_f = (_e = approvalRequestIdToDummyToolCallIdFromStream.get(\n                  approvalRequestId\n                )) != null ? _e : approvalRequestIdToDummyToolCallIdFromPrompt[approvalRequestId]) != null ? _f : value.item.id : value.item.id;\n                const toolName = `mcp.${value.item.name}`;\n                controller.enqueue({\n                  type: \"tool-call\",\n                  toolCallId: aliasedToolCallId,\n                  toolName,\n                  input: value.item.arguments,\n                  providerExecuted: true,\n                  dynamic: true\n                });\n                controller.enqueue({\n                  type: \"tool-result\",\n                  toolCallId: aliasedToolCallId,\n                  toolName,\n                  result: {\n                    type: \"call\",\n                    serverLabel: value.item.server_label,\n                    name: value.item.name,\n                    arguments: value.item.arguments,\n                    ...value.item.output != null ? { output: value.item.output } : {},\n                    ...value.item.error != null ? { error: value.item.error } : {}\n                  },\n                  providerMetadata: {\n                    [providerOptionsName]: {\n                      itemId: value.item.id\n                    }\n                  }\n                });\n              } else if (value.item.type === \"mcp_list_tools\") {\n                ongoingToolCalls[value.output_index] = void 0;\n              } else if (value.item.type === \"apply_patch_call\") {\n                const toolCall = ongoingToolCalls[value.output_index];\n                if ((toolCall == null ? void 0 : toolCall.applyPatch) && !toolCall.applyPatch.endEmitted && value.item.operation.type !== \"delete_file\") {\n                  if (!toolCall.applyPatch.hasDiff) {\n                    controller.enqueue({\n                      type: \"tool-input-delta\",\n                      id: toolCall.toolCallId,\n                      delta: escapeJSONDelta(value.item.operation.diff)\n                    });\n                  }\n                  controller.enqueue({\n                    type: \"tool-input-delta\",\n                    id: toolCall.toolCallId,\n                    delta: '\"}}'\n                  });\n                  controller.enqueue({\n                    type: \"tool-input-end\",\n                    id: toolCall.toolCallId\n                  });\n                  toolCall.applyPatch.endEmitted = true;\n                }\n                if (toolCall && value.item.status === \"completed\") {\n                  controller.enqueue({\n                    type: \"tool-call\",\n                    toolCallId: toolCall.toolCallId,\n                    toolName: toolNameMapping.toCustomToolName(\"apply_patch\"),\n                    input: JSON.stringify({\n                      callId: value.item.call_id,\n                      operation: value.item.operation\n                    }),\n                    providerMetadata: {\n                      [providerOptionsName]: {\n                        itemId: value.item.id\n                      }\n                    }\n                  });\n                }\n                ongoingToolCalls[value.output_index] = void 0;\n              } else if (value.item.type === \"mcp_approval_request\") {\n                ongoingToolCalls[value.output_index] = void 0;\n                const dummyToolCallId = (_i = (_h = (_g = self.config).generateId) == null ? void 0 : _h.call(_g)) != null ? _i : (0,_ai_sdk_provider_utils__WEBPACK_IMPORTED_MODULE_1__.generateId)();\n                const approvalRequestId = (_j = value.item.approval_request_id) != null ? _j : value.item.id;\n                approvalRequestIdToDummyToolCallIdFromStream.set(\n                  approvalRequestId,\n                  dummyToolCallId\n                );\n                const toolName = `mcp.${value.item.name}`;\n                controller.enqueue({\n                  type: \"tool-call\",\n                  toolCallId: dummyToolCallId,\n                  toolName,\n                  input: value.item.arguments,\n                  providerExecuted: true,\n                  dynamic: true\n                });\n                controller.enqueue({\n                  type: \"tool-approval-request\",\n                  approvalId: approvalRequestId,\n                  toolCallId: dummyToolCallId\n                });\n              } else if (value.item.type === \"local_shell_call\") {\n                ongoingToolCalls[value.output_index] = void 0;\n                controller.enqueue({\n                  type: \"tool-call\",\n                  toolCallId: value.item.call_id,\n                  toolName: toolNameMapping.toCustomToolName(\"local_shell\"),\n                  input: JSON.stringify({\n                    action: {\n                      type: \"exec\",\n                      command: value.item.action.command,\n                      timeoutMs: value.item.action.timeout_ms,\n                      user: value.item.action.user,\n                      workingDirectory: value.item.action.working_directory,\n                      env: value.item.action.env\n                    }\n                  }),\n                  providerMetadata: {\n                    [providerOptionsName]: { itemId: value.item.id }\n                  }\n                });\n              } else if (value.item.type === \"shell_call\") {\n                ongoingToolCalls[value.output_index] = void 0;\n                controller.enqueue({\n                  type: \"tool-call\",\n                  toolCallId: value.item.call_id,\n                  toolName: toolNameMapping.toCustomToolName(\"shell\"),\n                  input: JSON.stringify({\n                    action: {\n                      commands: value.item.action.commands\n                    }\n                  }),\n                  providerMetadata: {\n                    [providerOptionsName]: { itemId: value.item.id }\n                  }\n                });\n              } else if (value.item.type === \"reasoning\") {\n                const activeReasoningPart = activeReasoning[value.item.id];\n                const summaryPartIndices = Object.entries(\n                  activeReasoningPart.summaryParts\n                ).filter(\n                  ([_, status]) => status === \"active\" || status === \"can-conclude\"\n                ).map(([summaryIndex]) => summaryIndex);\n                for (const summaryIndex of summaryPartIndices) {\n                  controller.enqueue({\n                    type: \"reasoning-end\",\n                    id: `${value.item.id}:${summaryIndex}`,\n                    providerMetadata: {\n                      [providerOptionsName]: {\n                        itemId: value.item.id,\n                        reasoningEncryptedContent: (_k = value.item.encrypted_content) != null ? _k : null\n                      }\n                    }\n                  });\n                }\n                delete activeReasoning[value.item.id];\n              }\n            } else if (isResponseFunctionCallArgumentsDeltaChunk(value)) {\n              const toolCall = ongoingToolCalls[value.output_index];\n              if (toolCall != null) {\n                controller.enqueue({\n                  type: \"tool-input-delta\",\n                  id: toolCall.toolCallId,\n                  delta: value.delta\n                });\n              }\n            } else if (isResponseApplyPatchCallOperationDiffDeltaChunk(value)) {\n              const toolCall = ongoingToolCalls[value.output_index];\n              if (toolCall == null ? void 0 : toolCall.applyPatch) {\n                controller.enqueue({\n                  type: \"tool-input-delta\",\n                  id: toolCall.toolCallId,\n                  delta: escapeJSONDelta(value.delta)\n                });\n                toolCall.applyPatch.hasDiff = true;\n              }\n            } else if (isResponseApplyPatchCallOperationDiffDoneChunk(value)) {\n              const toolCall = ongoingToolCalls[value.output_index];\n              if ((toolCall == null ? void 0 : toolCall.applyPatch) && !toolCall.applyPatch.endEmitted) {\n                if (!toolCall.applyPatch.hasDiff) {\n                  controller.enqueue({\n                    type: \"tool-input-delta\",\n                    id: toolCall.toolCallId,\n                    delta: escapeJSONDelta(value.diff)\n                  });\n                  toolCall.applyPatch.hasDiff = true;\n                }\n                controller.enqueue({\n                  type: \"tool-input-delta\",\n                  id: toolCall.toolCallId,\n                  delta: '\"}}'\n                });\n                controller.enqueue({\n                  type: \"tool-input-end\",\n                  id: toolCall.toolCallId\n                });\n                toolCall.applyPatch.endEmitted = true;\n              }\n            } else if (isResponseImageGenerationCallPartialImageChunk(value)) {\n              controller.enqueue({\n                type: \"tool-result\",\n                toolCallId: value.item_id,\n                toolName: toolNameMapping.toCustomToolName(\"image_generation\"),\n                result: {\n                  result: value.partial_image_b64\n                },\n                preliminary: true\n              });\n            } else if (isResponseCodeInterpreterCallCodeDeltaChunk(value)) {\n              const toolCall = ongoingToolCalls[value.output_index];\n              if (toolCall != null) {\n                controller.enqueue({\n                  type: \"tool-input-delta\",\n                  id: toolCall.toolCallId,\n                  delta: escapeJSONDelta(value.delta)\n                });\n              }\n            } else if (isResponseCodeInterpreterCallCodeDoneChunk(value)) {\n              const toolCall = ongoingToolCalls[value.output_index];\n              if (toolCall != null) {\n                controller.enqueue({\n                  type: \"tool-input-delta\",\n                  id: toolCall.toolCallId,\n                  delta: '\"}'\n                });\n                controller.enqueue({\n                  type: \"tool-input-end\",\n                  id: toolCall.toolCallId\n                });\n                controller.enqueue({\n                  type: \"tool-call\",\n                  toolCallId: toolCall.toolCallId,\n                  toolName: toolNameMapping.toCustomToolName(\"code_interpreter\"),\n                  input: JSON.stringify({\n                    code: value.code,\n                    containerId: toolCall.codeInterpreter.containerId\n                  }),\n                  providerExecuted: true\n                });\n              }\n            } else if (isResponseCreatedChunk(value)) {\n              responseId = value.response.id;\n              controller.enqueue({\n                type: \"response-metadata\",\n                id: value.response.id,\n                timestamp: new Date(value.response.created_at * 1e3),\n                modelId: value.response.model\n              });\n            } else if (isTextDeltaChunk(value)) {\n              controller.enqueue({\n                type: \"text-delta\",\n                id: value.item_id,\n                delta: value.delta\n              });\n              if (((_m = (_l = options.providerOptions) == null ? void 0 : _l[providerOptionsName]) == null ? void 0 : _m.logprobs) && value.logprobs) {\n                logprobs.push(value.logprobs);\n              }\n            } else if (value.type === \"response.reasoning_summary_part.added\") {\n              if (value.summary_index > 0) {\n                const activeReasoningPart = activeReasoning[value.item_id];\n                activeReasoningPart.summaryParts[value.summary_index] = \"active\";\n                for (const summaryIndex of Object.keys(\n                  activeReasoningPart.summaryParts\n                )) {\n                  if (activeReasoningPart.summaryParts[summaryIndex] === \"can-conclude\") {\n                    controller.enqueue({\n                      type: \"reasoning-end\",\n                      id: `${value.item_id}:${summaryIndex}`,\n                      providerMetadata: {\n                        [providerOptionsName]: { itemId: value.item_id }\n                      }\n                    });\n                    activeReasoningPart.summaryParts[summaryIndex] = \"concluded\";\n                  }\n                }\n                controller.enqueue({\n                  type: \"reasoning-start\",\n                  id: `${value.item_id}:${value.summary_index}`,\n                  providerMetadata: {\n                    [providerOptionsName]: {\n                      itemId: value.item_id,\n                      reasoningEncryptedContent: (_o = (_n = activeReasoning[value.item_id]) == null ? void 0 : _n.encryptedContent) != null ? _o : null\n                    }\n                  }\n                });\n              }\n            } else if (value.type === \"response.reasoning_summary_text.delta\") {\n              controller.enqueue({\n                type: \"reasoning-delta\",\n                id: `${value.item_id}:${value.summary_index}`,\n                delta: value.delta,\n                providerMetadata: {\n                  [providerOptionsName]: {\n                    itemId: value.item_id\n                  }\n                }\n              });\n            } else if (value.type === \"response.reasoning_summary_part.done\") {\n              if (store) {\n                controller.enqueue({\n                  type: \"reasoning-end\",\n                  id: `${value.item_id}:${value.summary_index}`,\n                  providerMetadata: {\n                    [providerOptionsName]: { itemId: value.item_id }\n                  }\n                });\n                activeReasoning[value.item_id].summaryParts[value.summary_index] = \"concluded\";\n              } else {\n                activeReasoning[value.item_id].summaryParts[value.summary_index] = \"can-conclude\";\n              }\n            } else if (isResponseFinishedChunk(value)) {\n              finishReason = {\n                unified: mapOpenAIResponseFinishReason({\n                  finishReason: (_p = value.response.incomplete_details) == null ? void 0 : _p.reason,\n                  hasFunctionCall\n                }),\n                raw: (_r = (_q = value.response.incomplete_details) == null ? void 0 : _q.reason) != null ? _r : void 0\n              };\n              usage = value.response.usage;\n              if (typeof value.response.service_tier === \"string\") {\n                serviceTier = value.response.service_tier;\n              }\n            } else if (isResponseAnnotationAddedChunk(value)) {\n              ongoingAnnotations.push(value.annotation);\n              if (value.annotation.type === \"url_citation\") {\n                controller.enqueue({\n                  type: \"source\",\n                  sourceType: \"url\",\n                  id: (_u = (_t = (_s = self.config).generateId) == null ? void 0 : _t.call(_s)) != null ? _u : (0,_ai_sdk_provider_utils__WEBPACK_IMPORTED_MODULE_1__.generateId)(),\n                  url: value.annotation.url,\n                  title: value.annotation.title\n                });\n              } else if (value.annotation.type === \"file_citation\") {\n                controller.enqueue({\n                  type: \"source\",\n                  sourceType: \"document\",\n                  id: (_x = (_w = (_v = self.config).generateId) == null ? void 0 : _w.call(_v)) != null ? _x : (0,_ai_sdk_provider_utils__WEBPACK_IMPORTED_MODULE_1__.generateId)(),\n                  mediaType: \"text/plain\",\n                  title: (_z = (_y = value.annotation.quote) != null ? _y : value.annotation.filename) != null ? _z : \"Document\",\n                  filename: (_A = value.annotation.filename) != null ? _A : value.annotation.file_id,\n                  ...value.annotation.file_id ? {\n                    providerMetadata: {\n                      [providerOptionsName]: {\n                        fileId: value.annotation.file_id\n                      }\n                    }\n                  } : {}\n                });\n              } else if (value.annotation.type === \"container_file_citation\") {\n                controller.enqueue({\n                  type: \"source\",\n                  sourceType: \"document\",\n                  id: (_D = (_C = (_B = self.config).generateId) == null ? void 0 : _C.call(_B)) != null ? _D : (0,_ai_sdk_provider_utils__WEBPACK_IMPORTED_MODULE_1__.generateId)(),\n                  mediaType: \"text/plain\",\n                  title: (_F = (_E = value.annotation.filename) != null ? _E : value.annotation.file_id) != null ? _F : \"Document\",\n                  filename: (_G = value.annotation.filename) != null ? _G : value.annotation.file_id,\n                  providerMetadata: {\n                    [providerOptionsName]: {\n                      fileId: value.annotation.file_id,\n                      containerId: value.annotation.container_id,\n                      ...value.annotation.index != null ? { index: value.annotation.index } : {}\n                    }\n                  }\n                });\n              } else if (value.annotation.type === \"file_path\") {\n                controller.enqueue({\n                  type: \"source\",\n                  sourceType: \"document\",\n                  id: (_J = (_I = (_H = self.config).generateId) == null ? void 0 : _I.call(_H)) != null ? _J : (0,_ai_sdk_provider_utils__WEBPACK_IMPORTED_MODULE_1__.generateId)(),\n                  mediaType: \"application/octet-stream\",\n                  title: value.annotation.file_id,\n                  filename: value.annotation.file_id,\n                  providerMetadata: {\n                    [providerOptionsName]: {\n                      fileId: value.annotation.file_id,\n                      ...value.annotation.index != null ? { index: value.annotation.index } : {}\n                    }\n                  }\n                });\n              }\n            } else if (isErrorChunk(value)) {\n              controller.enqueue({ type: \"error\", error: value });\n            }\n          },\n          flush(controller) {\n            const providerMetadata = {\n              [providerOptionsName]: {\n                responseId\n              }\n            };\n            if (logprobs.length > 0) {\n              providerMetadata[providerOptionsName].logprobs = logprobs;\n            }\n            if (serviceTier !== void 0) {\n              providerMetadata[providerOptionsName].serviceTier = serviceTier;\n            }\n            controller.enqueue({\n              type: \"finish\",\n              finishReason,\n              usage: convertOpenAIResponsesUsage(usage),\n              providerMetadata\n            });\n          }\n        })\n      ),\n      request: { body },\n      response: { headers: responseHeaders }\n    };\n  }\n};\nfunction isTextDeltaChunk(chunk) {\n  return chunk.type === \"response.output_text.delta\";\n}\nfunction isResponseOutputItemDoneChunk(chunk) {\n  return chunk.type === \"response.output_item.done\";\n}\nfunction isResponseFinishedChunk(chunk) {\n  return chunk.type === \"response.completed\" || chunk.type === \"response.incomplete\";\n}\nfunction isResponseCreatedChunk(chunk) {\n  return chunk.type === \"response.created\";\n}\nfunction isResponseFunctionCallArgumentsDeltaChunk(chunk) {\n  return chunk.type === \"response.function_call_arguments.delta\";\n}\nfunction isResponseImageGenerationCallPartialImageChunk(chunk) {\n  return chunk.type === \"response.image_generation_call.partial_image\";\n}\nfunction isResponseCodeInterpreterCallCodeDeltaChunk(chunk) {\n  return chunk.type === \"response.code_interpreter_call_code.delta\";\n}\nfunction isResponseCodeInterpreterCallCodeDoneChunk(chunk) {\n  return chunk.type === \"response.code_interpreter_call_code.done\";\n}\nfunction isResponseApplyPatchCallOperationDiffDeltaChunk(chunk) {\n  return chunk.type === \"response.apply_patch_call_operation_diff.delta\";\n}\nfunction isResponseApplyPatchCallOperationDiffDoneChunk(chunk) {\n  return chunk.type === \"response.apply_patch_call_operation_diff.done\";\n}\nfunction isResponseOutputItemAddedChunk(chunk) {\n  return chunk.type === \"response.output_item.added\";\n}\nfunction isResponseAnnotationAddedChunk(chunk) {\n  return chunk.type === \"response.output_text.annotation.added\";\n}\nfunction isErrorChunk(chunk) {\n  return chunk.type === \"error\";\n}\nfunction mapWebSearchOutput(action) {\n  var _a;\n  switch (action.type) {\n    case \"search\":\n      return {\n        action: { type: \"search\", query: (_a = action.query) != null ? _a : void 0 },\n        // include sources when provided by the Responses API (behind include flag)\n        ...action.sources != null && { sources: action.sources }\n      };\n    case \"open_page\":\n      return { action: { type: \"openPage\", url: action.url } };\n    case \"find_in_page\":\n      return {\n        action: {\n          type: \"findInPage\",\n          url: action.url,\n          pattern: action.pattern\n        }\n      };\n  }\n}\nfunction escapeJSONDelta(delta) {\n  return JSON.stringify(delta).slice(1, -1);\n}\n\n// src/speech/openai-speech-model.ts\n\n\n// src/speech/openai-speech-options.ts\n\n\nvar openaiSpeechProviderOptionsSchema = (0,_ai_sdk_provider_utils__WEBPACK_IMPORTED_MODULE_1__.lazySchema)(\n  () => (0,_ai_sdk_provider_utils__WEBPACK_IMPORTED_MODULE_1__.zodSchema)(\n    zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.object({\n      instructions: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.string().nullish(),\n      speed: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.number().min(0.25).max(4).default(1).nullish()\n    })\n  )\n);\n\n// src/speech/openai-speech-model.ts\nvar OpenAISpeechModel = class {\n  constructor(modelId, config) {\n    this.modelId = modelId;\n    this.config = config;\n    this.specificationVersion = \"v3\";\n  }\n  get provider() {\n    return this.config.provider;\n  }\n  async getArgs({\n    text,\n    voice = \"alloy\",\n    outputFormat = \"mp3\",\n    speed,\n    instructions,\n    language,\n    providerOptions\n  }) {\n    const warnings = [];\n    const openAIOptions = await (0,_ai_sdk_provider_utils__WEBPACK_IMPORTED_MODULE_1__.parseProviderOptions)({\n      provider: \"openai\",\n      providerOptions,\n      schema: openaiSpeechProviderOptionsSchema\n    });\n    const requestBody = {\n      model: this.modelId,\n      input: text,\n      voice,\n      response_format: \"mp3\",\n      speed,\n      instructions\n    };\n    if (outputFormat) {\n      if ([\"mp3\", \"opus\", \"aac\", \"flac\", \"wav\", \"pcm\"].includes(outputFormat)) {\n        requestBody.response_format = outputFormat;\n      } else {\n        warnings.push({\n          type: \"unsupported\",\n          feature: \"outputFormat\",\n          details: `Unsupported output format: ${outputFormat}. Using mp3 instead.`\n        });\n      }\n    }\n    if (openAIOptions) {\n      const speechModelOptions = {};\n      for (const key in speechModelOptions) {\n        const value = speechModelOptions[key];\n        if (value !== void 0) {\n          requestBody[key] = value;\n        }\n      }\n    }\n    if (language) {\n      warnings.push({\n        type: \"unsupported\",\n        feature: \"language\",\n        details: `OpenAI speech models do not support language selection. Language parameter \"${language}\" was ignored.`\n      });\n    }\n    return {\n      requestBody,\n      warnings\n    };\n  }\n  async doGenerate(options) {\n    var _a, _b, _c;\n    const currentDate = (_c = (_b = (_a = this.config._internal) == null ? void 0 : _a.currentDate) == null ? void 0 : _b.call(_a)) != null ? _c : /* @__PURE__ */ new Date();\n    const { requestBody, warnings } = await this.getArgs(options);\n    const {\n      value: audio,\n      responseHeaders,\n      rawValue: rawResponse\n    } = await (0,_ai_sdk_provider_utils__WEBPACK_IMPORTED_MODULE_1__.postJsonToApi)({\n      url: this.config.url({\n        path: \"/audio/speech\",\n        modelId: this.modelId\n      }),\n      headers: (0,_ai_sdk_provider_utils__WEBPACK_IMPORTED_MODULE_1__.combineHeaders)(this.config.headers(), options.headers),\n      body: requestBody,\n      failedResponseHandler: openaiFailedResponseHandler,\n      successfulResponseHandler: (0,_ai_sdk_provider_utils__WEBPACK_IMPORTED_MODULE_1__.createBinaryResponseHandler)(),\n      abortSignal: options.abortSignal,\n      fetch: this.config.fetch\n    });\n    return {\n      audio,\n      warnings,\n      request: {\n        body: JSON.stringify(requestBody)\n      },\n      response: {\n        timestamp: currentDate,\n        modelId: this.modelId,\n        headers: responseHeaders,\n        body: rawResponse\n      }\n    };\n  }\n};\n\n// src/transcription/openai-transcription-model.ts\n\n\n// src/transcription/openai-transcription-api.ts\n\n\nvar openaiTranscriptionResponseSchema = (0,_ai_sdk_provider_utils__WEBPACK_IMPORTED_MODULE_1__.lazySchema)(\n  () => (0,_ai_sdk_provider_utils__WEBPACK_IMPORTED_MODULE_1__.zodSchema)(\n    zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.object({\n      text: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.string(),\n      language: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.string().nullish(),\n      duration: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.number().nullish(),\n      words: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.array(\n        zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.object({\n          word: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.string(),\n          start: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.number(),\n          end: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.number()\n        })\n      ).nullish(),\n      segments: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.array(\n        zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.object({\n          id: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.number(),\n          seek: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.number(),\n          start: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.number(),\n          end: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.number(),\n          text: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.string(),\n          tokens: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.array(zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.number()),\n          temperature: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.number(),\n          avg_logprob: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.number(),\n          compression_ratio: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.number(),\n          no_speech_prob: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.number()\n        })\n      ).nullish()\n    })\n  )\n);\n\n// src/transcription/openai-transcription-options.ts\n\n\nvar openAITranscriptionProviderOptions = (0,_ai_sdk_provider_utils__WEBPACK_IMPORTED_MODULE_1__.lazySchema)(\n  () => (0,_ai_sdk_provider_utils__WEBPACK_IMPORTED_MODULE_1__.zodSchema)(\n    zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.object({\n      /**\n       * Additional information to include in the transcription response.\n       */\n      include: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.array(zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.string()).optional(),\n      /**\n       * The language of the input audio in ISO-639-1 format.\n       */\n      language: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.string().optional(),\n      /**\n       * An optional text to guide the model's style or continue a previous audio segment.\n       */\n      prompt: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.string().optional(),\n      /**\n       * The sampling temperature, between 0 and 1.\n       * @default 0\n       */\n      temperature: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.number().min(0).max(1).default(0).optional(),\n      /**\n       * The timestamp granularities to populate for this transcription.\n       * @default ['segment']\n       */\n      timestampGranularities: zod_v4__WEBPACK_IMPORTED_MODULE_0__.z.array(zod_v4__WEBPACK_IMPORTED_MODULE_0__.z[\"enum\"]([\"word\", \"segment\"])).default([\"segment\"]).optional()\n    })\n  )\n);\n\n// src/transcription/openai-transcription-model.ts\nvar languageMap = {\n  afrikaans: \"af\",\n  arabic: \"ar\",\n  armenian: \"hy\",\n  azerbaijani: \"az\",\n  belarusian: \"be\",\n  bosnian: \"bs\",\n  bulgarian: \"bg\",\n  catalan: \"ca\",\n  chinese: \"zh\",\n  croatian: \"hr\",\n  czech: \"cs\",\n  danish: \"da\",\n  dutch: \"nl\",\n  english: \"en\",\n  estonian: \"et\",\n  finnish: \"fi\",\n  french: \"fr\",\n  galician: \"gl\",\n  german: \"de\",\n  greek: \"el\",\n  hebrew: \"he\",\n  hindi: \"hi\",\n  hungarian: \"hu\",\n  icelandic: \"is\",\n  indonesian: \"id\",\n  italian: \"it\",\n  japanese: \"ja\",\n  kannada: \"kn\",\n  kazakh: \"kk\",\n  korean: \"ko\",\n  latvian: \"lv\",\n  lithuanian: \"lt\",\n  macedonian: \"mk\",\n  malay: \"ms\",\n  marathi: \"mr\",\n  maori: \"mi\",\n  nepali: \"ne\",\n  norwegian: \"no\",\n  persian: \"fa\",\n  polish: \"pl\",\n  portuguese: \"pt\",\n  romanian: \"ro\",\n  russian: \"ru\",\n  serbian: \"sr\",\n  slovak: \"sk\",\n  slovenian: \"sl\",\n  spanish: \"es\",\n  swahili: \"sw\",\n  swedish: \"sv\",\n  tagalog: \"tl\",\n  tamil: \"ta\",\n  thai: \"th\",\n  turkish: \"tr\",\n  ukrainian: \"uk\",\n  urdu: \"ur\",\n  vietnamese: \"vi\",\n  welsh: \"cy\"\n};\nvar OpenAITranscriptionModel = class {\n  constructor(modelId, config) {\n    this.modelId = modelId;\n    this.config = config;\n    this.specificationVersion = \"v3\";\n  }\n  get provider() {\n    return this.config.provider;\n  }\n  async getArgs({\n    audio,\n    mediaType,\n    providerOptions\n  }) {\n    const warnings = [];\n    const openAIOptions = await (0,_ai_sdk_provider_utils__WEBPACK_IMPORTED_MODULE_1__.parseProviderOptions)({\n      provider: \"openai\",\n      providerOptions,\n      schema: openAITranscriptionProviderOptions\n    });\n    const formData = new FormData();\n    const blob = audio instanceof Uint8Array ? new Blob([audio]) : new Blob([(0,_ai_sdk_provider_utils__WEBPACK_IMPORTED_MODULE_1__.convertBase64ToUint8Array)(audio)]);\n    formData.append(\"model\", this.modelId);\n    const fileExtension = (0,_ai_sdk_provider_utils__WEBPACK_IMPORTED_MODULE_1__.mediaTypeToExtension)(mediaType);\n    formData.append(\n      \"file\",\n      new File([blob], \"audio\", { type: mediaType }),\n      `audio.${fileExtension}`\n    );\n    if (openAIOptions) {\n      const transcriptionModelOptions = {\n        include: openAIOptions.include,\n        language: openAIOptions.language,\n        prompt: openAIOptions.prompt,\n        // https://platform.openai.com/docs/api-reference/audio/createTranscription#audio_createtranscription-response_format\n        // prefer verbose_json to get segments for models that support it\n        response_format: [\n          \"gpt-4o-transcribe\",\n          \"gpt-4o-mini-transcribe\"\n        ].includes(this.modelId) ? \"json\" : \"verbose_json\",\n        temperature: openAIOptions.temperature,\n        timestamp_granularities: openAIOptions.timestampGranularities\n      };\n      for (const [key, value] of Object.entries(transcriptionModelOptions)) {\n        if (value != null) {\n          if (Array.isArray(value)) {\n            for (const item of value) {\n              formData.append(`${key}[]`, String(item));\n            }\n          } else {\n            formData.append(key, String(value));\n          }\n        }\n      }\n    }\n    return {\n      formData,\n      warnings\n    };\n  }\n  async doGenerate(options) {\n    var _a, _b, _c, _d, _e, _f, _g, _h;\n    const currentDate = (_c = (_b = (_a = this.config._internal) == null ? void 0 : _a.currentDate) == null ? void 0 : _b.call(_a)) != null ? _c : /* @__PURE__ */ new Date();\n    const { formData, warnings } = await this.getArgs(options);\n    const {\n      value: response,\n      responseHeaders,\n      rawValue: rawResponse\n    } = await (0,_ai_sdk_provider_utils__WEBPACK_IMPORTED_MODULE_1__.postFormDataToApi)({\n      url: this.config.url({\n        path: \"/audio/transcriptions\",\n        modelId: this.modelId\n      }),\n      headers: (0,_ai_sdk_provider_utils__WEBPACK_IMPORTED_MODULE_1__.combineHeaders)(this.config.headers(), options.headers),\n      formData,\n      failedResponseHandler: openaiFailedResponseHandler,\n      successfulResponseHandler: (0,_ai_sdk_provider_utils__WEBPACK_IMPORTED_MODULE_1__.createJsonResponseHandler)(\n        openaiTranscriptionResponseSchema\n      ),\n      abortSignal: options.abortSignal,\n      fetch: this.config.fetch\n    });\n    const language = response.language != null && response.language in languageMap ? languageMap[response.language] : void 0;\n    return {\n      text: response.text,\n      segments: (_g = (_f = (_d = response.segments) == null ? void 0 : _d.map((segment) => ({\n        text: segment.text,\n        startSecond: segment.start,\n        endSecond: segment.end\n      }))) != null ? _f : (_e = response.words) == null ? void 0 : _e.map((word) => ({\n        text: word.word,\n        startSecond: word.start,\n        endSecond: word.end\n      }))) != null ? _g : [],\n      language,\n      durationInSeconds: (_h = response.duration) != null ? _h : void 0,\n      warnings,\n      response: {\n        timestamp: currentDate,\n        modelId: this.modelId,\n        headers: responseHeaders,\n        body: rawResponse\n      }\n    };\n  }\n};\n\n// src/version.ts\nvar VERSION =  true ? \"3.0.7\" : 0;\n\n// src/openai-provider.ts\nfunction createOpenAI(options = {}) {\n  var _a, _b;\n  const baseURL = (_a = (0,_ai_sdk_provider_utils__WEBPACK_IMPORTED_MODULE_1__.withoutTrailingSlash)(\n    (0,_ai_sdk_provider_utils__WEBPACK_IMPORTED_MODULE_1__.loadOptionalSetting)({\n      settingValue: options.baseURL,\n      environmentVariableName: \"OPENAI_BASE_URL\"\n    })\n  )) != null ? _a : \"https://api.openai.com/v1\";\n  const providerName = (_b = options.name) != null ? _b : \"openai\";\n  const getHeaders = () => (0,_ai_sdk_provider_utils__WEBPACK_IMPORTED_MODULE_1__.withUserAgentSuffix)(\n    {\n      Authorization: `Bearer ${(0,_ai_sdk_provider_utils__WEBPACK_IMPORTED_MODULE_1__.loadApiKey)({\n        apiKey: options.apiKey,\n        environmentVariableName: \"OPENAI_API_KEY\",\n        description: \"OpenAI\"\n      })}`,\n      \"OpenAI-Organization\": options.organization,\n      \"OpenAI-Project\": options.project,\n      ...options.headers\n    },\n    `ai-sdk/openai/${VERSION}`\n  );\n  const createChatModel = (modelId) => new OpenAIChatLanguageModel(modelId, {\n    provider: `${providerName}.chat`,\n    url: ({ path }) => `${baseURL}${path}`,\n    headers: getHeaders,\n    fetch: options.fetch\n  });\n  const createCompletionModel = (modelId) => new OpenAICompletionLanguageModel(modelId, {\n    provider: `${providerName}.completion`,\n    url: ({ path }) => `${baseURL}${path}`,\n    headers: getHeaders,\n    fetch: options.fetch\n  });\n  const createEmbeddingModel = (modelId) => new OpenAIEmbeddingModel(modelId, {\n    provider: `${providerName}.embedding`,\n    url: ({ path }) => `${baseURL}${path}`,\n    headers: getHeaders,\n    fetch: options.fetch\n  });\n  const createImageModel = (modelId) => new OpenAIImageModel(modelId, {\n    provider: `${providerName}.image`,\n    url: ({ path }) => `${baseURL}${path}`,\n    headers: getHeaders,\n    fetch: options.fetch\n  });\n  const createTranscriptionModel = (modelId) => new OpenAITranscriptionModel(modelId, {\n    provider: `${providerName}.transcription`,\n    url: ({ path }) => `${baseURL}${path}`,\n    headers: getHeaders,\n    fetch: options.fetch\n  });\n  const createSpeechModel = (modelId) => new OpenAISpeechModel(modelId, {\n    provider: `${providerName}.speech`,\n    url: ({ path }) => `${baseURL}${path}`,\n    headers: getHeaders,\n    fetch: options.fetch\n  });\n  const createLanguageModel = (modelId) => {\n    if (new.target) {\n      throw new Error(\n        \"The OpenAI model function cannot be called with the new keyword.\"\n      );\n    }\n    return createResponsesModel(modelId);\n  };\n  const createResponsesModel = (modelId) => {\n    return new OpenAIResponsesLanguageModel(modelId, {\n      provider: `${providerName}.responses`,\n      url: ({ path }) => `${baseURL}${path}`,\n      headers: getHeaders,\n      fetch: options.fetch,\n      fileIdPrefixes: [\"file-\"]\n    });\n  };\n  const provider = function(modelId) {\n    return createLanguageModel(modelId);\n  };\n  provider.specificationVersion = \"v3\";\n  provider.languageModel = createLanguageModel;\n  provider.chat = createChatModel;\n  provider.completion = createCompletionModel;\n  provider.responses = createResponsesModel;\n  provider.embedding = createEmbeddingModel;\n  provider.embeddingModel = createEmbeddingModel;\n  provider.textEmbedding = createEmbeddingModel;\n  provider.textEmbeddingModel = createEmbeddingModel;\n  provider.image = createImageModel;\n  provider.imageModel = createImageModel;\n  provider.transcription = createTranscriptionModel;\n  provider.transcriptionModel = createTranscriptionModel;\n  provider.speech = createSpeechModel;\n  provider.speechModel = createSpeechModel;\n  provider.tools = openaiTools;\n  return provider;\n}\nvar openai = createOpenAI();\n\n//# sourceMappingURL=index.mjs.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGFpLXNkay9vcGVuYWkvZGlzdC9pbmRleC5tanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7O0FBQUE7QUFNZ0M7O0FBRWhDO0FBRzBCO0FBU007O0FBRWhDO0FBQzJCO0FBQzZDO0FBQ3hFLDRCQUE0Qiw0Q0FBUTtBQUNwQyxTQUFTLDRDQUFRO0FBQ2pCLGFBQWEsNENBQVE7QUFDckI7QUFDQTtBQUNBO0FBQ0EsVUFBVSw0Q0FBUTtBQUNsQixXQUFXLHlDQUFLO0FBQ2hCLFVBQVUsMkNBQU8sRUFBRSw0Q0FBUSxJQUFJLDRDQUFRO0FBQ3ZDLEdBQUc7QUFDSCxDQUFDO0FBQ0Qsa0NBQWtDLHNGQUE4QjtBQUNoRTtBQUNBO0FBQ0EsQ0FBQzs7QUFFRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBOztBQUVBO0FBRzBCO0FBQytCO0FBQ3pEO0FBQ0E7QUFDQTtBQUNBLENBQUM7QUFDRDtBQUNBO0FBQ0E7QUFDQSxlQUFlLGdCQUFnQjtBQUMvQjtBQUNBO0FBQ0E7QUFDQTtBQUNBLDRCQUE0Qix5QkFBeUI7QUFDckQ7QUFDQTtBQUNBO0FBQ0EsNEJBQTRCLDRCQUE0QjtBQUN4RDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGtEQUFrRCxpQkFBaUI7QUFDbkU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FB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QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFLRTtBQUNGIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vZXNnLWNpdHktYXBwLy4vbm9kZV9tb2R1bGVzL0BhaS1zZGsvb3BlbmFpL2Rpc3QvaW5kZXgubWpzPzkwMTkiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gc3JjL29wZW5haS1wcm92aWRlci50c1xuaW1wb3J0IHtcbiAgbG9hZEFwaUtleSxcbiAgbG9hZE9wdGlvbmFsU2V0dGluZyxcbiAgd2l0aG91dFRyYWlsaW5nU2xhc2gsXG4gIHdpdGhVc2VyQWdlbnRTdWZmaXhcbn0gZnJvbSBcIkBhaS1zZGsvcHJvdmlkZXItdXRpbHNcIjtcblxuLy8gc3JjL2NoYXQvb3BlbmFpLWNoYXQtbGFuZ3VhZ2UtbW9kZWwudHNcbmltcG9ydCB7XG4gIEludmFsaWRSZXNwb25zZURhdGFFcnJvclxufSBmcm9tIFwiQGFpLXNkay9wcm92aWRlclwiO1xuaW1wb3J0IHtcbiAgY29tYmluZUhlYWRlcnMsXG4gIGNyZWF0ZUV2ZW50U291cmNlUmVzcG9uc2VIYW5kbGVyLFxuICBjcmVhdGVKc29uUmVzcG9uc2VIYW5kbGVyLFxuICBnZW5lcmF0ZUlkLFxuICBpc1BhcnNhYmxlSnNvbixcbiAgcGFyc2VQcm92aWRlck9wdGlvbnMsXG4gIHBvc3RKc29uVG9BcGlcbn0gZnJvbSBcIkBhaS1zZGsvcHJvdmlkZXItdXRpbHNcIjtcblxuLy8gc3JjL29wZW5haS1lcnJvci50c1xuaW1wb3J0IHsgeiB9IGZyb20gXCJ6b2QvdjRcIjtcbmltcG9ydCB7IGNyZWF0ZUpzb25FcnJvclJlc3BvbnNlSGFuZGxlciB9IGZyb20gXCJAYWktc2RrL3Byb3ZpZGVyLXV0aWxzXCI7XG52YXIgb3BlbmFpRXJyb3JEYXRhU2NoZW1hID0gei5vYmplY3Qoe1xuICBlcnJvcjogei5vYmplY3Qoe1xuICAgIG1lc3NhZ2U6IHouc3RyaW5nKCksXG4gICAgLy8gVGhlIGFkZGl0aW9uYWwgaW5mb3JtYXRpb24gYmVsb3cgaXMgaGFuZGxlZCBsb29zZWx5IHRvIHN1cHBvcnRcbiAgICAvLyBPcGVuQUktY29tcGF0aWJsZSBwcm92aWRlcnMgdGhhdCBoYXZlIHNsaWdodGx5IGRpZmZlcmVudCBlcnJvclxuICAgIC8vIHJlc3BvbnNlczpcbiAgICB0eXBlOiB6LnN0cmluZygpLm51bGxpc2goKSxcbiAgICBwYXJhbTogei5hbnkoKS5udWxsaXNoKCksXG4gICAgY29kZTogei51bmlvbihbei5zdHJpbmcoKSwgei5udW1iZXIoKV0pLm51bGxpc2goKVxuICB9KVxufSk7XG52YXIgb3BlbmFpRmFpbGVkUmVzcG9uc2VIYW5kbGVyID0gY3JlYXRlSnNvbkVycm9yUmVzcG9uc2VIYW5kbGVyKHtcbiAgZXJyb3JTY2hlbWE6IG9wZW5haUVycm9yRGF0YVNjaGVtYSxcbiAgZXJyb3JUb01lc3NhZ2U6IChkYXRhKSA9PiBkYXRhLmVycm9yLm1lc3NhZ2Vcbn0pO1xuXG4vLyBzcmMvb3BlbmFpLWxhbmd1YWdlLW1vZGVsLWNhcGFiaWxpdGllcy50c1xuZnVuY3Rpb24gZ2V0T3BlbkFJTGFuZ3VhZ2VNb2RlbENhcGFiaWxpdGllcyhtb2RlbElkKSB7XG4gIGNvbnN0IHN1cHBvcnRzRmxleFByb2Nlc3NpbmcgPSBtb2RlbElkLnN0YXJ0c1dpdGgoXCJvM1wiKSB8fCBtb2RlbElkLnN0YXJ0c1dpdGgoXCJvNC1taW5pXCIpIHx8IG1vZGVsSWQuc3RhcnRzV2l0aChcImdwdC01XCIpICYmICFtb2RlbElkLnN0YXJ0c1dpdGgoXCJncHQtNS1jaGF0XCIpO1xuICBjb25zdCBzdXBwb3J0c1ByaW9yaXR5UHJvY2Vzc2luZyA9IG1vZGVsSWQuc3RhcnRzV2l0aChcImdwdC00XCIpIHx8IG1vZGVsSWQuc3RhcnRzV2l0aChcImdwdC01LW1pbmlcIikgfHwgbW9kZWxJZC5zdGFydHNXaXRoKFwiZ3B0LTVcIikgJiYgIW1vZGVsSWQuc3RhcnRzV2l0aChcImdwdC01LW5hbm9cIikgJiYgIW1vZGVsSWQuc3RhcnRzV2l0aChcImdwdC01LWNoYXRcIikgfHwgbW9kZWxJZC5zdGFydHNXaXRoKFwibzNcIikgfHwgbW9kZWxJZC5zdGFydHNXaXRoKFwibzQtbWluaVwiKTtcbiAgY29uc3QgaXNSZWFzb25pbmdNb2RlbCA9IG1vZGVsSWQuc3RhcnRzV2l0aChcIm8xXCIpIHx8IG1vZGVsSWQuc3RhcnRzV2l0aChcIm8zXCIpIHx8IG1vZGVsSWQuc3RhcnRzV2l0aChcIm80LW1pbmlcIikgfHwgbW9kZWxJZC5zdGFydHNXaXRoKFwiY29kZXgtbWluaVwiKSB8fCBtb2RlbElkLnN0YXJ0c1dpdGgoXCJjb21wdXRlci11c2UtcHJldmlld1wiKSB8fCBtb2RlbElkLnN0YXJ0c1dpdGgoXCJncHQtNVwiKSAmJiAhbW9kZWxJZC5zdGFydHNXaXRoKFwiZ3B0LTUtY2hhdFwiKTtcbiAgY29uc3Qgc3VwcG9ydHNOb25SZWFzb25pbmdQYXJhbWV0ZXJzID0gbW9kZWxJZC5zdGFydHNXaXRoKFwiZ3B0LTUuMVwiKSB8fCBtb2RlbElkLnN0YXJ0c1dpdGgoXCJncHQtNS4yXCIpO1xuICBjb25zdCBzeXN0ZW1NZXNzYWdlTW9kZSA9IGlzUmVhc29uaW5nTW9kZWwgPyBcImRldmVsb3BlclwiIDogXCJzeXN0ZW1cIjtcbiAgcmV0dXJuIHtcbiAgICBzdXBwb3J0c0ZsZXhQcm9jZXNzaW5nLFxuICAgIHN1cHBvcnRzUHJpb3JpdHlQcm9jZXNzaW5nLFxuICAgIGlzUmVhc29uaW5nTW9kZWwsXG4gICAgc3lzdGVtTWVzc2FnZU1vZGUsXG4gICAgc3VwcG9ydHNOb25SZWFzb25pbmdQYXJhbWV0ZXJzXG4gIH07XG59XG5cbi8vIHNyYy9jaGF0L2NvbnZlcnQtb3BlbmFpLWNoYXQtdXNhZ2UudHNcbmZ1bmN0aW9uIGNvbnZlcnRPcGVuQUlDaGF0VXNhZ2UodXNhZ2UpIHtcbiAgdmFyIF9hLCBfYiwgX2MsIF9kLCBfZSwgX2Y7XG4gIGlmICh1c2FnZSA9PSBudWxsKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIGlucHV0VG9rZW5zOiB7XG4gICAgICAgIHRvdGFsOiB2b2lkIDAsXG4gICAgICAgIG5vQ2FjaGU6IHZvaWQgMCxcbiAgICAgICAgY2FjaGVSZWFkOiB2b2lkIDAsXG4gICAgICAgIGNhY2hlV3JpdGU6IHZvaWQgMFxuICAgICAgfSxcbiAgICAgIG91dHB1dFRva2Vuczoge1xuICAgICAgICB0b3RhbDogdm9pZCAwLFxuICAgICAgICB0ZXh0OiB2b2lkIDAsXG4gICAgICAgIHJlYXNvbmluZzogdm9pZCAwXG4gICAgICB9LFxuICAgICAgcmF3OiB2b2lkIDBcbiAgICB9O1xuICB9XG4gIGNvbnN0IHByb21wdFRva2VucyA9IChfYSA9IHVzYWdlLnByb21wdF90b2tlbnMpICE9IG51bGwgPyBfYSA6IDA7XG4gIGNvbnN0IGNvbXBsZXRpb25Ub2tlbnMgPSAoX2IgPSB1c2FnZS5jb21wbGV0aW9uX3Rva2VucykgIT0gbnVsbCA/IF9iIDogMDtcbiAgY29uc3QgY2FjaGVkVG9rZW5zID0gKF9kID0gKF9jID0gdXNhZ2UucHJvbXB0X3Rva2Vuc19kZXRhaWxzKSA9PSBudWxsID8gdm9pZCAwIDogX2MuY2FjaGVkX3Rva2VucykgIT0gbnVsbCA/IF9kIDogMDtcbiAgY29uc3QgcmVhc29uaW5nVG9rZW5zID0gKF9mID0gKF9lID0gdXNhZ2UuY29tcGxldGlvbl90b2tlbnNfZGV0YWlscykgPT0gbnVsbCA/IHZvaWQgMCA6IF9lLnJlYXNvbmluZ190b2tlbnMpICE9IG51bGwgPyBfZiA6IDA7XG4gIHJldHVybiB7XG4gICAgaW5wdXRUb2tlbnM6IHtcbiAgICAgIHRvdGFsOiBwcm9tcHRUb2tlbnMsXG4gICAgICBub0NhY2hlOiBwcm9tcHRUb2tlbnMgLSBjYWNoZWRUb2tlbnMsXG4gICAgICBjYWNoZVJlYWQ6IGNhY2hlZFRva2VucyxcbiAgICAgIGNhY2hlV3JpdGU6IHZvaWQgMFxuICAgIH0sXG4gICAgb3V0cHV0VG9rZW5zOiB7XG4gICAgICB0b3RhbDogY29tcGxldGlvblRva2VucyxcbiAgICAgIHRleHQ6IGNvbXBsZXRpb25Ub2tlbnMgLSByZWFzb25pbmdUb2tlbnMsXG4gICAgICByZWFzb25pbmc6IHJlYXNvbmluZ1Rva2Vuc1xuICAgIH0sXG4gICAgcmF3OiB1c2FnZVxuICB9O1xufVxuXG4vLyBzcmMvY2hhdC9jb252ZXJ0LXRvLW9wZW5haS1jaGF0LW1lc3NhZ2VzLnRzXG5pbXBvcnQge1xuICBVbnN1cHBvcnRlZEZ1bmN0aW9uYWxpdHlFcnJvclxufSBmcm9tIFwiQGFpLXNkay9wcm92aWRlclwiO1xuaW1wb3J0IHsgY29udmVydFRvQmFzZTY0IH0gZnJvbSBcIkBhaS1zZGsvcHJvdmlkZXItdXRpbHNcIjtcbmZ1bmN0aW9uIGNvbnZlcnRUb09wZW5BSUNoYXRNZXNzYWdlcyh7XG4gIHByb21wdCxcbiAgc3lzdGVtTWVzc2FnZU1vZGUgPSBcInN5c3RlbVwiXG59KSB7XG4gIHZhciBfYTtcbiAgY29uc3QgbWVzc2FnZXMgPSBbXTtcbiAgY29uc3Qgd2FybmluZ3MgPSBbXTtcbiAgZm9yIChjb25zdCB7IHJvbGUsIGNvbnRlbnQgfSBvZiBwcm9tcHQpIHtcbiAgICBzd2l0Y2ggKHJvbGUpIHtcbiAgICAgIGNhc2UgXCJzeXN0ZW1cIjoge1xuICAgICAgICBzd2l0Y2ggKHN5c3RlbU1lc3NhZ2VNb2RlKSB7XG4gICAgICAgICAgY2FzZSBcInN5c3RlbVwiOiB7XG4gICAgICAgICAgICBtZXNzYWdlcy5wdXNoKHsgcm9sZTogXCJzeXN0ZW1cIiwgY29udGVudCB9KTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgIH1cbiAgICAgICAgICBjYXNlIFwiZGV2ZWxvcGVyXCI6IHtcbiAgICAgICAgICAgIG1lc3NhZ2VzLnB1c2goeyByb2xlOiBcImRldmVsb3BlclwiLCBjb250ZW50IH0pO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgfVxuICAgICAgICAgIGNhc2UgXCJyZW1vdmVcIjoge1xuICAgICAgICAgICAgd2FybmluZ3MucHVzaCh7XG4gICAgICAgICAgICAgIHR5cGU6IFwib3RoZXJcIixcbiAgICAgICAgICAgICAgbWVzc2FnZTogXCJzeXN0ZW0gbWVzc2FnZXMgYXJlIHJlbW92ZWQgZm9yIHRoaXMgbW9kZWxcIlxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgICB9XG4gICAgICAgICAgZGVmYXVsdDoge1xuICAgICAgICAgICAgY29uc3QgX2V4aGF1c3RpdmVDaGVjayA9IHN5c3RlbU1lc3NhZ2VNb2RlO1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFxuICAgICAgICAgICAgICBgVW5zdXBwb3J0ZWQgc3lzdGVtIG1lc3NhZ2UgbW9kZTogJHtfZXhoYXVzdGl2ZUNoZWNrfWBcbiAgICAgICAgICAgICk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGJyZWFrO1xuICAgICAgfVxuICAgICAgY2FzZSBcInVzZXJcIjoge1xuICAgICAgICBpZiAoY29udGVudC5sZW5ndGggPT09IDEgJiYgY29udGVudFswXS50eXBlID09PSBcInRleHRcIikge1xuICAgICAgICAgIG1lc3NhZ2VzLnB1c2goeyByb2xlOiBcInVzZXJcIiwgY29udGVudDogY29udGVudFswXS50ZXh0IH0pO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgICAgIG1lc3NhZ2VzLnB1c2goe1xuICAgICAgICAgIHJvbGU6IFwidXNlclwiLFxuICAgICAgICAgIGNvbnRlbnQ6IGNvbnRlbnQubWFwKChwYXJ0LCBpbmRleCkgPT4ge1xuICAgICAgICAgICAgdmFyIF9hMiwgX2IsIF9jO1xuICAgICAgICAgICAgc3dpdGNoIChwYXJ0LnR5cGUpIHtcbiAgICAgICAgICAgICAgY2FzZSBcInRleHRcIjoge1xuICAgICAgICAgICAgICAgIHJldHVybiB7IHR5cGU6IFwidGV4dFwiLCB0ZXh0OiBwYXJ0LnRleHQgfTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICBjYXNlIFwiZmlsZVwiOiB7XG4gICAgICAgICAgICAgICAgaWYgKHBhcnQubWVkaWFUeXBlLnN0YXJ0c1dpdGgoXCJpbWFnZS9cIikpIHtcbiAgICAgICAgICAgICAgICAgIGNvbnN0IG1lZGlhVHlwZSA9IHBhcnQubWVkaWFUeXBlID09PSBcImltYWdlLypcIiA/IFwiaW1hZ2UvanBlZ1wiIDogcGFydC5tZWRpYVR5cGU7XG4gICAgICAgICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgICAgICB0eXBlOiBcImltYWdlX3VybFwiLFxuICAgICAgICAgICAgICAgICAgICBpbWFnZV91cmw6IHtcbiAgICAgICAgICAgICAgICAgICAgICB1cmw6IHBhcnQuZGF0YSBpbnN0YW5jZW9mIFVSTCA/IHBhcnQuZGF0YS50b1N0cmluZygpIDogYGRhdGE6JHttZWRpYVR5cGV9O2Jhc2U2NCwke2NvbnZlcnRUb0Jhc2U2NChwYXJ0LmRhdGEpfWAsXG4gICAgICAgICAgICAgICAgICAgICAgLy8gT3BlbkFJIHNwZWNpZmljIGV4dGVuc2lvbjogaW1hZ2UgZGV0YWlsXG4gICAgICAgICAgICAgICAgICAgICAgZGV0YWlsOiAoX2IgPSAoX2EyID0gcGFydC5wcm92aWRlck9wdGlvbnMpID09IG51bGwgPyB2b2lkIDAgOiBfYTIub3BlbmFpKSA9PSBudWxsID8gdm9pZCAwIDogX2IuaW1hZ2VEZXRhaWxcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKHBhcnQubWVkaWFUeXBlLnN0YXJ0c1dpdGgoXCJhdWRpby9cIikpIHtcbiAgICAgICAgICAgICAgICAgIGlmIChwYXJ0LmRhdGEgaW5zdGFuY2VvZiBVUkwpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IFVuc3VwcG9ydGVkRnVuY3Rpb25hbGl0eUVycm9yKHtcbiAgICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbmFsaXR5OiBcImF1ZGlvIGZpbGUgcGFydHMgd2l0aCBVUkxzXCJcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICBzd2l0Y2ggKHBhcnQubWVkaWFUeXBlKSB7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgXCJhdWRpby93YXZcIjoge1xuICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiBcImlucHV0X2F1ZGlvXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICBpbnB1dF9hdWRpbzoge1xuICAgICAgICAgICAgICAgICAgICAgICAgICBkYXRhOiBjb252ZXJ0VG9CYXNlNjQocGFydC5kYXRhKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgZm9ybWF0OiBcIndhdlwiXG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBjYXNlIFwiYXVkaW8vbXAzXCI6XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgXCJhdWRpby9tcGVnXCI6IHtcbiAgICAgICAgICAgICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogXCJpbnB1dF9hdWRpb1wiLFxuICAgICAgICAgICAgICAgICAgICAgICAgaW5wdXRfYXVkaW86IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgZGF0YTogY29udmVydFRvQmFzZTY0KHBhcnQuZGF0YSksXG4gICAgICAgICAgICAgICAgICAgICAgICAgIGZvcm1hdDogXCJtcDNcIlxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZGVmYXVsdDoge1xuICAgICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBVbnN1cHBvcnRlZEZ1bmN0aW9uYWxpdHlFcnJvcih7XG4gICAgICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbmFsaXR5OiBgYXVkaW8gY29udGVudCBwYXJ0cyB3aXRoIG1lZGlhIHR5cGUgJHtwYXJ0Lm1lZGlhVHlwZX1gXG4gICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKHBhcnQubWVkaWFUeXBlID09PSBcImFwcGxpY2F0aW9uL3BkZlwiKSB7XG4gICAgICAgICAgICAgICAgICBpZiAocGFydC5kYXRhIGluc3RhbmNlb2YgVVJMKSB7XG4gICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBVbnN1cHBvcnRlZEZ1bmN0aW9uYWxpdHlFcnJvcih7XG4gICAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb25hbGl0eTogXCJQREYgZmlsZSBwYXJ0cyB3aXRoIFVSTHNcIlxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgICAgIHR5cGU6IFwiZmlsZVwiLFxuICAgICAgICAgICAgICAgICAgICBmaWxlOiB0eXBlb2YgcGFydC5kYXRhID09PSBcInN0cmluZ1wiICYmIHBhcnQuZGF0YS5zdGFydHNXaXRoKFwiZmlsZS1cIikgPyB7IGZpbGVfaWQ6IHBhcnQuZGF0YSB9IDoge1xuICAgICAgICAgICAgICAgICAgICAgIGZpbGVuYW1lOiAoX2MgPSBwYXJ0LmZpbGVuYW1lKSAhPSBudWxsID8gX2MgOiBgcGFydC0ke2luZGV4fS5wZGZgLFxuICAgICAgICAgICAgICAgICAgICAgIGZpbGVfZGF0YTogYGRhdGE6YXBwbGljYXRpb24vcGRmO2Jhc2U2NCwke2NvbnZlcnRUb0Jhc2U2NChwYXJ0LmRhdGEpfWBcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IFVuc3VwcG9ydGVkRnVuY3Rpb25hbGl0eUVycm9yKHtcbiAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb25hbGl0eTogYGZpbGUgcGFydCBtZWRpYSB0eXBlICR7cGFydC5tZWRpYVR5cGV9YFxuICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSlcbiAgICAgICAgfSk7XG4gICAgICAgIGJyZWFrO1xuICAgICAgfVxuICAgICAgY2FzZSBcImFzc2lzdGFudFwiOiB7XG4gICAgICAgIGxldCB0ZXh0ID0gXCJcIjtcbiAgICAgICAgY29uc3QgdG9vbENhbGxzID0gW107XG4gICAgICAgIGZvciAoY29uc3QgcGFydCBvZiBjb250ZW50KSB7XG4gICAgICAgICAgc3dpdGNoIChwYXJ0LnR5cGUpIHtcbiAgICAgICAgICAgIGNhc2UgXCJ0ZXh0XCI6IHtcbiAgICAgICAgICAgICAgdGV4dCArPSBwYXJ0LnRleHQ7XG4gICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY2FzZSBcInRvb2wtY2FsbFwiOiB7XG4gICAgICAgICAgICAgIHRvb2xDYWxscy5wdXNoKHtcbiAgICAgICAgICAgICAgICBpZDogcGFydC50b29sQ2FsbElkLFxuICAgICAgICAgICAgICAgIHR5cGU6IFwiZnVuY3Rpb25cIixcbiAgICAgICAgICAgICAgICBmdW5jdGlvbjoge1xuICAgICAgICAgICAgICAgICAgbmFtZTogcGFydC50b29sTmFtZSxcbiAgICAgICAgICAgICAgICAgIGFyZ3VtZW50czogSlNPTi5zdHJpbmdpZnkocGFydC5pbnB1dClcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgbWVzc2FnZXMucHVzaCh7XG4gICAgICAgICAgcm9sZTogXCJhc3Npc3RhbnRcIixcbiAgICAgICAgICBjb250ZW50OiB0ZXh0LFxuICAgICAgICAgIHRvb2xfY2FsbHM6IHRvb2xDYWxscy5sZW5ndGggPiAwID8gdG9vbENhbGxzIDogdm9pZCAwXG4gICAgICAgIH0pO1xuICAgICAgICBicmVhaztcbiAgICAgIH1cbiAgICAgIGNhc2UgXCJ0b29sXCI6IHtcbiAgICAgICAgZm9yIChjb25zdCB0b29sUmVzcG9uc2Ugb2YgY29udGVudCkge1xuICAgICAgICAgIGlmICh0b29sUmVzcG9uc2UudHlwZSA9PT0gXCJ0b29sLWFwcHJvdmFsLXJlc3BvbnNlXCIpIHtcbiAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgIH1cbiAgICAgICAgICBjb25zdCBvdXRwdXQgPSB0b29sUmVzcG9uc2Uub3V0cHV0O1xuICAgICAgICAgIGxldCBjb250ZW50VmFsdWU7XG4gICAgICAgICAgc3dpdGNoIChvdXRwdXQudHlwZSkge1xuICAgICAgICAgICAgY2FzZSBcInRleHRcIjpcbiAgICAgICAgICAgIGNhc2UgXCJlcnJvci10ZXh0XCI6XG4gICAgICAgICAgICAgIGNvbnRlbnRWYWx1ZSA9IG91dHB1dC52YWx1ZTtcbiAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIFwiZXhlY3V0aW9uLWRlbmllZFwiOlxuICAgICAgICAgICAgICBjb250ZW50VmFsdWUgPSAoX2EgPSBvdXRwdXQucmVhc29uKSAhPSBudWxsID8gX2EgOiBcIlRvb2wgZXhlY3V0aW9uIGRlbmllZC5cIjtcbiAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIFwiY29udGVudFwiOlxuICAgICAgICAgICAgY2FzZSBcImpzb25cIjpcbiAgICAgICAgICAgIGNhc2UgXCJlcnJvci1qc29uXCI6XG4gICAgICAgICAgICAgIGNvbnRlbnRWYWx1ZSA9IEpTT04uc3RyaW5naWZ5KG91dHB1dC52YWx1ZSk7XG4gICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgIH1cbiAgICAgICAgICBtZXNzYWdlcy5wdXNoKHtcbiAgICAgICAgICAgIHJvbGU6IFwidG9vbFwiLFxuICAgICAgICAgICAgdG9vbF9jYWxsX2lkOiB0b29sUmVzcG9uc2UudG9vbENhbGxJZCxcbiAgICAgICAgICAgIGNvbnRlbnQ6IGNvbnRlbnRWYWx1ZVxuICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIGJyZWFrO1xuICAgICAgfVxuICAgICAgZGVmYXVsdDoge1xuICAgICAgICBjb25zdCBfZXhoYXVzdGl2ZUNoZWNrID0gcm9sZTtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBVbnN1cHBvcnRlZCByb2xlOiAke19leGhhdXN0aXZlQ2hlY2t9YCk7XG4gICAgICB9XG4gICAgfVxuICB9XG4gIHJldHVybiB7IG1lc3NhZ2VzLCB3YXJuaW5ncyB9O1xufVxuXG4vLyBzcmMvY2hhdC9nZXQtcmVzcG9uc2UtbWV0YWRhdGEudHNcbmZ1bmN0aW9uIGdldFJlc3BvbnNlTWV0YWRhdGEoe1xuICBpZCxcbiAgbW9kZWwsXG4gIGNyZWF0ZWRcbn0pIHtcbiAgcmV0dXJuIHtcbiAgICBpZDogaWQgIT0gbnVsbCA/IGlkIDogdm9pZCAwLFxuICAgIG1vZGVsSWQ6IG1vZGVsICE9IG51bGwgPyBtb2RlbCA6IHZvaWQgMCxcbiAgICB0aW1lc3RhbXA6IGNyZWF0ZWQgPyBuZXcgRGF0ZShjcmVhdGVkICogMWUzKSA6IHZvaWQgMFxuICB9O1xufVxuXG4vLyBzcmMvY2hhdC9tYXAtb3BlbmFpLWZpbmlzaC1yZWFzb24udHNcbmZ1bmN0aW9uIG1hcE9wZW5BSUZpbmlzaFJlYXNvbihmaW5pc2hSZWFzb24pIHtcbiAgc3dpdGNoIChmaW5pc2hSZWFzb24pIHtcbiAgICBjYXNlIFwic3RvcFwiOlxuICAgICAgcmV0dXJuIFwic3RvcFwiO1xuICAgIGNhc2UgXCJsZW5ndGhcIjpcbiAgICAgIHJldHVybiBcImxlbmd0aFwiO1xuICAgIGNhc2UgXCJjb250ZW50X2ZpbHRlclwiOlxuICAgICAgcmV0dXJuIFwiY29udGVudC1maWx0ZXJcIjtcbiAgICBjYXNlIFwiZnVuY3Rpb25fY2FsbFwiOlxuICAgIGNhc2UgXCJ0b29sX2NhbGxzXCI6XG4gICAgICByZXR1cm4gXCJ0b29sLWNhbGxzXCI7XG4gICAgZGVmYXVsdDpcbiAgICAgIHJldHVybiBcIm90aGVyXCI7XG4gIH1cbn1cblxuLy8gc3JjL2NoYXQvb3BlbmFpLWNoYXQtYXBpLnRzXG5pbXBvcnQgeyBsYXp5U2NoZW1hLCB6b2RTY2hlbWEgfSBmcm9tIFwiQGFpLXNkay9wcm92aWRlci11dGlsc1wiO1xuaW1wb3J0IHsgeiBhcyB6MiB9IGZyb20gXCJ6b2QvdjRcIjtcbnZhciBvcGVuYWlDaGF0UmVzcG9uc2VTY2hlbWEgPSBsYXp5U2NoZW1hKFxuICAoKSA9PiB6b2RTY2hlbWEoXG4gICAgejIub2JqZWN0KHtcbiAgICAgIGlkOiB6Mi5zdHJpbmcoKS5udWxsaXNoKCksXG4gICAgICBjcmVhdGVkOiB6Mi5udW1iZXIoKS5udWxsaXNoKCksXG4gICAgICBtb2RlbDogejIuc3RyaW5nKCkubnVsbGlzaCgpLFxuICAgICAgY2hvaWNlczogejIuYXJyYXkoXG4gICAgICAgIHoyLm9iamVjdCh7XG4gICAgICAgICAgbWVzc2FnZTogejIub2JqZWN0KHtcbiAgICAgICAgICAgIHJvbGU6IHoyLmxpdGVyYWwoXCJhc3Npc3RhbnRcIikubnVsbGlzaCgpLFxuICAgICAgICAgICAgY29udGVudDogejIuc3RyaW5nKCkubnVsbGlzaCgpLFxuICAgICAgICAgICAgdG9vbF9jYWxsczogejIuYXJyYXkoXG4gICAgICAgICAgICAgIHoyLm9iamVjdCh7XG4gICAgICAgICAgICAgICAgaWQ6IHoyLnN0cmluZygpLm51bGxpc2goKSxcbiAgICAgICAgICAgICAgICB0eXBlOiB6Mi5saXRlcmFsKFwiZnVuY3Rpb25cIiksXG4gICAgICAgICAgICAgICAgZnVuY3Rpb246IHoyLm9iamVjdCh7XG4gICAgICAgICAgICAgICAgICBuYW1lOiB6Mi5zdHJpbmcoKSxcbiAgICAgICAgICAgICAgICAgIGFyZ3VtZW50czogejIuc3RyaW5nKClcbiAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgKS5udWxsaXNoKCksXG4gICAgICAgICAgICBhbm5vdGF0aW9uczogejIuYXJyYXkoXG4gICAgICAgICAgICAgIHoyLm9iamVjdCh7XG4gICAgICAgICAgICAgICAgdHlwZTogejIubGl0ZXJhbChcInVybF9jaXRhdGlvblwiKSxcbiAgICAgICAgICAgICAgICB1cmxfY2l0YXRpb246IHoyLm9iamVjdCh7XG4gICAgICAgICAgICAgICAgICBzdGFydF9pbmRleDogejIubnVtYmVyKCksXG4gICAgICAgICAgICAgICAgICBlbmRfaW5kZXg6IHoyLm51bWJlcigpLFxuICAgICAgICAgICAgICAgICAgdXJsOiB6Mi5zdHJpbmcoKSxcbiAgICAgICAgICAgICAgICAgIHRpdGxlOiB6Mi5zdHJpbmcoKVxuICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICApLm51bGxpc2goKVxuICAgICAgICAgIH0pLFxuICAgICAgICAgIGluZGV4OiB6Mi5udW1iZXIoKSxcbiAgICAgICAgICBsb2dwcm9iczogejIub2JqZWN0KHtcbiAgICAgICAgICAgIGNvbnRlbnQ6IHoyLmFycmF5KFxuICAgICAgICAgICAgICB6Mi5vYmplY3Qoe1xuICAgICAgICAgICAgICAgIHRva2VuOiB6Mi5zdHJpbmcoKSxcbiAgICAgICAgICAgICAgICBsb2dwcm9iOiB6Mi5udW1iZXIoKSxcbiAgICAgICAgICAgICAgICB0b3BfbG9ncHJvYnM6IHoyLmFycmF5KFxuICAgICAgICAgICAgICAgICAgejIub2JqZWN0KHtcbiAgICAgICAgICAgICAgICAgICAgdG9rZW46IHoyLnN0cmluZygpLFxuICAgICAgICAgICAgICAgICAgICBsb2dwcm9iOiB6Mi5udW1iZXIoKVxuICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICApLm51bGxpc2goKVxuICAgICAgICAgIH0pLm51bGxpc2goKSxcbiAgICAgICAgICBmaW5pc2hfcmVhc29uOiB6Mi5zdHJpbmcoKS5udWxsaXNoKClcbiAgICAgICAgfSlcbiAgICAgICksXG4gICAgICB1c2FnZTogejIub2JqZWN0KHtcbiAgICAgICAgcHJvbXB0X3Rva2VuczogejIubnVtYmVyKCkubnVsbGlzaCgpLFxuICAgICAgICBjb21wbGV0aW9uX3Rva2VuczogejIubnVtYmVyKCkubnVsbGlzaCgpLFxuICAgICAgICB0b3RhbF90b2tlbnM6IHoyLm51bWJlcigpLm51bGxpc2goKSxcbiAgICAgICAgcHJvbXB0X3Rva2Vuc19kZXRhaWxzOiB6Mi5vYmplY3Qoe1xuICAgICAgICAgIGNhY2hlZF90b2tlbnM6IHoyLm51bWJlcigpLm51bGxpc2goKVxuICAgICAgICB9KS5udWxsaXNoKCksXG4gICAgICAgIGNvbXBsZXRpb25fdG9rZW5zX2RldGFpbHM6IHoyLm9iamVjdCh7XG4gICAgICAgICAgcmVhc29uaW5nX3Rva2VuczogejIubnVtYmVyKCkubnVsbGlzaCgpLFxuICAgICAgICAgIGFjY2VwdGVkX3ByZWRpY3Rpb25fdG9rZW5zOiB6Mi5udW1iZXIoKS5udWxsaXNoKCksXG4gICAgICAgICAgcmVqZWN0ZWRfcHJlZGljdGlvbl90b2tlbnM6IHoyLm51bWJlcigpLm51bGxpc2goKVxuICAgICAgICB9KS5udWxsaXNoKClcbiAgICAgIH0pLm51bGxpc2goKVxuICAgIH0pXG4gIClcbik7XG52YXIgb3BlbmFpQ2hhdENodW5rU2NoZW1hID0gbGF6eVNjaGVtYShcbiAgKCkgPT4gem9kU2NoZW1hKFxuICAgIHoyLnVuaW9uKFtcbiAgICAgIHoyLm9iamVjdCh7XG4gICAgICAgIGlkOiB6Mi5zdHJpbmcoKS5udWxsaXNoKCksXG4gICAgICAgIGNyZWF0ZWQ6IHoyLm51bWJlcigpLm51bGxpc2goKSxcbiAgICAgICAgbW9kZWw6IHoyLnN0cmluZygpLm51bGxpc2goKSxcbiAgICAgICAgY2hvaWNlczogejIuYXJyYXkoXG4gICAgICAgICAgejIub2JqZWN0KHtcbiAgICAgICAgICAgIGRlbHRhOiB6Mi5vYmplY3Qoe1xuICAgICAgICAgICAgICByb2xlOiB6Mi5lbnVtKFtcImFzc2lzdGFudFwiXSkubnVsbGlzaCgpLFxuICAgICAgICAgICAgICBjb250ZW50OiB6Mi5zdHJpbmcoKS5udWxsaXNoKCksXG4gICAgICAgICAgICAgIHRvb2xfY2FsbHM6IHoyLmFycmF5KFxuICAgICAgICAgICAgICAgIHoyLm9iamVjdCh7XG4gICAgICAgICAgICAgICAgICBpbmRleDogejIubnVtYmVyKCksXG4gICAgICAgICAgICAgICAgICBpZDogejIuc3RyaW5nKCkubnVsbGlzaCgpLFxuICAgICAgICAgICAgICAgICAgdHlwZTogejIubGl0ZXJhbChcImZ1bmN0aW9uXCIpLm51bGxpc2goKSxcbiAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uOiB6Mi5vYmplY3Qoe1xuICAgICAgICAgICAgICAgICAgICBuYW1lOiB6Mi5zdHJpbmcoKS5udWxsaXNoKCksXG4gICAgICAgICAgICAgICAgICAgIGFyZ3VtZW50czogejIuc3RyaW5nKCkubnVsbGlzaCgpXG4gICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICkubnVsbGlzaCgpLFxuICAgICAgICAgICAgICBhbm5vdGF0aW9uczogejIuYXJyYXkoXG4gICAgICAgICAgICAgICAgejIub2JqZWN0KHtcbiAgICAgICAgICAgICAgICAgIHR5cGU6IHoyLmxpdGVyYWwoXCJ1cmxfY2l0YXRpb25cIiksXG4gICAgICAgICAgICAgICAgICB1cmxfY2l0YXRpb246IHoyLm9iamVjdCh7XG4gICAgICAgICAgICAgICAgICAgIHN0YXJ0X2luZGV4OiB6Mi5udW1iZXIoKSxcbiAgICAgICAgICAgICAgICAgICAgZW5kX2luZGV4OiB6Mi5udW1iZXIoKSxcbiAgICAgICAgICAgICAgICAgICAgdXJsOiB6Mi5zdHJpbmcoKSxcbiAgICAgICAgICAgICAgICAgICAgdGl0bGU6IHoyLnN0cmluZygpXG4gICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICkubnVsbGlzaCgpXG4gICAgICAgICAgICB9KS5udWxsaXNoKCksXG4gICAgICAgICAgICBsb2dwcm9iczogejIub2JqZWN0KHtcbiAgICAgICAgICAgICAgY29udGVudDogejIuYXJyYXkoXG4gICAgICAgICAgICAgICAgejIub2JqZWN0KHtcbiAgICAgICAgICAgICAgICAgIHRva2VuOiB6Mi5zdHJpbmcoKSxcbiAgICAgICAgICAgICAgICAgIGxvZ3Byb2I6IHoyLm51bWJlcigpLFxuICAgICAgICAgICAgICAgICAgdG9wX2xvZ3Byb2JzOiB6Mi5hcnJheShcbiAgICAgICAgICAgICAgICAgICAgejIub2JqZWN0KHtcbiAgICAgICAgICAgICAgICAgICAgICB0b2tlbjogejIuc3RyaW5nKCksXG4gICAgICAgICAgICAgICAgICAgICAgbG9ncHJvYjogejIubnVtYmVyKClcbiAgICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICApLm51bGxpc2goKVxuICAgICAgICAgICAgfSkubnVsbGlzaCgpLFxuICAgICAgICAgICAgZmluaXNoX3JlYXNvbjogejIuc3RyaW5nKCkubnVsbGlzaCgpLFxuICAgICAgICAgICAgaW5kZXg6IHoyLm51bWJlcigpXG4gICAgICAgICAgfSlcbiAgICAgICAgKSxcbiAgICAgICAgdXNhZ2U6IHoyLm9iamVjdCh7XG4gICAgICAgICAgcHJvbXB0X3Rva2VuczogejIubnVtYmVyKCkubnVsbGlzaCgpLFxuICAgICAgICAgIGNvbXBsZXRpb25fdG9rZW5zOiB6Mi5udW1iZXIoKS5udWxsaXNoKCksXG4gICAgICAgICAgdG90YWxfdG9rZW5zOiB6Mi5udW1iZXIoKS5udWxsaXNoKCksXG4gICAgICAgICAgcHJvbXB0X3Rva2Vuc19kZXRhaWxzOiB6Mi5vYmplY3Qoe1xuICAgICAgICAgICAgY2FjaGVkX3Rva2VuczogejIubnVtYmVyKCkubnVsbGlzaCgpXG4gICAgICAgICAgfSkubnVsbGlzaCgpLFxuICAgICAgICAgIGNvbXBsZXRpb25fdG9rZW5zX2RldGFpbHM6IHoyLm9iamVjdCh7XG4gICAgICAgICAgICByZWFzb25pbmdfdG9rZW5zOiB6Mi5udW1iZXIoKS5udWxsaXNoKCksXG4gICAgICAgICAgICBhY2NlcHRlZF9wcmVkaWN0aW9uX3Rva2VuczogejIubnVtYmVyKCkubnVsbGlzaCgpLFxuICAgICAgICAgICAgcmVqZWN0ZWRfcHJlZGljdGlvbl90b2tlbnM6IHoyLm51bWJlcigpLm51bGxpc2goKVxuICAgICAgICAgIH0pLm51bGxpc2goKVxuICAgICAgICB9KS5udWxsaXNoKClcbiAgICAgIH0pLFxuICAgICAgb3BlbmFpRXJyb3JEYXRhU2NoZW1hXG4gICAgXSlcbiAgKVxuKTtcblxuLy8gc3JjL2NoYXQvb3BlbmFpLWNoYXQtb3B0aW9ucy50c1xuaW1wb3J0IHsgbGF6eVNjaGVtYSBhcyBsYXp5U2NoZW1hMiwgem9kU2NoZW1hIGFzIHpvZFNjaGVtYTIgfSBmcm9tIFwiQGFpLXNkay9wcm92aWRlci11dGlsc1wiO1xuaW1wb3J0IHsgeiBhcyB6MyB9IGZyb20gXCJ6b2QvdjRcIjtcbnZhciBvcGVuYWlDaGF0TGFuZ3VhZ2VNb2RlbE9wdGlvbnMgPSBsYXp5U2NoZW1hMihcbiAgKCkgPT4gem9kU2NoZW1hMihcbiAgICB6My5vYmplY3Qoe1xuICAgICAgLyoqXG4gICAgICAgKiBNb2RpZnkgdGhlIGxpa2VsaWhvb2Qgb2Ygc3BlY2lmaWVkIHRva2VucyBhcHBlYXJpbmcgaW4gdGhlIGNvbXBsZXRpb24uXG4gICAgICAgKlxuICAgICAgICogQWNjZXB0cyBhIEpTT04gb2JqZWN0IHRoYXQgbWFwcyB0b2tlbnMgKHNwZWNpZmllZCBieSB0aGVpciB0b2tlbiBJRCBpblxuICAgICAgICogdGhlIEdQVCB0b2tlbml6ZXIpIHRvIGFuIGFzc29jaWF0ZWQgYmlhcyB2YWx1ZSBmcm9tIC0xMDAgdG8gMTAwLlxuICAgICAgICovXG4gICAgICBsb2dpdEJpYXM6IHozLnJlY29yZCh6My5jb2VyY2UubnVtYmVyKCksIHozLm51bWJlcigpKS5vcHRpb25hbCgpLFxuICAgICAgLyoqXG4gICAgICAgKiBSZXR1cm4gdGhlIGxvZyBwcm9iYWJpbGl0aWVzIG9mIHRoZSB0b2tlbnMuXG4gICAgICAgKlxuICAgICAgICogU2V0dGluZyB0byB0cnVlIHdpbGwgcmV0dXJuIHRoZSBsb2cgcHJvYmFiaWxpdGllcyBvZiB0aGUgdG9rZW5zIHRoYXRcbiAgICAgICAqIHdlcmUgZ2VuZXJhdGVkLlxuICAgICAgICpcbiAgICAgICAqIFNldHRpbmcgdG8gYSBudW1iZXIgd2lsbCByZXR1cm4gdGhlIGxvZyBwcm9iYWJpbGl0aWVzIG9mIHRoZSB0b3AgblxuICAgICAgICogdG9rZW5zIHRoYXQgd2VyZSBnZW5lcmF0ZWQuXG4gICAgICAgKi9cbiAgICAgIGxvZ3Byb2JzOiB6My51bmlvbihbejMuYm9vbGVhbigpLCB6My5udW1iZXIoKV0pLm9wdGlvbmFsKCksXG4gICAgICAvKipcbiAgICAgICAqIFdoZXRoZXIgdG8gZW5hYmxlIHBhcmFsbGVsIGZ1bmN0aW9uIGNhbGxpbmcgZHVyaW5nIHRvb2wgdXNlLiBEZWZhdWx0IHRvIHRydWUuXG4gICAgICAgKi9cbiAgICAgIHBhcmFsbGVsVG9vbENhbGxzOiB6My5ib29sZWFuKCkub3B0aW9uYWwoKSxcbiAgICAgIC8qKlxuICAgICAgICogQSB1bmlxdWUgaWRlbnRpZmllciByZXByZXNlbnRpbmcgeW91ciBlbmQtdXNlciwgd2hpY2ggY2FuIGhlbHAgT3BlbkFJIHRvXG4gICAgICAgKiBtb25pdG9yIGFuZCBkZXRlY3QgYWJ1c2UuXG4gICAgICAgKi9cbiAgICAgIHVzZXI6IHozLnN0cmluZygpLm9wdGlvbmFsKCksXG4gICAgICAvKipcbiAgICAgICAqIFJlYXNvbmluZyBlZmZvcnQgZm9yIHJlYXNvbmluZyBtb2RlbHMuIERlZmF1bHRzIHRvIGBtZWRpdW1gLlxuICAgICAgICovXG4gICAgICByZWFzb25pbmdFZmZvcnQ6IHozLmVudW0oW1wibm9uZVwiLCBcIm1pbmltYWxcIiwgXCJsb3dcIiwgXCJtZWRpdW1cIiwgXCJoaWdoXCIsIFwieGhpZ2hcIl0pLm9wdGlvbmFsKCksXG4gICAgICAvKipcbiAgICAgICAqIE1heGltdW0gbnVtYmVyIG9mIGNvbXBsZXRpb24gdG9rZW5zIHRvIGdlbmVyYXRlLiBVc2VmdWwgZm9yIHJlYXNvbmluZyBtb2RlbHMuXG4gICAgICAgKi9cbiAgICAgIG1heENvbXBsZXRpb25Ub2tlbnM6IHozLm51bWJlcigpLm9wdGlvbmFsKCksXG4gICAgICAvKipcbiAgICAgICAqIFdoZXRoZXIgdG8gZW5hYmxlIHBlcnNpc3RlbmNlIGluIHJlc3BvbnNlcyBBUEkuXG4gICAgICAgKi9cbiAgICAgIHN0b3JlOiB6My5ib29sZWFuKCkub3B0aW9uYWwoKSxcbiAgICAgIC8qKlxuICAgICAgICogTWV0YWRhdGEgdG8gYXNzb2NpYXRlIHdpdGggdGhlIHJlcXVlc3QuXG4gICAgICAgKi9cbiAgICAgIG1ldGFkYXRhOiB6My5yZWNvcmQoejMuc3RyaW5nKCkubWF4KDY0KSwgejMuc3RyaW5nKCkubWF4KDUxMikpLm9wdGlvbmFsKCksXG4gICAgICAvKipcbiAgICAgICAqIFBhcmFtZXRlcnMgZm9yIHByZWRpY3Rpb24gbW9kZS5cbiAgICAgICAqL1xuICAgICAgcHJlZGljdGlvbjogejMucmVjb3JkKHozLnN0cmluZygpLCB6My5hbnkoKSkub3B0aW9uYWwoKSxcbiAgICAgIC8qKlxuICAgICAgICogU2VydmljZSB0aWVyIGZvciB0aGUgcmVxdWVzdC5cbiAgICAgICAqIC0gJ2F1dG8nOiBEZWZhdWx0IHNlcnZpY2UgdGllci4gVGhlIHJlcXVlc3Qgd2lsbCBiZSBwcm9jZXNzZWQgd2l0aCB0aGUgc2VydmljZSB0aWVyIGNvbmZpZ3VyZWQgaW4gdGhlXG4gICAgICAgKiAgICAgICAgICAgUHJvamVjdCBzZXR0aW5ncy4gVW5sZXNzIG90aGVyd2lzZSBjb25maWd1cmVkLCB0aGUgUHJvamVjdCB3aWxsIHVzZSAnZGVmYXVsdCcuXG4gICAgICAgKiAtICdmbGV4JzogNTAlIGNoZWFwZXIgcHJvY2Vzc2luZyBhdCB0aGUgY29zdCBvZiBpbmNyZWFzZWQgbGF0ZW5jeS4gT25seSBhdmFpbGFibGUgZm9yIG8zIGFuZCBvNC1taW5pIG1vZGVscy5cbiAgICAgICAqIC0gJ3ByaW9yaXR5JzogSGlnaGVyLXNwZWVkIHByb2Nlc3Npbmcgd2l0aCBwcmVkaWN0YWJseSBsb3cgbGF0ZW5jeSBhdCBwcmVtaXVtIGNvc3QuIEF2YWlsYWJsZSBmb3IgRW50ZXJwcmlzZSBjdXN0b21lcnMuXG4gICAgICAgKiAtICdkZWZhdWx0JzogVGhlIHJlcXVlc3Qgd2lsbCBiZSBwcm9jZXNzZWQgd2l0aCB0aGUgc3RhbmRhcmQgcHJpY2luZyBhbmQgcGVyZm9ybWFuY2UgZm9yIHRoZSBzZWxlY3RlZCBtb2RlbC5cbiAgICAgICAqXG4gICAgICAgKiBAZGVmYXVsdCAnYXV0bydcbiAgICAgICAqL1xuICAgICAgc2VydmljZVRpZXI6IHozLmVudW0oW1wiYXV0b1wiLCBcImZsZXhcIiwgXCJwcmlvcml0eVwiLCBcImRlZmF1bHRcIl0pLm9wdGlvbmFsKCksXG4gICAgICAvKipcbiAgICAgICAqIFdoZXRoZXIgdG8gdXNlIHN0cmljdCBKU09OIHNjaGVtYSB2YWxpZGF0aW9uLlxuICAgICAgICpcbiAgICAgICAqIEBkZWZhdWx0IHRydWVcbiAgICAgICAqL1xuICAgICAgc3RyaWN0SnNvblNjaGVtYTogejMuYm9vbGVhbigpLm9wdGlvbmFsKCksXG4gICAgICAvKipcbiAgICAgICAqIENvbnRyb2xzIHRoZSB2ZXJib3NpdHkgb2YgdGhlIG1vZGVsJ3MgcmVzcG9uc2VzLlxuICAgICAgICogTG93ZXIgdmFsdWVzIHdpbGwgcmVzdWx0IGluIG1vcmUgY29uY2lzZSByZXNwb25zZXMsIHdoaWxlIGhpZ2hlciB2YWx1ZXMgd2lsbCByZXN1bHQgaW4gbW9yZSB2ZXJib3NlIHJlc3BvbnNlcy5cbiAgICAgICAqL1xuICAgICAgdGV4dFZlcmJvc2l0eTogejMuZW51bShbXCJsb3dcIiwgXCJtZWRpdW1cIiwgXCJoaWdoXCJdKS5vcHRpb25hbCgpLFxuICAgICAgLyoqXG4gICAgICAgKiBBIGNhY2hlIGtleSBmb3IgcHJvbXB0IGNhY2hpbmcuIEFsbG93cyBtYW51YWwgY29udHJvbCBvdmVyIHByb21wdCBjYWNoaW5nIGJlaGF2aW9yLlxuICAgICAgICogVXNlZnVsIGZvciBpbXByb3ZpbmcgY2FjaGUgaGl0IHJhdGVzIGFuZCB3b3JraW5nIGFyb3VuZCBhdXRvbWF0aWMgY2FjaGluZyBpc3N1ZXMuXG4gICAgICAgKi9cbiAgICAgIHByb21wdENhY2hlS2V5OiB6My5zdHJpbmcoKS5vcHRpb25hbCgpLFxuICAgICAgLyoqXG4gICAgICAgKiBUaGUgcmV0ZW50aW9uIHBvbGljeSBmb3IgdGhlIHByb21wdCBjYWNoZS5cbiAgICAgICAqIC0gJ2luX21lbW9yeSc6IERlZmF1bHQuIFN0YW5kYXJkIHByb21wdCBjYWNoaW5nIGJlaGF2aW9yLlxuICAgICAgICogLSAnMjRoJzogRXh0ZW5kZWQgcHJvbXB0IGNhY2hpbmcgdGhhdCBrZWVwcyBjYWNoZWQgcHJlZml4ZXMgYWN0aXZlIGZvciB1cCB0byAyNCBob3Vycy5cbiAgICAgICAqICAgICAgICAgIEN1cnJlbnRseSBvbmx5IGF2YWlsYWJsZSBmb3IgNS4xIHNlcmllcyBtb2RlbHMuXG4gICAgICAgKlxuICAgICAgICogQGRlZmF1bHQgJ2luX21lbW9yeSdcbiAgICAgICAqL1xuICAgICAgcHJvbXB0Q2FjaGVSZXRlbnRpb246IHozLmVudW0oW1wiaW5fbWVtb3J5XCIsIFwiMjRoXCJdKS5vcHRpb25hbCgpLFxuICAgICAgLyoqXG4gICAgICAgKiBBIHN0YWJsZSBpZGVudGlmaWVyIHVzZWQgdG8gaGVscCBkZXRlY3QgdXNlcnMgb2YgeW91ciBhcHBsaWNhdGlvblxuICAgICAgICogdGhhdCBtYXkgYmUgdmlvbGF0aW5nIE9wZW5BSSdzIHVzYWdlIHBvbGljaWVzLiBUaGUgSURzIHNob3VsZCBiZSBhXG4gICAgICAgKiBzdHJpbmcgdGhhdCB1bmlxdWVseSBpZGVudGlmaWVzIGVhY2ggdXNlci4gV2UgcmVjb21tZW5kIGhhc2hpbmcgdGhlaXJcbiAgICAgICAqIHVzZXJuYW1lIG9yIGVtYWlsIGFkZHJlc3MsIGluIG9yZGVyIHRvIGF2b2lkIHNlbmRpbmcgdXMgYW55IGlkZW50aWZ5aW5nXG4gICAgICAgKiBpbmZvcm1hdGlvbi5cbiAgICAgICAqL1xuICAgICAgc2FmZXR5SWRlbnRpZmllcjogejMuc3RyaW5nKCkub3B0aW9uYWwoKSxcbiAgICAgIC8qKlxuICAgICAgICogT3ZlcnJpZGUgdGhlIHN5c3RlbSBtZXNzYWdlIG1vZGUgZm9yIHRoaXMgbW9kZWwuXG4gICAgICAgKiAtICdzeXN0ZW0nOiBVc2UgdGhlICdzeXN0ZW0nIHJvbGUgZm9yIHN5c3RlbSBtZXNzYWdlcyAoZGVmYXVsdCBmb3IgbW9zdCBtb2RlbHMpXG4gICAgICAgKiAtICdkZXZlbG9wZXInOiBVc2UgdGhlICdkZXZlbG9wZXInIHJvbGUgZm9yIHN5c3RlbSBtZXNzYWdlcyAodXNlZCBieSByZWFzb25pbmcgbW9kZWxzKVxuICAgICAgICogLSAncmVtb3ZlJzogUmVtb3ZlIHN5c3RlbSBtZXNzYWdlcyBlbnRpcmVseVxuICAgICAgICpcbiAgICAgICAqIElmIG5vdCBzcGVjaWZpZWQsIHRoZSBtb2RlIGlzIGF1dG9tYXRpY2FsbHkgZGV0ZXJtaW5lZCBiYXNlZCBvbiB0aGUgbW9kZWwuXG4gICAgICAgKi9cbiAgICAgIHN5c3RlbU1lc3NhZ2VNb2RlOiB6My5lbnVtKFtcInN5c3RlbVwiLCBcImRldmVsb3BlclwiLCBcInJlbW92ZVwiXSkub3B0aW9uYWwoKSxcbiAgICAgIC8qKlxuICAgICAgICogRm9yY2UgdHJlYXRpbmcgdGhpcyBtb2RlbCBhcyBhIHJlYXNvbmluZyBtb2RlbC5cbiAgICAgICAqXG4gICAgICAgKiBUaGlzIGlzIHVzZWZ1bCBmb3IgXCJzdGVhbHRoXCIgcmVhc29uaW5nIG1vZGVscyAoZS5nLiB2aWEgYSBjdXN0b20gYmFzZVVSTClcbiAgICAgICAqIHdoZXJlIHRoZSBtb2RlbCBJRCBpcyBub3QgcmVjb2duaXplZCBieSB0aGUgU0RLJ3MgYWxsb3dsaXN0LlxuICAgICAgICpcbiAgICAgICAqIFdoZW4gZW5hYmxlZCwgdGhlIFNESyBhcHBsaWVzIHJlYXNvbmluZy1tb2RlbCBwYXJhbWV0ZXIgY29tcGF0aWJpbGl0eSBydWxlc1xuICAgICAgICogYW5kIGRlZmF1bHRzIGBzeXN0ZW1NZXNzYWdlTW9kZWAgdG8gYGRldmVsb3BlcmAgdW5sZXNzIG92ZXJyaWRkZW4uXG4gICAgICAgKi9cbiAgICAgIGZvcmNlUmVhc29uaW5nOiB6My5ib29sZWFuKCkub3B0aW9uYWwoKVxuICAgIH0pXG4gIClcbik7XG5cbi8vIHNyYy9jaGF0L29wZW5haS1jaGF0LXByZXBhcmUtdG9vbHMudHNcbmltcG9ydCB7XG4gIFVuc3VwcG9ydGVkRnVuY3Rpb25hbGl0eUVycm9yIGFzIFVuc3VwcG9ydGVkRnVuY3Rpb25hbGl0eUVycm9yMlxufSBmcm9tIFwiQGFpLXNkay9wcm92aWRlclwiO1xuZnVuY3Rpb24gcHJlcGFyZUNoYXRUb29scyh7XG4gIHRvb2xzLFxuICB0b29sQ2hvaWNlXG59KSB7XG4gIHRvb2xzID0gKHRvb2xzID09IG51bGwgPyB2b2lkIDAgOiB0b29scy5sZW5ndGgpID8gdG9vbHMgOiB2b2lkIDA7XG4gIGNvbnN0IHRvb2xXYXJuaW5ncyA9IFtdO1xuICBpZiAodG9vbHMgPT0gbnVsbCkge1xuICAgIHJldHVybiB7IHRvb2xzOiB2b2lkIDAsIHRvb2xDaG9pY2U6IHZvaWQgMCwgdG9vbFdhcm5pbmdzIH07XG4gIH1cbiAgY29uc3Qgb3BlbmFpVG9vbHMyID0gW107XG4gIGZvciAoY29uc3QgdG9vbCBvZiB0b29scykge1xuICAgIHN3aXRjaCAodG9vbC50eXBlKSB7XG4gICAgICBjYXNlIFwiZnVuY3Rpb25cIjpcbiAgICAgICAgb3BlbmFpVG9vbHMyLnB1c2goe1xuICAgICAgICAgIHR5cGU6IFwiZnVuY3Rpb25cIixcbiAgICAgICAgICBmdW5jdGlvbjoge1xuICAgICAgICAgICAgbmFtZTogdG9vbC5uYW1lLFxuICAgICAgICAgICAgZGVzY3JpcHRpb246IHRvb2wuZGVzY3JpcHRpb24sXG4gICAgICAgICAgICBwYXJhbWV0ZXJzOiB0b29sLmlucHV0U2NoZW1hLFxuICAgICAgICAgICAgLi4udG9vbC5zdHJpY3QgIT0gbnVsbCA/IHsgc3RyaWN0OiB0b29sLnN0cmljdCB9IDoge31cbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgICBicmVhaztcbiAgICAgIGRlZmF1bHQ6XG4gICAgICAgIHRvb2xXYXJuaW5ncy5wdXNoKHtcbiAgICAgICAgICB0eXBlOiBcInVuc3VwcG9ydGVkXCIsXG4gICAgICAgICAgZmVhdHVyZTogYHRvb2wgdHlwZTogJHt0b29sLnR5cGV9YFxuICAgICAgICB9KTtcbiAgICAgICAgYnJlYWs7XG4gICAgfVxuICB9XG4gIGlmICh0b29sQ2hvaWNlID09IG51bGwpIHtcbiAgICByZXR1cm4geyB0b29sczogb3BlbmFpVG9vbHMyLCB0b29sQ2hvaWNlOiB2b2lkIDAsIHRvb2xXYXJuaW5ncyB9O1xuICB9XG4gIGNvbnN0IHR5cGUgPSB0b29sQ2hvaWNlLnR5cGU7XG4gIHN3aXRjaCAodHlwZSkge1xuICAgIGNhc2UgXCJhdXRvXCI6XG4gICAgY2FzZSBcIm5vbmVcIjpcbiAgICBjYXNlIFwicmVxdWlyZWRcIjpcbiAgICAgIHJldHVybiB7IHRvb2xzOiBvcGVuYWlUb29sczIsIHRvb2xDaG9pY2U6IHR5cGUsIHRvb2xXYXJuaW5ncyB9O1xuICAgIGNhc2UgXCJ0b29sXCI6XG4gICAgICByZXR1cm4ge1xuICAgICAgICB0b29sczogb3BlbmFpVG9vbHMyLFxuICAgICAgICB0b29sQ2hvaWNlOiB7XG4gICAgICAgICAgdHlwZTogXCJmdW5jdGlvblwiLFxuICAgICAgICAgIGZ1bmN0aW9uOiB7XG4gICAgICAgICAgICBuYW1lOiB0b29sQ2hvaWNlLnRvb2xOYW1lXG4gICAgICAgICAgfVxuICAgICAgICB9LFxuICAgICAgICB0b29sV2FybmluZ3NcbiAgICAgIH07XG4gICAgZGVmYXVsdDoge1xuICAgICAgY29uc3QgX2V4aGF1c3RpdmVDaGVjayA9IHR5cGU7XG4gICAgICB0aHJvdyBuZXcgVW5zdXBwb3J0ZWRGdW5jdGlvbmFsaXR5RXJyb3IyKHtcbiAgICAgICAgZnVuY3Rpb25hbGl0eTogYHRvb2wgY2hvaWNlIHR5cGU6ICR7X2V4aGF1c3RpdmVDaGVja31gXG4gICAgICB9KTtcbiAgICB9XG4gIH1cbn1cblxuLy8gc3JjL2NoYXQvb3BlbmFpLWNoYXQtbGFuZ3VhZ2UtbW9kZWwudHNcbnZhciBPcGVuQUlDaGF0TGFuZ3VhZ2VNb2RlbCA9IGNsYXNzIHtcbiAgY29uc3RydWN0b3IobW9kZWxJZCwgY29uZmlnKSB7XG4gICAgdGhpcy5zcGVjaWZpY2F0aW9uVmVyc2lvbiA9IFwidjNcIjtcbiAgICB0aGlzLnN1cHBvcnRlZFVybHMgPSB7XG4gICAgICBcImltYWdlLypcIjogWy9eaHR0cHM/OlxcL1xcLy4qJC9dXG4gICAgfTtcbiAgICB0aGlzLm1vZGVsSWQgPSBtb2RlbElkO1xuICAgIHRoaXMuY29uZmlnID0gY29uZmlnO1xuICB9XG4gIGdldCBwcm92aWRlcigpIHtcbiAgICByZXR1cm4gdGhpcy5jb25maWcucHJvdmlkZXI7XG4gIH1cbiAgYXN5bmMgZ2V0QXJncyh7XG4gICAgcHJvbXB0LFxuICAgIG1heE91dHB1dFRva2VucyxcbiAgICB0ZW1wZXJhdHVyZSxcbiAgICB0b3BQLFxuICAgIHRvcEssXG4gICAgZnJlcXVlbmN5UGVuYWx0eSxcbiAgICBwcmVzZW5jZVBlbmFsdHksXG4gICAgc3RvcFNlcXVlbmNlcyxcbiAgICByZXNwb25zZUZvcm1hdCxcbiAgICBzZWVkLFxuICAgIHRvb2xzLFxuICAgIHRvb2xDaG9pY2UsXG4gICAgcHJvdmlkZXJPcHRpb25zXG4gIH0pIHtcbiAgICB2YXIgX2EsIF9iLCBfYywgX2QsIF9lO1xuICAgIGNvbnN0IHdhcm5pbmdzID0gW107XG4gICAgY29uc3Qgb3BlbmFpT3B0aW9ucyA9IChfYSA9IGF3YWl0IHBhcnNlUHJvdmlkZXJPcHRpb25zKHtcbiAgICAgIHByb3ZpZGVyOiBcIm9wZW5haVwiLFxuICAgICAgcHJvdmlkZXJPcHRpb25zLFxuICAgICAgc2NoZW1hOiBvcGVuYWlDaGF0TGFuZ3VhZ2VNb2RlbE9wdGlvbnNcbiAgICB9KSkgIT0gbnVsbCA/IF9hIDoge307XG4gICAgY29uc3QgbW9kZWxDYXBhYmlsaXRpZXMgPSBnZXRPcGVuQUlMYW5ndWFnZU1vZGVsQ2FwYWJpbGl0aWVzKHRoaXMubW9kZWxJZCk7XG4gICAgY29uc3QgaXNSZWFzb25pbmdNb2RlbCA9IChfYiA9IG9wZW5haU9wdGlvbnMuZm9yY2VSZWFzb25pbmcpICE9IG51bGwgPyBfYiA6IG1vZGVsQ2FwYWJpbGl0aWVzLmlzUmVhc29uaW5nTW9kZWw7XG4gICAgaWYgKHRvcEsgIT0gbnVsbCkge1xuICAgICAgd2FybmluZ3MucHVzaCh7IHR5cGU6IFwidW5zdXBwb3J0ZWRcIiwgZmVhdHVyZTogXCJ0b3BLXCIgfSk7XG4gICAgfVxuICAgIGNvbnN0IHsgbWVzc2FnZXMsIHdhcm5pbmdzOiBtZXNzYWdlV2FybmluZ3MgfSA9IGNvbnZlcnRUb09wZW5BSUNoYXRNZXNzYWdlcyhcbiAgICAgIHtcbiAgICAgICAgcHJvbXB0LFxuICAgICAgICBzeXN0ZW1NZXNzYWdlTW9kZTogKF9jID0gb3BlbmFpT3B0aW9ucy5zeXN0ZW1NZXNzYWdlTW9kZSkgIT0gbnVsbCA/IF9jIDogaXNSZWFzb25pbmdNb2RlbCA/IFwiZGV2ZWxvcGVyXCIgOiBtb2RlbENhcGFiaWxpdGllcy5zeXN0ZW1NZXNzYWdlTW9kZVxuICAgICAgfVxuICAgICk7XG4gICAgd2FybmluZ3MucHVzaCguLi5tZXNzYWdlV2FybmluZ3MpO1xuICAgIGNvbnN0IHN0cmljdEpzb25TY2hlbWEgPSAoX2QgPSBvcGVuYWlPcHRpb25zLnN0cmljdEpzb25TY2hlbWEpICE9IG51bGwgPyBfZCA6IHRydWU7XG4gICAgY29uc3QgYmFzZUFyZ3MgPSB7XG4gICAgICAvLyBtb2RlbCBpZDpcbiAgICAgIG1vZGVsOiB0aGlzLm1vZGVsSWQsXG4gICAgICAvLyBtb2RlbCBzcGVjaWZpYyBzZXR0aW5nczpcbiAgICAgIGxvZ2l0X2JpYXM6IG9wZW5haU9wdGlvbnMubG9naXRCaWFzLFxuICAgICAgbG9ncHJvYnM6IG9wZW5haU9wdGlvbnMubG9ncHJvYnMgPT09IHRydWUgfHwgdHlwZW9mIG9wZW5haU9wdGlvbnMubG9ncHJvYnMgPT09IFwibnVtYmVyXCIgPyB0cnVlIDogdm9pZCAwLFxuICAgICAgdG9wX2xvZ3Byb2JzOiB0eXBlb2Ygb3BlbmFpT3B0aW9ucy5sb2dwcm9icyA9PT0gXCJudW1iZXJcIiA/IG9wZW5haU9wdGlvbnMubG9ncHJvYnMgOiB0eXBlb2Ygb3BlbmFpT3B0aW9ucy5sb2dwcm9icyA9PT0gXCJib29sZWFuXCIgPyBvcGVuYWlPcHRpb25zLmxvZ3Byb2JzID8gMCA6IHZvaWQgMCA6IHZvaWQgMCxcbiAgICAgIHVzZXI6IG9wZW5haU9wdGlvbnMudXNlcixcbiAgICAgIHBhcmFsbGVsX3Rvb2xfY2FsbHM6IG9wZW5haU9wdGlvbnMucGFyYWxsZWxUb29sQ2FsbHMsXG4gICAgICAvLyBzdGFuZGFyZGl6ZWQgc2V0dGluZ3M6XG4gICAgICBtYXhfdG9rZW5zOiBtYXhPdXRwdXRUb2tlbnMsXG4gICAgICB0ZW1wZXJhdHVyZSxcbiAgICAgIHRvcF9wOiB0b3BQLFxuICAgICAgZnJlcXVlbmN5X3BlbmFsdHk6IGZyZXF1ZW5jeVBlbmFsdHksXG4gICAgICBwcmVzZW5jZV9wZW5hbHR5OiBwcmVzZW5jZVBlbmFsdHksXG4gICAgICByZXNwb25zZV9mb3JtYXQ6IChyZXNwb25zZUZvcm1hdCA9PSBudWxsID8gdm9pZCAwIDogcmVzcG9uc2VGb3JtYXQudHlwZSkgPT09IFwianNvblwiID8gcmVzcG9uc2VGb3JtYXQuc2NoZW1hICE9IG51bGwgPyB7XG4gICAgICAgIHR5cGU6IFwianNvbl9zY2hlbWFcIixcbiAgICAgICAganNvbl9zY2hlbWE6IHtcbiAgICAgICAgICBzY2hlbWE6IHJlc3BvbnNlRm9ybWF0LnNjaGVtYSxcbiAgICAgICAgICBzdHJpY3Q6IHN0cmljdEpzb25TY2hlbWEsXG4gICAgICAgICAgbmFtZTogKF9lID0gcmVzcG9uc2VGb3JtYXQubmFtZSkgIT0gbnVsbCA/IF9lIDogXCJyZXNwb25zZVwiLFxuICAgICAgICAgIGRlc2NyaXB0aW9uOiByZXNwb25zZUZvcm1hdC5kZXNjcmlwdGlvblxuICAgICAgICB9XG4gICAgICB9IDogeyB0eXBlOiBcImpzb25fb2JqZWN0XCIgfSA6IHZvaWQgMCxcbiAgICAgIHN0b3A6IHN0b3BTZXF1ZW5jZXMsXG4gICAgICBzZWVkLFxuICAgICAgdmVyYm9zaXR5OiBvcGVuYWlPcHRpb25zLnRleHRWZXJib3NpdHksXG4gICAgICAvLyBvcGVuYWkgc3BlY2lmaWMgc2V0dGluZ3M6XG4gICAgICAvLyBUT0RPIEFJIFNESyA2OiByZW1vdmUsIHdlIGF1dG8tbWFwIG1heE91dHB1dFRva2VucyBub3dcbiAgICAgIG1heF9jb21wbGV0aW9uX3Rva2Vuczogb3BlbmFpT3B0aW9ucy5tYXhDb21wbGV0aW9uVG9rZW5zLFxuICAgICAgc3RvcmU6IG9wZW5haU9wdGlvbnMuc3RvcmUsXG4gICAgICBtZXRhZGF0YTogb3BlbmFpT3B0aW9ucy5tZXRhZGF0YSxcbiAgICAgIHByZWRpY3Rpb246IG9wZW5haU9wdGlvbnMucHJlZGljdGlvbixcbiAgICAgIHJlYXNvbmluZ19lZmZvcnQ6IG9wZW5haU9wdGlvbnMucmVhc29uaW5nRWZmb3J0LFxuICAgICAgc2VydmljZV90aWVyOiBvcGVuYWlPcHRpb25zLnNlcnZpY2VUaWVyLFxuICAgICAgcHJvbXB0X2NhY2hlX2tleTogb3BlbmFpT3B0aW9ucy5wcm9tcHRDYWNoZUtleSxcbiAgICAgIHByb21wdF9jYWNoZV9yZXRlbnRpb246IG9wZW5haU9wdGlvbnMucHJvbXB0Q2FjaGVSZXRlbnRpb24sXG4gICAgICBzYWZldHlfaWRlbnRpZmllcjogb3BlbmFpT3B0aW9ucy5zYWZldHlJZGVudGlmaWVyLFxuICAgICAgLy8gbWVzc2FnZXM6XG4gICAgICBtZXNzYWdlc1xuICAgIH07XG4gICAgaWYgKGlzUmVhc29uaW5nTW9kZWwpIHtcbiAgICAgIGlmIChvcGVuYWlPcHRpb25zLnJlYXNvbmluZ0VmZm9ydCAhPT0gXCJub25lXCIgfHwgIW1vZGVsQ2FwYWJpbGl0aWVzLnN1cHBvcnRzTm9uUmVhc29uaW5nUGFyYW1ldGVycykge1xuICAgICAgICBpZiAoYmFzZUFyZ3MudGVtcGVyYXR1cmUgIT0gbnVsbCkge1xuICAgICAgICAgIGJhc2VBcmdzLnRlbXBlcmF0dXJlID0gdm9pZCAwO1xuICAgICAgICAgIHdhcm5pbmdzLnB1c2goe1xuICAgICAgICAgICAgdHlwZTogXCJ1bnN1cHBvcnRlZFwiLFxuICAgICAgICAgICAgZmVhdHVyZTogXCJ0ZW1wZXJhdHVyZVwiLFxuICAgICAgICAgICAgZGV0YWlsczogXCJ0ZW1wZXJhdHVyZSBpcyBub3Qgc3VwcG9ydGVkIGZvciByZWFzb25pbmcgbW9kZWxzXCJcbiAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoYmFzZUFyZ3MudG9wX3AgIT0gbnVsbCkge1xuICAgICAgICAgIGJhc2VBcmdzLnRvcF9wID0gdm9pZCAwO1xuICAgICAgICAgIHdhcm5pbmdzLnB1c2goe1xuICAgICAgICAgICAgdHlwZTogXCJ1bnN1cHBvcnRlZFwiLFxuICAgICAgICAgICAgZmVhdHVyZTogXCJ0b3BQXCIsXG4gICAgICAgICAgICBkZXRhaWxzOiBcInRvcFAgaXMgbm90IHN1cHBvcnRlZCBmb3IgcmVhc29uaW5nIG1vZGVsc1wiXG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGJhc2VBcmdzLmxvZ3Byb2JzICE9IG51bGwpIHtcbiAgICAgICAgICBiYXNlQXJncy5sb2dwcm9icyA9IHZvaWQgMDtcbiAgICAgICAgICB3YXJuaW5ncy5wdXNoKHtcbiAgICAgICAgICAgIHR5cGU6IFwib3RoZXJcIixcbiAgICAgICAgICAgIG1lc3NhZ2U6IFwibG9ncHJvYnMgaXMgbm90IHN1cHBvcnRlZCBmb3IgcmVhc29uaW5nIG1vZGVsc1wiXG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGlmIChiYXNlQXJncy5mcmVxdWVuY3lfcGVuYWx0eSAhPSBudWxsKSB7XG4gICAgICAgIGJhc2VBcmdzLmZyZXF1ZW5jeV9wZW5hbHR5ID0gdm9pZCAwO1xuICAgICAgICB3YXJuaW5ncy5wdXNoKHtcbiAgICAgICAgICB0eXBlOiBcInVuc3VwcG9ydGVkXCIsXG4gICAgICAgICAgZmVhdHVyZTogXCJmcmVxdWVuY3lQZW5hbHR5XCIsXG4gICAgICAgICAgZGV0YWlsczogXCJmcmVxdWVuY3lQZW5hbHR5IGlzIG5vdCBzdXBwb3J0ZWQgZm9yIHJlYXNvbmluZyBtb2RlbHNcIlxuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICAgIGlmIChiYXNlQXJncy5wcmVzZW5jZV9wZW5hbHR5ICE9IG51bGwpIHtcbiAgICAgICAgYmFzZUFyZ3MucHJlc2VuY2VfcGVuYWx0eSA9IHZvaWQgMDtcbiAgICAgICAgd2FybmluZ3MucHVzaCh7XG4gICAgICAgICAgdHlwZTogXCJ1bnN1cHBvcnRlZFwiLFxuICAgICAgICAgIGZlYXR1cmU6IFwicHJlc2VuY2VQZW5hbHR5XCIsXG4gICAgICAgICAgZGV0YWlsczogXCJwcmVzZW5jZVBlbmFsdHkgaXMgbm90IHN1cHBvcnRlZCBmb3IgcmVhc29uaW5nIG1vZGVsc1wiXG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgICAgaWYgKGJhc2VBcmdzLmxvZ2l0X2JpYXMgIT0gbnVsbCkge1xuICAgICAgICBiYXNlQXJncy5sb2dpdF9iaWFzID0gdm9pZCAwO1xuICAgICAgICB3YXJuaW5ncy5wdXNoKHtcbiAgICAgICAgICB0eXBlOiBcIm90aGVyXCIsXG4gICAgICAgICAgbWVzc2FnZTogXCJsb2dpdEJpYXMgaXMgbm90IHN1cHBvcnRlZCBmb3IgcmVhc29uaW5nIG1vZGVsc1wiXG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgICAgaWYgKGJhc2VBcmdzLnRvcF9sb2dwcm9icyAhPSBudWxsKSB7XG4gICAgICAgIGJhc2VBcmdzLnRvcF9sb2dwcm9icyA9IHZvaWQgMDtcbiAgICAgICAgd2FybmluZ3MucHVzaCh7XG4gICAgICAgICAgdHlwZTogXCJvdGhlclwiLFxuICAgICAgICAgIG1lc3NhZ2U6IFwidG9wTG9ncHJvYnMgaXMgbm90IHN1cHBvcnRlZCBmb3IgcmVhc29uaW5nIG1vZGVsc1wiXG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgICAgaWYgKGJhc2VBcmdzLm1heF90b2tlbnMgIT0gbnVsbCkge1xuICAgICAgICBpZiAoYmFzZUFyZ3MubWF4X2NvbXBsZXRpb25fdG9rZW5zID09IG51bGwpIHtcbiAgICAgICAgICBiYXNlQXJncy5tYXhfY29tcGxldGlvbl90b2tlbnMgPSBiYXNlQXJncy5tYXhfdG9rZW5zO1xuICAgICAgICB9XG4gICAgICAgIGJhc2VBcmdzLm1heF90b2tlbnMgPSB2b2lkIDA7XG4gICAgICB9XG4gICAgfSBlbHNlIGlmICh0aGlzLm1vZGVsSWQuc3RhcnRzV2l0aChcImdwdC00by1zZWFyY2gtcHJldmlld1wiKSB8fCB0aGlzLm1vZGVsSWQuc3RhcnRzV2l0aChcImdwdC00by1taW5pLXNlYXJjaC1wcmV2aWV3XCIpKSB7XG4gICAgICBpZiAoYmFzZUFyZ3MudGVtcGVyYXR1cmUgIT0gbnVsbCkge1xuICAgICAgICBiYXNlQXJncy50ZW1wZXJhdHVyZSA9IHZvaWQgMDtcbiAgICAgICAgd2FybmluZ3MucHVzaCh7XG4gICAgICAgICAgdHlwZTogXCJ1bnN1cHBvcnRlZFwiLFxuICAgICAgICAgIGZlYXR1cmU6IFwidGVtcGVyYXR1cmVcIixcbiAgICAgICAgICBkZXRhaWxzOiBcInRlbXBlcmF0dXJlIGlzIG5vdCBzdXBwb3J0ZWQgZm9yIHRoZSBzZWFyY2ggcHJldmlldyBtb2RlbHMgYW5kIGhhcyBiZWVuIHJlbW92ZWQuXCJcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgfVxuICAgIGlmIChvcGVuYWlPcHRpb25zLnNlcnZpY2VUaWVyID09PSBcImZsZXhcIiAmJiAhbW9kZWxDYXBhYmlsaXRpZXMuc3VwcG9ydHNGbGV4UHJvY2Vzc2luZykge1xuICAgICAgd2FybmluZ3MucHVzaCh7XG4gICAgICAgIHR5cGU6IFwidW5zdXBwb3J0ZWRcIixcbiAgICAgICAgZmVhdHVyZTogXCJzZXJ2aWNlVGllclwiLFxuICAgICAgICBkZXRhaWxzOiBcImZsZXggcHJvY2Vzc2luZyBpcyBvbmx5IGF2YWlsYWJsZSBmb3IgbzMsIG80LW1pbmksIGFuZCBncHQtNSBtb2RlbHNcIlxuICAgICAgfSk7XG4gICAgICBiYXNlQXJncy5zZXJ2aWNlX3RpZXIgPSB2b2lkIDA7XG4gICAgfVxuICAgIGlmIChvcGVuYWlPcHRpb25zLnNlcnZpY2VUaWVyID09PSBcInByaW9yaXR5XCIgJiYgIW1vZGVsQ2FwYWJpbGl0aWVzLnN1cHBvcnRzUHJpb3JpdHlQcm9jZXNzaW5nKSB7XG4gICAgICB3YXJuaW5ncy5wdXNoKHtcbiAgICAgICAgdHlwZTogXCJ1bnN1cHBvcnRlZFwiLFxuICAgICAgICBmZWF0dXJlOiBcInNlcnZpY2VUaWVyXCIsXG4gICAgICAgIGRldGFpbHM6IFwicHJpb3JpdHkgcHJvY2Vzc2luZyBpcyBvbmx5IGF2YWlsYWJsZSBmb3Igc3VwcG9ydGVkIG1vZGVscyAoZ3B0LTQsIGdwdC01LCBncHQtNS1taW5pLCBvMywgbzQtbWluaSkgYW5kIHJlcXVpcmVzIEVudGVycHJpc2UgYWNjZXNzLiBncHQtNS1uYW5vIGlzIG5vdCBzdXBwb3J0ZWRcIlxuICAgICAgfSk7XG4gICAgICBiYXNlQXJncy5zZXJ2aWNlX3RpZXIgPSB2b2lkIDA7XG4gICAgfVxuICAgIGNvbnN0IHtcbiAgICAgIHRvb2xzOiBvcGVuYWlUb29sczIsXG4gICAgICB0b29sQ2hvaWNlOiBvcGVuYWlUb29sQ2hvaWNlLFxuICAgICAgdG9vbFdhcm5pbmdzXG4gICAgfSA9IHByZXBhcmVDaGF0VG9vbHMoe1xuICAgICAgdG9vbHMsXG4gICAgICB0b29sQ2hvaWNlXG4gICAgfSk7XG4gICAgcmV0dXJuIHtcbiAgICAgIGFyZ3M6IHtcbiAgICAgICAgLi4uYmFzZUFyZ3MsXG4gICAgICAgIHRvb2xzOiBvcGVuYWlUb29sczIsXG4gICAgICAgIHRvb2xfY2hvaWNlOiBvcGVuYWlUb29sQ2hvaWNlXG4gICAgICB9LFxuICAgICAgd2FybmluZ3M6IFsuLi53YXJuaW5ncywgLi4udG9vbFdhcm5pbmdzXVxuICAgIH07XG4gIH1cbiAgYXN5bmMgZG9HZW5lcmF0ZShvcHRpb25zKSB7XG4gICAgdmFyIF9hLCBfYiwgX2MsIF9kLCBfZSwgX2YsIF9nO1xuICAgIGNvbnN0IHsgYXJnczogYm9keSwgd2FybmluZ3MgfSA9IGF3YWl0IHRoaXMuZ2V0QXJncyhvcHRpb25zKTtcbiAgICBjb25zdCB7XG4gICAgICByZXNwb25zZUhlYWRlcnMsXG4gICAgICB2YWx1ZTogcmVzcG9uc2UsXG4gICAgICByYXdWYWx1ZTogcmF3UmVzcG9uc2VcbiAgICB9ID0gYXdhaXQgcG9zdEpzb25Ub0FwaSh7XG4gICAgICB1cmw6IHRoaXMuY29uZmlnLnVybCh7XG4gICAgICAgIHBhdGg6IFwiL2NoYXQvY29tcGxldGlvbnNcIixcbiAgICAgICAgbW9kZWxJZDogdGhpcy5tb2RlbElkXG4gICAgICB9KSxcbiAgICAgIGhlYWRlcnM6IGNvbWJpbmVIZWFkZXJzKHRoaXMuY29uZmlnLmhlYWRlcnMoKSwgb3B0aW9ucy5oZWFkZXJzKSxcbiAgICAgIGJvZHksXG4gICAgICBmYWlsZWRSZXNwb25zZUhhbmRsZXI6IG9wZW5haUZhaWxlZFJlc3BvbnNlSGFuZGxlcixcbiAgICAgIHN1Y2Nlc3NmdWxSZXNwb25zZUhhbmRsZXI6IGNyZWF0ZUpzb25SZXNwb25zZUhhbmRsZXIoXG4gICAgICAgIG9wZW5haUNoYXRSZXNwb25zZVNjaGVtYVxuICAgICAgKSxcbiAgICAgIGFib3J0U2lnbmFsOiBvcHRpb25zLmFib3J0U2lnbmFsLFxuICAgICAgZmV0Y2g6IHRoaXMuY29uZmlnLmZldGNoXG4gICAgfSk7XG4gICAgY29uc3QgY2hvaWNlID0gcmVzcG9uc2UuY2hvaWNlc1swXTtcbiAgICBjb25zdCBjb250ZW50ID0gW107XG4gICAgY29uc3QgdGV4dCA9IGNob2ljZS5tZXNzYWdlLmNvbnRlbnQ7XG4gICAgaWYgKHRleHQgIT0gbnVsbCAmJiB0ZXh0Lmxlbmd0aCA+IDApIHtcbiAgICAgIGNvbnRlbnQucHVzaCh7IHR5cGU6IFwidGV4dFwiLCB0ZXh0IH0pO1xuICAgIH1cbiAgICBmb3IgKGNvbnN0IHRvb2xDYWxsIG9mIChfYSA9IGNob2ljZS5tZXNzYWdlLnRvb2xfY2FsbHMpICE9IG51bGwgPyBfYSA6IFtdKSB7XG4gICAgICBjb250ZW50LnB1c2goe1xuICAgICAgICB0eXBlOiBcInRvb2wtY2FsbFwiLFxuICAgICAgICB0b29sQ2FsbElkOiAoX2IgPSB0b29sQ2FsbC5pZCkgIT0gbnVsbCA/IF9iIDogZ2VuZXJhdGVJZCgpLFxuICAgICAgICB0b29sTmFtZTogdG9vbENhbGwuZnVuY3Rpb24ubmFtZSxcbiAgICAgICAgaW5wdXQ6IHRvb2xDYWxsLmZ1bmN0aW9uLmFyZ3VtZW50c1xuICAgICAgfSk7XG4gICAgfVxuICAgIGZvciAoY29uc3QgYW5ub3RhdGlvbiBvZiAoX2MgPSBjaG9pY2UubWVzc2FnZS5hbm5vdGF0aW9ucykgIT0gbnVsbCA/IF9jIDogW10pIHtcbiAgICAgIGNvbnRlbnQucHVzaCh7XG4gICAgICAgIHR5cGU6IFwic291cmNlXCIsXG4gICAgICAgIHNvdXJjZVR5cGU6IFwidXJsXCIsXG4gICAgICAgIGlkOiBnZW5lcmF0ZUlkKCksXG4gICAgICAgIHVybDogYW5ub3RhdGlvbi51cmxfY2l0YXRpb24udXJsLFxuICAgICAgICB0aXRsZTogYW5ub3RhdGlvbi51cmxfY2l0YXRpb24udGl0bGVcbiAgICAgIH0pO1xuICAgIH1cbiAgICBjb25zdCBjb21wbGV0aW9uVG9rZW5EZXRhaWxzID0gKF9kID0gcmVzcG9uc2UudXNhZ2UpID09IG51bGwgPyB2b2lkIDAgOiBfZC5jb21wbGV0aW9uX3Rva2Vuc19kZXRhaWxzO1xuICAgIGNvbnN0IHByb21wdFRva2VuRGV0YWlscyA9IChfZSA9IHJlc3BvbnNlLnVzYWdlKSA9PSBudWxsID8gdm9pZCAwIDogX2UucHJvbXB0X3Rva2Vuc19kZXRhaWxzO1xuICAgIGNvbnN0IHByb3ZpZGVyTWV0YWRhdGEgPSB7IG9wZW5haToge30gfTtcbiAgICBpZiAoKGNvbXBsZXRpb25Ub2tlbkRldGFpbHMgPT0gbnVsbCA/IHZvaWQgMCA6IGNvbXBsZXRpb25Ub2tlbkRldGFpbHMuYWNjZXB0ZWRfcHJlZGljdGlvbl90b2tlbnMpICE9IG51bGwpIHtcbiAgICAgIHByb3ZpZGVyTWV0YWRhdGEub3BlbmFpLmFjY2VwdGVkUHJlZGljdGlvblRva2VucyA9IGNvbXBsZXRpb25Ub2tlbkRldGFpbHMgPT0gbnVsbCA/IHZvaWQgMCA6IGNvbXBsZXRpb25Ub2tlbkRldGFpbHMuYWNjZXB0ZWRfcHJlZGljdGlvbl90b2tlbnM7XG4gICAgfVxuICAgIGlmICgoY29tcGxldGlvblRva2VuRGV0YWlscyA9PSBudWxsID8gdm9pZCAwIDogY29tcGxldGlvblRva2VuRGV0YWlscy5yZWplY3RlZF9wcmVkaWN0aW9uX3Rva2VucykgIT0gbnVsbCkge1xuICAgICAgcHJvdmlkZXJNZXRhZGF0YS5vcGVuYWkucmVqZWN0ZWRQcmVkaWN0aW9uVG9rZW5zID0gY29tcGxldGlvblRva2VuRGV0YWlscyA9PSBudWxsID8gdm9pZCAwIDogY29tcGxldGlvblRva2VuRGV0YWlscy5yZWplY3RlZF9wcmVkaWN0aW9uX3Rva2VucztcbiAgICB9XG4gICAgaWYgKCgoX2YgPSBjaG9pY2UubG9ncHJvYnMpID09IG51bGwgPyB2b2lkIDAgOiBfZi5jb250ZW50KSAhPSBudWxsKSB7XG4gICAgICBwcm92aWRlck1ldGFkYXRhLm9wZW5haS5sb2dwcm9icyA9IGNob2ljZS5sb2dwcm9icy5jb250ZW50O1xuICAgIH1cbiAgICByZXR1cm4ge1xuICAgICAgY29udGVudCxcbiAgICAgIGZpbmlzaFJlYXNvbjoge1xuICAgICAgICB1bmlmaWVkOiBtYXBPcGVuQUlGaW5pc2hSZWFzb24oY2hvaWNlLmZpbmlzaF9yZWFzb24pLFxuICAgICAgICByYXc6IChfZyA9IGNob2ljZS5maW5pc2hfcmVhc29uKSAhPSBudWxsID8gX2cgOiB2b2lkIDBcbiAgICAgIH0sXG4gICAgICB1c2FnZTogY29udmVydE9wZW5BSUNoYXRVc2FnZShyZXNwb25zZS51c2FnZSksXG4gICAgICByZXF1ZXN0OiB7IGJvZHkgfSxcbiAgICAgIHJlc3BvbnNlOiB7XG4gICAgICAgIC4uLmdldFJlc3BvbnNlTWV0YWRhdGEocmVzcG9uc2UpLFxuICAgICAgICBoZWFkZXJzOiByZXNwb25zZUhlYWRlcnMsXG4gICAgICAgIGJvZHk6IHJhd1Jlc3BvbnNlXG4gICAgICB9LFxuICAgICAgd2FybmluZ3MsXG4gICAgICBwcm92aWRlck1ldGFkYXRhXG4gICAgfTtcbiAgfVxuICBhc3luYyBkb1N0cmVhbShvcHRpb25zKSB7XG4gICAgY29uc3QgeyBhcmdzLCB3YXJuaW5ncyB9ID0gYXdhaXQgdGhpcy5nZXRBcmdzKG9wdGlvbnMpO1xuICAgIGNvbnN0IGJvZHkgPSB7XG4gICAgICAuLi5hcmdzLFxuICAgICAgc3RyZWFtOiB0cnVlLFxuICAgICAgc3RyZWFtX29wdGlvbnM6IHtcbiAgICAgICAgaW5jbHVkZV91c2FnZTogdHJ1ZVxuICAgICAgfVxuICAgIH07XG4gICAgY29uc3QgeyByZXNwb25zZUhlYWRlcnMsIHZhbHVlOiByZXNwb25zZSB9ID0gYXdhaXQgcG9zdEpzb25Ub0FwaSh7XG4gICAgICB1cmw6IHRoaXMuY29uZmlnLnVybCh7XG4gICAgICAgIHBhdGg6IFwiL2NoYXQvY29tcGxldGlvbnNcIixcbiAgICAgICAgbW9kZWxJZDogdGhpcy5tb2RlbElkXG4gICAgICB9KSxcbiAgICAgIGhlYWRlcnM6IGNvbWJpbmVIZWFkZXJzKHRoaXMuY29uZmlnLmhlYWRlcnMoKSwgb3B0aW9ucy5oZWFkZXJzKSxcbiAgICAgIGJvZHksXG4gICAgICBmYWlsZWRSZXNwb25zZUhhbmRsZXI6IG9wZW5haUZhaWxlZFJlc3BvbnNlSGFuZGxlcixcbiAgICAgIHN1Y2Nlc3NmdWxSZXNwb25zZUhhbmRsZXI6IGNyZWF0ZUV2ZW50U291cmNlUmVzcG9uc2VIYW5kbGVyKFxuICAgICAgICBvcGVuYWlDaGF0Q2h1bmtTY2hlbWFcbiAgICAgICksXG4gICAgICBhYm9ydFNpZ25hbDogb3B0aW9ucy5hYm9ydFNpZ25hbCxcbiAgICAgIGZldGNoOiB0aGlzLmNvbmZpZy5mZXRjaFxuICAgIH0pO1xuICAgIGNvbnN0IHRvb2xDYWxscyA9IFtdO1xuICAgIGxldCBmaW5pc2hSZWFzb24gPSB7XG4gICAgICB1bmlmaWVkOiBcIm90aGVyXCIsXG4gICAgICByYXc6IHZvaWQgMFxuICAgIH07XG4gICAgbGV0IHVzYWdlID0gdm9pZCAwO1xuICAgIGxldCBtZXRhZGF0YUV4dHJhY3RlZCA9IGZhbHNlO1xuICAgIGxldCBpc0FjdGl2ZVRleHQgPSBmYWxzZTtcbiAgICBjb25zdCBwcm92aWRlck1ldGFkYXRhID0geyBvcGVuYWk6IHt9IH07XG4gICAgcmV0dXJuIHtcbiAgICAgIHN0cmVhbTogcmVzcG9uc2UucGlwZVRocm91Z2goXG4gICAgICAgIG5ldyBUcmFuc2Zvcm1TdHJlYW0oe1xuICAgICAgICAgIHN0YXJ0KGNvbnRyb2xsZXIpIHtcbiAgICAgICAgICAgIGNvbnRyb2xsZXIuZW5xdWV1ZSh7IHR5cGU6IFwic3RyZWFtLXN0YXJ0XCIsIHdhcm5pbmdzIH0pO1xuICAgICAgICAgIH0sXG4gICAgICAgICAgdHJhbnNmb3JtKGNodW5rLCBjb250cm9sbGVyKSB7XG4gICAgICAgICAgICB2YXIgX2EsIF9iLCBfYywgX2QsIF9lLCBfZiwgX2csIF9oLCBfaSwgX2osIF9rLCBfbCwgX20sIF9uLCBfbywgX3AsIF9xO1xuICAgICAgICAgICAgaWYgKG9wdGlvbnMuaW5jbHVkZVJhd0NodW5rcykge1xuICAgICAgICAgICAgICBjb250cm9sbGVyLmVucXVldWUoeyB0eXBlOiBcInJhd1wiLCByYXdWYWx1ZTogY2h1bmsucmF3VmFsdWUgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoIWNodW5rLnN1Y2Nlc3MpIHtcbiAgICAgICAgICAgICAgZmluaXNoUmVhc29uID0geyB1bmlmaWVkOiBcImVycm9yXCIsIHJhdzogdm9pZCAwIH07XG4gICAgICAgICAgICAgIGNvbnRyb2xsZXIuZW5xdWV1ZSh7IHR5cGU6IFwiZXJyb3JcIiwgZXJyb3I6IGNodW5rLmVycm9yIH0pO1xuICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCB2YWx1ZSA9IGNodW5rLnZhbHVlO1xuICAgICAgICAgICAgaWYgKFwiZXJyb3JcIiBpbiB2YWx1ZSkge1xuICAgICAgICAgICAgICBmaW5pc2hSZWFzb24gPSB7IHVuaWZpZWQ6IFwiZXJyb3JcIiwgcmF3OiB2b2lkIDAgfTtcbiAgICAgICAgICAgICAgY29udHJvbGxlci5lbnF1ZXVlKHsgdHlwZTogXCJlcnJvclwiLCBlcnJvcjogdmFsdWUuZXJyb3IgfSk7XG4gICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICghbWV0YWRhdGFFeHRyYWN0ZWQpIHtcbiAgICAgICAgICAgICAgY29uc3QgbWV0YWRhdGEgPSBnZXRSZXNwb25zZU1ldGFkYXRhKHZhbHVlKTtcbiAgICAgICAgICAgICAgaWYgKE9iamVjdC52YWx1ZXMobWV0YWRhdGEpLnNvbWUoQm9vbGVhbikpIHtcbiAgICAgICAgICAgICAgICBtZXRhZGF0YUV4dHJhY3RlZCA9IHRydWU7XG4gICAgICAgICAgICAgICAgY29udHJvbGxlci5lbnF1ZXVlKHtcbiAgICAgICAgICAgICAgICAgIHR5cGU6IFwicmVzcG9uc2UtbWV0YWRhdGFcIixcbiAgICAgICAgICAgICAgICAgIC4uLmdldFJlc3BvbnNlTWV0YWRhdGEodmFsdWUpXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh2YWx1ZS51c2FnZSAhPSBudWxsKSB7XG4gICAgICAgICAgICAgIHVzYWdlID0gdmFsdWUudXNhZ2U7XG4gICAgICAgICAgICAgIGlmICgoKF9hID0gdmFsdWUudXNhZ2UuY29tcGxldGlvbl90b2tlbnNfZGV0YWlscykgPT0gbnVsbCA/IHZvaWQgMCA6IF9hLmFjY2VwdGVkX3ByZWRpY3Rpb25fdG9rZW5zKSAhPSBudWxsKSB7XG4gICAgICAgICAgICAgICAgcHJvdmlkZXJNZXRhZGF0YS5vcGVuYWkuYWNjZXB0ZWRQcmVkaWN0aW9uVG9rZW5zID0gKF9iID0gdmFsdWUudXNhZ2UuY29tcGxldGlvbl90b2tlbnNfZGV0YWlscykgPT0gbnVsbCA/IHZvaWQgMCA6IF9iLmFjY2VwdGVkX3ByZWRpY3Rpb25fdG9rZW5zO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIGlmICgoKF9jID0gdmFsdWUudXNhZ2UuY29tcGxldGlvbl90b2tlbnNfZGV0YWlscykgPT0gbnVsbCA/IHZvaWQgMCA6IF9jLnJlamVjdGVkX3ByZWRpY3Rpb25fdG9rZW5zKSAhPSBudWxsKSB7XG4gICAgICAgICAgICAgICAgcHJvdmlkZXJNZXRhZGF0YS5vcGVuYWkucmVqZWN0ZWRQcmVkaWN0aW9uVG9rZW5zID0gKF9kID0gdmFsdWUudXNhZ2UuY29tcGxldGlvbl90b2tlbnNfZGV0YWlscykgPT0gbnVsbCA/IHZvaWQgMCA6IF9kLnJlamVjdGVkX3ByZWRpY3Rpb25fdG9rZW5zO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCBjaG9pY2UgPSB2YWx1ZS5jaG9pY2VzWzBdO1xuICAgICAgICAgICAgaWYgKChjaG9pY2UgPT0gbnVsbCA/IHZvaWQgMCA6IGNob2ljZS5maW5pc2hfcmVhc29uKSAhPSBudWxsKSB7XG4gICAgICAgICAgICAgIGZpbmlzaFJlYXNvbiA9IHtcbiAgICAgICAgICAgICAgICB1bmlmaWVkOiBtYXBPcGVuQUlGaW5pc2hSZWFzb24oY2hvaWNlLmZpbmlzaF9yZWFzb24pLFxuICAgICAgICAgICAgICAgIHJhdzogY2hvaWNlLmZpbmlzaF9yZWFzb25cbiAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICgoKF9lID0gY2hvaWNlID09IG51bGwgPyB2b2lkIDAgOiBjaG9pY2UubG9ncHJvYnMpID09IG51bGwgPyB2b2lkIDAgOiBfZS5jb250ZW50KSAhPSBudWxsKSB7XG4gICAgICAgICAgICAgIHByb3ZpZGVyTWV0YWRhdGEub3BlbmFpLmxvZ3Byb2JzID0gY2hvaWNlLmxvZ3Byb2JzLmNvbnRlbnQ7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoKGNob2ljZSA9PSBudWxsID8gdm9pZCAwIDogY2hvaWNlLmRlbHRhKSA9PSBudWxsKSB7XG4gICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IGRlbHRhID0gY2hvaWNlLmRlbHRhO1xuICAgICAgICAgICAgaWYgKGRlbHRhLmNvbnRlbnQgIT0gbnVsbCkge1xuICAgICAgICAgICAgICBpZiAoIWlzQWN0aXZlVGV4dCkge1xuICAgICAgICAgICAgICAgIGNvbnRyb2xsZXIuZW5xdWV1ZSh7IHR5cGU6IFwidGV4dC1zdGFydFwiLCBpZDogXCIwXCIgfSk7XG4gICAgICAgICAgICAgICAgaXNBY3RpdmVUZXh0ID0gdHJ1ZTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICBjb250cm9sbGVyLmVucXVldWUoe1xuICAgICAgICAgICAgICAgIHR5cGU6IFwidGV4dC1kZWx0YVwiLFxuICAgICAgICAgICAgICAgIGlkOiBcIjBcIixcbiAgICAgICAgICAgICAgICBkZWx0YTogZGVsdGEuY29udGVudFxuICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChkZWx0YS50b29sX2NhbGxzICE9IG51bGwpIHtcbiAgICAgICAgICAgICAgZm9yIChjb25zdCB0b29sQ2FsbERlbHRhIG9mIGRlbHRhLnRvb2xfY2FsbHMpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBpbmRleCA9IHRvb2xDYWxsRGVsdGEuaW5kZXg7XG4gICAgICAgICAgICAgICAgaWYgKHRvb2xDYWxsc1tpbmRleF0gPT0gbnVsbCkge1xuICAgICAgICAgICAgICAgICAgaWYgKHRvb2xDYWxsRGVsdGEudHlwZSAhPT0gXCJmdW5jdGlvblwiKSB7XG4gICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBJbnZhbGlkUmVzcG9uc2VEYXRhRXJyb3Ioe1xuICAgICAgICAgICAgICAgICAgICAgIGRhdGE6IHRvb2xDYWxsRGVsdGEsXG4gICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogYEV4cGVjdGVkICdmdW5jdGlvbicgdHlwZS5gXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgaWYgKHRvb2xDYWxsRGVsdGEuaWQgPT0gbnVsbCkge1xuICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgSW52YWxpZFJlc3BvbnNlRGF0YUVycm9yKHtcbiAgICAgICAgICAgICAgICAgICAgICBkYXRhOiB0b29sQ2FsbERlbHRhLFxuICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6IGBFeHBlY3RlZCAnaWQnIHRvIGJlIGEgc3RyaW5nLmBcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICBpZiAoKChfZiA9IHRvb2xDYWxsRGVsdGEuZnVuY3Rpb24pID09IG51bGwgPyB2b2lkIDAgOiBfZi5uYW1lKSA9PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBJbnZhbGlkUmVzcG9uc2VEYXRhRXJyb3Ioe1xuICAgICAgICAgICAgICAgICAgICAgIGRhdGE6IHRvb2xDYWxsRGVsdGEsXG4gICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogYEV4cGVjdGVkICdmdW5jdGlvbi5uYW1lJyB0byBiZSBhIHN0cmluZy5gXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgY29udHJvbGxlci5lbnF1ZXVlKHtcbiAgICAgICAgICAgICAgICAgICAgdHlwZTogXCJ0b29sLWlucHV0LXN0YXJ0XCIsXG4gICAgICAgICAgICAgICAgICAgIGlkOiB0b29sQ2FsbERlbHRhLmlkLFxuICAgICAgICAgICAgICAgICAgICB0b29sTmFtZTogdG9vbENhbGxEZWx0YS5mdW5jdGlvbi5uYW1lXG4gICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgIHRvb2xDYWxsc1tpbmRleF0gPSB7XG4gICAgICAgICAgICAgICAgICAgIGlkOiB0b29sQ2FsbERlbHRhLmlkLFxuICAgICAgICAgICAgICAgICAgICB0eXBlOiBcImZ1bmN0aW9uXCIsXG4gICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uOiB7XG4gICAgICAgICAgICAgICAgICAgICAgbmFtZTogdG9vbENhbGxEZWx0YS5mdW5jdGlvbi5uYW1lLFxuICAgICAgICAgICAgICAgICAgICAgIGFyZ3VtZW50czogKF9nID0gdG9vbENhbGxEZWx0YS5mdW5jdGlvbi5hcmd1bWVudHMpICE9IG51bGwgPyBfZyA6IFwiXCJcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgaGFzRmluaXNoZWQ6IGZhbHNlXG4gICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgICAgY29uc3QgdG9vbENhbGwyID0gdG9vbENhbGxzW2luZGV4XTtcbiAgICAgICAgICAgICAgICAgIGlmICgoKF9oID0gdG9vbENhbGwyLmZ1bmN0aW9uKSA9PSBudWxsID8gdm9pZCAwIDogX2gubmFtZSkgIT0gbnVsbCAmJiAoKF9pID0gdG9vbENhbGwyLmZ1bmN0aW9uKSA9PSBudWxsID8gdm9pZCAwIDogX2kuYXJndW1lbnRzKSAhPSBudWxsKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmICh0b29sQ2FsbDIuZnVuY3Rpb24uYXJndW1lbnRzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgICAgICAgICAgICBjb250cm9sbGVyLmVucXVldWUoe1xuICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogXCJ0b29sLWlucHV0LWRlbHRhXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICBpZDogdG9vbENhbGwyLmlkLFxuICAgICAgICAgICAgICAgICAgICAgICAgZGVsdGE6IHRvb2xDYWxsMi5mdW5jdGlvbi5hcmd1bWVudHNcbiAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBpZiAoaXNQYXJzYWJsZUpzb24odG9vbENhbGwyLmZ1bmN0aW9uLmFyZ3VtZW50cykpIHtcbiAgICAgICAgICAgICAgICAgICAgICBjb250cm9sbGVyLmVucXVldWUoe1xuICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogXCJ0b29sLWlucHV0LWVuZFwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgaWQ6IHRvb2xDYWxsMi5pZFxuICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgIGNvbnRyb2xsZXIuZW5xdWV1ZSh7XG4gICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiBcInRvb2wtY2FsbFwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgdG9vbENhbGxJZDogKF9qID0gdG9vbENhbGwyLmlkKSAhPSBudWxsID8gX2ogOiBnZW5lcmF0ZUlkKCksXG4gICAgICAgICAgICAgICAgICAgICAgICB0b29sTmFtZTogdG9vbENhbGwyLmZ1bmN0aW9uLm5hbWUsXG4gICAgICAgICAgICAgICAgICAgICAgICBpbnB1dDogdG9vbENhbGwyLmZ1bmN0aW9uLmFyZ3VtZW50c1xuICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgIHRvb2xDYWxsMi5oYXNGaW5pc2hlZCA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjb25zdCB0b29sQ2FsbCA9IHRvb2xDYWxsc1tpbmRleF07XG4gICAgICAgICAgICAgICAgaWYgKHRvb2xDYWxsLmhhc0ZpbmlzaGVkKSB7XG4gICAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKCgoX2sgPSB0b29sQ2FsbERlbHRhLmZ1bmN0aW9uKSA9PSBudWxsID8gdm9pZCAwIDogX2suYXJndW1lbnRzKSAhPSBudWxsKSB7XG4gICAgICAgICAgICAgICAgICB0b29sQ2FsbC5mdW5jdGlvbi5hcmd1bWVudHMgKz0gKF9tID0gKF9sID0gdG9vbENhbGxEZWx0YS5mdW5jdGlvbikgPT0gbnVsbCA/IHZvaWQgMCA6IF9sLmFyZ3VtZW50cykgIT0gbnVsbCA/IF9tIDogXCJcIjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgY29udHJvbGxlci5lbnF1ZXVlKHtcbiAgICAgICAgICAgICAgICAgIHR5cGU6IFwidG9vbC1pbnB1dC1kZWx0YVwiLFxuICAgICAgICAgICAgICAgICAgaWQ6IHRvb2xDYWxsLmlkLFxuICAgICAgICAgICAgICAgICAgZGVsdGE6IChfbiA9IHRvb2xDYWxsRGVsdGEuZnVuY3Rpb24uYXJndW1lbnRzKSAhPSBudWxsID8gX24gOiBcIlwiXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgaWYgKCgoX28gPSB0b29sQ2FsbC5mdW5jdGlvbikgPT0gbnVsbCA/IHZvaWQgMCA6IF9vLm5hbWUpICE9IG51bGwgJiYgKChfcCA9IHRvb2xDYWxsLmZ1bmN0aW9uKSA9PSBudWxsID8gdm9pZCAwIDogX3AuYXJndW1lbnRzKSAhPSBudWxsICYmIGlzUGFyc2FibGVKc29uKHRvb2xDYWxsLmZ1bmN0aW9uLmFyZ3VtZW50cykpIHtcbiAgICAgICAgICAgICAgICAgIGNvbnRyb2xsZXIuZW5xdWV1ZSh7XG4gICAgICAgICAgICAgICAgICAgIHR5cGU6IFwidG9vbC1pbnB1dC1lbmRcIixcbiAgICAgICAgICAgICAgICAgICAgaWQ6IHRvb2xDYWxsLmlkXG4gICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgIGNvbnRyb2xsZXIuZW5xdWV1ZSh7XG4gICAgICAgICAgICAgICAgICAgIHR5cGU6IFwidG9vbC1jYWxsXCIsXG4gICAgICAgICAgICAgICAgICAgIHRvb2xDYWxsSWQ6IChfcSA9IHRvb2xDYWxsLmlkKSAhPSBudWxsID8gX3EgOiBnZW5lcmF0ZUlkKCksXG4gICAgICAgICAgICAgICAgICAgIHRvb2xOYW1lOiB0b29sQ2FsbC5mdW5jdGlvbi5uYW1lLFxuICAgICAgICAgICAgICAgICAgICBpbnB1dDogdG9vbENhbGwuZnVuY3Rpb24uYXJndW1lbnRzXG4gICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgIHRvb2xDYWxsLmhhc0ZpbmlzaGVkID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChkZWx0YS5hbm5vdGF0aW9ucyAhPSBudWxsKSB7XG4gICAgICAgICAgICAgIGZvciAoY29uc3QgYW5ub3RhdGlvbiBvZiBkZWx0YS5hbm5vdGF0aW9ucykge1xuICAgICAgICAgICAgICAgIGNvbnRyb2xsZXIuZW5xdWV1ZSh7XG4gICAgICAgICAgICAgICAgICB0eXBlOiBcInNvdXJjZVwiLFxuICAgICAgICAgICAgICAgICAgc291cmNlVHlwZTogXCJ1cmxcIixcbiAgICAgICAgICAgICAgICAgIGlkOiBnZW5lcmF0ZUlkKCksXG4gICAgICAgICAgICAgICAgICB1cmw6IGFubm90YXRpb24udXJsX2NpdGF0aW9uLnVybCxcbiAgICAgICAgICAgICAgICAgIHRpdGxlOiBhbm5vdGF0aW9uLnVybF9jaXRhdGlvbi50aXRsZVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSxcbiAgICAgICAgICBmbHVzaChjb250cm9sbGVyKSB7XG4gICAgICAgICAgICBpZiAoaXNBY3RpdmVUZXh0KSB7XG4gICAgICAgICAgICAgIGNvbnRyb2xsZXIuZW5xdWV1ZSh7IHR5cGU6IFwidGV4dC1lbmRcIiwgaWQ6IFwiMFwiIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29udHJvbGxlci5lbnF1ZXVlKHtcbiAgICAgICAgICAgICAgdHlwZTogXCJmaW5pc2hcIixcbiAgICAgICAgICAgICAgZmluaXNoUmVhc29uLFxuICAgICAgICAgICAgICB1c2FnZTogY29udmVydE9wZW5BSUNoYXRVc2FnZSh1c2FnZSksXG4gICAgICAgICAgICAgIC4uLnByb3ZpZGVyTWV0YWRhdGEgIT0gbnVsbCA/IHsgcHJvdmlkZXJNZXRhZGF0YSB9IDoge31cbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgIH1cbiAgICAgICAgfSlcbiAgICAgICksXG4gICAgICByZXF1ZXN0OiB7IGJvZHkgfSxcbiAgICAgIHJlc3BvbnNlOiB7IGhlYWRlcnM6IHJlc3BvbnNlSGVhZGVycyB9XG4gICAgfTtcbiAgfVxufTtcblxuLy8gc3JjL2NvbXBsZXRpb24vb3BlbmFpLWNvbXBsZXRpb24tbGFuZ3VhZ2UtbW9kZWwudHNcbmltcG9ydCB7XG4gIGNvbWJpbmVIZWFkZXJzIGFzIGNvbWJpbmVIZWFkZXJzMixcbiAgY3JlYXRlRXZlbnRTb3VyY2VSZXNwb25zZUhhbmRsZXIgYXMgY3JlYXRlRXZlbnRTb3VyY2VSZXNwb25zZUhhbmRsZXIyLFxuICBjcmVhdGVKc29uUmVzcG9uc2VIYW5kbGVyIGFzIGNyZWF0ZUpzb25SZXNwb25zZUhhbmRsZXIyLFxuICBwYXJzZVByb3ZpZGVyT3B0aW9ucyBhcyBwYXJzZVByb3ZpZGVyT3B0aW9uczIsXG4gIHBvc3RKc29uVG9BcGkgYXMgcG9zdEpzb25Ub0FwaTJcbn0gZnJvbSBcIkBhaS1zZGsvcHJvdmlkZXItdXRpbHNcIjtcblxuLy8gc3JjL2NvbXBsZXRpb24vY29udmVydC1vcGVuYWktY29tcGxldGlvbi11c2FnZS50c1xuZnVuY3Rpb24gY29udmVydE9wZW5BSUNvbXBsZXRpb25Vc2FnZSh1c2FnZSkge1xuICB2YXIgX2EsIF9iLCBfYywgX2Q7XG4gIGlmICh1c2FnZSA9PSBudWxsKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIGlucHV0VG9rZW5zOiB7XG4gICAgICAgIHRvdGFsOiB2b2lkIDAsXG4gICAgICAgIG5vQ2FjaGU6IHZvaWQgMCxcbiAgICAgICAgY2FjaGVSZWFkOiB2b2lkIDAsXG4gICAgICAgIGNhY2hlV3JpdGU6IHZvaWQgMFxuICAgICAgfSxcbiAgICAgIG91dHB1dFRva2Vuczoge1xuICAgICAgICB0b3RhbDogdm9pZCAwLFxuICAgICAgICB0ZXh0OiB2b2lkIDAsXG4gICAgICAgIHJlYXNvbmluZzogdm9pZCAwXG4gICAgICB9LFxuICAgICAgcmF3OiB2b2lkIDBcbiAgICB9O1xuICB9XG4gIGNvbnN0IHByb21wdFRva2VucyA9IChfYSA9IHVzYWdlLnByb21wdF90b2tlbnMpICE9IG51bGwgPyBfYSA6IDA7XG4gIGNvbnN0IGNvbXBsZXRpb25Ub2tlbnMgPSAoX2IgPSB1c2FnZS5jb21wbGV0aW9uX3Rva2VucykgIT0gbnVsbCA/IF9iIDogMDtcbiAgcmV0dXJuIHtcbiAgICBpbnB1dFRva2Vuczoge1xuICAgICAgdG90YWw6IChfYyA9IHVzYWdlLnByb21wdF90b2tlbnMpICE9IG51bGwgPyBfYyA6IHZvaWQgMCxcbiAgICAgIG5vQ2FjaGU6IHByb21wdFRva2VucyxcbiAgICAgIGNhY2hlUmVhZDogdm9pZCAwLFxuICAgICAgY2FjaGVXcml0ZTogdm9pZCAwXG4gICAgfSxcbiAgICBvdXRwdXRUb2tlbnM6IHtcbiAgICAgIHRvdGFsOiAoX2QgPSB1c2FnZS5jb21wbGV0aW9uX3Rva2VucykgIT0gbnVsbCA/IF9kIDogdm9pZCAwLFxuICAgICAgdGV4dDogY29tcGxldGlvblRva2VucyxcbiAgICAgIHJlYXNvbmluZzogdm9pZCAwXG4gICAgfSxcbiAgICByYXc6IHVzYWdlXG4gIH07XG59XG5cbi8vIHNyYy9jb21wbGV0aW9uL2NvbnZlcnQtdG8tb3BlbmFpLWNvbXBsZXRpb24tcHJvbXB0LnRzXG5pbXBvcnQge1xuICBJbnZhbGlkUHJvbXB0RXJyb3IsXG4gIFVuc3VwcG9ydGVkRnVuY3Rpb25hbGl0eUVycm9yIGFzIFVuc3VwcG9ydGVkRnVuY3Rpb25hbGl0eUVycm9yM1xufSBmcm9tIFwiQGFpLXNkay9wcm92aWRlclwiO1xuZnVuY3Rpb24gY29udmVydFRvT3BlbkFJQ29tcGxldGlvblByb21wdCh7XG4gIHByb21wdCxcbiAgdXNlciA9IFwidXNlclwiLFxuICBhc3Npc3RhbnQgPSBcImFzc2lzdGFudFwiXG59KSB7XG4gIGxldCB0ZXh0ID0gXCJcIjtcbiAgaWYgKHByb21wdFswXS5yb2xlID09PSBcInN5c3RlbVwiKSB7XG4gICAgdGV4dCArPSBgJHtwcm9tcHRbMF0uY29udGVudH1cblxuYDtcbiAgICBwcm9tcHQgPSBwcm9tcHQuc2xpY2UoMSk7XG4gIH1cbiAgZm9yIChjb25zdCB7IHJvbGUsIGNvbnRlbnQgfSBvZiBwcm9tcHQpIHtcbiAgICBzd2l0Y2ggKHJvbGUpIHtcbiAgICAgIGNhc2UgXCJzeXN0ZW1cIjoge1xuICAgICAgICB0aHJvdyBuZXcgSW52YWxpZFByb21wdEVycm9yKHtcbiAgICAgICAgICBtZXNzYWdlOiBcIlVuZXhwZWN0ZWQgc3lzdGVtIG1lc3NhZ2UgaW4gcHJvbXB0OiAke2NvbnRlbnR9XCIsXG4gICAgICAgICAgcHJvbXB0XG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgICAgY2FzZSBcInVzZXJcIjoge1xuICAgICAgICBjb25zdCB1c2VyTWVzc2FnZSA9IGNvbnRlbnQubWFwKChwYXJ0KSA9PiB7XG4gICAgICAgICAgc3dpdGNoIChwYXJ0LnR5cGUpIHtcbiAgICAgICAgICAgIGNhc2UgXCJ0ZXh0XCI6IHtcbiAgICAgICAgICAgICAgcmV0dXJuIHBhcnQudGV4dDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH0pLmZpbHRlcihCb29sZWFuKS5qb2luKFwiXCIpO1xuICAgICAgICB0ZXh0ICs9IGAke3VzZXJ9OlxuJHt1c2VyTWVzc2FnZX1cblxuYDtcbiAgICAgICAgYnJlYWs7XG4gICAgICB9XG4gICAgICBjYXNlIFwiYXNzaXN0YW50XCI6IHtcbiAgICAgICAgY29uc3QgYXNzaXN0YW50TWVzc2FnZSA9IGNvbnRlbnQubWFwKChwYXJ0KSA9PiB7XG4gICAgICAgICAgc3dpdGNoIChwYXJ0LnR5cGUpIHtcbiAgICAgICAgICAgIGNhc2UgXCJ0ZXh0XCI6IHtcbiAgICAgICAgICAgICAgcmV0dXJuIHBhcnQudGV4dDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNhc2UgXCJ0b29sLWNhbGxcIjoge1xuICAgICAgICAgICAgICB0aHJvdyBuZXcgVW5zdXBwb3J0ZWRGdW5jdGlvbmFsaXR5RXJyb3IzKHtcbiAgICAgICAgICAgICAgICBmdW5jdGlvbmFsaXR5OiBcInRvb2wtY2FsbCBtZXNzYWdlc1wiXG4gICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfSkuam9pbihcIlwiKTtcbiAgICAgICAgdGV4dCArPSBgJHthc3Npc3RhbnR9OlxuJHthc3Npc3RhbnRNZXNzYWdlfVxuXG5gO1xuICAgICAgICBicmVhaztcbiAgICAgIH1cbiAgICAgIGNhc2UgXCJ0b29sXCI6IHtcbiAgICAgICAgdGhyb3cgbmV3IFVuc3VwcG9ydGVkRnVuY3Rpb25hbGl0eUVycm9yMyh7XG4gICAgICAgICAgZnVuY3Rpb25hbGl0eTogXCJ0b29sIG1lc3NhZ2VzXCJcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgICBkZWZhdWx0OiB7XG4gICAgICAgIGNvbnN0IF9leGhhdXN0aXZlQ2hlY2sgPSByb2xlO1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYFVuc3VwcG9ydGVkIHJvbGU6ICR7X2V4aGF1c3RpdmVDaGVja31gKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cbiAgdGV4dCArPSBgJHthc3Npc3RhbnR9OlxuYDtcbiAgcmV0dXJuIHtcbiAgICBwcm9tcHQ6IHRleHQsXG4gICAgc3RvcFNlcXVlbmNlczogW2BcbiR7dXNlcn06YF1cbiAgfTtcbn1cblxuLy8gc3JjL2NvbXBsZXRpb24vZ2V0LXJlc3BvbnNlLW1ldGFkYXRhLnRzXG5mdW5jdGlvbiBnZXRSZXNwb25zZU1ldGFkYXRhMih7XG4gIGlkLFxuICBtb2RlbCxcbiAgY3JlYXRlZFxufSkge1xuICByZXR1cm4ge1xuICAgIGlkOiBpZCAhPSBudWxsID8gaWQgOiB2b2lkIDAsXG4gICAgbW9kZWxJZDogbW9kZWwgIT0gbnVsbCA/IG1vZGVsIDogdm9pZCAwLFxuICAgIHRpbWVzdGFtcDogY3JlYXRlZCAhPSBudWxsID8gbmV3IERhdGUoY3JlYXRlZCAqIDFlMykgOiB2b2lkIDBcbiAgfTtcbn1cblxuLy8gc3JjL2NvbXBsZXRpb24vbWFwLW9wZW5haS1maW5pc2gtcmVhc29uLnRzXG5mdW5jdGlvbiBtYXBPcGVuQUlGaW5pc2hSZWFzb24yKGZpbmlzaFJlYXNvbikge1xuICBzd2l0Y2ggKGZpbmlzaFJlYXNvbikge1xuICAgIGNhc2UgXCJzdG9wXCI6XG4gICAgICByZXR1cm4gXCJzdG9wXCI7XG4gICAgY2FzZSBcImxlbmd0aFwiOlxuICAgICAgcmV0dXJuIFwibGVuZ3RoXCI7XG4gICAgY2FzZSBcImNvbnRlbnRfZmlsdGVyXCI6XG4gICAgICByZXR1cm4gXCJjb250ZW50LWZpbHRlclwiO1xuICAgIGNhc2UgXCJmdW5jdGlvbl9jYWxsXCI6XG4gICAgY2FzZSBcInRvb2xfY2FsbHNcIjpcbiAgICAgIHJldHVybiBcInRvb2wtY2FsbHNcIjtcbiAgICBkZWZhdWx0OlxuICAgICAgcmV0dXJuIFwib3RoZXJcIjtcbiAgfVxufVxuXG4vLyBzcmMvY29tcGxldGlvbi9vcGVuYWktY29tcGxldGlvbi1hcGkudHNcbmltcG9ydCB7IHogYXMgejQgfSBmcm9tIFwiem9kL3Y0XCI7XG5pbXBvcnQgeyBsYXp5U2NoZW1hIGFzIGxhenlTY2hlbWEzLCB6b2RTY2hlbWEgYXMgem9kU2NoZW1hMyB9IGZyb20gXCJAYWktc2RrL3Byb3ZpZGVyLXV0aWxzXCI7XG52YXIgb3BlbmFpQ29tcGxldGlvblJlc3BvbnNlU2NoZW1hID0gbGF6eVNjaGVtYTMoXG4gICgpID0+IHpvZFNjaGVtYTMoXG4gICAgejQub2JqZWN0KHtcbiAgICAgIGlkOiB6NC5zdHJpbmcoKS5udWxsaXNoKCksXG4gICAgICBjcmVhdGVkOiB6NC5udW1iZXIoKS5udWxsaXNoKCksXG4gICAgICBtb2RlbDogejQuc3RyaW5nKCkubnVsbGlzaCgpLFxuICAgICAgY2hvaWNlczogejQuYXJyYXkoXG4gICAgICAgIHo0Lm9iamVjdCh7XG4gICAgICAgICAgdGV4dDogejQuc3RyaW5nKCksXG4gICAgICAgICAgZmluaXNoX3JlYXNvbjogejQuc3RyaW5nKCksXG4gICAgICAgICAgbG9ncHJvYnM6IHo0Lm9iamVjdCh7XG4gICAgICAgICAgICB0b2tlbnM6IHo0LmFycmF5KHo0LnN0cmluZygpKSxcbiAgICAgICAgICAgIHRva2VuX2xvZ3Byb2JzOiB6NC5hcnJheSh6NC5udW1iZXIoKSksXG4gICAgICAgICAgICB0b3BfbG9ncHJvYnM6IHo0LmFycmF5KHo0LnJlY29yZCh6NC5zdHJpbmcoKSwgejQubnVtYmVyKCkpKS5udWxsaXNoKClcbiAgICAgICAgICB9KS5udWxsaXNoKClcbiAgICAgICAgfSlcbiAgICAgICksXG4gICAgICB1c2FnZTogejQub2JqZWN0KHtcbiAgICAgICAgcHJvbXB0X3Rva2VuczogejQubnVtYmVyKCksXG4gICAgICAgIGNvbXBsZXRpb25fdG9rZW5zOiB6NC5udW1iZXIoKSxcbiAgICAgICAgdG90YWxfdG9rZW5zOiB6NC5udW1iZXIoKVxuICAgICAgfSkubnVsbGlzaCgpXG4gICAgfSlcbiAgKVxuKTtcbnZhciBvcGVuYWlDb21wbGV0aW9uQ2h1bmtTY2hlbWEgPSBsYXp5U2NoZW1hMyhcbiAgKCkgPT4gem9kU2NoZW1hMyhcbiAgICB6NC51bmlvbihbXG4gICAgICB6NC5vYmplY3Qoe1xuICAgICAgICBpZDogejQuc3RyaW5nKCkubnVsbGlzaCgpLFxuICAgICAgICBjcmVhdGVkOiB6NC5udW1iZXIoKS5udWxsaXNoKCksXG4gICAgICAgIG1vZGVsOiB6NC5zdHJpbmcoKS5udWxsaXNoKCksXG4gICAgICAgIGNob2ljZXM6IHo0LmFycmF5KFxuICAgICAgICAgIHo0Lm9iamVjdCh7XG4gICAgICAgICAgICB0ZXh0OiB6NC5zdHJpbmcoKSxcbiAgICAgICAgICAgIGZpbmlzaF9yZWFzb246IHo0LnN0cmluZygpLm51bGxpc2goKSxcbiAgICAgICAgICAgIGluZGV4OiB6NC5udW1iZXIoKSxcbiAgICAgICAgICAgIGxvZ3Byb2JzOiB6NC5vYmplY3Qoe1xuICAgICAgICAgICAgICB0b2tlbnM6IHo0LmFycmF5KHo0LnN0cmluZygpKSxcbiAgICAgICAgICAgICAgdG9rZW5fbG9ncHJvYnM6IHo0LmFycmF5KHo0Lm51bWJlcigpKSxcbiAgICAgICAgICAgICAgdG9wX2xvZ3Byb2JzOiB6NC5hcnJheSh6NC5yZWNvcmQoejQuc3RyaW5nKCksIHo0Lm51bWJlcigpKSkubnVsbGlzaCgpXG4gICAgICAgICAgICB9KS5udWxsaXNoKClcbiAgICAgICAgICB9KVxuICAgICAgICApLFxuICAgICAgICB1c2FnZTogejQub2JqZWN0KHtcbiAgICAgICAgICBwcm9tcHRfdG9rZW5zOiB6NC5udW1iZXIoKSxcbiAgICAgICAgICBjb21wbGV0aW9uX3Rva2VuczogejQubnVtYmVyKCksXG4gICAgICAgICAgdG90YWxfdG9rZW5zOiB6NC5udW1iZXIoKVxuICAgICAgICB9KS5udWxsaXNoKClcbiAgICAgIH0pLFxuICAgICAgb3BlbmFpRXJyb3JEYXRhU2NoZW1hXG4gICAgXSlcbiAgKVxuKTtcblxuLy8gc3JjL2NvbXBsZXRpb24vb3BlbmFpLWNvbXBsZXRpb24tb3B0aW9ucy50c1xuaW1wb3J0IHsgbGF6eVNjaGVtYSBhcyBsYXp5U2NoZW1hNCwgem9kU2NoZW1hIGFzIHpvZFNjaGVtYTQgfSBmcm9tIFwiQGFpLXNkay9wcm92aWRlci11dGlsc1wiO1xuaW1wb3J0IHsgeiBhcyB6NSB9IGZyb20gXCJ6b2QvdjRcIjtcbnZhciBvcGVuYWlDb21wbGV0aW9uUHJvdmlkZXJPcHRpb25zID0gbGF6eVNjaGVtYTQoXG4gICgpID0+IHpvZFNjaGVtYTQoXG4gICAgejUub2JqZWN0KHtcbiAgICAgIC8qKlxuICAgICAgRWNobyBiYWNrIHRoZSBwcm9tcHQgaW4gYWRkaXRpb24gdG8gdGhlIGNvbXBsZXRpb24uXG4gICAgICAgICAqL1xuICAgICAgZWNobzogejUuYm9vbGVhbigpLm9wdGlvbmFsKCksXG4gICAgICAvKipcbiAgICAgIE1vZGlmeSB0aGUgbGlrZWxpaG9vZCBvZiBzcGVjaWZpZWQgdG9rZW5zIGFwcGVhcmluZyBpbiB0aGUgY29tcGxldGlvbi5cbiAgICAgIFxuICAgICAgQWNjZXB0cyBhIEpTT04gb2JqZWN0IHRoYXQgbWFwcyB0b2tlbnMgKHNwZWNpZmllZCBieSB0aGVpciB0b2tlbiBJRCBpblxuICAgICAgdGhlIEdQVCB0b2tlbml6ZXIpIHRvIGFuIGFzc29jaWF0ZWQgYmlhcyB2YWx1ZSBmcm9tIC0xMDAgdG8gMTAwLiBZb3VcbiAgICAgIGNhbiB1c2UgdGhpcyB0b2tlbml6ZXIgdG9vbCB0byBjb252ZXJ0IHRleHQgdG8gdG9rZW4gSURzLiBNYXRoZW1hdGljYWxseSxcbiAgICAgIHRoZSBiaWFzIGlzIGFkZGVkIHRvIHRoZSBsb2dpdHMgZ2VuZXJhdGVkIGJ5IHRoZSBtb2RlbCBwcmlvciB0byBzYW1wbGluZy5cbiAgICAgIFRoZSBleGFjdCBlZmZlY3Qgd2lsbCB2YXJ5IHBlciBtb2RlbCwgYnV0IHZhbHVlcyBiZXR3ZWVuIC0xIGFuZCAxIHNob3VsZFxuICAgICAgZGVjcmVhc2Ugb3IgaW5jcmVhc2UgbGlrZWxpaG9vZCBvZiBzZWxlY3Rpb247IHZhbHVlcyBsaWtlIC0xMDAgb3IgMTAwXG4gICAgICBzaG91bGQgcmVzdWx0IGluIGEgYmFuIG9yIGV4Y2x1c2l2ZSBzZWxlY3Rpb24gb2YgdGhlIHJlbGV2YW50IHRva2VuLlxuICAgICAgXG4gICAgICBBcyBhbiBleGFtcGxlLCB5b3UgY2FuIHBhc3Mge1wiNTAyNTZcIjogLTEwMH0gdG8gcHJldmVudCB0aGUgPHxlbmRvZnRleHR8PlxuICAgICAgdG9rZW4gZnJvbSBiZWluZyBnZW5lcmF0ZWQuXG4gICAgICAgKi9cbiAgICAgIGxvZ2l0QmlhczogejUucmVjb3JkKHo1LnN0cmluZygpLCB6NS5udW1iZXIoKSkub3B0aW9uYWwoKSxcbiAgICAgIC8qKlxuICAgICAgVGhlIHN1ZmZpeCB0aGF0IGNvbWVzIGFmdGVyIGEgY29tcGxldGlvbiBvZiBpbnNlcnRlZCB0ZXh0LlxuICAgICAgICovXG4gICAgICBzdWZmaXg6IHo1LnN0cmluZygpLm9wdGlvbmFsKCksXG4gICAgICAvKipcbiAgICAgIEEgdW5pcXVlIGlkZW50aWZpZXIgcmVwcmVzZW50aW5nIHlvdXIgZW5kLXVzZXIsIHdoaWNoIGNhbiBoZWxwIE9wZW5BSSB0b1xuICAgICAgbW9uaXRvciBhbmQgZGV0ZWN0IGFidXNlLiBMZWFybiBtb3JlLlxuICAgICAgICovXG4gICAgICB1c2VyOiB6NS5zdHJpbmcoKS5vcHRpb25hbCgpLFxuICAgICAgLyoqXG4gICAgICBSZXR1cm4gdGhlIGxvZyBwcm9iYWJpbGl0aWVzIG9mIHRoZSB0b2tlbnMuIEluY2x1ZGluZyBsb2dwcm9icyB3aWxsIGluY3JlYXNlXG4gICAgICB0aGUgcmVzcG9uc2Ugc2l6ZSBhbmQgY2FuIHNsb3cgZG93biByZXNwb25zZSB0aW1lcy4gSG93ZXZlciwgaXQgY2FuXG4gICAgICBiZSB1c2VmdWwgdG8gYmV0dGVyIHVuZGVyc3RhbmQgaG93IHRoZSBtb2RlbCBpcyBiZWhhdmluZy5cbiAgICAgIFNldHRpbmcgdG8gdHJ1ZSB3aWxsIHJldHVybiB0aGUgbG9nIHByb2JhYmlsaXRpZXMgb2YgdGhlIHRva2VucyB0aGF0XG4gICAgICB3ZXJlIGdlbmVyYXRlZC5cbiAgICAgIFNldHRpbmcgdG8gYSBudW1iZXIgd2lsbCByZXR1cm4gdGhlIGxvZyBwcm9iYWJpbGl0aWVzIG9mIHRoZSB0b3AgblxuICAgICAgdG9rZW5zIHRoYXQgd2VyZSBnZW5lcmF0ZWQuXG4gICAgICAgICAqL1xuICAgICAgbG9ncHJvYnM6IHo1LnVuaW9uKFt6NS5ib29sZWFuKCksIHo1Lm51bWJlcigpXSkub3B0aW9uYWwoKVxuICAgIH0pXG4gIClcbik7XG5cbi8vIHNyYy9jb21wbGV0aW9uL29wZW5haS1jb21wbGV0aW9uLWxhbmd1YWdlLW1vZGVsLnRzXG52YXIgT3BlbkFJQ29tcGxldGlvbkxhbmd1YWdlTW9kZWwgPSBjbGFzcyB7XG4gIGNvbnN0cnVjdG9yKG1vZGVsSWQsIGNvbmZpZykge1xuICAgIHRoaXMuc3BlY2lmaWNhdGlvblZlcnNpb24gPSBcInYzXCI7XG4gICAgdGhpcy5zdXBwb3J0ZWRVcmxzID0ge1xuICAgICAgLy8gTm8gVVJMcyBhcmUgc3VwcG9ydGVkIGZvciBjb21wbGV0aW9uIG1vZGVscy5cbiAgICB9O1xuICAgIHRoaXMubW9kZWxJZCA9IG1vZGVsSWQ7XG4gICAgdGhpcy5jb25maWcgPSBjb25maWc7XG4gIH1cbiAgZ2V0IHByb3ZpZGVyT3B0aW9uc05hbWUoKSB7XG4gICAgcmV0dXJuIHRoaXMuY29uZmlnLnByb3ZpZGVyLnNwbGl0KFwiLlwiKVswXS50cmltKCk7XG4gIH1cbiAgZ2V0IHByb3ZpZGVyKCkge1xuICAgIHJldHVybiB0aGlzLmNvbmZpZy5wcm92aWRlcjtcbiAgfVxuICBhc3luYyBnZXRBcmdzKHtcbiAgICBwcm9tcHQsXG4gICAgbWF4T3V0cHV0VG9rZW5zLFxuICAgIHRlbXBlcmF0dXJlLFxuICAgIHRvcFAsXG4gICAgdG9wSyxcbiAgICBmcmVxdWVuY3lQZW5hbHR5LFxuICAgIHByZXNlbmNlUGVuYWx0eSxcbiAgICBzdG9wU2VxdWVuY2VzOiB1c2VyU3RvcFNlcXVlbmNlcyxcbiAgICByZXNwb25zZUZvcm1hdCxcbiAgICB0b29scyxcbiAgICB0b29sQ2hvaWNlLFxuICAgIHNlZWQsXG4gICAgcHJvdmlkZXJPcHRpb25zXG4gIH0pIHtcbiAgICBjb25zdCB3YXJuaW5ncyA9IFtdO1xuICAgIGNvbnN0IG9wZW5haU9wdGlvbnMgPSB7XG4gICAgICAuLi5hd2FpdCBwYXJzZVByb3ZpZGVyT3B0aW9uczIoe1xuICAgICAgICBwcm92aWRlcjogXCJvcGVuYWlcIixcbiAgICAgICAgcHJvdmlkZXJPcHRpb25zLFxuICAgICAgICBzY2hlbWE6IG9wZW5haUNvbXBsZXRpb25Qcm92aWRlck9wdGlvbnNcbiAgICAgIH0pLFxuICAgICAgLi4uYXdhaXQgcGFyc2VQcm92aWRlck9wdGlvbnMyKHtcbiAgICAgICAgcHJvdmlkZXI6IHRoaXMucHJvdmlkZXJPcHRpb25zTmFtZSxcbiAgICAgICAgcHJvdmlkZXJPcHRpb25zLFxuICAgICAgICBzY2hlbWE6IG9wZW5haUNvbXBsZXRpb25Qcm92aWRlck9wdGlvbnNcbiAgICAgIH0pXG4gICAgfTtcbiAgICBpZiAodG9wSyAhPSBudWxsKSB7XG4gICAgICB3YXJuaW5ncy5wdXNoKHsgdHlwZTogXCJ1bnN1cHBvcnRlZFwiLCBmZWF0dXJlOiBcInRvcEtcIiB9KTtcbiAgICB9XG4gICAgaWYgKHRvb2xzID09IG51bGwgPyB2b2lkIDAgOiB0b29scy5sZW5ndGgpIHtcbiAgICAgIHdhcm5pbmdzLnB1c2goeyB0eXBlOiBcInVuc3VwcG9ydGVkXCIsIGZlYXR1cmU6IFwidG9vbHNcIiB9KTtcbiAgICB9XG4gICAgaWYgKHRvb2xDaG9pY2UgIT0gbnVsbCkge1xuICAgICAgd2FybmluZ3MucHVzaCh7IHR5cGU6IFwidW5zdXBwb3J0ZWRcIiwgZmVhdHVyZTogXCJ0b29sQ2hvaWNlXCIgfSk7XG4gICAgfVxuICAgIGlmIChyZXNwb25zZUZvcm1hdCAhPSBudWxsICYmIHJlc3BvbnNlRm9ybWF0LnR5cGUgIT09IFwidGV4dFwiKSB7XG4gICAgICB3YXJuaW5ncy5wdXNoKHtcbiAgICAgICAgdHlwZTogXCJ1bnN1cHBvcnRlZFwiLFxuICAgICAgICBmZWF0dXJlOiBcInJlc3BvbnNlRm9ybWF0XCIsXG4gICAgICAgIGRldGFpbHM6IFwiSlNPTiByZXNwb25zZSBmb3JtYXQgaXMgbm90IHN1cHBvcnRlZC5cIlxuICAgICAgfSk7XG4gICAgfVxuICAgIGNvbnN0IHsgcHJvbXB0OiBjb21wbGV0aW9uUHJvbXB0LCBzdG9wU2VxdWVuY2VzIH0gPSBjb252ZXJ0VG9PcGVuQUlDb21wbGV0aW9uUHJvbXB0KHsgcHJvbXB0IH0pO1xuICAgIGNvbnN0IHN0b3AgPSBbLi4uc3RvcFNlcXVlbmNlcyAhPSBudWxsID8gc3RvcFNlcXVlbmNlcyA6IFtdLCAuLi51c2VyU3RvcFNlcXVlbmNlcyAhPSBudWxsID8gdXNlclN0b3BTZXF1ZW5jZXMgOiBbXV07XG4gICAgcmV0dXJuIHtcbiAgICAgIGFyZ3M6IHtcbiAgICAgICAgLy8gbW9kZWwgaWQ6XG4gICAgICAgIG1vZGVsOiB0aGlzLm1vZGVsSWQsXG4gICAgICAgIC8vIG1vZGVsIHNwZWNpZmljIHNldHRpbmdzOlxuICAgICAgICBlY2hvOiBvcGVuYWlPcHRpb25zLmVjaG8sXG4gICAgICAgIGxvZ2l0X2JpYXM6IG9wZW5haU9wdGlvbnMubG9naXRCaWFzLFxuICAgICAgICBsb2dwcm9iczogKG9wZW5haU9wdGlvbnMgPT0gbnVsbCA/IHZvaWQgMCA6IG9wZW5haU9wdGlvbnMubG9ncHJvYnMpID09PSB0cnVlID8gMCA6IChvcGVuYWlPcHRpb25zID09IG51bGwgPyB2b2lkIDAgOiBvcGVuYWlPcHRpb25zLmxvZ3Byb2JzKSA9PT0gZmFsc2UgPyB2b2lkIDAgOiBvcGVuYWlPcHRpb25zID09IG51bGwgPyB2b2lkIDAgOiBvcGVuYWlPcHRpb25zLmxvZ3Byb2JzLFxuICAgICAgICBzdWZmaXg6IG9wZW5haU9wdGlvbnMuc3VmZml4LFxuICAgICAgICB1c2VyOiBvcGVuYWlPcHRpb25zLnVzZXIsXG4gICAgICAgIC8vIHN0YW5kYXJkaXplZCBzZXR0aW5nczpcbiAgICAgICAgbWF4X3Rva2VuczogbWF4T3V0cHV0VG9rZW5zLFxuICAgICAgICB0ZW1wZXJhdHVyZSxcbiAgICAgICAgdG9wX3A6IHRvcFAsXG4gICAgICAgIGZyZXF1ZW5jeV9wZW5hbHR5OiBmcmVxdWVuY3lQZW5hbHR5LFxuICAgICAgICBwcmVzZW5jZV9wZW5hbHR5OiBwcmVzZW5jZVBlbmFsdHksXG4gICAgICAgIHNlZWQsXG4gICAgICAgIC8vIHByb21wdDpcbiAgICAgICAgcHJvbXB0OiBjb21wbGV0aW9uUHJvbXB0LFxuICAgICAgICAvLyBzdG9wIHNlcXVlbmNlczpcbiAgICAgICAgc3RvcDogc3RvcC5sZW5ndGggPiAwID8gc3RvcCA6IHZvaWQgMFxuICAgICAgfSxcbiAgICAgIHdhcm5pbmdzXG4gICAgfTtcbiAgfVxuICBhc3luYyBkb0dlbmVyYXRlKG9wdGlvbnMpIHtcbiAgICB2YXIgX2E7XG4gICAgY29uc3QgeyBhcmdzLCB3YXJuaW5ncyB9ID0gYXdhaXQgdGhpcy5nZXRBcmdzKG9wdGlvbnMpO1xuICAgIGNvbnN0IHtcbiAgICAgIHJlc3BvbnNlSGVhZGVycyxcbiAgICAgIHZhbHVlOiByZXNwb25zZSxcbiAgICAgIHJhd1ZhbHVlOiByYXdSZXNwb25zZVxuICAgIH0gPSBhd2FpdCBwb3N0SnNvblRvQXBpMih7XG4gICAgICB1cmw6IHRoaXMuY29uZmlnLnVybCh7XG4gICAgICAgIHBhdGg6IFwiL2NvbXBsZXRpb25zXCIsXG4gICAgICAgIG1vZGVsSWQ6IHRoaXMubW9kZWxJZFxuICAgICAgfSksXG4gICAgICBoZWFkZXJzOiBjb21iaW5lSGVhZGVyczIodGhpcy5jb25maWcuaGVhZGVycygpLCBvcHRpb25zLmhlYWRlcnMpLFxuICAgICAgYm9keTogYXJncyxcbiAgICAgIGZhaWxlZFJlc3BvbnNlSGFuZGxlcjogb3BlbmFpRmFpbGVkUmVzcG9uc2VIYW5kbGVyLFxuICAgICAgc3VjY2Vzc2Z1bFJlc3BvbnNlSGFuZGxlcjogY3JlYXRlSnNvblJlc3BvbnNlSGFuZGxlcjIoXG4gICAgICAgIG9wZW5haUNvbXBsZXRpb25SZXNwb25zZVNjaGVtYVxuICAgICAgKSxcbiAgICAgIGFib3J0U2lnbmFsOiBvcHRpb25zLmFib3J0U2lnbmFsLFxuICAgICAgZmV0Y2g6IHRoaXMuY29uZmlnLmZldGNoXG4gICAgfSk7XG4gICAgY29uc3QgY2hvaWNlID0gcmVzcG9uc2UuY2hvaWNlc1swXTtcbiAgICBjb25zdCBwcm92aWRlck1ldGFkYXRhID0geyBvcGVuYWk6IHt9IH07XG4gICAgaWYgKGNob2ljZS5sb2dwcm9icyAhPSBudWxsKSB7XG4gICAgICBwcm92aWRlck1ldGFkYXRhLm9wZW5haS5sb2dwcm9icyA9IGNob2ljZS5sb2dwcm9icztcbiAgICB9XG4gICAgcmV0dXJuIHtcbiAgICAgIGNvbnRlbnQ6IFt7IHR5cGU6IFwidGV4dFwiLCB0ZXh0OiBjaG9pY2UudGV4dCB9XSxcbiAgICAgIHVzYWdlOiBjb252ZXJ0T3BlbkFJQ29tcGxldGlvblVzYWdlKHJlc3BvbnNlLnVzYWdlKSxcbiAgICAgIGZpbmlzaFJlYXNvbjoge1xuICAgICAgICB1bmlmaWVkOiBtYXBPcGVuQUlGaW5pc2hSZWFzb24yKGNob2ljZS5maW5pc2hfcmVhc29uKSxcbiAgICAgICAgcmF3OiAoX2EgPSBjaG9pY2UuZmluaXNoX3JlYXNvbikgIT0gbnVsbCA/IF9hIDogdm9pZCAwXG4gICAgICB9LFxuICAgICAgcmVxdWVzdDogeyBib2R5OiBhcmdzIH0sXG4gICAgICByZXNwb25zZToge1xuICAgICAgICAuLi5nZXRSZXNwb25zZU1ldGFkYXRhMihyZXNwb25zZSksXG4gICAgICAgIGhlYWRlcnM6IHJlc3BvbnNlSGVhZGVycyxcbiAgICAgICAgYm9keTogcmF3UmVzcG9uc2VcbiAgICAgIH0sXG4gICAgICBwcm92aWRlck1ldGFkYXRhLFxuICAgICAgd2FybmluZ3NcbiAgICB9O1xuICB9XG4gIGFzeW5jIGRvU3RyZWFtKG9wdGlvbnMpIHtcbiAgICBjb25zdCB7IGFyZ3MsIHdhcm5pbmdzIH0gPSBhd2FpdCB0aGlzLmdldEFyZ3Mob3B0aW9ucyk7XG4gICAgY29uc3QgYm9keSA9IHtcbiAgICAgIC4uLmFyZ3MsXG4gICAgICBzdHJlYW06IHRydWUsXG4gICAgICBzdHJlYW1fb3B0aW9uczoge1xuICAgICAgICBpbmNsdWRlX3VzYWdlOiB0cnVlXG4gICAgICB9XG4gICAgfTtcbiAgICBjb25zdCB7IHJlc3BvbnNlSGVhZGVycywgdmFsdWU6IHJlc3BvbnNlIH0gPSBhd2FpdCBwb3N0SnNvblRvQXBpMih7XG4gICAgICB1cmw6IHRoaXMuY29uZmlnLnVybCh7XG4gICAgICAgIHBhdGg6IFwiL2NvbXBsZXRpb25zXCIsXG4gICAgICAgIG1vZGVsSWQ6IHRoaXMubW9kZWxJZFxuICAgICAgfSksXG4gICAgICBoZWFkZXJzOiBjb21iaW5lSGVhZGVyczIodGhpcy5jb25maWcuaGVhZGVycygpLCBvcHRpb25zLmhlYWRlcnMpLFxuICAgICAgYm9keSxcbiAgICAgIGZhaWxlZFJlc3BvbnNlSGFuZGxlcjogb3BlbmFpRmFpbGVkUmVzcG9uc2VIYW5kbGVyLFxuICAgICAgc3VjY2Vzc2Z1bFJlc3BvbnNlSGFuZGxlcjogY3JlYXRlRXZlbnRTb3VyY2VSZXNwb25zZUhhbmRsZXIyKFxuICAgICAgICBvcGVuYWlDb21wbGV0aW9uQ2h1bmtTY2hlbWFcbiAgICAgICksXG4gICAgICBhYm9ydFNpZ25hbDogb3B0aW9ucy5hYm9ydFNpZ25hbCxcbiAgICAgIGZldGNoOiB0aGlzLmNvbmZpZy5mZXRjaFxuICAgIH0pO1xuICAgIGxldCBmaW5pc2hSZWFzb24gPSB7XG4gICAgICB1bmlmaWVkOiBcIm90aGVyXCIsXG4gICAgICByYXc6IHZvaWQgMFxuICAgIH07XG4gICAgY29uc3QgcHJvdmlkZXJNZXRhZGF0YSA9IHsgb3BlbmFpOiB7fSB9O1xuICAgIGxldCB1c2FnZSA9IHZvaWQgMDtcbiAgICBsZXQgaXNGaXJzdENodW5rID0gdHJ1ZTtcbiAgICByZXR1cm4ge1xuICAgICAgc3RyZWFtOiByZXNwb25zZS5waXBlVGhyb3VnaChcbiAgICAgICAgbmV3IFRyYW5zZm9ybVN0cmVhbSh7XG4gICAgICAgICAgc3RhcnQoY29udHJvbGxlcikge1xuICAgICAgICAgICAgY29udHJvbGxlci5lbnF1ZXVlKHsgdHlwZTogXCJzdHJlYW0tc3RhcnRcIiwgd2FybmluZ3MgfSk7XG4gICAgICAgICAgfSxcbiAgICAgICAgICB0cmFuc2Zvcm0oY2h1bmssIGNvbnRyb2xsZXIpIHtcbiAgICAgICAgICAgIGlmIChvcHRpb25zLmluY2x1ZGVSYXdDaHVua3MpIHtcbiAgICAgICAgICAgICAgY29udHJvbGxlci5lbnF1ZXVlKHsgdHlwZTogXCJyYXdcIiwgcmF3VmFsdWU6IGNodW5rLnJhd1ZhbHVlIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKCFjaHVuay5zdWNjZXNzKSB7XG4gICAgICAgICAgICAgIGZpbmlzaFJlYXNvbiA9IHsgdW5pZmllZDogXCJlcnJvclwiLCByYXc6IHZvaWQgMCB9O1xuICAgICAgICAgICAgICBjb250cm9sbGVyLmVucXVldWUoeyB0eXBlOiBcImVycm9yXCIsIGVycm9yOiBjaHVuay5lcnJvciB9KTtcbiAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3QgdmFsdWUgPSBjaHVuay52YWx1ZTtcbiAgICAgICAgICAgIGlmIChcImVycm9yXCIgaW4gdmFsdWUpIHtcbiAgICAgICAgICAgICAgZmluaXNoUmVhc29uID0geyB1bmlmaWVkOiBcImVycm9yXCIsIHJhdzogdm9pZCAwIH07XG4gICAgICAgICAgICAgIGNvbnRyb2xsZXIuZW5xdWV1ZSh7IHR5cGU6IFwiZXJyb3JcIiwgZXJyb3I6IHZhbHVlLmVycm9yIH0pO1xuICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoaXNGaXJzdENodW5rKSB7XG4gICAgICAgICAgICAgIGlzRmlyc3RDaHVuayA9IGZhbHNlO1xuICAgICAgICAgICAgICBjb250cm9sbGVyLmVucXVldWUoe1xuICAgICAgICAgICAgICAgIHR5cGU6IFwicmVzcG9uc2UtbWV0YWRhdGFcIixcbiAgICAgICAgICAgICAgICAuLi5nZXRSZXNwb25zZU1ldGFkYXRhMih2YWx1ZSlcbiAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgIGNvbnRyb2xsZXIuZW5xdWV1ZSh7IHR5cGU6IFwidGV4dC1zdGFydFwiLCBpZDogXCIwXCIgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAodmFsdWUudXNhZ2UgIT0gbnVsbCkge1xuICAgICAgICAgICAgICB1c2FnZSA9IHZhbHVlLnVzYWdlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3QgY2hvaWNlID0gdmFsdWUuY2hvaWNlc1swXTtcbiAgICAgICAgICAgIGlmICgoY2hvaWNlID09IG51bGwgPyB2b2lkIDAgOiBjaG9pY2UuZmluaXNoX3JlYXNvbikgIT0gbnVsbCkge1xuICAgICAgICAgICAgICBmaW5pc2hSZWFzb24gPSB7XG4gICAgICAgICAgICAgICAgdW5pZmllZDogbWFwT3BlbkFJRmluaXNoUmVhc29uMihjaG9pY2UuZmluaXNoX3JlYXNvbiksXG4gICAgICAgICAgICAgICAgcmF3OiBjaG9pY2UuZmluaXNoX3JlYXNvblxuICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKChjaG9pY2UgPT0gbnVsbCA/IHZvaWQgMCA6IGNob2ljZS5sb2dwcm9icykgIT0gbnVsbCkge1xuICAgICAgICAgICAgICBwcm92aWRlck1ldGFkYXRhLm9wZW5haS5sb2dwcm9icyA9IGNob2ljZS5sb2dwcm9icztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICgoY2hvaWNlID09IG51bGwgPyB2b2lkIDAgOiBjaG9pY2UudGV4dCkgIT0gbnVsbCAmJiBjaG9pY2UudGV4dC5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAgIGNvbnRyb2xsZXIuZW5xdWV1ZSh7XG4gICAgICAgICAgICAgICAgdHlwZTogXCJ0ZXh0LWRlbHRhXCIsXG4gICAgICAgICAgICAgICAgaWQ6IFwiMFwiLFxuICAgICAgICAgICAgICAgIGRlbHRhOiBjaG9pY2UudGV4dFxuICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9LFxuICAgICAgICAgIGZsdXNoKGNvbnRyb2xsZXIpIHtcbiAgICAgICAgICAgIGlmICghaXNGaXJzdENodW5rKSB7XG4gICAgICAgICAgICAgIGNvbnRyb2xsZXIuZW5xdWV1ZSh7IHR5cGU6IFwidGV4dC1lbmRcIiwgaWQ6IFwiMFwiIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29udHJvbGxlci5lbnF1ZXVlKHtcbiAgICAgICAgICAgICAgdHlwZTogXCJmaW5pc2hcIixcbiAgICAgICAgICAgICAgZmluaXNoUmVhc29uLFxuICAgICAgICAgICAgICBwcm92aWRlck1ldGFkYXRhLFxuICAgICAgICAgICAgICB1c2FnZTogY29udmVydE9wZW5BSUNvbXBsZXRpb25Vc2FnZSh1c2FnZSlcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgIH1cbiAgICAgICAgfSlcbiAgICAgICksXG4gICAgICByZXF1ZXN0OiB7IGJvZHkgfSxcbiAgICAgIHJlc3BvbnNlOiB7IGhlYWRlcnM6IHJlc3BvbnNlSGVhZGVycyB9XG4gICAgfTtcbiAgfVxufTtcblxuLy8gc3JjL2VtYmVkZGluZy9vcGVuYWktZW1iZWRkaW5nLW1vZGVsLnRzXG5pbXBvcnQge1xuICBUb29NYW55RW1iZWRkaW5nVmFsdWVzRm9yQ2FsbEVycm9yXG59IGZyb20gXCJAYWktc2RrL3Byb3ZpZGVyXCI7XG5pbXBvcnQge1xuICBjb21iaW5lSGVhZGVycyBhcyBjb21iaW5lSGVhZGVyczMsXG4gIGNyZWF0ZUpzb25SZXNwb25zZUhhbmRsZXIgYXMgY3JlYXRlSnNvblJlc3BvbnNlSGFuZGxlcjMsXG4gIHBhcnNlUHJvdmlkZXJPcHRpb25zIGFzIHBhcnNlUHJvdmlkZXJPcHRpb25zMyxcbiAgcG9zdEpzb25Ub0FwaSBhcyBwb3N0SnNvblRvQXBpM1xufSBmcm9tIFwiQGFpLXNkay9wcm92aWRlci11dGlsc1wiO1xuXG4vLyBzcmMvZW1iZWRkaW5nL29wZW5haS1lbWJlZGRpbmctb3B0aW9ucy50c1xuaW1wb3J0IHsgbGF6eVNjaGVtYSBhcyBsYXp5U2NoZW1hNSwgem9kU2NoZW1hIGFzIHpvZFNjaGVtYTUgfSBmcm9tIFwiQGFpLXNkay9wcm92aWRlci11dGlsc1wiO1xuaW1wb3J0IHsgeiBhcyB6NiB9IGZyb20gXCJ6b2QvdjRcIjtcbnZhciBvcGVuYWlFbWJlZGRpbmdQcm92aWRlck9wdGlvbnMgPSBsYXp5U2NoZW1hNShcbiAgKCkgPT4gem9kU2NoZW1hNShcbiAgICB6Ni5vYmplY3Qoe1xuICAgICAgLyoqXG4gICAgICBUaGUgbnVtYmVyIG9mIGRpbWVuc2lvbnMgdGhlIHJlc3VsdGluZyBvdXRwdXQgZW1iZWRkaW5ncyBzaG91bGQgaGF2ZS5cbiAgICAgIE9ubHkgc3VwcG9ydGVkIGluIHRleHQtZW1iZWRkaW5nLTMgYW5kIGxhdGVyIG1vZGVscy5cbiAgICAgICAgICovXG4gICAgICBkaW1lbnNpb25zOiB6Ni5udW1iZXIoKS5vcHRpb25hbCgpLFxuICAgICAgLyoqXG4gICAgICBBIHVuaXF1ZSBpZGVudGlmaWVyIHJlcHJlc2VudGluZyB5b3VyIGVuZC11c2VyLCB3aGljaCBjYW4gaGVscCBPcGVuQUkgdG9cbiAgICAgIG1vbml0b3IgYW5kIGRldGVjdCBhYnVzZS4gTGVhcm4gbW9yZS5cbiAgICAgICovXG4gICAgICB1c2VyOiB6Ni5zdHJpbmcoKS5vcHRpb25hbCgpXG4gICAgfSlcbiAgKVxuKTtcblxuLy8gc3JjL2VtYmVkZGluZy9vcGVuYWktZW1iZWRkaW5nLWFwaS50c1xuaW1wb3J0IHsgbGF6eVNjaGVtYSBhcyBsYXp5U2NoZW1hNiwgem9kU2NoZW1hIGFzIHpvZFNjaGVtYTYgfSBmcm9tIFwiQGFpLXNkay9wcm92aWRlci11dGlsc1wiO1xuaW1wb3J0IHsgeiBhcyB6NyB9IGZyb20gXCJ6b2QvdjRcIjtcbnZhciBvcGVuYWlUZXh0RW1iZWRkaW5nUmVzcG9uc2VTY2hlbWEgPSBsYXp5U2NoZW1hNihcbiAgKCkgPT4gem9kU2NoZW1hNihcbiAgICB6Ny5vYmplY3Qoe1xuICAgICAgZGF0YTogejcuYXJyYXkoejcub2JqZWN0KHsgZW1iZWRkaW5nOiB6Ny5hcnJheSh6Ny5udW1iZXIoKSkgfSkpLFxuICAgICAgdXNhZ2U6IHo3Lm9iamVjdCh7IHByb21wdF90b2tlbnM6IHo3Lm51bWJlcigpIH0pLm51bGxpc2goKVxuICAgIH0pXG4gIClcbik7XG5cbi8vIHNyYy9lbWJlZGRpbmcvb3BlbmFpLWVtYmVkZGluZy1tb2RlbC50c1xudmFyIE9wZW5BSUVtYmVkZGluZ01vZGVsID0gY2xhc3Mge1xuICBjb25zdHJ1Y3Rvcihtb2RlbElkLCBjb25maWcpIHtcbiAgICB0aGlzLnNwZWNpZmljYXRpb25WZXJzaW9uID0gXCJ2M1wiO1xuICAgIHRoaXMubWF4RW1iZWRkaW5nc1BlckNhbGwgPSAyMDQ4O1xuICAgIHRoaXMuc3VwcG9ydHNQYXJhbGxlbENhbGxzID0gdHJ1ZTtcbiAgICB0aGlzLm1vZGVsSWQgPSBtb2RlbElkO1xuICAgIHRoaXMuY29uZmlnID0gY29uZmlnO1xuICB9XG4gIGdldCBwcm92aWRlcigpIHtcbiAgICByZXR1cm4gdGhpcy5jb25maWcucHJvdmlkZXI7XG4gIH1cbiAgYXN5bmMgZG9FbWJlZCh7XG4gICAgdmFsdWVzLFxuICAgIGhlYWRlcnMsXG4gICAgYWJvcnRTaWduYWwsXG4gICAgcHJvdmlkZXJPcHRpb25zXG4gIH0pIHtcbiAgICB2YXIgX2E7XG4gICAgaWYgKHZhbHVlcy5sZW5ndGggPiB0aGlzLm1heEVtYmVkZGluZ3NQZXJDYWxsKSB7XG4gICAgICB0aHJvdyBuZXcgVG9vTWFueUVtYmVkZGluZ1ZhbHVlc0ZvckNhbGxFcnJvcih7XG4gICAgICAgIHByb3ZpZGVyOiB0aGlzLnByb3ZpZGVyLFxuICAgICAgICBtb2RlbElkOiB0aGlzLm1vZGVsSWQsXG4gICAgICAgIG1heEVtYmVkZGluZ3NQZXJDYWxsOiB0aGlzLm1heEVtYmVkZGluZ3NQZXJDYWxsLFxuICAgICAgICB2YWx1ZXNcbiAgICAgIH0pO1xuICAgIH1cbiAgICBjb25zdCBvcGVuYWlPcHRpb25zID0gKF9hID0gYXdhaXQgcGFyc2VQcm92aWRlck9wdGlvbnMzKHtcbiAgICAgIHByb3ZpZGVyOiBcIm9wZW5haVwiLFxuICAgICAgcHJvdmlkZXJPcHRpb25zLFxuICAgICAgc2NoZW1hOiBvcGVuYWlFbWJlZGRpbmdQcm92aWRlck9wdGlvbnNcbiAgICB9KSkgIT0gbnVsbCA/IF9hIDoge307XG4gICAgY29uc3Qge1xuICAgICAgcmVzcG9uc2VIZWFkZXJzLFxuICAgICAgdmFsdWU6IHJlc3BvbnNlLFxuICAgICAgcmF3VmFsdWVcbiAgICB9ID0gYXdhaXQgcG9zdEpzb25Ub0FwaTMoe1xuICAgICAgdXJsOiB0aGlzLmNvbmZpZy51cmwoe1xuICAgICAgICBwYXRoOiBcIi9lbWJlZGRpbmdzXCIsXG4gICAgICAgIG1vZGVsSWQ6IHRoaXMubW9kZWxJZFxuICAgICAgfSksXG4gICAgICBoZWFkZXJzOiBjb21iaW5lSGVhZGVyczModGhpcy5jb25maWcuaGVhZGVycygpLCBoZWFkZXJzKSxcbiAgICAgIGJvZHk6IHtcbiAgICAgICAgbW9kZWw6IHRoaXMubW9kZWxJZCxcbiAgICAgICAgaW5wdXQ6IHZhbHVlcyxcbiAgICAgICAgZW5jb2RpbmdfZm9ybWF0OiBcImZsb2F0XCIsXG4gICAgICAgIGRpbWVuc2lvbnM6IG9wZW5haU9wdGlvbnMuZGltZW5zaW9ucyxcbiAgICAgICAgdXNlcjogb3BlbmFpT3B0aW9ucy51c2VyXG4gICAgICB9LFxuICAgICAgZmFpbGVkUmVzcG9uc2VIYW5kbGVyOiBvcGVuYWlGYWlsZWRSZXNwb25zZUhhbmRsZXIsXG4gICAgICBzdWNjZXNzZnVsUmVzcG9uc2VIYW5kbGVyOiBjcmVhdGVKc29uUmVzcG9uc2VIYW5kbGVyMyhcbiAgICAgICAgb3BlbmFpVGV4dEVtYmVkZGluZ1Jlc3BvbnNlU2NoZW1hXG4gICAgICApLFxuICAgICAgYWJvcnRTaWduYWwsXG4gICAgICBmZXRjaDogdGhpcy5jb25maWcuZmV0Y2hcbiAgICB9KTtcbiAgICByZXR1cm4ge1xuICAgICAgd2FybmluZ3M6IFtdLFxuICAgICAgZW1iZWRkaW5nczogcmVzcG9uc2UuZGF0YS5tYXAoKGl0ZW0pID0+IGl0ZW0uZW1iZWRkaW5nKSxcbiAgICAgIHVzYWdlOiByZXNwb25zZS51c2FnZSA/IHsgdG9rZW5zOiByZXNwb25zZS51c2FnZS5wcm9tcHRfdG9rZW5zIH0gOiB2b2lkIDAsXG4gICAgICByZXNwb25zZTogeyBoZWFkZXJzOiByZXNwb25zZUhlYWRlcnMsIGJvZHk6IHJhd1ZhbHVlIH1cbiAgICB9O1xuICB9XG59O1xuXG4vLyBzcmMvaW1hZ2Uvb3BlbmFpLWltYWdlLW1vZGVsLnRzXG5pbXBvcnQge1xuICBjb21iaW5lSGVhZGVycyBhcyBjb21iaW5lSGVhZGVyczQsXG4gIGNvbnZlcnRCYXNlNjRUb1VpbnQ4QXJyYXksXG4gIGNvbnZlcnRUb0Zvcm1EYXRhLFxuICBjcmVhdGVKc29uUmVzcG9uc2VIYW5kbGVyIGFzIGNyZWF0ZUpzb25SZXNwb25zZUhhbmRsZXI0LFxuICBkb3dubG9hZEJsb2IsXG4gIHBvc3RGb3JtRGF0YVRvQXBpLFxuICBwb3N0SnNvblRvQXBpIGFzIHBvc3RKc29uVG9BcGk0XG59IGZyb20gXCJAYWktc2RrL3Byb3ZpZGVyLXV0aWxzXCI7XG5cbi8vIHNyYy9pbWFnZS9vcGVuYWktaW1hZ2UtYXBpLnRzXG5pbXBvcnQgeyBsYXp5U2NoZW1hIGFzIGxhenlTY2hlbWE3LCB6b2RTY2hlbWEgYXMgem9kU2NoZW1hNyB9IGZyb20gXCJAYWktc2RrL3Byb3ZpZGVyLXV0aWxzXCI7XG5pbXBvcnQgeyB6IGFzIHo4IH0gZnJvbSBcInpvZC92NFwiO1xudmFyIG9wZW5haUltYWdlUmVzcG9uc2VTY2hlbWEgPSBsYXp5U2NoZW1hNyhcbiAgKCkgPT4gem9kU2NoZW1hNyhcbiAgICB6OC5vYmplY3Qoe1xuICAgICAgY3JlYXRlZDogejgubnVtYmVyKCkubnVsbGlzaCgpLFxuICAgICAgZGF0YTogejguYXJyYXkoXG4gICAgICAgIHo4Lm9iamVjdCh7XG4gICAgICAgICAgYjY0X2pzb246IHo4LnN0cmluZygpLFxuICAgICAgICAgIHJldmlzZWRfcHJvbXB0OiB6OC5zdHJpbmcoKS5udWxsaXNoKClcbiAgICAgICAgfSlcbiAgICAgICksXG4gICAgICBiYWNrZ3JvdW5kOiB6OC5zdHJpbmcoKS5udWxsaXNoKCksXG4gICAgICBvdXRwdXRfZm9ybWF0OiB6OC5zdHJpbmcoKS5udWxsaXNoKCksXG4gICAgICBzaXplOiB6OC5zdHJpbmcoKS5udWxsaXNoKCksXG4gICAgICBxdWFsaXR5OiB6OC5zdHJpbmcoKS5udWxsaXNoKCksXG4gICAgICB1c2FnZTogejgub2JqZWN0KHtcbiAgICAgICAgaW5wdXRfdG9rZW5zOiB6OC5udW1iZXIoKS5udWxsaXNoKCksXG4gICAgICAgIG91dHB1dF90b2tlbnM6IHo4Lm51bWJlcigpLm51bGxpc2goKSxcbiAgICAgICAgdG90YWxfdG9rZW5zOiB6OC5udW1iZXIoKS5udWxsaXNoKCksXG4gICAgICAgIGlucHV0X3Rva2Vuc19kZXRhaWxzOiB6OC5vYmplY3Qoe1xuICAgICAgICAgIGltYWdlX3Rva2VuczogejgubnVtYmVyKCkubnVsbGlzaCgpLFxuICAgICAgICAgIHRleHRfdG9rZW5zOiB6OC5udW1iZXIoKS5udWxsaXNoKClcbiAgICAgICAgfSkubnVsbGlzaCgpXG4gICAgICB9KS5udWxsaXNoKClcbiAgICB9KVxuICApXG4pO1xuXG4vLyBzcmMvaW1hZ2Uvb3BlbmFpLWltYWdlLW9wdGlvbnMudHNcbnZhciBtb2RlbE1heEltYWdlc1BlckNhbGwgPSB7XG4gIFwiZGFsbC1lLTNcIjogMSxcbiAgXCJkYWxsLWUtMlwiOiAxMCxcbiAgXCJncHQtaW1hZ2UtMVwiOiAxMCxcbiAgXCJncHQtaW1hZ2UtMS1taW5pXCI6IDEwLFxuICBcImdwdC1pbWFnZS0xLjVcIjogMTBcbn07XG52YXIgZGVmYXVsdFJlc3BvbnNlRm9ybWF0UHJlZml4ZXMgPSBbXG4gIFwiZ3B0LWltYWdlLTEtbWluaVwiLFxuICBcImdwdC1pbWFnZS0xLjVcIixcbiAgXCJncHQtaW1hZ2UtMVwiXG5dO1xuZnVuY3Rpb24gaGFzRGVmYXVsdFJlc3BvbnNlRm9ybWF0KG1vZGVsSWQpIHtcbiAgcmV0dXJuIGRlZmF1bHRSZXNwb25zZUZvcm1hdFByZWZpeGVzLnNvbWUoXG4gICAgKHByZWZpeCkgPT4gbW9kZWxJZC5zdGFydHNXaXRoKHByZWZpeClcbiAgKTtcbn1cblxuLy8gc3JjL2ltYWdlL29wZW5haS1pbWFnZS1tb2RlbC50c1xudmFyIE9wZW5BSUltYWdlTW9kZWwgPSBjbGFzcyB7XG4gIGNvbnN0cnVjdG9yKG1vZGVsSWQsIGNvbmZpZykge1xuICAgIHRoaXMubW9kZWxJZCA9IG1vZGVsSWQ7XG4gICAgdGhpcy5jb25maWcgPSBjb25maWc7XG4gICAgdGhpcy5zcGVjaWZpY2F0aW9uVmVyc2lvbiA9IFwidjNcIjtcbiAgfVxuICBnZXQgbWF4SW1hZ2VzUGVyQ2FsbCgpIHtcbiAgICB2YXIgX2E7XG4gICAgcmV0dXJuIChfYSA9IG1vZGVsTWF4SW1hZ2VzUGVyQ2FsbFt0aGlzLm1vZGVsSWRdKSAhPSBudWxsID8gX2EgOiAxO1xuICB9XG4gIGdldCBwcm92aWRlcigpIHtcbiAgICByZXR1cm4gdGhpcy5jb25maWcucHJvdmlkZXI7XG4gIH1cbiAgYXN5bmMgZG9HZW5lcmF0ZSh7XG4gICAgcHJvbXB0LFxuICAgIGZpbGVzLFxuICAgIG1hc2ssXG4gICAgbixcbiAgICBzaXplLFxuICAgIGFzcGVjdFJhdGlvLFxuICAgIHNlZWQsXG4gICAgcHJvdmlkZXJPcHRpb25zLFxuICAgIGhlYWRlcnMsXG4gICAgYWJvcnRTaWduYWxcbiAgfSkge1xuICAgIHZhciBfYSwgX2IsIF9jLCBfZCwgX2UsIF9mLCBfZywgX2gsIF9pLCBfaiwgX2s7XG4gICAgY29uc3Qgd2FybmluZ3MgPSBbXTtcbiAgICBpZiAoYXNwZWN0UmF0aW8gIT0gbnVsbCkge1xuICAgICAgd2FybmluZ3MucHVzaCh7XG4gICAgICAgIHR5cGU6IFwidW5zdXBwb3J0ZWRcIixcbiAgICAgICAgZmVhdHVyZTogXCJhc3BlY3RSYXRpb1wiLFxuICAgICAgICBkZXRhaWxzOiBcIlRoaXMgbW9kZWwgZG9lcyBub3Qgc3VwcG9ydCBhc3BlY3QgcmF0aW8uIFVzZSBgc2l6ZWAgaW5zdGVhZC5cIlxuICAgICAgfSk7XG4gICAgfVxuICAgIGlmIChzZWVkICE9IG51bGwpIHtcbiAgICAgIHdhcm5pbmdzLnB1c2goeyB0eXBlOiBcInVuc3VwcG9ydGVkXCIsIGZlYXR1cmU6IFwic2VlZFwiIH0pO1xuICAgIH1cbiAgICBjb25zdCBjdXJyZW50RGF0ZSA9IChfYyA9IChfYiA9IChfYSA9IHRoaXMuY29uZmlnLl9pbnRlcm5hbCkgPT0gbnVsbCA/IHZvaWQgMCA6IF9hLmN1cnJlbnREYXRlKSA9PSBudWxsID8gdm9pZCAwIDogX2IuY2FsbChfYSkpICE9IG51bGwgPyBfYyA6IC8qIEBfX1BVUkVfXyAqLyBuZXcgRGF0ZSgpO1xuICAgIGlmIChmaWxlcyAhPSBudWxsKSB7XG4gICAgICBjb25zdCB7IHZhbHVlOiByZXNwb25zZTIsIHJlc3BvbnNlSGVhZGVyczogcmVzcG9uc2VIZWFkZXJzMiB9ID0gYXdhaXQgcG9zdEZvcm1EYXRhVG9BcGkoe1xuICAgICAgICB1cmw6IHRoaXMuY29uZmlnLnVybCh7XG4gICAgICAgICAgcGF0aDogXCIvaW1hZ2VzL2VkaXRzXCIsXG4gICAgICAgICAgbW9kZWxJZDogdGhpcy5tb2RlbElkXG4gICAgICAgIH0pLFxuICAgICAgICBoZWFkZXJzOiBjb21iaW5lSGVhZGVyczQodGhpcy5jb25maWcuaGVhZGVycygpLCBoZWFkZXJzKSxcbiAgICAgICAgZm9ybURhdGE6IGNvbnZlcnRUb0Zvcm1EYXRhKHtcbiAgICAgICAgICBtb2RlbDogdGhpcy5tb2RlbElkLFxuICAgICAgICAgIHByb21wdCxcbiAgICAgICAgICBpbWFnZTogYXdhaXQgUHJvbWlzZS5hbGwoXG4gICAgICAgICAgICBmaWxlcy5tYXAoXG4gICAgICAgICAgICAgIChmaWxlKSA9PiBmaWxlLnR5cGUgPT09IFwiZmlsZVwiID8gbmV3IEJsb2IoXG4gICAgICAgICAgICAgICAgW1xuICAgICAgICAgICAgICAgICAgZmlsZS5kYXRhIGluc3RhbmNlb2YgVWludDhBcnJheSA/IG5ldyBCbG9iKFtmaWxlLmRhdGFdLCB7XG4gICAgICAgICAgICAgICAgICAgIHR5cGU6IGZpbGUubWVkaWFUeXBlXG4gICAgICAgICAgICAgICAgICB9KSA6IG5ldyBCbG9iKFtjb252ZXJ0QmFzZTY0VG9VaW50OEFycmF5KGZpbGUuZGF0YSldLCB7XG4gICAgICAgICAgICAgICAgICAgIHR5cGU6IGZpbGUubWVkaWFUeXBlXG4gICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgIF0sXG4gICAgICAgICAgICAgICAgeyB0eXBlOiBmaWxlLm1lZGlhVHlwZSB9XG4gICAgICAgICAgICAgICkgOiBkb3dubG9hZEJsb2IoZmlsZS51cmwpXG4gICAgICAgICAgICApXG4gICAgICAgICAgKSxcbiAgICAgICAgICBtYXNrOiBtYXNrICE9IG51bGwgPyBhd2FpdCBmaWxlVG9CbG9iKG1hc2spIDogdm9pZCAwLFxuICAgICAgICAgIG4sXG4gICAgICAgICAgc2l6ZSxcbiAgICAgICAgICAuLi4oX2QgPSBwcm92aWRlck9wdGlvbnMub3BlbmFpKSAhPSBudWxsID8gX2QgOiB7fVxuICAgICAgICB9KSxcbiAgICAgICAgZmFpbGVkUmVzcG9uc2VIYW5kbGVyOiBvcGVuYWlGYWlsZWRSZXNwb25zZUhhbmRsZXIsXG4gICAgICAgIHN1Y2Nlc3NmdWxSZXNwb25zZUhhbmRsZXI6IGNyZWF0ZUpzb25SZXNwb25zZUhhbmRsZXI0KFxuICAgICAgICAgIG9wZW5haUltYWdlUmVzcG9uc2VTY2hlbWFcbiAgICAgICAgKSxcbiAgICAgICAgYWJvcnRTaWduYWwsXG4gICAgICAgIGZldGNoOiB0aGlzLmNvbmZpZy5mZXRjaFxuICAgICAgfSk7XG4gICAgICByZXR1cm4ge1xuICAgICAgICBpbWFnZXM6IHJlc3BvbnNlMi5kYXRhLm1hcCgoaXRlbSkgPT4gaXRlbS5iNjRfanNvbiksXG4gICAgICAgIHdhcm5pbmdzLFxuICAgICAgICB1c2FnZTogcmVzcG9uc2UyLnVzYWdlICE9IG51bGwgPyB7XG4gICAgICAgICAgaW5wdXRUb2tlbnM6IChfZSA9IHJlc3BvbnNlMi51c2FnZS5pbnB1dF90b2tlbnMpICE9IG51bGwgPyBfZSA6IHZvaWQgMCxcbiAgICAgICAgICBvdXRwdXRUb2tlbnM6IChfZiA9IHJlc3BvbnNlMi51c2FnZS5vdXRwdXRfdG9rZW5zKSAhPSBudWxsID8gX2YgOiB2b2lkIDAsXG4gICAgICAgICAgdG90YWxUb2tlbnM6IChfZyA9IHJlc3BvbnNlMi51c2FnZS50b3RhbF90b2tlbnMpICE9IG51bGwgPyBfZyA6IHZvaWQgMFxuICAgICAgICB9IDogdm9pZCAwLFxuICAgICAgICByZXNwb25zZToge1xuICAgICAgICAgIHRpbWVzdGFtcDogY3VycmVudERhdGUsXG4gICAgICAgICAgbW9kZWxJZDogdGhpcy5tb2RlbElkLFxuICAgICAgICAgIGhlYWRlcnM6IHJlc3BvbnNlSGVhZGVyczJcbiAgICAgICAgfSxcbiAgICAgICAgcHJvdmlkZXJNZXRhZGF0YToge1xuICAgICAgICAgIG9wZW5haToge1xuICAgICAgICAgICAgaW1hZ2VzOiByZXNwb25zZTIuZGF0YS5tYXAoKGl0ZW0pID0+IHtcbiAgICAgICAgICAgICAgdmFyIF9hMiwgX2IyLCBfYzIsIF9kMiwgX2UyO1xuICAgICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgIC4uLml0ZW0ucmV2aXNlZF9wcm9tcHQgPyB7IHJldmlzZWRQcm9tcHQ6IGl0ZW0ucmV2aXNlZF9wcm9tcHQgfSA6IHt9LFxuICAgICAgICAgICAgICAgIGNyZWF0ZWQ6IChfYTIgPSByZXNwb25zZTIuY3JlYXRlZCkgIT0gbnVsbCA/IF9hMiA6IHZvaWQgMCxcbiAgICAgICAgICAgICAgICBzaXplOiAoX2IyID0gcmVzcG9uc2UyLnNpemUpICE9IG51bGwgPyBfYjIgOiB2b2lkIDAsXG4gICAgICAgICAgICAgICAgcXVhbGl0eTogKF9jMiA9IHJlc3BvbnNlMi5xdWFsaXR5KSAhPSBudWxsID8gX2MyIDogdm9pZCAwLFxuICAgICAgICAgICAgICAgIGJhY2tncm91bmQ6IChfZDIgPSByZXNwb25zZTIuYmFja2dyb3VuZCkgIT0gbnVsbCA/IF9kMiA6IHZvaWQgMCxcbiAgICAgICAgICAgICAgICBvdXRwdXRGb3JtYXQ6IChfZTIgPSByZXNwb25zZTIub3V0cHV0X2Zvcm1hdCkgIT0gbnVsbCA/IF9lMiA6IHZvaWQgMFxuICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgfSlcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH07XG4gICAgfVxuICAgIGNvbnN0IHsgdmFsdWU6IHJlc3BvbnNlLCByZXNwb25zZUhlYWRlcnMgfSA9IGF3YWl0IHBvc3RKc29uVG9BcGk0KHtcbiAgICAgIHVybDogdGhpcy5jb25maWcudXJsKHtcbiAgICAgICAgcGF0aDogXCIvaW1hZ2VzL2dlbmVyYXRpb25zXCIsXG4gICAgICAgIG1vZGVsSWQ6IHRoaXMubW9kZWxJZFxuICAgICAgfSksXG4gICAgICBoZWFkZXJzOiBjb21iaW5lSGVhZGVyczQodGhpcy5jb25maWcuaGVhZGVycygpLCBoZWFkZXJzKSxcbiAgICAgIGJvZHk6IHtcbiAgICAgICAgbW9kZWw6IHRoaXMubW9kZWxJZCxcbiAgICAgICAgcHJvbXB0LFxuICAgICAgICBuLFxuICAgICAgICBzaXplLFxuICAgICAgICAuLi4oX2ggPSBwcm92aWRlck9wdGlvbnMub3BlbmFpKSAhPSBudWxsID8gX2ggOiB7fSxcbiAgICAgICAgLi4uIWhhc0RlZmF1bHRSZXNwb25zZUZvcm1hdCh0aGlzLm1vZGVsSWQpID8geyByZXNwb25zZV9mb3JtYXQ6IFwiYjY0X2pzb25cIiB9IDoge31cbiAgICAgIH0sXG4gICAgICBmYWlsZWRSZXNwb25zZUhhbmRsZXI6IG9wZW5haUZhaWxlZFJlc3BvbnNlSGFuZGxlcixcbiAgICAgIHN1Y2Nlc3NmdWxSZXNwb25zZUhhbmRsZXI6IGNyZWF0ZUpzb25SZXNwb25zZUhhbmRsZXI0KFxuICAgICAgICBvcGVuYWlJbWFnZVJlc3BvbnNlU2NoZW1hXG4gICAgICApLFxuICAgICAgYWJvcnRTaWduYWwsXG4gICAgICBmZXRjaDogdGhpcy5jb25maWcuZmV0Y2hcbiAgICB9KTtcbiAgICByZXR1cm4ge1xuICAgICAgaW1hZ2VzOiByZXNwb25zZS5kYXRhLm1hcCgoaXRlbSkgPT4gaXRlbS5iNjRfanNvbiksXG4gICAgICB3YXJuaW5ncyxcbiAgICAgIHVzYWdlOiByZXNwb25zZS51c2FnZSAhPSBudWxsID8ge1xuICAgICAgICBpbnB1dFRva2VuczogKF9pID0gcmVzcG9uc2UudXNhZ2UuaW5wdXRfdG9rZW5zKSAhPSBudWxsID8gX2kgOiB2b2lkIDAsXG4gICAgICAgIG91dHB1dFRva2VuczogKF9qID0gcmVzcG9uc2UudXNhZ2Uub3V0cHV0X3Rva2VucykgIT0gbnVsbCA/IF9qIDogdm9pZCAwLFxuICAgICAgICB0b3RhbFRva2VuczogKF9rID0gcmVzcG9uc2UudXNhZ2UudG90YWxfdG9rZW5zKSAhPSBudWxsID8gX2sgOiB2b2lkIDBcbiAgICAgIH0gOiB2b2lkIDAsXG4gICAgICByZXNwb25zZToge1xuICAgICAgICB0aW1lc3RhbXA6IGN1cnJlbnREYXRlLFxuICAgICAgICBtb2RlbElkOiB0aGlzLm1vZGVsSWQsXG4gICAgICAgIGhlYWRlcnM6IHJlc3BvbnNlSGVhZGVyc1xuICAgICAgfSxcbiAgICAgIHByb3ZpZGVyTWV0YWRhdGE6IHtcbiAgICAgICAgb3BlbmFpOiB7XG4gICAgICAgICAgaW1hZ2VzOiByZXNwb25zZS5kYXRhLm1hcCgoaXRlbSkgPT4ge1xuICAgICAgICAgICAgdmFyIF9hMiwgX2IyLCBfYzIsIF9kMiwgX2UyO1xuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgLi4uaXRlbS5yZXZpc2VkX3Byb21wdCA/IHsgcmV2aXNlZFByb21wdDogaXRlbS5yZXZpc2VkX3Byb21wdCB9IDoge30sXG4gICAgICAgICAgICAgIGNyZWF0ZWQ6IChfYTIgPSByZXNwb25zZS5jcmVhdGVkKSAhPSBudWxsID8gX2EyIDogdm9pZCAwLFxuICAgICAgICAgICAgICBzaXplOiAoX2IyID0gcmVzcG9uc2Uuc2l6ZSkgIT0gbnVsbCA/IF9iMiA6IHZvaWQgMCxcbiAgICAgICAgICAgICAgcXVhbGl0eTogKF9jMiA9IHJlc3BvbnNlLnF1YWxpdHkpICE9IG51bGwgPyBfYzIgOiB2b2lkIDAsXG4gICAgICAgICAgICAgIGJhY2tncm91bmQ6IChfZDIgPSByZXNwb25zZS5iYWNrZ3JvdW5kKSAhPSBudWxsID8gX2QyIDogdm9pZCAwLFxuICAgICAgICAgICAgICBvdXRwdXRGb3JtYXQ6IChfZTIgPSByZXNwb25zZS5vdXRwdXRfZm9ybWF0KSAhPSBudWxsID8gX2UyIDogdm9pZCAwXG4gICAgICAgICAgICB9O1xuICAgICAgICAgIH0pXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9O1xuICB9XG59O1xuYXN5bmMgZnVuY3Rpb24gZmlsZVRvQmxvYihmaWxlKSB7XG4gIGlmICghZmlsZSkgcmV0dXJuIHZvaWQgMDtcbiAgaWYgKGZpbGUudHlwZSA9PT0gXCJ1cmxcIikge1xuICAgIHJldHVybiBkb3dubG9hZEJsb2IoZmlsZS51cmwpO1xuICB9XG4gIGNvbnN0IGRhdGEgPSBmaWxlLmRhdGEgaW5zdGFuY2VvZiBVaW50OEFycmF5ID8gZmlsZS5kYXRhIDogY29udmVydEJhc2U2NFRvVWludDhBcnJheShmaWxlLmRhdGEpO1xuICByZXR1cm4gbmV3IEJsb2IoW2RhdGFdLCB7IHR5cGU6IGZpbGUubWVkaWFUeXBlIH0pO1xufVxuXG4vLyBzcmMvdG9vbC9hcHBseS1wYXRjaC50c1xuaW1wb3J0IHtcbiAgY3JlYXRlUHJvdmlkZXJUb29sRmFjdG9yeVdpdGhPdXRwdXRTY2hlbWEsXG4gIGxhenlTY2hlbWEgYXMgbGF6eVNjaGVtYTgsXG4gIHpvZFNjaGVtYSBhcyB6b2RTY2hlbWE4XG59IGZyb20gXCJAYWktc2RrL3Byb3ZpZGVyLXV0aWxzXCI7XG5pbXBvcnQgeyB6IGFzIHo5IH0gZnJvbSBcInpvZC92NFwiO1xudmFyIGFwcGx5UGF0Y2hJbnB1dFNjaGVtYSA9IGxhenlTY2hlbWE4KFxuICAoKSA9PiB6b2RTY2hlbWE4KFxuICAgIHo5Lm9iamVjdCh7XG4gICAgICBjYWxsSWQ6IHo5LnN0cmluZygpLFxuICAgICAgb3BlcmF0aW9uOiB6OS5kaXNjcmltaW5hdGVkVW5pb24oXCJ0eXBlXCIsIFtcbiAgICAgICAgejkub2JqZWN0KHtcbiAgICAgICAgICB0eXBlOiB6OS5saXRlcmFsKFwiY3JlYXRlX2ZpbGVcIiksXG4gICAgICAgICAgcGF0aDogejkuc3RyaW5nKCksXG4gICAgICAgICAgZGlmZjogejkuc3RyaW5nKClcbiAgICAgICAgfSksXG4gICAgICAgIHo5Lm9iamVjdCh7XG4gICAgICAgICAgdHlwZTogejkubGl0ZXJhbChcImRlbGV0ZV9maWxlXCIpLFxuICAgICAgICAgIHBhdGg6IHo5LnN0cmluZygpXG4gICAgICAgIH0pLFxuICAgICAgICB6OS5vYmplY3Qoe1xuICAgICAgICAgIHR5cGU6IHo5LmxpdGVyYWwoXCJ1cGRhdGVfZmlsZVwiKSxcbiAgICAgICAgICBwYXRoOiB6OS5zdHJpbmcoKSxcbiAgICAgICAgICBkaWZmOiB6OS5zdHJpbmcoKVxuICAgICAgICB9KVxuICAgICAgXSlcbiAgICB9KVxuICApXG4pO1xudmFyIGFwcGx5UGF0Y2hPdXRwdXRTY2hlbWEgPSBsYXp5U2NoZW1hOChcbiAgKCkgPT4gem9kU2NoZW1hOChcbiAgICB6OS5vYmplY3Qoe1xuICAgICAgc3RhdHVzOiB6OS5lbnVtKFtcImNvbXBsZXRlZFwiLCBcImZhaWxlZFwiXSksXG4gICAgICBvdXRwdXQ6IHo5LnN0cmluZygpLm9wdGlvbmFsKClcbiAgICB9KVxuICApXG4pO1xudmFyIGFwcGx5UGF0Y2hBcmdzU2NoZW1hID0gbGF6eVNjaGVtYTgoKCkgPT4gem9kU2NoZW1hOCh6OS5vYmplY3Qoe30pKSk7XG52YXIgYXBwbHlQYXRjaFRvb2xGYWN0b3J5ID0gY3JlYXRlUHJvdmlkZXJUb29sRmFjdG9yeVdpdGhPdXRwdXRTY2hlbWEoe1xuICBpZDogXCJvcGVuYWkuYXBwbHlfcGF0Y2hcIixcbiAgaW5wdXRTY2hlbWE6IGFwcGx5UGF0Y2hJbnB1dFNjaGVtYSxcbiAgb3V0cHV0U2NoZW1hOiBhcHBseVBhdGNoT3V0cHV0U2NoZW1hXG59KTtcbnZhciBhcHBseVBhdGNoID0gYXBwbHlQYXRjaFRvb2xGYWN0b3J5O1xuXG4vLyBzcmMvdG9vbC9jb2RlLWludGVycHJldGVyLnRzXG5pbXBvcnQge1xuICBjcmVhdGVQcm92aWRlclRvb2xGYWN0b3J5V2l0aE91dHB1dFNjaGVtYSBhcyBjcmVhdGVQcm92aWRlclRvb2xGYWN0b3J5V2l0aE91dHB1dFNjaGVtYTIsXG4gIGxhenlTY2hlbWEgYXMgbGF6eVNjaGVtYTksXG4gIHpvZFNjaGVtYSBhcyB6b2RTY2hlbWE5XG59IGZyb20gXCJAYWktc2RrL3Byb3ZpZGVyLXV0aWxzXCI7XG5pbXBvcnQgeyB6IGFzIHoxMCB9IGZyb20gXCJ6b2QvdjRcIjtcbnZhciBjb2RlSW50ZXJwcmV0ZXJJbnB1dFNjaGVtYSA9IGxhenlTY2hlbWE5KFxuICAoKSA9PiB6b2RTY2hlbWE5KFxuICAgIHoxMC5vYmplY3Qoe1xuICAgICAgY29kZTogejEwLnN0cmluZygpLm51bGxpc2goKSxcbiAgICAgIGNvbnRhaW5lcklkOiB6MTAuc3RyaW5nKClcbiAgICB9KVxuICApXG4pO1xudmFyIGNvZGVJbnRlcnByZXRlck91dHB1dFNjaGVtYSA9IGxhenlTY2hlbWE5KFxuICAoKSA9PiB6b2RTY2hlbWE5KFxuICAgIHoxMC5vYmplY3Qoe1xuICAgICAgb3V0cHV0czogejEwLmFycmF5KFxuICAgICAgICB6MTAuZGlzY3JpbWluYXRlZFVuaW9uKFwidHlwZVwiLCBbXG4gICAgICAgICAgejEwLm9iamVjdCh7IHR5cGU6IHoxMC5saXRlcmFsKFwibG9nc1wiKSwgbG9nczogejEwLnN0cmluZygpIH0pLFxuICAgICAgICAgIHoxMC5vYmplY3QoeyB0eXBlOiB6MTAubGl0ZXJhbChcImltYWdlXCIpLCB1cmw6IHoxMC5zdHJpbmcoKSB9KVxuICAgICAgICBdKVxuICAgICAgKS5udWxsaXNoKClcbiAgICB9KVxuICApXG4pO1xudmFyIGNvZGVJbnRlcnByZXRlckFyZ3NTY2hlbWEgPSBsYXp5U2NoZW1hOShcbiAgKCkgPT4gem9kU2NoZW1hOShcbiAgICB6MTAub2JqZWN0KHtcbiAgICAgIGNvbnRhaW5lcjogejEwLnVuaW9uKFtcbiAgICAgICAgejEwLnN0cmluZygpLFxuICAgICAgICB6MTAub2JqZWN0KHtcbiAgICAgICAgICBmaWxlSWRzOiB6MTAuYXJyYXkoejEwLnN0cmluZygpKS5vcHRpb25hbCgpXG4gICAgICAgIH0pXG4gICAgICBdKS5vcHRpb25hbCgpXG4gICAgfSlcbiAgKVxuKTtcbnZhciBjb2RlSW50ZXJwcmV0ZXJUb29sRmFjdG9yeSA9IGNyZWF0ZVByb3ZpZGVyVG9vbEZhY3RvcnlXaXRoT3V0cHV0U2NoZW1hMih7XG4gIGlkOiBcIm9wZW5haS5jb2RlX2ludGVycHJldGVyXCIsXG4gIGlucHV0U2NoZW1hOiBjb2RlSW50ZXJwcmV0ZXJJbnB1dFNjaGVtYSxcbiAgb3V0cHV0U2NoZW1hOiBjb2RlSW50ZXJwcmV0ZXJPdXRwdXRTY2hlbWFcbn0pO1xudmFyIGNvZGVJbnRlcnByZXRlciA9IChhcmdzID0ge30pID0+IHtcbiAgcmV0dXJuIGNvZGVJbnRlcnByZXRlclRvb2xGYWN0b3J5KGFyZ3MpO1xufTtcblxuLy8gc3JjL3Rvb2wvZmlsZS1zZWFyY2gudHNcbmltcG9ydCB7XG4gIGNyZWF0ZVByb3ZpZGVyVG9vbEZhY3RvcnlXaXRoT3V0cHV0U2NoZW1hIGFzIGNyZWF0ZVByb3ZpZGVyVG9vbEZhY3RvcnlXaXRoT3V0cHV0U2NoZW1hMyxcbiAgbGF6eVNjaGVtYSBhcyBsYXp5U2NoZW1hMTAsXG4gIHpvZFNjaGVtYSBhcyB6b2RTY2hlbWExMFxufSBmcm9tIFwiQGFpLXNkay9wcm92aWRlci11dGlsc1wiO1xuaW1wb3J0IHsgeiBhcyB6MTEgfSBmcm9tIFwiem9kL3Y0XCI7XG52YXIgY29tcGFyaXNvbkZpbHRlclNjaGVtYSA9IHoxMS5vYmplY3Qoe1xuICBrZXk6IHoxMS5zdHJpbmcoKSxcbiAgdHlwZTogejExLmVudW0oW1wiZXFcIiwgXCJuZVwiLCBcImd0XCIsIFwiZ3RlXCIsIFwibHRcIiwgXCJsdGVcIiwgXCJpblwiLCBcIm5pblwiXSksXG4gIHZhbHVlOiB6MTEudW5pb24oW3oxMS5zdHJpbmcoKSwgejExLm51bWJlcigpLCB6MTEuYm9vbGVhbigpLCB6MTEuYXJyYXkoejExLnN0cmluZygpKV0pXG59KTtcbnZhciBjb21wb3VuZEZpbHRlclNjaGVtYSA9IHoxMS5vYmplY3Qoe1xuICB0eXBlOiB6MTEuZW51bShbXCJhbmRcIiwgXCJvclwiXSksXG4gIGZpbHRlcnM6IHoxMS5hcnJheShcbiAgICB6MTEudW5pb24oW2NvbXBhcmlzb25GaWx0ZXJTY2hlbWEsIHoxMS5sYXp5KCgpID0+IGNvbXBvdW5kRmlsdGVyU2NoZW1hKV0pXG4gIClcbn0pO1xudmFyIGZpbGVTZWFyY2hBcmdzU2NoZW1hID0gbGF6eVNjaGVtYTEwKFxuICAoKSA9PiB6b2RTY2hlbWExMChcbiAgICB6MTEub2JqZWN0KHtcbiAgICAgIHZlY3RvclN0b3JlSWRzOiB6MTEuYXJyYXkoejExLnN0cmluZygpKSxcbiAgICAgIG1heE51bVJlc3VsdHM6IHoxMS5udW1iZXIoKS5vcHRpb25hbCgpLFxuICAgICAgcmFua2luZzogejExLm9iamVjdCh7XG4gICAgICAgIHJhbmtlcjogejExLnN0cmluZygpLm9wdGlvbmFsKCksXG4gICAgICAgIHNjb3JlVGhyZXNob2xkOiB6MTEubnVtYmVyKCkub3B0aW9uYWwoKVxuICAgICAgfSkub3B0aW9uYWwoKSxcbiAgICAgIGZpbHRlcnM6IHoxMS51bmlvbihbY29tcGFyaXNvbkZpbHRlclNjaGVtYSwgY29tcG91bmRGaWx0ZXJTY2hlbWFdKS5vcHRpb25hbCgpXG4gICAgfSlcbiAgKVxuKTtcbnZhciBmaWxlU2VhcmNoT3V0cHV0U2NoZW1hID0gbGF6eVNjaGVtYTEwKFxuICAoKSA9PiB6b2RTY2hlbWExMChcbiAgICB6MTEub2JqZWN0KHtcbiAgICAgIHF1ZXJpZXM6IHoxMS5hcnJheSh6MTEuc3RyaW5nKCkpLFxuICAgICAgcmVzdWx0czogejExLmFycmF5KFxuICAgICAgICB6MTEub2JqZWN0KHtcbiAgICAgICAgICBhdHRyaWJ1dGVzOiB6MTEucmVjb3JkKHoxMS5zdHJpbmcoKSwgejExLnVua25vd24oKSksXG4gICAgICAgICAgZmlsZUlkOiB6MTEuc3RyaW5nKCksXG4gICAgICAgICAgZmlsZW5hbWU6IHoxMS5zdHJpbmcoKSxcbiAgICAgICAgICBzY29yZTogejExLm51bWJlcigpLFxuICAgICAgICAgIHRleHQ6IHoxMS5zdHJpbmcoKVxuICAgICAgICB9KVxuICAgICAgKS5udWxsYWJsZSgpXG4gICAgfSlcbiAgKVxuKTtcbnZhciBmaWxlU2VhcmNoID0gY3JlYXRlUHJvdmlkZXJUb29sRmFjdG9yeVdpdGhPdXRwdXRTY2hlbWEzKHtcbiAgaWQ6IFwib3BlbmFpLmZpbGVfc2VhcmNoXCIsXG4gIGlucHV0U2NoZW1hOiB6MTEub2JqZWN0KHt9KSxcbiAgb3V0cHV0U2NoZW1hOiBmaWxlU2VhcmNoT3V0cHV0U2NoZW1hXG59KTtcblxuLy8gc3JjL3Rvb2wvaW1hZ2UtZ2VuZXJhdGlvbi50c1xuaW1wb3J0IHtcbiAgY3JlYXRlUHJvdmlkZXJUb29sRmFjdG9yeVdpdGhPdXRwdXRTY2hlbWEgYXMgY3JlYXRlUHJvdmlkZXJUb29sRmFjdG9yeVdpdGhPdXRwdXRTY2hlbWE0LFxuICBsYXp5U2NoZW1hIGFzIGxhenlTY2hlbWExMSxcbiAgem9kU2NoZW1hIGFzIHpvZFNjaGVtYTExXG59IGZyb20gXCJAYWktc2RrL3Byb3ZpZGVyLXV0aWxzXCI7XG5pbXBvcnQgeyB6IGFzIHoxMiB9IGZyb20gXCJ6b2QvdjRcIjtcbnZhciBpbWFnZUdlbmVyYXRpb25BcmdzU2NoZW1hID0gbGF6eVNjaGVtYTExKFxuICAoKSA9PiB6b2RTY2hlbWExMShcbiAgICB6MTIub2JqZWN0KHtcbiAgICAgIGJhY2tncm91bmQ6IHoxMi5lbnVtKFtcImF1dG9cIiwgXCJvcGFxdWVcIiwgXCJ0cmFuc3BhcmVudFwiXSkub3B0aW9uYWwoKSxcbiAgICAgIGlucHV0RmlkZWxpdHk6IHoxMi5lbnVtKFtcImxvd1wiLCBcImhpZ2hcIl0pLm9wdGlvbmFsKCksXG4gICAgICBpbnB1dEltYWdlTWFzazogejEyLm9iamVjdCh7XG4gICAgICAgIGZpbGVJZDogejEyLnN0cmluZygpLm9wdGlvbmFsKCksXG4gICAgICAgIGltYWdlVXJsOiB6MTIuc3RyaW5nKCkub3B0aW9uYWwoKVxuICAgICAgfSkub3B0aW9uYWwoKSxcbiAgICAgIG1vZGVsOiB6MTIuc3RyaW5nKCkub3B0aW9uYWwoKSxcbiAgICAgIG1vZGVyYXRpb246IHoxMi5lbnVtKFtcImF1dG9cIl0pLm9wdGlvbmFsKCksXG4gICAgICBvdXRwdXRDb21wcmVzc2lvbjogejEyLm51bWJlcigpLmludCgpLm1pbigwKS5tYXgoMTAwKS5vcHRpb25hbCgpLFxuICAgICAgb3V0cHV0Rm9ybWF0OiB6MTIuZW51bShbXCJwbmdcIiwgXCJqcGVnXCIsIFwid2VicFwiXSkub3B0aW9uYWwoKSxcbiAgICAgIHBhcnRpYWxJbWFnZXM6IHoxMi5udW1iZXIoKS5pbnQoKS5taW4oMCkubWF4KDMpLm9wdGlvbmFsKCksXG4gICAgICBxdWFsaXR5OiB6MTIuZW51bShbXCJhdXRvXCIsIFwibG93XCIsIFwibWVkaXVtXCIsIFwiaGlnaFwiXSkub3B0aW9uYWwoKSxcbiAgICAgIHNpemU6IHoxMi5lbnVtKFtcIjEwMjR4MTAyNFwiLCBcIjEwMjR4MTUzNlwiLCBcIjE1MzZ4MTAyNFwiLCBcImF1dG9cIl0pLm9wdGlvbmFsKClcbiAgICB9KS5zdHJpY3QoKVxuICApXG4pO1xudmFyIGltYWdlR2VuZXJhdGlvbklucHV0U2NoZW1hID0gbGF6eVNjaGVtYTExKCgpID0+IHpvZFNjaGVtYTExKHoxMi5vYmplY3Qoe30pKSk7XG52YXIgaW1hZ2VHZW5lcmF0aW9uT3V0cHV0U2NoZW1hID0gbGF6eVNjaGVtYTExKFxuICAoKSA9PiB6b2RTY2hlbWExMSh6MTIub2JqZWN0KHsgcmVzdWx0OiB6MTIuc3RyaW5nKCkgfSkpXG4pO1xudmFyIGltYWdlR2VuZXJhdGlvblRvb2xGYWN0b3J5ID0gY3JlYXRlUHJvdmlkZXJUb29sRmFjdG9yeVdpdGhPdXRwdXRTY2hlbWE0KHtcbiAgaWQ6IFwib3BlbmFpLmltYWdlX2dlbmVyYXRpb25cIixcbiAgaW5wdXRTY2hlbWE6IGltYWdlR2VuZXJhdGlvbklucHV0U2NoZW1hLFxuICBvdXRwdXRTY2hlbWE6IGltYWdlR2VuZXJhdGlvbk91dHB1dFNjaGVtYVxufSk7XG52YXIgaW1hZ2VHZW5lcmF0aW9uID0gKGFyZ3MgPSB7fSkgPT4ge1xuICByZXR1cm4gaW1hZ2VHZW5lcmF0aW9uVG9vbEZhY3RvcnkoYXJncyk7XG59O1xuXG4vLyBzcmMvdG9vbC9sb2NhbC1zaGVsbC50c1xuaW1wb3J0IHtcbiAgY3JlYXRlUHJvdmlkZXJUb29sRmFjdG9yeVdpdGhPdXRwdXRTY2hlbWEgYXMgY3JlYXRlUHJvdmlkZXJUb29sRmFjdG9yeVdpdGhPdXRwdXRTY2hlbWE1LFxuICBsYXp5U2NoZW1hIGFzIGxhenlTY2hlbWExMixcbiAgem9kU2NoZW1hIGFzIHpvZFNjaGVtYTEyXG59IGZyb20gXCJAYWktc2RrL3Byb3ZpZGVyLXV0aWxzXCI7XG5pbXBvcnQgeyB6IGFzIHoxMyB9IGZyb20gXCJ6b2QvdjRcIjtcbnZhciBsb2NhbFNoZWxsSW5wdXRTY2hlbWEgPSBsYXp5U2NoZW1hMTIoXG4gICgpID0+IHpvZFNjaGVtYTEyKFxuICAgIHoxMy5vYmplY3Qoe1xuICAgICAgYWN0aW9uOiB6MTMub2JqZWN0KHtcbiAgICAgICAgdHlwZTogejEzLmxpdGVyYWwoXCJleGVjXCIpLFxuICAgICAgICBjb21tYW5kOiB6MTMuYXJyYXkoejEzLnN0cmluZygpKSxcbiAgICAgICAgdGltZW91dE1zOiB6MTMubnVtYmVyKCkub3B0aW9uYWwoKSxcbiAgICAgICAgdXNlcjogejEzLnN0cmluZygpLm9wdGlvbmFsKCksXG4gICAgICAgIHdvcmtpbmdEaXJlY3Rvcnk6IHoxMy5zdHJpbmcoKS5vcHRpb25hbCgpLFxuICAgICAgICBlbnY6IHoxMy5yZWNvcmQoejEzLnN0cmluZygpLCB6MTMuc3RyaW5nKCkpLm9wdGlvbmFsKClcbiAgICAgIH0pXG4gICAgfSlcbiAgKVxuKTtcbnZhciBsb2NhbFNoZWxsT3V0cHV0U2NoZW1hID0gbGF6eVNjaGVtYTEyKFxuICAoKSA9PiB6b2RTY2hlbWExMih6MTMub2JqZWN0KHsgb3V0cHV0OiB6MTMuc3RyaW5nKCkgfSkpXG4pO1xudmFyIGxvY2FsU2hlbGwgPSBjcmVhdGVQcm92aWRlclRvb2xGYWN0b3J5V2l0aE91dHB1dFNjaGVtYTUoe1xuICBpZDogXCJvcGVuYWkubG9jYWxfc2hlbGxcIixcbiAgaW5wdXRTY2hlbWE6IGxvY2FsU2hlbGxJbnB1dFNjaGVtYSxcbiAgb3V0cHV0U2NoZW1hOiBsb2NhbFNoZWxsT3V0cHV0U2NoZW1hXG59KTtcblxuLy8gc3JjL3Rvb2wvc2hlbGwudHNcbmltcG9ydCB7XG4gIGNyZWF0ZVByb3ZpZGVyVG9vbEZhY3RvcnlXaXRoT3V0cHV0U2NoZW1hIGFzIGNyZWF0ZVByb3ZpZGVyVG9vbEZhY3RvcnlXaXRoT3V0cHV0U2NoZW1hNixcbiAgbGF6eVNjaGVtYSBhcyBsYXp5U2NoZW1hMTMsXG4gIHpvZFNjaGVtYSBhcyB6b2RTY2hlbWExM1xufSBmcm9tIFwiQGFpLXNkay9wcm92aWRlci11dGlsc1wiO1xuaW1wb3J0IHsgeiBhcyB6MTQgfSBmcm9tIFwiem9kL3Y0XCI7XG52YXIgc2hlbGxJbnB1dFNjaGVtYSA9IGxhenlTY2hlbWExMyhcbiAgKCkgPT4gem9kU2NoZW1hMTMoXG4gICAgejE0Lm9iamVjdCh7XG4gICAgICBhY3Rpb246IHoxNC5vYmplY3Qoe1xuICAgICAgICBjb21tYW5kczogejE0LmFycmF5KHoxNC5zdHJpbmcoKSksXG4gICAgICAgIHRpbWVvdXRNczogejE0Lm51bWJlcigpLm9wdGlvbmFsKCksXG4gICAgICAgIG1heE91dHB1dExlbmd0aDogejE0Lm51bWJlcigpLm9wdGlvbmFsKClcbiAgICAgIH0pXG4gICAgfSlcbiAgKVxuKTtcbnZhciBzaGVsbE91dHB1dFNjaGVtYSA9IGxhenlTY2hlbWExMyhcbiAgKCkgPT4gem9kU2NoZW1hMTMoXG4gICAgejE0Lm9iamVjdCh7XG4gICAgICBvdXRwdXQ6IHoxNC5hcnJheShcbiAgICAgICAgejE0Lm9iamVjdCh7XG4gICAgICAgICAgc3Rkb3V0OiB6MTQuc3RyaW5nKCksXG4gICAgICAgICAgc3RkZXJyOiB6MTQuc3RyaW5nKCksXG4gICAgICAgICAgb3V0Y29tZTogejE0LmRpc2NyaW1pbmF0ZWRVbmlvbihcInR5cGVcIiwgW1xuICAgICAgICAgICAgejE0Lm9iamVjdCh7IHR5cGU6IHoxNC5saXRlcmFsKFwidGltZW91dFwiKSB9KSxcbiAgICAgICAgICAgIHoxNC5vYmplY3QoeyB0eXBlOiB6MTQubGl0ZXJhbChcImV4aXRcIiksIGV4aXRDb2RlOiB6MTQubnVtYmVyKCkgfSlcbiAgICAgICAgICBdKVxuICAgICAgICB9KVxuICAgICAgKVxuICAgIH0pXG4gIClcbik7XG52YXIgc2hlbGwgPSBjcmVhdGVQcm92aWRlclRvb2xGYWN0b3J5V2l0aE91dHB1dFNjaGVtYTYoe1xuICBpZDogXCJvcGVuYWkuc2hlbGxcIixcbiAgaW5wdXRTY2hlbWE6IHNoZWxsSW5wdXRTY2hlbWEsXG4gIG91dHB1dFNjaGVtYTogc2hlbGxPdXRwdXRTY2hlbWFcbn0pO1xuXG4vLyBzcmMvdG9vbC93ZWItc2VhcmNoLnRzXG5pbXBvcnQge1xuICBjcmVhdGVQcm92aWRlclRvb2xGYWN0b3J5V2l0aE91dHB1dFNjaGVtYSBhcyBjcmVhdGVQcm92aWRlclRvb2xGYWN0b3J5V2l0aE91dHB1dFNjaGVtYTcsXG4gIGxhenlTY2hlbWEgYXMgbGF6eVNjaGVtYTE0LFxuICB6b2RTY2hlbWEgYXMgem9kU2NoZW1hMTRcbn0gZnJvbSBcIkBhaS1zZGsvcHJvdmlkZXItdXRpbHNcIjtcbmltcG9ydCB7IHogYXMgejE1IH0gZnJvbSBcInpvZC92NFwiO1xudmFyIHdlYlNlYXJjaEFyZ3NTY2hlbWEgPSBsYXp5U2NoZW1hMTQoXG4gICgpID0+IHpvZFNjaGVtYTE0KFxuICAgIHoxNS5vYmplY3Qoe1xuICAgICAgZXh0ZXJuYWxXZWJBY2Nlc3M6IHoxNS5ib29sZWFuKCkub3B0aW9uYWwoKSxcbiAgICAgIGZpbHRlcnM6IHoxNS5vYmplY3QoeyBhbGxvd2VkRG9tYWluczogejE1LmFycmF5KHoxNS5zdHJpbmcoKSkub3B0aW9uYWwoKSB9KS5vcHRpb25hbCgpLFxuICAgICAgc2VhcmNoQ29udGV4dFNpemU6IHoxNS5lbnVtKFtcImxvd1wiLCBcIm1lZGl1bVwiLCBcImhpZ2hcIl0pLm9wdGlvbmFsKCksXG4gICAgICB1c2VyTG9jYXRpb246IHoxNS5vYmplY3Qoe1xuICAgICAgICB0eXBlOiB6MTUubGl0ZXJhbChcImFwcHJveGltYXRlXCIpLFxuICAgICAgICBjb3VudHJ5OiB6MTUuc3RyaW5nKCkub3B0aW9uYWwoKSxcbiAgICAgICAgY2l0eTogejE1LnN0cmluZygpLm9wdGlvbmFsKCksXG4gICAgICAgIHJlZ2lvbjogejE1LnN0cmluZygpLm9wdGlvbmFsKCksXG4gICAgICAgIHRpbWV6b25lOiB6MTUuc3RyaW5nKCkub3B0aW9uYWwoKVxuICAgICAgfSkub3B0aW9uYWwoKVxuICAgIH0pXG4gIClcbik7XG52YXIgd2ViU2VhcmNoSW5wdXRTY2hlbWEgPSBsYXp5U2NoZW1hMTQoKCkgPT4gem9kU2NoZW1hMTQoejE1Lm9iamVjdCh7fSkpKTtcbnZhciB3ZWJTZWFyY2hPdXRwdXRTY2hlbWEgPSBsYXp5U2NoZW1hMTQoXG4gICgpID0+IHpvZFNjaGVtYTE0KFxuICAgIHoxNS5vYmplY3Qoe1xuICAgICAgYWN0aW9uOiB6MTUuZGlzY3JpbWluYXRlZFVuaW9uKFwidHlwZVwiLCBbXG4gICAgICAgIHoxNS5vYmplY3Qoe1xuICAgICAgICAgIHR5cGU6IHoxNS5saXRlcmFsKFwic2VhcmNoXCIpLFxuICAgICAgICAgIHF1ZXJ5OiB6MTUuc3RyaW5nKCkub3B0aW9uYWwoKVxuICAgICAgICB9KSxcbiAgICAgICAgejE1Lm9iamVjdCh7XG4gICAgICAgICAgdHlwZTogejE1LmxpdGVyYWwoXCJvcGVuUGFnZVwiKSxcbiAgICAgICAgICB1cmw6IHoxNS5zdHJpbmcoKS5udWxsaXNoKClcbiAgICAgICAgfSksXG4gICAgICAgIHoxNS5vYmplY3Qoe1xuICAgICAgICAgIHR5cGU6IHoxNS5saXRlcmFsKFwiZmluZEluUGFnZVwiKSxcbiAgICAgICAgICB1cmw6IHoxNS5zdHJpbmcoKS5udWxsaXNoKCksXG4gICAgICAgICAgcGF0dGVybjogejE1LnN0cmluZygpLm51bGxpc2goKVxuICAgICAgICB9KVxuICAgICAgXSksXG4gICAgICBzb3VyY2VzOiB6MTUuYXJyYXkoXG4gICAgICAgIHoxNS5kaXNjcmltaW5hdGVkVW5pb24oXCJ0eXBlXCIsIFtcbiAgICAgICAgICB6MTUub2JqZWN0KHsgdHlwZTogejE1LmxpdGVyYWwoXCJ1cmxcIiksIHVybDogejE1LnN0cmluZygpIH0pLFxuICAgICAgICAgIHoxNS5vYmplY3QoeyB0eXBlOiB6MTUubGl0ZXJhbChcImFwaVwiKSwgbmFtZTogejE1LnN0cmluZygpIH0pXG4gICAgICAgIF0pXG4gICAgICApLm9wdGlvbmFsKClcbiAgICB9KVxuICApXG4pO1xudmFyIHdlYlNlYXJjaFRvb2xGYWN0b3J5ID0gY3JlYXRlUHJvdmlkZXJUb29sRmFjdG9yeVdpdGhPdXRwdXRTY2hlbWE3KHtcbiAgaWQ6IFwib3BlbmFpLndlYl9zZWFyY2hcIixcbiAgaW5wdXRTY2hlbWE6IHdlYlNlYXJjaElucHV0U2NoZW1hLFxuICBvdXRwdXRTY2hlbWE6IHdlYlNlYXJjaE91dHB1dFNjaGVtYVxufSk7XG52YXIgd2ViU2VhcmNoID0gKGFyZ3MgPSB7fSkgPT4gd2ViU2VhcmNoVG9vbEZhY3RvcnkoYXJncyk7XG5cbi8vIHNyYy90b29sL3dlYi1zZWFyY2gtcHJldmlldy50c1xuaW1wb3J0IHtcbiAgY3JlYXRlUHJvdmlkZXJUb29sRmFjdG9yeVdpdGhPdXRwdXRTY2hlbWEgYXMgY3JlYXRlUHJvdmlkZXJUb29sRmFjdG9yeVdpdGhPdXRwdXRTY2hlbWE4LFxuICBsYXp5U2NoZW1hIGFzIGxhenlTY2hlbWExNSxcbiAgem9kU2NoZW1hIGFzIHpvZFNjaGVtYTE1XG59IGZyb20gXCJAYWktc2RrL3Byb3ZpZGVyLXV0aWxzXCI7XG5pbXBvcnQgeyB6IGFzIHoxNiB9IGZyb20gXCJ6b2QvdjRcIjtcbnZhciB3ZWJTZWFyY2hQcmV2aWV3QXJnc1NjaGVtYSA9IGxhenlTY2hlbWExNShcbiAgKCkgPT4gem9kU2NoZW1hMTUoXG4gICAgejE2Lm9iamVjdCh7XG4gICAgICBzZWFyY2hDb250ZXh0U2l6ZTogejE2LmVudW0oW1wibG93XCIsIFwibWVkaXVtXCIsIFwiaGlnaFwiXSkub3B0aW9uYWwoKSxcbiAgICAgIHVzZXJMb2NhdGlvbjogejE2Lm9iamVjdCh7XG4gICAgICAgIHR5cGU6IHoxNi5saXRlcmFsKFwiYXBwcm94aW1hdGVcIiksXG4gICAgICAgIGNvdW50cnk6IHoxNi5zdHJpbmcoKS5vcHRpb25hbCgpLFxuICAgICAgICBjaXR5OiB6MTYuc3RyaW5nKCkub3B0aW9uYWwoKSxcbiAgICAgICAgcmVnaW9uOiB6MTYuc3RyaW5nKCkub3B0aW9uYWwoKSxcbiAgICAgICAgdGltZXpvbmU6IHoxNi5zdHJpbmcoKS5vcHRpb25hbCgpXG4gICAgICB9KS5vcHRpb25hbCgpXG4gICAgfSlcbiAgKVxuKTtcbnZhciB3ZWJTZWFyY2hQcmV2aWV3SW5wdXRTY2hlbWEgPSBsYXp5U2NoZW1hMTUoXG4gICgpID0+IHpvZFNjaGVtYTE1KHoxNi5vYmplY3Qoe30pKVxuKTtcbnZhciB3ZWJTZWFyY2hQcmV2aWV3T3V0cHV0U2NoZW1hID0gbGF6eVNjaGVtYTE1KFxuICAoKSA9PiB6b2RTY2hlbWExNShcbiAgICB6MTYub2JqZWN0KHtcbiAgICAgIGFjdGlvbjogejE2LmRpc2NyaW1pbmF0ZWRVbmlvbihcInR5cGVcIiwgW1xuICAgICAgICB6MTYub2JqZWN0KHtcbiAgICAgICAgICB0eXBlOiB6MTYubGl0ZXJhbChcInNlYXJjaFwiKSxcbiAgICAgICAgICBxdWVyeTogejE2LnN0cmluZygpLm9wdGlvbmFsKClcbiAgICAgICAgfSksXG4gICAgICAgIHoxNi5vYmplY3Qoe1xuICAgICAgICAgIHR5cGU6IHoxNi5saXRlcmFsKFwib3BlblBhZ2VcIiksXG4gICAgICAgICAgdXJsOiB6MTYuc3RyaW5nKCkubnVsbGlzaCgpXG4gICAgICAgIH0pLFxuICAgICAgICB6MTYub2JqZWN0KHtcbiAgICAgICAgICB0eXBlOiB6MTYubGl0ZXJhbChcImZpbmRJblBhZ2VcIiksXG4gICAgICAgICAgdXJsOiB6MTYuc3RyaW5nKCkubnVsbGlzaCgpLFxuICAgICAgICAgIHBhdHRlcm46IHoxNi5zdHJpbmcoKS5udWxsaXNoKClcbiAgICAgICAgfSlcbiAgICAgIF0pXG4gICAgfSlcbiAgKVxuKTtcbnZhciB3ZWJTZWFyY2hQcmV2aWV3ID0gY3JlYXRlUHJvdmlkZXJUb29sRmFjdG9yeVdpdGhPdXRwdXRTY2hlbWE4KHtcbiAgaWQ6IFwib3BlbmFpLndlYl9zZWFyY2hfcHJldmlld1wiLFxuICBpbnB1dFNjaGVtYTogd2ViU2VhcmNoUHJldmlld0lucHV0U2NoZW1hLFxuICBvdXRwdXRTY2hlbWE6IHdlYlNlYXJjaFByZXZpZXdPdXRwdXRTY2hlbWFcbn0pO1xuXG4vLyBzcmMvdG9vbC9tY3AudHNcbmltcG9ydCB7XG4gIGNyZWF0ZVByb3ZpZGVyVG9vbEZhY3RvcnlXaXRoT3V0cHV0U2NoZW1hIGFzIGNyZWF0ZVByb3ZpZGVyVG9vbEZhY3RvcnlXaXRoT3V0cHV0U2NoZW1hOSxcbiAgbGF6eVNjaGVtYSBhcyBsYXp5U2NoZW1hMTYsXG4gIHpvZFNjaGVtYSBhcyB6b2RTY2hlbWExNlxufSBmcm9tIFwiQGFpLXNkay9wcm92aWRlci11dGlsc1wiO1xuaW1wb3J0IHsgeiBhcyB6MTcgfSBmcm9tIFwiem9kL3Y0XCI7XG52YXIganNvblZhbHVlU2NoZW1hID0gejE3LmxhenkoXG4gICgpID0+IHoxNy51bmlvbihbXG4gICAgejE3LnN0cmluZygpLFxuICAgIHoxNy5udW1iZXIoKSxcbiAgICB6MTcuYm9vbGVhbigpLFxuICAgIHoxNy5udWxsKCksXG4gICAgejE3LmFycmF5KGpzb25WYWx1ZVNjaGVtYSksXG4gICAgejE3LnJlY29yZCh6MTcuc3RyaW5nKCksIGpzb25WYWx1ZVNjaGVtYSlcbiAgXSlcbik7XG52YXIgbWNwQXJnc1NjaGVtYSA9IGxhenlTY2hlbWExNihcbiAgKCkgPT4gem9kU2NoZW1hMTYoXG4gICAgejE3Lm9iamVjdCh7XG4gICAgICBzZXJ2ZXJMYWJlbDogejE3LnN0cmluZygpLFxuICAgICAgYWxsb3dlZFRvb2xzOiB6MTcudW5pb24oW1xuICAgICAgICB6MTcuYXJyYXkoejE3LnN0cmluZygpKSxcbiAgICAgICAgejE3Lm9iamVjdCh7XG4gICAgICAgICAgcmVhZE9ubHk6IHoxNy5ib29sZWFuKCkub3B0aW9uYWwoKSxcbiAgICAgICAgICB0b29sTmFtZXM6IHoxNy5hcnJheSh6MTcuc3RyaW5nKCkpLm9wdGlvbmFsKClcbiAgICAgICAgfSlcbiAgICAgIF0pLm9wdGlvbmFsKCksXG4gICAgICBhdXRob3JpemF0aW9uOiB6MTcuc3RyaW5nKCkub3B0aW9uYWwoKSxcbiAgICAgIGNvbm5lY3RvcklkOiB6MTcuc3RyaW5nKCkub3B0aW9uYWwoKSxcbiAgICAgIGhlYWRlcnM6IHoxNy5yZWNvcmQoejE3LnN0cmluZygpLCB6MTcuc3RyaW5nKCkpLm9wdGlvbmFsKCksXG4gICAgICByZXF1aXJlQXBwcm92YWw6IHoxNy51bmlvbihbXG4gICAgICAgIHoxNy5lbnVtKFtcImFsd2F5c1wiLCBcIm5ldmVyXCJdKSxcbiAgICAgICAgejE3Lm9iamVjdCh7XG4gICAgICAgICAgbmV2ZXI6IHoxNy5vYmplY3Qoe1xuICAgICAgICAgICAgdG9vbE5hbWVzOiB6MTcuYXJyYXkoejE3LnN0cmluZygpKS5vcHRpb25hbCgpXG4gICAgICAgICAgfSkub3B0aW9uYWwoKVxuICAgICAgICB9KVxuICAgICAgXSkub3B0aW9uYWwoKSxcbiAgICAgIHNlcnZlckRlc2NyaXB0aW9uOiB6MTcuc3RyaW5nKCkub3B0aW9uYWwoKSxcbiAgICAgIHNlcnZlclVybDogejE3LnN0cmluZygpLm9wdGlvbmFsKClcbiAgICB9KS5yZWZpbmUoXG4gICAgICAodikgPT4gdi5zZXJ2ZXJVcmwgIT0gbnVsbCB8fCB2LmNvbm5lY3RvcklkICE9IG51bGwsXG4gICAgICBcIk9uZSBvZiBzZXJ2ZXJVcmwgb3IgY29ubmVjdG9ySWQgbXVzdCBiZSBwcm92aWRlZC5cIlxuICAgIClcbiAgKVxuKTtcbnZhciBtY3BJbnB1dFNjaGVtYSA9IGxhenlTY2hlbWExNigoKSA9PiB6b2RTY2hlbWExNih6MTcub2JqZWN0KHt9KSkpO1xudmFyIG1jcE91dHB1dFNjaGVtYSA9IGxhenlTY2hlbWExNihcbiAgKCkgPT4gem9kU2NoZW1hMTYoXG4gICAgejE3Lm9iamVjdCh7XG4gICAgICB0eXBlOiB6MTcubGl0ZXJhbChcImNhbGxcIiksXG4gICAgICBzZXJ2ZXJMYWJlbDogejE3LnN0cmluZygpLFxuICAgICAgbmFtZTogejE3LnN0cmluZygpLFxuICAgICAgYXJndW1lbnRzOiB6MTcuc3RyaW5nKCksXG4gICAgICBvdXRwdXQ6IHoxNy5zdHJpbmcoKS5udWxsaXNoKCksXG4gICAgICBlcnJvcjogejE3LnVuaW9uKFt6MTcuc3RyaW5nKCksIGpzb25WYWx1ZVNjaGVtYV0pLm9wdGlvbmFsKClcbiAgICB9KVxuICApXG4pO1xudmFyIG1jcFRvb2xGYWN0b3J5ID0gY3JlYXRlUHJvdmlkZXJUb29sRmFjdG9yeVdpdGhPdXRwdXRTY2hlbWE5KHtcbiAgaWQ6IFwib3BlbmFpLm1jcFwiLFxuICBpbnB1dFNjaGVtYTogbWNwSW5wdXRTY2hlbWEsXG4gIG91dHB1dFNjaGVtYTogbWNwT3V0cHV0U2NoZW1hXG59KTtcbnZhciBtY3AgPSAoYXJncykgPT4gbWNwVG9vbEZhY3RvcnkoYXJncyk7XG5cbi8vIHNyYy9vcGVuYWktdG9vbHMudHNcbnZhciBvcGVuYWlUb29scyA9IHtcbiAgLyoqXG4gICAqIFRoZSBhcHBseV9wYXRjaCB0b29sIGxldHMgR1BULTUuMSBjcmVhdGUsIHVwZGF0ZSwgYW5kIGRlbGV0ZSBmaWxlcyBpbiB5b3VyXG4gICAqIGNvZGViYXNlIHVzaW5nIHN0cnVjdHVyZWQgZGlmZnMuIEluc3RlYWQgb2YganVzdCBzdWdnZXN0aW5nIGVkaXRzLCB0aGUgbW9kZWxcbiAgICogZW1pdHMgcGF0Y2ggb3BlcmF0aW9ucyB0aGF0IHlvdXIgYXBwbGljYXRpb24gYXBwbGllcyBhbmQgdGhlbiByZXBvcnRzIGJhY2sgb24sXG4gICAqIGVuYWJsaW5nIGl0ZXJhdGl2ZSwgbXVsdGktc3RlcCBjb2RlIGVkaXRpbmcgd29ya2Zsb3dzLlxuICAgKlxuICAgKi9cbiAgYXBwbHlQYXRjaCxcbiAgLyoqXG4gICAqIFRoZSBDb2RlIEludGVycHJldGVyIHRvb2wgYWxsb3dzIG1vZGVscyB0byB3cml0ZSBhbmQgcnVuIFB5dGhvbiBjb2RlIGluIGFcbiAgICogc2FuZGJveGVkIGVudmlyb25tZW50IHRvIHNvbHZlIGNvbXBsZXggcHJvYmxlbXMgaW4gZG9tYWlucyBsaWtlIGRhdGEgYW5hbHlzaXMsXG4gICAqIGNvZGluZywgYW5kIG1hdGguXG4gICAqXG4gICAqIEBwYXJhbSBjb250YWluZXIgLSBUaGUgY29udGFpbmVyIHRvIHVzZSBmb3IgdGhlIGNvZGUgaW50ZXJwcmV0ZXIuXG4gICAqL1xuICBjb2RlSW50ZXJwcmV0ZXIsXG4gIC8qKlxuICAgKiBGaWxlIHNlYXJjaCBpcyBhIHRvb2wgYXZhaWxhYmxlIGluIHRoZSBSZXNwb25zZXMgQVBJLiBJdCBlbmFibGVzIG1vZGVscyB0b1xuICAgKiByZXRyaWV2ZSBpbmZvcm1hdGlvbiBpbiBhIGtub3dsZWRnZSBiYXNlIG9mIHByZXZpb3VzbHkgdXBsb2FkZWQgZmlsZXMgdGhyb3VnaFxuICAgKiBzZW1hbnRpYyBhbmQga2V5d29yZCBzZWFyY2guXG4gICAqXG4gICAqIEBwYXJhbSB2ZWN0b3JTdG9yZUlkcyAtIFRoZSB2ZWN0b3Igc3RvcmUgSURzIHRvIHVzZSBmb3IgdGhlIGZpbGUgc2VhcmNoLlxuICAgKiBAcGFyYW0gbWF4TnVtUmVzdWx0cyAtIFRoZSBtYXhpbXVtIG51bWJlciBvZiByZXN1bHRzIHRvIHJldHVybi5cbiAgICogQHBhcmFtIHJhbmtpbmcgLSBUaGUgcmFua2luZyBvcHRpb25zIHRvIHVzZSBmb3IgdGhlIGZpbGUgc2VhcmNoLlxuICAgKiBAcGFyYW0gZmlsdGVycyAtIFRoZSBmaWx0ZXJzIHRvIHVzZSBmb3IgdGhlIGZpbGUgc2VhcmNoLlxuICAgKi9cbiAgZmlsZVNlYXJjaCxcbiAgLyoqXG4gICAqIFRoZSBpbWFnZSBnZW5lcmF0aW9uIHRvb2wgYWxsb3dzIHlvdSB0byBnZW5lcmF0ZSBpbWFnZXMgdXNpbmcgYSB0ZXh0IHByb21wdCxcbiAgICogYW5kIG9wdGlvbmFsbHkgaW1hZ2UgaW5wdXRzLiBJdCBsZXZlcmFnZXMgdGhlIEdQVCBJbWFnZSBtb2RlbCxcbiAgICogYW5kIGF1dG9tYXRpY2FsbHkgb3B0aW1pemVzIHRleHQgaW5wdXRzIGZvciBpbXByb3ZlZCBwZXJmb3JtYW5jZS5cbiAgICpcbiAgICogQHBhcmFtIGJhY2tncm91bmQgLSBCYWNrZ3JvdW5kIHR5cGUgZm9yIHRoZSBnZW5lcmF0ZWQgaW1hZ2UuIE9uZSBvZiAnYXV0bycsICdvcGFxdWUnLCBvciAndHJhbnNwYXJlbnQnLlxuICAgKiBAcGFyYW0gaW5wdXRGaWRlbGl0eSAtIElucHV0IGZpZGVsaXR5IGZvciB0aGUgZ2VuZXJhdGVkIGltYWdlLiBPbmUgb2YgJ2xvdycgb3IgJ2hpZ2gnLlxuICAgKiBAcGFyYW0gaW5wdXRJbWFnZU1hc2sgLSBPcHRpb25hbCBtYXNrIGZvciBpbnBhaW50aW5nLiBDb250YWlucyBmaWxlSWQgYW5kL29yIGltYWdlVXJsLlxuICAgKiBAcGFyYW0gbW9kZWwgLSBUaGUgaW1hZ2UgZ2VuZXJhdGlvbiBtb2RlbCB0byB1c2UuIERlZmF1bHQ6IGdwdC1pbWFnZS0xLlxuICAgKiBAcGFyYW0gbW9kZXJhdGlvbiAtIE1vZGVyYXRpb24gbGV2ZWwgZm9yIHRoZSBnZW5lcmF0ZWQgaW1hZ2UuIERlZmF1bHQ6ICdhdXRvJy5cbiAgICogQHBhcmFtIG91dHB1dENvbXByZXNzaW9uIC0gQ29tcHJlc3Npb24gbGV2ZWwgZm9yIHRoZSBvdXRwdXQgaW1hZ2UgKDAtMTAwKS5cbiAgICogQHBhcmFtIG91dHB1dEZvcm1hdCAtIFRoZSBvdXRwdXQgZm9ybWF0IG9mIHRoZSBnZW5lcmF0ZWQgaW1hZ2UuIE9uZSBvZiAncG5nJywgJ2pwZWcnLCBvciAnd2VicCcuXG4gICAqIEBwYXJhbSBwYXJ0aWFsSW1hZ2VzIC0gTnVtYmVyIG9mIHBhcnRpYWwgaW1hZ2VzIHRvIGdlbmVyYXRlIGluIHN0cmVhbWluZyBtb2RlICgwLTMpLlxuICAgKiBAcGFyYW0gcXVhbGl0eSAtIFRoZSBxdWFsaXR5IG9mIHRoZSBnZW5lcmF0ZWQgaW1hZ2UuIE9uZSBvZiAnYXV0bycsICdsb3cnLCAnbWVkaXVtJywgb3IgJ2hpZ2gnLlxuICAgKiBAcGFyYW0gc2l6ZSAtIFRoZSBzaXplIG9mIHRoZSBnZW5lcmF0ZWQgaW1hZ2UuIE9uZSBvZiAnYXV0bycsICcxMDI0eDEwMjQnLCAnMTAyNHgxNTM2Jywgb3IgJzE1MzZ4MTAyNCcuXG4gICAqL1xuICBpbWFnZUdlbmVyYXRpb24sXG4gIC8qKlxuICAgKiBMb2NhbCBzaGVsbCBpcyBhIHRvb2wgdGhhdCBhbGxvd3MgYWdlbnRzIHRvIHJ1biBzaGVsbCBjb21tYW5kcyBsb2NhbGx5XG4gICAqIG9uIGEgbWFjaGluZSB5b3Ugb3IgdGhlIHVzZXIgcHJvdmlkZXMuXG4gICAqXG4gICAqIFN1cHBvcnRlZCBtb2RlbHM6IGBncHQtNS1jb2RleGAgYW5kIGBjb2RleC1taW5pLWxhdGVzdGBcbiAgICovXG4gIGxvY2FsU2hlbGwsXG4gIC8qKlxuICAgKiBUaGUgc2hlbGwgdG9vbCBhbGxvd3MgdGhlIG1vZGVsIHRvIGludGVyYWN0IHdpdGggeW91ciBsb2NhbCBjb21wdXRlciB0aHJvdWdoXG4gICAqIGEgY29udHJvbGxlZCBjb21tYW5kLWxpbmUgaW50ZXJmYWNlLiBUaGUgbW9kZWwgcHJvcG9zZXMgc2hlbGwgY29tbWFuZHM7IHlvdXJcbiAgICogaW50ZWdyYXRpb24gZXhlY3V0ZXMgdGhlbSBhbmQgcmV0dXJucyB0aGUgb3V0cHV0cy5cbiAgICpcbiAgICogQXZhaWxhYmxlIHRocm91Z2ggdGhlIFJlc3BvbnNlcyBBUEkgZm9yIHVzZSB3aXRoIEdQVC01LjEuXG4gICAqXG4gICAqIFdBUk5JTkc6IFJ1bm5pbmcgYXJiaXRyYXJ5IHNoZWxsIGNvbW1hbmRzIGNhbiBiZSBkYW5nZXJvdXMuIEFsd2F5cyBzYW5kYm94XG4gICAqIGV4ZWN1dGlvbiBvciBhZGQgc3RyaWN0IGFsbG93LS9kZW55LWxpc3RzIGJlZm9yZSBmb3J3YXJkaW5nIGEgY29tbWFuZCB0b1xuICAgKiB0aGUgc3lzdGVtIHNoZWxsLlxuICAgKi9cbiAgc2hlbGwsXG4gIC8qKlxuICAgKiBXZWIgc2VhcmNoIGFsbG93cyBtb2RlbHMgdG8gYWNjZXNzIHVwLXRvLWRhdGUgaW5mb3JtYXRpb24gZnJvbSB0aGUgaW50ZXJuZXRcbiAgICogYW5kIHByb3ZpZGUgYW5zd2VycyB3aXRoIHNvdXJjZWQgY2l0YXRpb25zLlxuICAgKlxuICAgKiBAcGFyYW0gc2VhcmNoQ29udGV4dFNpemUgLSBUaGUgc2VhcmNoIGNvbnRleHQgc2l6ZSB0byB1c2UgZm9yIHRoZSB3ZWIgc2VhcmNoLlxuICAgKiBAcGFyYW0gdXNlckxvY2F0aW9uIC0gVGhlIHVzZXIgbG9jYXRpb24gdG8gdXNlIGZvciB0aGUgd2ViIHNlYXJjaC5cbiAgICovXG4gIHdlYlNlYXJjaFByZXZpZXcsXG4gIC8qKlxuICAgKiBXZWIgc2VhcmNoIGFsbG93cyBtb2RlbHMgdG8gYWNjZXNzIHVwLXRvLWRhdGUgaW5mb3JtYXRpb24gZnJvbSB0aGUgaW50ZXJuZXRcbiAgICogYW5kIHByb3ZpZGUgYW5zd2VycyB3aXRoIHNvdXJjZWQgY2l0YXRpb25zLlxuICAgKlxuICAgKiBAcGFyYW0gZmlsdGVycyAtIFRoZSBmaWx0ZXJzIHRvIHVzZSBmb3IgdGhlIHdlYiBzZWFyY2guXG4gICAqIEBwYXJhbSBzZWFyY2hDb250ZXh0U2l6ZSAtIFRoZSBzZWFyY2ggY29udGV4dCBzaXplIHRvIHVzZSBmb3IgdGhlIHdlYiBzZWFyY2guXG4gICAqIEBwYXJhbSB1c2VyTG9jYXRpb24gLSBUaGUgdXNlciBsb2NhdGlvbiB0byB1c2UgZm9yIHRoZSB3ZWIgc2VhcmNoLlxuICAgKi9cbiAgd2ViU2VhcmNoLFxuICAvKipcbiAgICogTUNQIChNb2RlbCBDb250ZXh0IFByb3RvY29sKSBhbGxvd3MgbW9kZWxzIHRvIGNhbGwgdG9vbHMgZXhwb3NlZCBieVxuICAgKiByZW1vdGUgTUNQIHNlcnZlcnMgb3Igc2VydmljZSBjb25uZWN0b3JzLlxuICAgKlxuICAgKiBAcGFyYW0gc2VydmVyTGFiZWwgLSBMYWJlbCB0byBpZGVudGlmeSB0aGUgTUNQIHNlcnZlci5cbiAgICogQHBhcmFtIGFsbG93ZWRUb29scyAtIEFsbG93ZWQgdG9vbCBuYW1lcyBvciBmaWx0ZXIgb2JqZWN0LlxuICAgKiBAcGFyYW0gYXV0aG9yaXphdGlvbiAtIE9BdXRoIGFjY2VzcyB0b2tlbiBmb3IgdGhlIE1DUCBzZXJ2ZXIvY29ubmVjdG9yLlxuICAgKiBAcGFyYW0gY29ubmVjdG9ySWQgLSBJZGVudGlmaWVyIGZvciBhIHNlcnZpY2UgY29ubmVjdG9yLlxuICAgKiBAcGFyYW0gaGVhZGVycyAtIE9wdGlvbmFsIGhlYWRlcnMgdG8gaW5jbHVkZSBpbiBNQ1AgcmVxdWVzdHMuXG4gICAqIC8vIHBhcmFtIHJlcXVpcmVBcHByb3ZhbCAtIEFwcHJvdmFsIHBvbGljeSAoJ2Fsd2F5cyd8J25ldmVyJ3xmaWx0ZXIgb2JqZWN0KS4gKFJlbW92ZWQgLSBhbHdheXMgJ25ldmVyJylcbiAgICogQHBhcmFtIHNlcnZlckRlc2NyaXB0aW9uIC0gT3B0aW9uYWwgZGVzY3JpcHRpb24gb2YgdGhlIHNlcnZlci5cbiAgICogQHBhcmFtIHNlcnZlclVybCAtIFVSTCBmb3IgdGhlIE1DUCBzZXJ2ZXIuXG4gICAqL1xuICBtY3Bcbn07XG5cbi8vIHNyYy9yZXNwb25zZXMvb3BlbmFpLXJlc3BvbnNlcy1sYW5ndWFnZS1tb2RlbC50c1xuaW1wb3J0IHtcbiAgQVBJQ2FsbEVycm9yXG59IGZyb20gXCJAYWktc2RrL3Byb3ZpZGVyXCI7XG5pbXBvcnQge1xuICBjb21iaW5lSGVhZGVycyBhcyBjb21iaW5lSGVhZGVyczUsXG4gIGNyZWF0ZUV2ZW50U291cmNlUmVzcG9uc2VIYW5kbGVyIGFzIGNyZWF0ZUV2ZW50U291cmNlUmVzcG9uc2VIYW5kbGVyMyxcbiAgY3JlYXRlSnNvblJlc3BvbnNlSGFuZGxlciBhcyBjcmVhdGVKc29uUmVzcG9uc2VIYW5kbGVyNSxcbiAgY3JlYXRlVG9vbE5hbWVNYXBwaW5nLFxuICBnZW5lcmF0ZUlkIGFzIGdlbmVyYXRlSWQyLFxuICBwYXJzZVByb3ZpZGVyT3B0aW9ucyBhcyBwYXJzZVByb3ZpZGVyT3B0aW9uczUsXG4gIHBvc3RKc29uVG9BcGkgYXMgcG9zdEpzb25Ub0FwaTVcbn0gZnJvbSBcIkBhaS1zZGsvcHJvdmlkZXItdXRpbHNcIjtcblxuLy8gc3JjL3Jlc3BvbnNlcy9jb252ZXJ0LW9wZW5haS1yZXNwb25zZXMtdXNhZ2UudHNcbmZ1bmN0aW9uIGNvbnZlcnRPcGVuQUlSZXNwb25zZXNVc2FnZSh1c2FnZSkge1xuICB2YXIgX2EsIF9iLCBfYywgX2Q7XG4gIGlmICh1c2FnZSA9PSBudWxsKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIGlucHV0VG9rZW5zOiB7XG4gICAgICAgIHRvdGFsOiB2b2lkIDAsXG4gICAgICAgIG5vQ2FjaGU6IHZvaWQgMCxcbiAgICAgICAgY2FjaGVSZWFkOiB2b2lkIDAsXG4gICAgICAgIGNhY2hlV3JpdGU6IHZvaWQgMFxuICAgICAgfSxcbiAgICAgIG91dHB1dFRva2Vuczoge1xuICAgICAgICB0b3RhbDogdm9pZCAwLFxuICAgICAgICB0ZXh0OiB2b2lkIDAsXG4gICAgICAgIHJlYXNvbmluZzogdm9pZCAwXG4gICAgICB9LFxuICAgICAgcmF3OiB2b2lkIDBcbiAgICB9O1xuICB9XG4gIGNvbnN0IGlucHV0VG9rZW5zID0gdXNhZ2UuaW5wdXRfdG9rZW5zO1xuICBjb25zdCBvdXRwdXRUb2tlbnMgPSB1c2FnZS5vdXRwdXRfdG9rZW5zO1xuICBjb25zdCBjYWNoZWRUb2tlbnMgPSAoX2IgPSAoX2EgPSB1c2FnZS5pbnB1dF90b2tlbnNfZGV0YWlscykgPT0gbnVsbCA/IHZvaWQgMCA6IF9hLmNhY2hlZF90b2tlbnMpICE9IG51bGwgPyBfYiA6IDA7XG4gIGNvbnN0IHJlYXNvbmluZ1Rva2VucyA9IChfZCA9IChfYyA9IHVzYWdlLm91dHB1dF90b2tlbnNfZGV0YWlscykgPT0gbnVsbCA/IHZvaWQgMCA6IF9jLnJlYXNvbmluZ190b2tlbnMpICE9IG51bGwgPyBfZCA6IDA7XG4gIHJldHVybiB7XG4gICAgaW5wdXRUb2tlbnM6IHtcbiAgICAgIHRvdGFsOiBpbnB1dFRva2VucyxcbiAgICAgIG5vQ2FjaGU6IGlucHV0VG9rZW5zIC0gY2FjaGVkVG9rZW5zLFxuICAgICAgY2FjaGVSZWFkOiBjYWNoZWRUb2tlbnMsXG4gICAgICBjYWNoZVdyaXRlOiB2b2lkIDBcbiAgICB9LFxuICAgIG91dHB1dFRva2Vuczoge1xuICAgICAgdG90YWw6IG91dHB1dFRva2VucyxcbiAgICAgIHRleHQ6IG91dHB1dFRva2VucyAtIHJlYXNvbmluZ1Rva2VucyxcbiAgICAgIHJlYXNvbmluZzogcmVhc29uaW5nVG9rZW5zXG4gICAgfSxcbiAgICByYXc6IHVzYWdlXG4gIH07XG59XG5cbi8vIHNyYy9yZXNwb25zZXMvY29udmVydC10by1vcGVuYWktcmVzcG9uc2VzLWlucHV0LnRzXG5pbXBvcnQge1xuICBVbnN1cHBvcnRlZEZ1bmN0aW9uYWxpdHlFcnJvciBhcyBVbnN1cHBvcnRlZEZ1bmN0aW9uYWxpdHlFcnJvcjRcbn0gZnJvbSBcIkBhaS1zZGsvcHJvdmlkZXJcIjtcbmltcG9ydCB7XG4gIGNvbnZlcnRUb0Jhc2U2NCBhcyBjb252ZXJ0VG9CYXNlNjQyLFxuICBpc05vbk51bGxhYmxlLFxuICBwYXJzZVByb3ZpZGVyT3B0aW9ucyBhcyBwYXJzZVByb3ZpZGVyT3B0aW9uczQsXG4gIHZhbGlkYXRlVHlwZXNcbn0gZnJvbSBcIkBhaS1zZGsvcHJvdmlkZXItdXRpbHNcIjtcbmltcG9ydCB7IHogYXMgejE4IH0gZnJvbSBcInpvZC92NFwiO1xuZnVuY3Rpb24gaXNGaWxlSWQoZGF0YSwgcHJlZml4ZXMpIHtcbiAgaWYgKCFwcmVmaXhlcykgcmV0dXJuIGZhbHNlO1xuICByZXR1cm4gcHJlZml4ZXMuc29tZSgocHJlZml4KSA9PiBkYXRhLnN0YXJ0c1dpdGgocHJlZml4KSk7XG59XG5hc3luYyBmdW5jdGlvbiBjb252ZXJ0VG9PcGVuQUlSZXNwb25zZXNJbnB1dCh7XG4gIHByb21wdCxcbiAgdG9vbE5hbWVNYXBwaW5nLFxuICBzeXN0ZW1NZXNzYWdlTW9kZSxcbiAgcHJvdmlkZXJPcHRpb25zTmFtZSxcbiAgZmlsZUlkUHJlZml4ZXMsXG4gIHN0b3JlLFxuICBoYXNMb2NhbFNoZWxsVG9vbCA9IGZhbHNlLFxuICBoYXNTaGVsbFRvb2wgPSBmYWxzZSxcbiAgaGFzQXBwbHlQYXRjaFRvb2wgPSBmYWxzZVxufSkge1xuICB2YXIgX2EsIF9iLCBfYywgX2QsIF9lLCBfZiwgX2csIF9oLCBfaSwgX2osIF9rLCBfbCwgX207XG4gIGNvbnN0IGlucHV0ID0gW107XG4gIGNvbnN0IHdhcm5pbmdzID0gW107XG4gIGNvbnN0IHByb2Nlc3NlZEFwcHJvdmFsSWRzID0gLyogQF9fUFVSRV9fICovIG5ldyBTZXQoKTtcbiAgZm9yIChjb25zdCB7IHJvbGUsIGNvbnRlbnQgfSBvZiBwcm9tcHQpIHtcbiAgICBzd2l0Y2ggKHJvbGUpIHtcbiAgICAgIGNhc2UgXCJzeXN0ZW1cIjoge1xuICAgICAgICBzd2l0Y2ggKHN5c3RlbU1lc3NhZ2VNb2RlKSB7XG4gICAgICAgICAgY2FzZSBcInN5c3RlbVwiOiB7XG4gICAgICAgICAgICBpbnB1dC5wdXNoKHsgcm9sZTogXCJzeXN0ZW1cIiwgY29udGVudCB9KTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgIH1cbiAgICAgICAgICBjYXNlIFwiZGV2ZWxvcGVyXCI6IHtcbiAgICAgICAgICAgIGlucHV0LnB1c2goeyByb2xlOiBcImRldmVsb3BlclwiLCBjb250ZW50IH0pO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgfVxuICAgICAgICAgIGNhc2UgXCJyZW1vdmVcIjoge1xuICAgICAgICAgICAgd2FybmluZ3MucHVzaCh7XG4gICAgICAgICAgICAgIHR5cGU6IFwib3RoZXJcIixcbiAgICAgICAgICAgICAgbWVzc2FnZTogXCJzeXN0ZW0gbWVzc2FnZXMgYXJlIHJlbW92ZWQgZm9yIHRoaXMgbW9kZWxcIlxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgICB9XG4gICAgICAgICAgZGVmYXVsdDoge1xuICAgICAgICAgICAgY29uc3QgX2V4aGF1c3RpdmVDaGVjayA9IHN5c3RlbU1lc3NhZ2VNb2RlO1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFxuICAgICAgICAgICAgICBgVW5zdXBwb3J0ZWQgc3lzdGVtIG1lc3NhZ2UgbW9kZTogJHtfZXhoYXVzdGl2ZUNoZWNrfWBcbiAgICAgICAgICAgICk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGJyZWFrO1xuICAgICAgfVxuICAgICAgY2FzZSBcInVzZXJcIjoge1xuICAgICAgICBpbnB1dC5wdXNoKHtcbiAgICAgICAgICByb2xlOiBcInVzZXJcIixcbiAgICAgICAgICBjb250ZW50OiBjb250ZW50Lm1hcCgocGFydCwgaW5kZXgpID0+IHtcbiAgICAgICAgICAgIHZhciBfYTIsIF9iMiwgX2MyO1xuICAgICAgICAgICAgc3dpdGNoIChwYXJ0LnR5cGUpIHtcbiAgICAgICAgICAgICAgY2FzZSBcInRleHRcIjoge1xuICAgICAgICAgICAgICAgIHJldHVybiB7IHR5cGU6IFwiaW5wdXRfdGV4dFwiLCB0ZXh0OiBwYXJ0LnRleHQgfTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICBjYXNlIFwiZmlsZVwiOiB7XG4gICAgICAgICAgICAgICAgaWYgKHBhcnQubWVkaWFUeXBlLnN0YXJ0c1dpdGgoXCJpbWFnZS9cIikpIHtcbiAgICAgICAgICAgICAgICAgIGNvbnN0IG1lZGlhVHlwZSA9IHBhcnQubWVkaWFUeXBlID09PSBcImltYWdlLypcIiA/IFwiaW1hZ2UvanBlZ1wiIDogcGFydC5tZWRpYVR5cGU7XG4gICAgICAgICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgICAgICB0eXBlOiBcImlucHV0X2ltYWdlXCIsXG4gICAgICAgICAgICAgICAgICAgIC4uLnBhcnQuZGF0YSBpbnN0YW5jZW9mIFVSTCA/IHsgaW1hZ2VfdXJsOiBwYXJ0LmRhdGEudG9TdHJpbmcoKSB9IDogdHlwZW9mIHBhcnQuZGF0YSA9PT0gXCJzdHJpbmdcIiAmJiBpc0ZpbGVJZChwYXJ0LmRhdGEsIGZpbGVJZFByZWZpeGVzKSA/IHsgZmlsZV9pZDogcGFydC5kYXRhIH0gOiB7XG4gICAgICAgICAgICAgICAgICAgICAgaW1hZ2VfdXJsOiBgZGF0YToke21lZGlhVHlwZX07YmFzZTY0LCR7Y29udmVydFRvQmFzZTY0MihwYXJ0LmRhdGEpfWBcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgZGV0YWlsOiAoX2IyID0gKF9hMiA9IHBhcnQucHJvdmlkZXJPcHRpb25zKSA9PSBudWxsID8gdm9pZCAwIDogX2EyW3Byb3ZpZGVyT3B0aW9uc05hbWVdKSA9PSBudWxsID8gdm9pZCAwIDogX2IyLmltYWdlRGV0YWlsXG4gICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAocGFydC5tZWRpYVR5cGUgPT09IFwiYXBwbGljYXRpb24vcGRmXCIpIHtcbiAgICAgICAgICAgICAgICAgIGlmIChwYXJ0LmRhdGEgaW5zdGFuY2VvZiBVUkwpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICAgICAgICB0eXBlOiBcImlucHV0X2ZpbGVcIixcbiAgICAgICAgICAgICAgICAgICAgICBmaWxlX3VybDogcGFydC5kYXRhLnRvU3RyaW5nKClcbiAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgICAgIHR5cGU6IFwiaW5wdXRfZmlsZVwiLFxuICAgICAgICAgICAgICAgICAgICAuLi50eXBlb2YgcGFydC5kYXRhID09PSBcInN0cmluZ1wiICYmIGlzRmlsZUlkKHBhcnQuZGF0YSwgZmlsZUlkUHJlZml4ZXMpID8geyBmaWxlX2lkOiBwYXJ0LmRhdGEgfSA6IHtcbiAgICAgICAgICAgICAgICAgICAgICBmaWxlbmFtZTogKF9jMiA9IHBhcnQuZmlsZW5hbWUpICE9IG51bGwgPyBfYzIgOiBgcGFydC0ke2luZGV4fS5wZGZgLFxuICAgICAgICAgICAgICAgICAgICAgIGZpbGVfZGF0YTogYGRhdGE6YXBwbGljYXRpb24vcGRmO2Jhc2U2NCwke2NvbnZlcnRUb0Jhc2U2NDIocGFydC5kYXRhKX1gXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBVbnN1cHBvcnRlZEZ1bmN0aW9uYWxpdHlFcnJvcjQoe1xuICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbmFsaXR5OiBgZmlsZSBwYXJ0IG1lZGlhIHR5cGUgJHtwYXJ0Lm1lZGlhVHlwZX1gXG4gICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9KVxuICAgICAgICB9KTtcbiAgICAgICAgYnJlYWs7XG4gICAgICB9XG4gICAgICBjYXNlIFwiYXNzaXN0YW50XCI6IHtcbiAgICAgICAgY29uc3QgcmVhc29uaW5nTWVzc2FnZXMgPSB7fTtcbiAgICAgICAgZm9yIChjb25zdCBwYXJ0IG9mIGNvbnRlbnQpIHtcbiAgICAgICAgICBzd2l0Y2ggKHBhcnQudHlwZSkge1xuICAgICAgICAgICAgY2FzZSBcInRleHRcIjoge1xuICAgICAgICAgICAgICBjb25zdCBpZCA9IChfYiA9IChfYSA9IHBhcnQucHJvdmlkZXJPcHRpb25zKSA9PSBudWxsID8gdm9pZCAwIDogX2FbcHJvdmlkZXJPcHRpb25zTmFtZV0pID09IG51bGwgPyB2b2lkIDAgOiBfYi5pdGVtSWQ7XG4gICAgICAgICAgICAgIGlmIChzdG9yZSAmJiBpZCAhPSBudWxsKSB7XG4gICAgICAgICAgICAgICAgaW5wdXQucHVzaCh7IHR5cGU6IFwiaXRlbV9yZWZlcmVuY2VcIiwgaWQgfSk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgaW5wdXQucHVzaCh7XG4gICAgICAgICAgICAgICAgcm9sZTogXCJhc3Npc3RhbnRcIixcbiAgICAgICAgICAgICAgICBjb250ZW50OiBbeyB0eXBlOiBcIm91dHB1dF90ZXh0XCIsIHRleHQ6IHBhcnQudGV4dCB9XSxcbiAgICAgICAgICAgICAgICBpZFxuICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjYXNlIFwidG9vbC1jYWxsXCI6IHtcbiAgICAgICAgICAgICAgY29uc3QgaWQgPSAoX2cgPSAoX2QgPSAoX2MgPSBwYXJ0LnByb3ZpZGVyT3B0aW9ucykgPT0gbnVsbCA/IHZvaWQgMCA6IF9jW3Byb3ZpZGVyT3B0aW9uc05hbWVdKSA9PSBudWxsID8gdm9pZCAwIDogX2QuaXRlbUlkKSAhPSBudWxsID8gX2cgOiAoX2YgPSAoX2UgPSBwYXJ0LnByb3ZpZGVyTWV0YWRhdGEpID09IG51bGwgPyB2b2lkIDAgOiBfZVtwcm92aWRlck9wdGlvbnNOYW1lXSkgPT0gbnVsbCA/IHZvaWQgMCA6IF9mLml0ZW1JZDtcbiAgICAgICAgICAgICAgaWYgKHBhcnQucHJvdmlkZXJFeGVjdXRlZCkge1xuICAgICAgICAgICAgICAgIGlmIChzdG9yZSAmJiBpZCAhPSBudWxsKSB7XG4gICAgICAgICAgICAgICAgICBpbnB1dC5wdXNoKHsgdHlwZTogXCJpdGVtX3JlZmVyZW5jZVwiLCBpZCB9KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgaWYgKHN0b3JlICYmIGlkICE9IG51bGwpIHtcbiAgICAgICAgICAgICAgICBpbnB1dC5wdXNoKHsgdHlwZTogXCJpdGVtX3JlZmVyZW5jZVwiLCBpZCB9KTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICBjb25zdCByZXNvbHZlZFRvb2xOYW1lID0gdG9vbE5hbWVNYXBwaW5nLnRvUHJvdmlkZXJUb29sTmFtZShcbiAgICAgICAgICAgICAgICBwYXJ0LnRvb2xOYW1lXG4gICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgIGlmIChoYXNMb2NhbFNoZWxsVG9vbCAmJiByZXNvbHZlZFRvb2xOYW1lID09PSBcImxvY2FsX3NoZWxsXCIpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBwYXJzZWRJbnB1dCA9IGF3YWl0IHZhbGlkYXRlVHlwZXMoe1xuICAgICAgICAgICAgICAgICAgdmFsdWU6IHBhcnQuaW5wdXQsXG4gICAgICAgICAgICAgICAgICBzY2hlbWE6IGxvY2FsU2hlbGxJbnB1dFNjaGVtYVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIGlucHV0LnB1c2goe1xuICAgICAgICAgICAgICAgICAgdHlwZTogXCJsb2NhbF9zaGVsbF9jYWxsXCIsXG4gICAgICAgICAgICAgICAgICBjYWxsX2lkOiBwYXJ0LnRvb2xDYWxsSWQsXG4gICAgICAgICAgICAgICAgICBpZCxcbiAgICAgICAgICAgICAgICAgIGFjdGlvbjoge1xuICAgICAgICAgICAgICAgICAgICB0eXBlOiBcImV4ZWNcIixcbiAgICAgICAgICAgICAgICAgICAgY29tbWFuZDogcGFyc2VkSW5wdXQuYWN0aW9uLmNvbW1hbmQsXG4gICAgICAgICAgICAgICAgICAgIHRpbWVvdXRfbXM6IHBhcnNlZElucHV0LmFjdGlvbi50aW1lb3V0TXMsXG4gICAgICAgICAgICAgICAgICAgIHVzZXI6IHBhcnNlZElucHV0LmFjdGlvbi51c2VyLFxuICAgICAgICAgICAgICAgICAgICB3b3JraW5nX2RpcmVjdG9yeTogcGFyc2VkSW5wdXQuYWN0aW9uLndvcmtpbmdEaXJlY3RvcnksXG4gICAgICAgICAgICAgICAgICAgIGVudjogcGFyc2VkSW5wdXQuYWN0aW9uLmVudlxuICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIGlmIChoYXNTaGVsbFRvb2wgJiYgcmVzb2x2ZWRUb29sTmFtZSA9PT0gXCJzaGVsbFwiKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgcGFyc2VkSW5wdXQgPSBhd2FpdCB2YWxpZGF0ZVR5cGVzKHtcbiAgICAgICAgICAgICAgICAgIHZhbHVlOiBwYXJ0LmlucHV0LFxuICAgICAgICAgICAgICAgICAgc2NoZW1hOiBzaGVsbElucHV0U2NoZW1hXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgaW5wdXQucHVzaCh7XG4gICAgICAgICAgICAgICAgICB0eXBlOiBcInNoZWxsX2NhbGxcIixcbiAgICAgICAgICAgICAgICAgIGNhbGxfaWQ6IHBhcnQudG9vbENhbGxJZCxcbiAgICAgICAgICAgICAgICAgIGlkLFxuICAgICAgICAgICAgICAgICAgc3RhdHVzOiBcImNvbXBsZXRlZFwiLFxuICAgICAgICAgICAgICAgICAgYWN0aW9uOiB7XG4gICAgICAgICAgICAgICAgICAgIGNvbW1hbmRzOiBwYXJzZWRJbnB1dC5hY3Rpb24uY29tbWFuZHMsXG4gICAgICAgICAgICAgICAgICAgIHRpbWVvdXRfbXM6IHBhcnNlZElucHV0LmFjdGlvbi50aW1lb3V0TXMsXG4gICAgICAgICAgICAgICAgICAgIG1heF9vdXRwdXRfbGVuZ3RoOiBwYXJzZWRJbnB1dC5hY3Rpb24ubWF4T3V0cHV0TGVuZ3RoXG4gICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgaW5wdXQucHVzaCh7XG4gICAgICAgICAgICAgICAgdHlwZTogXCJmdW5jdGlvbl9jYWxsXCIsXG4gICAgICAgICAgICAgICAgY2FsbF9pZDogcGFydC50b29sQ2FsbElkLFxuICAgICAgICAgICAgICAgIG5hbWU6IHJlc29sdmVkVG9vbE5hbWUsXG4gICAgICAgICAgICAgICAgYXJndW1lbnRzOiBKU09OLnN0cmluZ2lmeShwYXJ0LmlucHV0KSxcbiAgICAgICAgICAgICAgICBpZFxuICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvLyBhc3Npc3RhbnQgdG9vbCByZXN1bHQgcGFydHMgYXJlIGZyb20gcHJvdmlkZXItZXhlY3V0ZWQgdG9vbHM6XG4gICAgICAgICAgICBjYXNlIFwidG9vbC1yZXN1bHRcIjoge1xuICAgICAgICAgICAgICBpZiAocGFydC5vdXRwdXQudHlwZSA9PT0gXCJleGVjdXRpb24tZGVuaWVkXCIgfHwgcGFydC5vdXRwdXQudHlwZSA9PT0gXCJqc29uXCIgJiYgdHlwZW9mIHBhcnQub3V0cHV0LnZhbHVlID09PSBcIm9iamVjdFwiICYmIHBhcnQub3V0cHV0LnZhbHVlICE9IG51bGwgJiYgXCJ0eXBlXCIgaW4gcGFydC5vdXRwdXQudmFsdWUgJiYgcGFydC5vdXRwdXQudmFsdWUudHlwZSA9PT0gXCJleGVjdXRpb24tZGVuaWVkXCIpIHtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICBpZiAoc3RvcmUpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBpdGVtSWQgPSAoX2ogPSAoX2kgPSAoX2ggPSBwYXJ0LnByb3ZpZGVyTWV0YWRhdGEpID09IG51bGwgPyB2b2lkIDAgOiBfaFtwcm92aWRlck9wdGlvbnNOYW1lXSkgPT0gbnVsbCA/IHZvaWQgMCA6IF9pLml0ZW1JZCkgIT0gbnVsbCA/IF9qIDogcGFydC50b29sQ2FsbElkO1xuICAgICAgICAgICAgICAgIGlucHV0LnB1c2goeyB0eXBlOiBcIml0ZW1fcmVmZXJlbmNlXCIsIGlkOiBpdGVtSWQgfSk7XG4gICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgd2FybmluZ3MucHVzaCh7XG4gICAgICAgICAgICAgICAgICB0eXBlOiBcIm90aGVyXCIsXG4gICAgICAgICAgICAgICAgICBtZXNzYWdlOiBgUmVzdWx0cyBmb3IgT3BlbkFJIHRvb2wgJHtwYXJ0LnRvb2xOYW1lfSBhcmUgbm90IHNlbnQgdG8gdGhlIEFQSSB3aGVuIHN0b3JlIGlzIGZhbHNlYFxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY2FzZSBcInJlYXNvbmluZ1wiOiB7XG4gICAgICAgICAgICAgIGNvbnN0IHByb3ZpZGVyT3B0aW9ucyA9IGF3YWl0IHBhcnNlUHJvdmlkZXJPcHRpb25zNCh7XG4gICAgICAgICAgICAgICAgcHJvdmlkZXI6IHByb3ZpZGVyT3B0aW9uc05hbWUsXG4gICAgICAgICAgICAgICAgcHJvdmlkZXJPcHRpb25zOiBwYXJ0LnByb3ZpZGVyT3B0aW9ucyxcbiAgICAgICAgICAgICAgICBzY2hlbWE6IG9wZW5haVJlc3BvbnNlc1JlYXNvbmluZ1Byb3ZpZGVyT3B0aW9uc1NjaGVtYVxuICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgY29uc3QgcmVhc29uaW5nSWQgPSBwcm92aWRlck9wdGlvbnMgPT0gbnVsbCA/IHZvaWQgMCA6IHByb3ZpZGVyT3B0aW9ucy5pdGVtSWQ7XG4gICAgICAgICAgICAgIGlmIChyZWFzb25pbmdJZCAhPSBudWxsKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgcmVhc29uaW5nTWVzc2FnZSA9IHJlYXNvbmluZ01lc3NhZ2VzW3JlYXNvbmluZ0lkXTtcbiAgICAgICAgICAgICAgICBpZiAoc3RvcmUpIHtcbiAgICAgICAgICAgICAgICAgIGlmIChyZWFzb25pbmdNZXNzYWdlID09PSB2b2lkIDApIHtcbiAgICAgICAgICAgICAgICAgICAgaW5wdXQucHVzaCh7IHR5cGU6IFwiaXRlbV9yZWZlcmVuY2VcIiwgaWQ6IHJlYXNvbmluZ0lkIH0pO1xuICAgICAgICAgICAgICAgICAgICByZWFzb25pbmdNZXNzYWdlc1tyZWFzb25pbmdJZF0gPSB7XG4gICAgICAgICAgICAgICAgICAgICAgdHlwZTogXCJyZWFzb25pbmdcIixcbiAgICAgICAgICAgICAgICAgICAgICBpZDogcmVhc29uaW5nSWQsXG4gICAgICAgICAgICAgICAgICAgICAgc3VtbWFyeTogW11cbiAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgY29uc3Qgc3VtbWFyeVBhcnRzID0gW107XG4gICAgICAgICAgICAgICAgICBpZiAocGFydC50ZXh0Lmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgICAgICAgICAgc3VtbWFyeVBhcnRzLnB1c2goe1xuICAgICAgICAgICAgICAgICAgICAgIHR5cGU6IFwic3VtbWFyeV90ZXh0XCIsXG4gICAgICAgICAgICAgICAgICAgICAgdGV4dDogcGFydC50ZXh0XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChyZWFzb25pbmdNZXNzYWdlICE9PSB2b2lkIDApIHtcbiAgICAgICAgICAgICAgICAgICAgd2FybmluZ3MucHVzaCh7XG4gICAgICAgICAgICAgICAgICAgICAgdHlwZTogXCJvdGhlclwiLFxuICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6IGBDYW5ub3QgYXBwZW5kIGVtcHR5IHJlYXNvbmluZyBwYXJ0IHRvIGV4aXN0aW5nIHJlYXNvbmluZyBzZXF1ZW5jZS4gU2tpcHBpbmcgcmVhc29uaW5nIHBhcnQ6ICR7SlNPTi5zdHJpbmdpZnkocGFydCl9LmBcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICBpZiAocmVhc29uaW5nTWVzc2FnZSA9PT0gdm9pZCAwKSB7XG4gICAgICAgICAgICAgICAgICAgIHJlYXNvbmluZ01lc3NhZ2VzW3JlYXNvbmluZ0lkXSA9IHtcbiAgICAgICAgICAgICAgICAgICAgICB0eXBlOiBcInJlYXNvbmluZ1wiLFxuICAgICAgICAgICAgICAgICAgICAgIGlkOiByZWFzb25pbmdJZCxcbiAgICAgICAgICAgICAgICAgICAgICBlbmNyeXB0ZWRfY29udGVudDogcHJvdmlkZXJPcHRpb25zID09IG51bGwgPyB2b2lkIDAgOiBwcm92aWRlck9wdGlvbnMucmVhc29uaW5nRW5jcnlwdGVkQ29udGVudCxcbiAgICAgICAgICAgICAgICAgICAgICBzdW1tYXJ5OiBzdW1tYXJ5UGFydHNcbiAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICAgICAgaW5wdXQucHVzaChyZWFzb25pbmdNZXNzYWdlc1tyZWFzb25pbmdJZF0pO1xuICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgcmVhc29uaW5nTWVzc2FnZS5zdW1tYXJ5LnB1c2goLi4uc3VtbWFyeVBhcnRzKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKChwcm92aWRlck9wdGlvbnMgPT0gbnVsbCA/IHZvaWQgMCA6IHByb3ZpZGVyT3B0aW9ucy5yZWFzb25pbmdFbmNyeXB0ZWRDb250ZW50KSAhPSBudWxsKSB7XG4gICAgICAgICAgICAgICAgICAgICAgcmVhc29uaW5nTWVzc2FnZS5lbmNyeXB0ZWRfY29udGVudCA9IHByb3ZpZGVyT3B0aW9ucy5yZWFzb25pbmdFbmNyeXB0ZWRDb250ZW50O1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHdhcm5pbmdzLnB1c2goe1xuICAgICAgICAgICAgICAgICAgdHlwZTogXCJvdGhlclwiLFxuICAgICAgICAgICAgICAgICAgbWVzc2FnZTogYE5vbi1PcGVuQUkgcmVhc29uaW5nIHBhcnRzIGFyZSBub3Qgc3VwcG9ydGVkLiBTa2lwcGluZyByZWFzb25pbmcgcGFydDogJHtKU09OLnN0cmluZ2lmeShwYXJ0KX0uYFxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBicmVhaztcbiAgICAgIH1cbiAgICAgIGNhc2UgXCJ0b29sXCI6IHtcbiAgICAgICAgZm9yIChjb25zdCBwYXJ0IG9mIGNvbnRlbnQpIHtcbiAgICAgICAgICBpZiAocGFydC50eXBlID09PSBcInRvb2wtYXBwcm92YWwtcmVzcG9uc2VcIikge1xuICAgICAgICAgICAgY29uc3QgYXBwcm92YWxSZXNwb25zZSA9IHBhcnQ7XG4gICAgICAgICAgICBpZiAocHJvY2Vzc2VkQXBwcm92YWxJZHMuaGFzKGFwcHJvdmFsUmVzcG9uc2UuYXBwcm92YWxJZCkpIHtcbiAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBwcm9jZXNzZWRBcHByb3ZhbElkcy5hZGQoYXBwcm92YWxSZXNwb25zZS5hcHByb3ZhbElkKTtcbiAgICAgICAgICAgIGlmIChzdG9yZSkge1xuICAgICAgICAgICAgICBpbnB1dC5wdXNoKHtcbiAgICAgICAgICAgICAgICB0eXBlOiBcIml0ZW1fcmVmZXJlbmNlXCIsXG4gICAgICAgICAgICAgICAgaWQ6IGFwcHJvdmFsUmVzcG9uc2UuYXBwcm92YWxJZFxuICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlucHV0LnB1c2goe1xuICAgICAgICAgICAgICB0eXBlOiBcIm1jcF9hcHByb3ZhbF9yZXNwb25zZVwiLFxuICAgICAgICAgICAgICBhcHByb3ZhbF9yZXF1ZXN0X2lkOiBhcHByb3ZhbFJlc3BvbnNlLmFwcHJvdmFsSWQsXG4gICAgICAgICAgICAgIGFwcHJvdmU6IGFwcHJvdmFsUmVzcG9uc2UuYXBwcm92ZWRcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgfVxuICAgICAgICAgIGNvbnN0IG91dHB1dCA9IHBhcnQub3V0cHV0O1xuICAgICAgICAgIGlmIChvdXRwdXQudHlwZSA9PT0gXCJleGVjdXRpb24tZGVuaWVkXCIpIHtcbiAgICAgICAgICAgIGNvbnN0IGFwcHJvdmFsSWQgPSAoX2wgPSAoX2sgPSBvdXRwdXQucHJvdmlkZXJPcHRpb25zKSA9PSBudWxsID8gdm9pZCAwIDogX2sub3BlbmFpKSA9PSBudWxsID8gdm9pZCAwIDogX2wuYXBwcm92YWxJZDtcbiAgICAgICAgICAgIGlmIChhcHByb3ZhbElkKSB7XG4gICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgICBjb25zdCByZXNvbHZlZFRvb2xOYW1lID0gdG9vbE5hbWVNYXBwaW5nLnRvUHJvdmlkZXJUb29sTmFtZShcbiAgICAgICAgICAgIHBhcnQudG9vbE5hbWVcbiAgICAgICAgICApO1xuICAgICAgICAgIGlmIChoYXNMb2NhbFNoZWxsVG9vbCAmJiByZXNvbHZlZFRvb2xOYW1lID09PSBcImxvY2FsX3NoZWxsXCIgJiYgb3V0cHV0LnR5cGUgPT09IFwianNvblwiKSB7XG4gICAgICAgICAgICBjb25zdCBwYXJzZWRPdXRwdXQgPSBhd2FpdCB2YWxpZGF0ZVR5cGVzKHtcbiAgICAgICAgICAgICAgdmFsdWU6IG91dHB1dC52YWx1ZSxcbiAgICAgICAgICAgICAgc2NoZW1hOiBsb2NhbFNoZWxsT3V0cHV0U2NoZW1hXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGlucHV0LnB1c2goe1xuICAgICAgICAgICAgICB0eXBlOiBcImxvY2FsX3NoZWxsX2NhbGxfb3V0cHV0XCIsXG4gICAgICAgICAgICAgIGNhbGxfaWQ6IHBhcnQudG9vbENhbGxJZCxcbiAgICAgICAgICAgICAgb3V0cHV0OiBwYXJzZWRPdXRwdXQub3V0cHV0XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgIH1cbiAgICAgICAgICBpZiAoaGFzU2hlbGxUb29sICYmIHJlc29sdmVkVG9vbE5hbWUgPT09IFwic2hlbGxcIiAmJiBvdXRwdXQudHlwZSA9PT0gXCJqc29uXCIpIHtcbiAgICAgICAgICAgIGNvbnN0IHBhcnNlZE91dHB1dCA9IGF3YWl0IHZhbGlkYXRlVHlwZXMoe1xuICAgICAgICAgICAgICB2YWx1ZTogb3V0cHV0LnZhbHVlLFxuICAgICAgICAgICAgICBzY2hlbWE6IHNoZWxsT3V0cHV0U2NoZW1hXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGlucHV0LnB1c2goe1xuICAgICAgICAgICAgICB0eXBlOiBcInNoZWxsX2NhbGxfb3V0cHV0XCIsXG4gICAgICAgICAgICAgIGNhbGxfaWQ6IHBhcnQudG9vbENhbGxJZCxcbiAgICAgICAgICAgICAgb3V0cHV0OiBwYXJzZWRPdXRwdXQub3V0cHV0Lm1hcCgoaXRlbSkgPT4gKHtcbiAgICAgICAgICAgICAgICBzdGRvdXQ6IGl0ZW0uc3Rkb3V0LFxuICAgICAgICAgICAgICAgIHN0ZGVycjogaXRlbS5zdGRlcnIsXG4gICAgICAgICAgICAgICAgb3V0Y29tZTogaXRlbS5vdXRjb21lLnR5cGUgPT09IFwidGltZW91dFwiID8geyB0eXBlOiBcInRpbWVvdXRcIiB9IDoge1xuICAgICAgICAgICAgICAgICAgdHlwZTogXCJleGl0XCIsXG4gICAgICAgICAgICAgICAgICBleGl0X2NvZGU6IGl0ZW0ub3V0Y29tZS5leGl0Q29kZVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgfSkpXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgIH1cbiAgICAgICAgICBpZiAoaGFzQXBwbHlQYXRjaFRvb2wgJiYgcGFydC50b29sTmFtZSA9PT0gXCJhcHBseV9wYXRjaFwiICYmIG91dHB1dC50eXBlID09PSBcImpzb25cIikge1xuICAgICAgICAgICAgY29uc3QgcGFyc2VkT3V0cHV0ID0gYXdhaXQgdmFsaWRhdGVUeXBlcyh7XG4gICAgICAgICAgICAgIHZhbHVlOiBvdXRwdXQudmFsdWUsXG4gICAgICAgICAgICAgIHNjaGVtYTogYXBwbHlQYXRjaE91dHB1dFNjaGVtYVxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBpbnB1dC5wdXNoKHtcbiAgICAgICAgICAgICAgdHlwZTogXCJhcHBseV9wYXRjaF9jYWxsX291dHB1dFwiLFxuICAgICAgICAgICAgICBjYWxsX2lkOiBwYXJ0LnRvb2xDYWxsSWQsXG4gICAgICAgICAgICAgIHN0YXR1czogcGFyc2VkT3V0cHV0LnN0YXR1cyxcbiAgICAgICAgICAgICAgb3V0cHV0OiBwYXJzZWRPdXRwdXQub3V0cHV0XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgIH1cbiAgICAgICAgICBsZXQgY29udGVudFZhbHVlO1xuICAgICAgICAgIHN3aXRjaCAob3V0cHV0LnR5cGUpIHtcbiAgICAgICAgICAgIGNhc2UgXCJ0ZXh0XCI6XG4gICAgICAgICAgICBjYXNlIFwiZXJyb3ItdGV4dFwiOlxuICAgICAgICAgICAgICBjb250ZW50VmFsdWUgPSBvdXRwdXQudmFsdWU7XG4gICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSBcImV4ZWN1dGlvbi1kZW5pZWRcIjpcbiAgICAgICAgICAgICAgY29udGVudFZhbHVlID0gKF9tID0gb3V0cHV0LnJlYXNvbikgIT0gbnVsbCA/IF9tIDogXCJUb29sIGV4ZWN1dGlvbiBkZW5pZWQuXCI7XG4gICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSBcImpzb25cIjpcbiAgICAgICAgICAgIGNhc2UgXCJlcnJvci1qc29uXCI6XG4gICAgICAgICAgICAgIGNvbnRlbnRWYWx1ZSA9IEpTT04uc3RyaW5naWZ5KG91dHB1dC52YWx1ZSk7XG4gICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSBcImNvbnRlbnRcIjpcbiAgICAgICAgICAgICAgY29udGVudFZhbHVlID0gb3V0cHV0LnZhbHVlLm1hcCgoaXRlbSkgPT4ge1xuICAgICAgICAgICAgICAgIHZhciBfYTI7XG4gICAgICAgICAgICAgICAgc3dpdGNoIChpdGVtLnR5cGUpIHtcbiAgICAgICAgICAgICAgICAgIGNhc2UgXCJ0ZXh0XCI6IHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHsgdHlwZTogXCJpbnB1dF90ZXh0XCIsIHRleHQ6IGl0ZW0udGV4dCB9O1xuICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgY2FzZSBcImltYWdlLWRhdGFcIjoge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgICAgICAgIHR5cGU6IFwiaW5wdXRfaW1hZ2VcIixcbiAgICAgICAgICAgICAgICAgICAgICBpbWFnZV91cmw6IGBkYXRhOiR7aXRlbS5tZWRpYVR5cGV9O2Jhc2U2NCwke2l0ZW0uZGF0YX1gXG4gICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICBjYXNlIFwiaW1hZ2UtdXJsXCI6IHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICAgICAgICB0eXBlOiBcImlucHV0X2ltYWdlXCIsXG4gICAgICAgICAgICAgICAgICAgICAgaW1hZ2VfdXJsOiBpdGVtLnVybFxuICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgY2FzZSBcImZpbGUtZGF0YVwiOiB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgICAgICAgdHlwZTogXCJpbnB1dF9maWxlXCIsXG4gICAgICAgICAgICAgICAgICAgICAgZmlsZW5hbWU6IChfYTIgPSBpdGVtLmZpbGVuYW1lKSAhPSBudWxsID8gX2EyIDogXCJkYXRhXCIsXG4gICAgICAgICAgICAgICAgICAgICAgZmlsZV9kYXRhOiBgZGF0YToke2l0ZW0ubWVkaWFUeXBlfTtiYXNlNjQsJHtpdGVtLmRhdGF9YFxuICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgZGVmYXVsdDoge1xuICAgICAgICAgICAgICAgICAgICB3YXJuaW5ncy5wdXNoKHtcbiAgICAgICAgICAgICAgICAgICAgICB0eXBlOiBcIm90aGVyXCIsXG4gICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogYHVuc3VwcG9ydGVkIHRvb2wgY29udGVudCBwYXJ0IHR5cGU6ICR7aXRlbS50eXBlfWBcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB2b2lkIDA7XG4gICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICB9KS5maWx0ZXIoaXNOb25OdWxsYWJsZSk7XG4gICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgIH1cbiAgICAgICAgICBpbnB1dC5wdXNoKHtcbiAgICAgICAgICAgIHR5cGU6IFwiZnVuY3Rpb25fY2FsbF9vdXRwdXRcIixcbiAgICAgICAgICAgIGNhbGxfaWQ6IHBhcnQudG9vbENhbGxJZCxcbiAgICAgICAgICAgIG91dHB1dDogY29udGVudFZhbHVlXG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgYnJlYWs7XG4gICAgICB9XG4gICAgICBkZWZhdWx0OiB7XG4gICAgICAgIGNvbnN0IF9leGhhdXN0aXZlQ2hlY2sgPSByb2xlO1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYFVuc3VwcG9ydGVkIHJvbGU6ICR7X2V4aGF1c3RpdmVDaGVja31gKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cbiAgcmV0dXJuIHsgaW5wdXQsIHdhcm5pbmdzIH07XG59XG52YXIgb3BlbmFpUmVzcG9uc2VzUmVhc29uaW5nUHJvdmlkZXJPcHRpb25zU2NoZW1hID0gejE4Lm9iamVjdCh7XG4gIGl0ZW1JZDogejE4LnN0cmluZygpLm51bGxpc2goKSxcbiAgcmVhc29uaW5nRW5jcnlwdGVkQ29udGVudDogejE4LnN0cmluZygpLm51bGxpc2goKVxufSk7XG5cbi8vIHNyYy9yZXNwb25zZXMvbWFwLW9wZW5haS1yZXNwb25zZXMtZmluaXNoLXJlYXNvbi50c1xuZnVuY3Rpb24gbWFwT3BlbkFJUmVzcG9uc2VGaW5pc2hSZWFzb24oe1xuICBmaW5pc2hSZWFzb24sXG4gIGhhc0Z1bmN0aW9uQ2FsbFxufSkge1xuICBzd2l0Y2ggKGZpbmlzaFJlYXNvbikge1xuICAgIGNhc2Ugdm9pZCAwOlxuICAgIGNhc2UgbnVsbDpcbiAgICAgIHJldHVybiBoYXNGdW5jdGlvbkNhbGwgPyBcInRvb2wtY2FsbHNcIiA6IFwic3RvcFwiO1xuICAgIGNhc2UgXCJtYXhfb3V0cHV0X3Rva2Vuc1wiOlxuICAgICAgcmV0dXJuIFwibGVuZ3RoXCI7XG4gICAgY2FzZSBcImNvbnRlbnRfZmlsdGVyXCI6XG4gICAgICByZXR1cm4gXCJjb250ZW50LWZpbHRlclwiO1xuICAgIGRlZmF1bHQ6XG4gICAgICByZXR1cm4gaGFzRnVuY3Rpb25DYWxsID8gXCJ0b29sLWNhbGxzXCIgOiBcIm90aGVyXCI7XG4gIH1cbn1cblxuLy8gc3JjL3Jlc3BvbnNlcy9vcGVuYWktcmVzcG9uc2VzLWFwaS50c1xuaW1wb3J0IHsgbGF6eVNjaGVtYSBhcyBsYXp5U2NoZW1hMTcsIHpvZFNjaGVtYSBhcyB6b2RTY2hlbWExNyB9IGZyb20gXCJAYWktc2RrL3Byb3ZpZGVyLXV0aWxzXCI7XG5pbXBvcnQgeyB6IGFzIHoxOSB9IGZyb20gXCJ6b2QvdjRcIjtcbnZhciBvcGVuYWlSZXNwb25zZXNDaHVua1NjaGVtYSA9IGxhenlTY2hlbWExNyhcbiAgKCkgPT4gem9kU2NoZW1hMTcoXG4gICAgejE5LnVuaW9uKFtcbiAgICAgIHoxOS5vYmplY3Qoe1xuICAgICAgICB0eXBlOiB6MTkubGl0ZXJhbChcInJlc3BvbnNlLm91dHB1dF90ZXh0LmRlbHRhXCIpLFxuICAgICAgICBpdGVtX2lkOiB6MTkuc3RyaW5nKCksXG4gICAgICAgIGRlbHRhOiB6MTkuc3RyaW5nKCksXG4gICAgICAgIGxvZ3Byb2JzOiB6MTkuYXJyYXkoXG4gICAgICAgICAgejE5Lm9iamVjdCh7XG4gICAgICAgICAgICB0b2tlbjogejE5LnN0cmluZygpLFxuICAgICAgICAgICAgbG9ncHJvYjogejE5Lm51bWJlcigpLFxuICAgICAgICAgICAgdG9wX2xvZ3Byb2JzOiB6MTkuYXJyYXkoXG4gICAgICAgICAgICAgIHoxOS5vYmplY3Qoe1xuICAgICAgICAgICAgICAgIHRva2VuOiB6MTkuc3RyaW5nKCksXG4gICAgICAgICAgICAgICAgbG9ncHJvYjogejE5Lm51bWJlcigpXG4gICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICApXG4gICAgICAgICAgfSlcbiAgICAgICAgKS5udWxsaXNoKClcbiAgICAgIH0pLFxuICAgICAgejE5Lm9iamVjdCh7XG4gICAgICAgIHR5cGU6IHoxOS5lbnVtKFtcInJlc3BvbnNlLmNvbXBsZXRlZFwiLCBcInJlc3BvbnNlLmluY29tcGxldGVcIl0pLFxuICAgICAgICByZXNwb25zZTogejE5Lm9iamVjdCh7XG4gICAgICAgICAgaW5jb21wbGV0ZV9kZXRhaWxzOiB6MTkub2JqZWN0KHsgcmVhc29uOiB6MTkuc3RyaW5nKCkgfSkubnVsbGlzaCgpLFxuICAgICAgICAgIHVzYWdlOiB6MTkub2JqZWN0KHtcbiAgICAgICAgICAgIGlucHV0X3Rva2VuczogejE5Lm51bWJlcigpLFxuICAgICAgICAgICAgaW5wdXRfdG9rZW5zX2RldGFpbHM6IHoxOS5vYmplY3QoeyBjYWNoZWRfdG9rZW5zOiB6MTkubnVtYmVyKCkubnVsbGlzaCgpIH0pLm51bGxpc2goKSxcbiAgICAgICAgICAgIG91dHB1dF90b2tlbnM6IHoxOS5udW1iZXIoKSxcbiAgICAgICAgICAgIG91dHB1dF90b2tlbnNfZGV0YWlsczogejE5Lm9iamVjdCh7IHJlYXNvbmluZ190b2tlbnM6IHoxOS5udW1iZXIoKS5udWxsaXNoKCkgfSkubnVsbGlzaCgpXG4gICAgICAgICAgfSksXG4gICAgICAgICAgc2VydmljZV90aWVyOiB6MTkuc3RyaW5nKCkubnVsbGlzaCgpXG4gICAgICAgIH0pXG4gICAgICB9KSxcbiAgICAgIHoxOS5vYmplY3Qoe1xuICAgICAgICB0eXBlOiB6MTkubGl0ZXJhbChcInJlc3BvbnNlLmNyZWF0ZWRcIiksXG4gICAgICAgIHJlc3BvbnNlOiB6MTkub2JqZWN0KHtcbiAgICAgICAgICBpZDogejE5LnN0cmluZygpLFxuICAgICAgICAgIGNyZWF0ZWRfYXQ6IHoxOS5udW1iZXIoKSxcbiAgICAgICAgICBtb2RlbDogejE5LnN0cmluZygpLFxuICAgICAgICAgIHNlcnZpY2VfdGllcjogejE5LnN0cmluZygpLm51bGxpc2goKVxuICAgICAgICB9KVxuICAgICAgfSksXG4gICAgICB6MTkub2JqZWN0KHtcbiAgICAgICAgdHlwZTogejE5LmxpdGVyYWwoXCJyZXNwb25zZS5vdXRwdXRfaXRlbS5hZGRlZFwiKSxcbiAgICAgICAgb3V0cHV0X2luZGV4OiB6MTkubnVtYmVyKCksXG4gICAgICAgIGl0ZW06IHoxOS5kaXNjcmltaW5hdGVkVW5pb24oXCJ0eXBlXCIsIFtcbiAgICAgICAgICB6MTkub2JqZWN0KHtcbiAgICAgICAgICAgIHR5cGU6IHoxOS5saXRlcmFsKFwibWVzc2FnZVwiKSxcbiAgICAgICAgICAgIGlkOiB6MTkuc3RyaW5nKClcbiAgICAgICAgICB9KSxcbiAgICAgICAgICB6MTkub2JqZWN0KHtcbiAgICAgICAgICAgIHR5cGU6IHoxOS5saXRlcmFsKFwicmVhc29uaW5nXCIpLFxuICAgICAgICAgICAgaWQ6IHoxOS5zdHJpbmcoKSxcbiAgICAgICAgICAgIGVuY3J5cHRlZF9jb250ZW50OiB6MTkuc3RyaW5nKCkubnVsbGlzaCgpXG4gICAgICAgICAgfSksXG4gICAgICAgICAgejE5Lm9iamVjdCh7XG4gICAgICAgICAgICB0eXBlOiB6MTkubGl0ZXJhbChcImZ1bmN0aW9uX2NhbGxcIiksXG4gICAgICAgICAgICBpZDogejE5LnN0cmluZygpLFxuICAgICAgICAgICAgY2FsbF9pZDogejE5LnN0cmluZygpLFxuICAgICAgICAgICAgbmFtZTogejE5LnN0cmluZygpLFxuICAgICAgICAgICAgYXJndW1lbnRzOiB6MTkuc3RyaW5nKClcbiAgICAgICAgICB9KSxcbiAgICAgICAgICB6MTkub2JqZWN0KHtcbiAgICAgICAgICAgIHR5cGU6IHoxOS5saXRlcmFsKFwid2ViX3NlYXJjaF9jYWxsXCIpLFxuICAgICAgICAgICAgaWQ6IHoxOS5zdHJpbmcoKSxcbiAgICAgICAgICAgIHN0YXR1czogejE5LnN0cmluZygpXG4gICAgICAgICAgfSksXG4gICAgICAgICAgejE5Lm9iamVjdCh7XG4gICAgICAgICAgICB0eXBlOiB6MTkubGl0ZXJhbChcImNvbXB1dGVyX2NhbGxcIiksXG4gICAgICAgICAgICBpZDogejE5LnN0cmluZygpLFxuICAgICAgICAgICAgc3RhdHVzOiB6MTkuc3RyaW5nKClcbiAgICAgICAgICB9KSxcbiAgICAgICAgICB6MTkub2JqZWN0KHtcbiAgICAgICAgICAgIHR5cGU6IHoxOS5saXRlcmFsKFwiZmlsZV9zZWFyY2hfY2FsbFwiKSxcbiAgICAgICAgICAgIGlkOiB6MTkuc3RyaW5nKClcbiAgICAgICAgICB9KSxcbiAgICAgICAgICB6MTkub2JqZWN0KHtcbiAgICAgICAgICAgIHR5cGU6IHoxOS5saXRlcmFsKFwiaW1hZ2VfZ2VuZXJhdGlvbl9jYWxsXCIpLFxuICAgICAgICAgICAgaWQ6IHoxOS5zdHJpbmcoKVxuICAgICAgICAgIH0pLFxuICAgICAgICAgIHoxOS5vYmplY3Qoe1xuICAgICAgICAgICAgdHlwZTogejE5LmxpdGVyYWwoXCJjb2RlX2ludGVycHJldGVyX2NhbGxcIiksXG4gICAgICAgICAgICBpZDogejE5LnN0cmluZygpLFxuICAgICAgICAgICAgY29udGFpbmVyX2lkOiB6MTkuc3RyaW5nKCksXG4gICAgICAgICAgICBjb2RlOiB6MTkuc3RyaW5nKCkubnVsbGFibGUoKSxcbiAgICAgICAgICAgIG91dHB1dHM6IHoxOS5hcnJheShcbiAgICAgICAgICAgICAgejE5LmRpc2NyaW1pbmF0ZWRVbmlvbihcInR5cGVcIiwgW1xuICAgICAgICAgICAgICAgIHoxOS5vYmplY3QoeyB0eXBlOiB6MTkubGl0ZXJhbChcImxvZ3NcIiksIGxvZ3M6IHoxOS5zdHJpbmcoKSB9KSxcbiAgICAgICAgICAgICAgICB6MTkub2JqZWN0KHsgdHlwZTogejE5LmxpdGVyYWwoXCJpbWFnZVwiKSwgdXJsOiB6MTkuc3RyaW5nKCkgfSlcbiAgICAgICAgICAgICAgXSlcbiAgICAgICAgICAgICkubnVsbGFibGUoKSxcbiAgICAgICAgICAgIHN0YXR1czogejE5LnN0cmluZygpXG4gICAgICAgICAgfSksXG4gICAgICAgICAgejE5Lm9iamVjdCh7XG4gICAgICAgICAgICB0eXBlOiB6MTkubGl0ZXJhbChcIm1jcF9jYWxsXCIpLFxuICAgICAgICAgICAgaWQ6IHoxOS5zdHJpbmcoKSxcbiAgICAgICAgICAgIHN0YXR1czogejE5LnN0cmluZygpLFxuICAgICAgICAgICAgYXBwcm92YWxfcmVxdWVzdF9pZDogejE5LnN0cmluZygpLm51bGxpc2goKVxuICAgICAgICAgIH0pLFxuICAgICAgICAgIHoxOS5vYmplY3Qoe1xuICAgICAgICAgICAgdHlwZTogejE5LmxpdGVyYWwoXCJtY3BfbGlzdF90b29sc1wiKSxcbiAgICAgICAgICAgIGlkOiB6MTkuc3RyaW5nKClcbiAgICAgICAgICB9KSxcbiAgICAgICAgICB6MTkub2JqZWN0KHtcbiAgICAgICAgICAgIHR5cGU6IHoxOS5saXRlcmFsKFwibWNwX2FwcHJvdmFsX3JlcXVlc3RcIiksXG4gICAgICAgICAgICBpZDogejE5LnN0cmluZygpXG4gICAgICAgICAgfSksXG4gICAgICAgICAgejE5Lm9iamVjdCh7XG4gICAgICAgICAgICB0eXBlOiB6MTkubGl0ZXJhbChcImFwcGx5X3BhdGNoX2NhbGxcIiksXG4gICAgICAgICAgICBpZDogejE5LnN0cmluZygpLFxuICAgICAgICAgICAgY2FsbF9pZDogejE5LnN0cmluZygpLFxuICAgICAgICAgICAgc3RhdHVzOiB6MTkuZW51bShbXCJpbl9wcm9ncmVzc1wiLCBcImNvbXBsZXRlZFwiXSksXG4gICAgICAgICAgICBvcGVyYXRpb246IHoxOS5kaXNjcmltaW5hdGVkVW5pb24oXCJ0eXBlXCIsIFtcbiAgICAgICAgICAgICAgejE5Lm9iamVjdCh7XG4gICAgICAgICAgICAgICAgdHlwZTogejE5LmxpdGVyYWwoXCJjcmVhdGVfZmlsZVwiKSxcbiAgICAgICAgICAgICAgICBwYXRoOiB6MTkuc3RyaW5nKCksXG4gICAgICAgICAgICAgICAgZGlmZjogejE5LnN0cmluZygpXG4gICAgICAgICAgICAgIH0pLFxuICAgICAgICAgICAgICB6MTkub2JqZWN0KHtcbiAgICAgICAgICAgICAgICB0eXBlOiB6MTkubGl0ZXJhbChcImRlbGV0ZV9maWxlXCIpLFxuICAgICAgICAgICAgICAgIHBhdGg6IHoxOS5zdHJpbmcoKVxuICAgICAgICAgICAgICB9KSxcbiAgICAgICAgICAgICAgejE5Lm9iamVjdCh7XG4gICAgICAgICAgICAgICAgdHlwZTogejE5LmxpdGVyYWwoXCJ1cGRhdGVfZmlsZVwiKSxcbiAgICAgICAgICAgICAgICBwYXRoOiB6MTkuc3RyaW5nKCksXG4gICAgICAgICAgICAgICAgZGlmZjogejE5LnN0cmluZygpXG4gICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICBdKVxuICAgICAgICAgIH0pLFxuICAgICAgICAgIHoxOS5vYmplY3Qoe1xuICAgICAgICAgICAgdHlwZTogejE5LmxpdGVyYWwoXCJzaGVsbF9jYWxsXCIpLFxuICAgICAgICAgICAgaWQ6IHoxOS5zdHJpbmcoKSxcbiAgICAgICAgICAgIGNhbGxfaWQ6IHoxOS5zdHJpbmcoKSxcbiAgICAgICAgICAgIHN0YXR1czogejE5LmVudW0oW1wiaW5fcHJvZ3Jlc3NcIiwgXCJjb21wbGV0ZWRcIiwgXCJpbmNvbXBsZXRlXCJdKSxcbiAgICAgICAgICAgIGFjdGlvbjogejE5Lm9iamVjdCh7XG4gICAgICAgICAgICAgIGNvbW1hbmRzOiB6MTkuYXJyYXkoejE5LnN0cmluZygpKVxuICAgICAgICAgICAgfSlcbiAgICAgICAgICB9KVxuICAgICAgICBdKVxuICAgICAgfSksXG4gICAgICB6MTkub2JqZWN0KHtcbiAgICAgICAgdHlwZTogejE5LmxpdGVyYWwoXCJyZXNwb25zZS5vdXRwdXRfaXRlbS5kb25lXCIpLFxuICAgICAgICBvdXRwdXRfaW5kZXg6IHoxOS5udW1iZXIoKSxcbiAgICAgICAgaXRlbTogejE5LmRpc2NyaW1pbmF0ZWRVbmlvbihcInR5cGVcIiwgW1xuICAgICAgICAgIHoxOS5vYmplY3Qoe1xuICAgICAgICAgICAgdHlwZTogejE5LmxpdGVyYWwoXCJtZXNzYWdlXCIpLFxuICAgICAgICAgICAgaWQ6IHoxOS5zdHJpbmcoKVxuICAgICAgICAgIH0pLFxuICAgICAgICAgIHoxOS5vYmplY3Qoe1xuICAgICAgICAgICAgdHlwZTogejE5LmxpdGVyYWwoXCJyZWFzb25pbmdcIiksXG4gICAgICAgICAgICBpZDogejE5LnN0cmluZygpLFxuICAgICAgICAgICAgZW5jcnlwdGVkX2NvbnRlbnQ6IHoxOS5zdHJpbmcoKS5udWxsaXNoKClcbiAgICAgICAgICB9KSxcbiAgICAgICAgICB6MTkub2JqZWN0KHtcbiAgICAgICAgICAgIHR5cGU6IHoxOS5saXRlcmFsKFwiZnVuY3Rpb25fY2FsbFwiKSxcbiAgICAgICAgICAgIGlkOiB6MTkuc3RyaW5nKCksXG4gICAgICAgICAgICBjYWxsX2lkOiB6MTkuc3RyaW5nKCksXG4gICAgICAgICAgICBuYW1lOiB6MTkuc3RyaW5nKCksXG4gICAgICAgICAgICBhcmd1bWVudHM6IHoxOS5zdHJpbmcoKSxcbiAgICAgICAgICAgIHN0YXR1czogejE5LmxpdGVyYWwoXCJjb21wbGV0ZWRcIilcbiAgICAgICAgICB9KSxcbiAgICAgICAgICB6MTkub2JqZWN0KHtcbiAgICAgICAgICAgIHR5cGU6IHoxOS5saXRlcmFsKFwiY29kZV9pbnRlcnByZXRlcl9jYWxsXCIpLFxuICAgICAgICAgICAgaWQ6IHoxOS5zdHJpbmcoKSxcbiAgICAgICAgICAgIGNvZGU6IHoxOS5zdHJpbmcoKS5udWxsYWJsZSgpLFxuICAgICAgICAgICAgY29udGFpbmVyX2lkOiB6MTkuc3RyaW5nKCksXG4gICAgICAgICAgICBvdXRwdXRzOiB6MTkuYXJyYXkoXG4gICAgICAgICAgICAgIHoxOS5kaXNjcmltaW5hdGVkVW5pb24oXCJ0eXBlXCIsIFtcbiAgICAgICAgICAgICAgICB6MTkub2JqZWN0KHsgdHlwZTogejE5LmxpdGVyYWwoXCJsb2dzXCIpLCBsb2dzOiB6MTkuc3RyaW5nKCkgfSksXG4gICAgICAgICAgICAgICAgejE5Lm9iamVjdCh7IHR5cGU6IHoxOS5saXRlcmFsKFwiaW1hZ2VcIiksIHVybDogejE5LnN0cmluZygpIH0pXG4gICAgICAgICAgICAgIF0pXG4gICAgICAgICAgICApLm51bGxhYmxlKClcbiAgICAgICAgICB9KSxcbiAgICAgICAgICB6MTkub2JqZWN0KHtcbiAgICAgICAgICAgIHR5cGU6IHoxOS5saXRlcmFsKFwiaW1hZ2VfZ2VuZXJhdGlvbl9jYWxsXCIpLFxuICAgICAgICAgICAgaWQ6IHoxOS5zdHJpbmcoKSxcbiAgICAgICAgICAgIHJlc3VsdDogejE5LnN0cmluZygpXG4gICAgICAgICAgfSksXG4gICAgICAgICAgejE5Lm9iamVjdCh7XG4gICAgICAgICAgICB0eXBlOiB6MTkubGl0ZXJhbChcIndlYl9zZWFyY2hfY2FsbFwiKSxcbiAgICAgICAgICAgIGlkOiB6MTkuc3RyaW5nKCksXG4gICAgICAgICAgICBzdGF0dXM6IHoxOS5zdHJpbmcoKSxcbiAgICAgICAgICAgIGFjdGlvbjogejE5LmRpc2NyaW1pbmF0ZWRVbmlvbihcInR5cGVcIiwgW1xuICAgICAgICAgICAgICB6MTkub2JqZWN0KHtcbiAgICAgICAgICAgICAgICB0eXBlOiB6MTkubGl0ZXJhbChcInNlYXJjaFwiKSxcbiAgICAgICAgICAgICAgICBxdWVyeTogejE5LnN0cmluZygpLm51bGxpc2goKSxcbiAgICAgICAgICAgICAgICBzb3VyY2VzOiB6MTkuYXJyYXkoXG4gICAgICAgICAgICAgICAgICB6MTkuZGlzY3JpbWluYXRlZFVuaW9uKFwidHlwZVwiLCBbXG4gICAgICAgICAgICAgICAgICAgIHoxOS5vYmplY3QoeyB0eXBlOiB6MTkubGl0ZXJhbChcInVybFwiKSwgdXJsOiB6MTkuc3RyaW5nKCkgfSksXG4gICAgICAgICAgICAgICAgICAgIHoxOS5vYmplY3QoeyB0eXBlOiB6MTkubGl0ZXJhbChcImFwaVwiKSwgbmFtZTogejE5LnN0cmluZygpIH0pXG4gICAgICAgICAgICAgICAgICBdKVxuICAgICAgICAgICAgICAgICkubnVsbGlzaCgpXG4gICAgICAgICAgICAgIH0pLFxuICAgICAgICAgICAgICB6MTkub2JqZWN0KHtcbiAgICAgICAgICAgICAgICB0eXBlOiB6MTkubGl0ZXJhbChcIm9wZW5fcGFnZVwiKSxcbiAgICAgICAgICAgICAgICB1cmw6IHoxOS5zdHJpbmcoKS5udWxsaXNoKClcbiAgICAgICAgICAgICAgfSksXG4gICAgICAgICAgICAgIHoxOS5vYmplY3Qoe1xuICAgICAgICAgICAgICAgIHR5cGU6IHoxOS5saXRlcmFsKFwiZmluZF9pbl9wYWdlXCIpLFxuICAgICAgICAgICAgICAgIHVybDogejE5LnN0cmluZygpLm51bGxpc2goKSxcbiAgICAgICAgICAgICAgICBwYXR0ZXJuOiB6MTkuc3RyaW5nKCkubnVsbGlzaCgpXG4gICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICBdKVxuICAgICAgICAgIH0pLFxuICAgICAgICAgIHoxOS5vYmplY3Qoe1xuICAgICAgICAgICAgdHlwZTogejE5LmxpdGVyYWwoXCJmaWxlX3NlYXJjaF9jYWxsXCIpLFxuICAgICAgICAgICAgaWQ6IHoxOS5zdHJpbmcoKSxcbiAgICAgICAgICAgIHF1ZXJpZXM6IHoxOS5hcnJheSh6MTkuc3RyaW5nKCkpLFxuICAgICAgICAgICAgcmVzdWx0czogejE5LmFycmF5KFxuICAgICAgICAgICAgICB6MTkub2JqZWN0KHtcbiAgICAgICAgICAgICAgICBhdHRyaWJ1dGVzOiB6MTkucmVjb3JkKFxuICAgICAgICAgICAgICAgICAgejE5LnN0cmluZygpLFxuICAgICAgICAgICAgICAgICAgejE5LnVuaW9uKFt6MTkuc3RyaW5nKCksIHoxOS5udW1iZXIoKSwgejE5LmJvb2xlYW4oKV0pXG4gICAgICAgICAgICAgICAgKSxcbiAgICAgICAgICAgICAgICBmaWxlX2lkOiB6MTkuc3RyaW5nKCksXG4gICAgICAgICAgICAgICAgZmlsZW5hbWU6IHoxOS5zdHJpbmcoKSxcbiAgICAgICAgICAgICAgICBzY29yZTogejE5Lm51bWJlcigpLFxuICAgICAgICAgICAgICAgIHRleHQ6IHoxOS5zdHJpbmcoKVxuICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgKS5udWxsaXNoKClcbiAgICAgICAgICB9KSxcbiAgICAgICAgICB6MTkub2JqZWN0KHtcbiAgICAgICAgICAgIHR5cGU6IHoxOS5saXRlcmFsKFwibG9jYWxfc2hlbGxfY2FsbFwiKSxcbiAgICAgICAgICAgIGlkOiB6MTkuc3RyaW5nKCksXG4gICAgICAgICAgICBjYWxsX2lkOiB6MTkuc3RyaW5nKCksXG4gICAgICAgICAgICBhY3Rpb246IHoxOS5vYmplY3Qoe1xuICAgICAgICAgICAgICB0eXBlOiB6MTkubGl0ZXJhbChcImV4ZWNcIiksXG4gICAgICAgICAgICAgIGNvbW1hbmQ6IHoxOS5hcnJheSh6MTkuc3RyaW5nKCkpLFxuICAgICAgICAgICAgICB0aW1lb3V0X21zOiB6MTkubnVtYmVyKCkub3B0aW9uYWwoKSxcbiAgICAgICAgICAgICAgdXNlcjogejE5LnN0cmluZygpLm9wdGlvbmFsKCksXG4gICAgICAgICAgICAgIHdvcmtpbmdfZGlyZWN0b3J5OiB6MTkuc3RyaW5nKCkub3B0aW9uYWwoKSxcbiAgICAgICAgICAgICAgZW52OiB6MTkucmVjb3JkKHoxOS5zdHJpbmcoKSwgejE5LnN0cmluZygpKS5vcHRpb25hbCgpXG4gICAgICAgICAgICB9KVxuICAgICAgICAgIH0pLFxuICAgICAgICAgIHoxOS5vYmplY3Qoe1xuICAgICAgICAgICAgdHlwZTogejE5LmxpdGVyYWwoXCJjb21wdXRlcl9jYWxsXCIpLFxuICAgICAgICAgICAgaWQ6IHoxOS5zdHJpbmcoKSxcbiAgICAgICAgICAgIHN0YXR1czogejE5LmxpdGVyYWwoXCJjb21wbGV0ZWRcIilcbiAgICAgICAgICB9KSxcbiAgICAgICAgICB6MTkub2JqZWN0KHtcbiAgICAgICAgICAgIHR5cGU6IHoxOS5saXRlcmFsKFwibWNwX2NhbGxcIiksXG4gICAgICAgICAgICBpZDogejE5LnN0cmluZygpLFxuICAgICAgICAgICAgc3RhdHVzOiB6MTkuc3RyaW5nKCksXG4gICAgICAgICAgICBhcmd1bWVudHM6IHoxOS5zdHJpbmcoKSxcbiAgICAgICAgICAgIG5hbWU6IHoxOS5zdHJpbmcoKSxcbiAgICAgICAgICAgIHNlcnZlcl9sYWJlbDogejE5LnN0cmluZygpLFxuICAgICAgICAgICAgb3V0cHV0OiB6MTkuc3RyaW5nKCkubnVsbGlzaCgpLFxuICAgICAgICAgICAgZXJyb3I6IHoxOS51bmlvbihbXG4gICAgICAgICAgICAgIHoxOS5zdHJpbmcoKSxcbiAgICAgICAgICAgICAgejE5Lm9iamVjdCh7XG4gICAgICAgICAgICAgICAgdHlwZTogejE5LnN0cmluZygpLm9wdGlvbmFsKCksXG4gICAgICAgICAgICAgICAgY29kZTogejE5LnVuaW9uKFt6MTkubnVtYmVyKCksIHoxOS5zdHJpbmcoKV0pLm9wdGlvbmFsKCksXG4gICAgICAgICAgICAgICAgbWVzc2FnZTogejE5LnN0cmluZygpLm9wdGlvbmFsKClcbiAgICAgICAgICAgICAgfSkubG9vc2UoKVxuICAgICAgICAgICAgXSkubnVsbGlzaCgpLFxuICAgICAgICAgICAgYXBwcm92YWxfcmVxdWVzdF9pZDogejE5LnN0cmluZygpLm51bGxpc2goKVxuICAgICAgICAgIH0pLFxuICAgICAgICAgIHoxOS5vYmplY3Qoe1xuICAgICAgICAgICAgdHlwZTogejE5LmxpdGVyYWwoXCJtY3BfbGlzdF90b29sc1wiKSxcbiAgICAgICAgICAgIGlkOiB6MTkuc3RyaW5nKCksXG4gICAgICAgICAgICBzZXJ2ZXJfbGFiZWw6IHoxOS5zdHJpbmcoKSxcbiAgICAgICAgICAgIHRvb2xzOiB6MTkuYXJyYXkoXG4gICAgICAgICAgICAgIHoxOS5vYmplY3Qoe1xuICAgICAgICAgICAgICAgIG5hbWU6IHoxOS5zdHJpbmcoKSxcbiAgICAgICAgICAgICAgICBkZXNjcmlwdGlvbjogejE5LnN0cmluZygpLm9wdGlvbmFsKCksXG4gICAgICAgICAgICAgICAgaW5wdXRfc2NoZW1hOiB6MTkuYW55KCksXG4gICAgICAgICAgICAgICAgYW5ub3RhdGlvbnM6IHoxOS5yZWNvcmQoejE5LnN0cmluZygpLCB6MTkudW5rbm93bigpKS5vcHRpb25hbCgpXG4gICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICApLFxuICAgICAgICAgICAgZXJyb3I6IHoxOS51bmlvbihbXG4gICAgICAgICAgICAgIHoxOS5zdHJpbmcoKSxcbiAgICAgICAgICAgICAgejE5Lm9iamVjdCh7XG4gICAgICAgICAgICAgICAgdHlwZTogejE5LnN0cmluZygpLm9wdGlvbmFsKCksXG4gICAgICAgICAgICAgICAgY29kZTogejE5LnVuaW9uKFt6MTkubnVtYmVyKCksIHoxOS5zdHJpbmcoKV0pLm9wdGlvbmFsKCksXG4gICAgICAgICAgICAgICAgbWVzc2FnZTogejE5LnN0cmluZygpLm9wdGlvbmFsKClcbiAgICAgICAgICAgICAgfSkubG9vc2UoKVxuICAgICAgICAgICAgXSkub3B0aW9uYWwoKVxuICAgICAgICAgIH0pLFxuICAgICAgICAgIHoxOS5vYmplY3Qoe1xuICAgICAgICAgICAgdHlwZTogejE5LmxpdGVyYWwoXCJtY3BfYXBwcm92YWxfcmVxdWVzdFwiKSxcbiAgICAgICAgICAgIGlkOiB6MTkuc3RyaW5nKCksXG4gICAgICAgICAgICBzZXJ2ZXJfbGFiZWw6IHoxOS5zdHJpbmcoKSxcbiAgICAgICAgICAgIG5hbWU6IHoxOS5zdHJpbmcoKSxcbiAgICAgICAgICAgIGFyZ3VtZW50czogejE5LnN0cmluZygpLFxuICAgICAgICAgICAgYXBwcm92YWxfcmVxdWVzdF9pZDogejE5LnN0cmluZygpLm9wdGlvbmFsKClcbiAgICAgICAgICB9KSxcbiAgICAgICAgICB6MTkub2JqZWN0KHtcbiAgICAgICAgICAgIHR5cGU6IHoxOS5saXRlcmFsKFwiYXBwbHlfcGF0Y2hfY2FsbFwiKSxcbiAgICAgICAgICAgIGlkOiB6MTkuc3RyaW5nKCksXG4gICAgICAgICAgICBjYWxsX2lkOiB6MTkuc3RyaW5nKCksXG4gICAgICAgICAgICBzdGF0dXM6IHoxOS5lbnVtKFtcImluX3Byb2dyZXNzXCIsIFwiY29tcGxldGVkXCJdKSxcbiAgICAgICAgICAgIG9wZXJhdGlvbjogejE5LmRpc2NyaW1pbmF0ZWRVbmlvbihcInR5cGVcIiwgW1xuICAgICAgICAgICAgICB6MTkub2JqZWN0KHtcbiAgICAgICAgICAgICAgICB0eXBlOiB6MTkubGl0ZXJhbChcImNyZWF0ZV9maWxlXCIpLFxuICAgICAgICAgICAgICAgIHBhdGg6IHoxOS5zdHJpbmcoKSxcbiAgICAgICAgICAgICAgICBkaWZmOiB6MTkuc3RyaW5nKClcbiAgICAgICAgICAgICAgfSksXG4gICAgICAgICAgICAgIHoxOS5vYmplY3Qoe1xuICAgICAgICAgICAgICAgIHR5cGU6IHoxOS5saXRlcmFsKFwiZGVsZXRlX2ZpbGVcIiksXG4gICAgICAgICAgICAgICAgcGF0aDogejE5LnN0cmluZygpXG4gICAgICAgICAgICAgIH0pLFxuICAgICAgICAgICAgICB6MTkub2JqZWN0KHtcbiAgICAgICAgICAgICAgICB0eXBlOiB6MTkubGl0ZXJhbChcInVwZGF0ZV9maWxlXCIpLFxuICAgICAgICAgICAgICAgIHBhdGg6IHoxOS5zdHJpbmcoKSxcbiAgICAgICAgICAgICAgICBkaWZmOiB6MTkuc3RyaW5nKClcbiAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIF0pXG4gICAgICAgICAgfSksXG4gICAgICAgICAgejE5Lm9iamVjdCh7XG4gICAgICAgICAgICB0eXBlOiB6MTkubGl0ZXJhbChcInNoZWxsX2NhbGxcIiksXG4gICAgICAgICAgICBpZDogejE5LnN0cmluZygpLFxuICAgICAgICAgICAgY2FsbF9pZDogejE5LnN0cmluZygpLFxuICAgICAgICAgICAgc3RhdHVzOiB6MTkuZW51bShbXCJpbl9wcm9ncmVzc1wiLCBcImNvbXBsZXRlZFwiLCBcImluY29tcGxldGVcIl0pLFxuICAgICAgICAgICAgYWN0aW9uOiB6MTkub2JqZWN0KHtcbiAgICAgICAgICAgICAgY29tbWFuZHM6IHoxOS5hcnJheSh6MTkuc3RyaW5nKCkpXG4gICAgICAgICAgICB9KVxuICAgICAgICAgIH0pXG4gICAgICAgIF0pXG4gICAgICB9KSxcbiAgICAgIHoxOS5vYmplY3Qoe1xuICAgICAgICB0eXBlOiB6MTkubGl0ZXJhbChcInJlc3BvbnNlLmZ1bmN0aW9uX2NhbGxfYXJndW1lbnRzLmRlbHRhXCIpLFxuICAgICAgICBpdGVtX2lkOiB6MTkuc3RyaW5nKCksXG4gICAgICAgIG91dHB1dF9pbmRleDogejE5Lm51bWJlcigpLFxuICAgICAgICBkZWx0YTogejE5LnN0cmluZygpXG4gICAgICB9KSxcbiAgICAgIHoxOS5vYmplY3Qoe1xuICAgICAgICB0eXBlOiB6MTkubGl0ZXJhbChcInJlc3BvbnNlLmltYWdlX2dlbmVyYXRpb25fY2FsbC5wYXJ0aWFsX2ltYWdlXCIpLFxuICAgICAgICBpdGVtX2lkOiB6MTkuc3RyaW5nKCksXG4gICAgICAgIG91dHB1dF9pbmRleDogejE5Lm51bWJlcigpLFxuICAgICAgICBwYXJ0aWFsX2ltYWdlX2I2NDogejE5LnN0cmluZygpXG4gICAgICB9KSxcbiAgICAgIHoxOS5vYmplY3Qoe1xuICAgICAgICB0eXBlOiB6MTkubGl0ZXJhbChcInJlc3BvbnNlLmNvZGVfaW50ZXJwcmV0ZXJfY2FsbF9jb2RlLmRlbHRhXCIpLFxuICAgICAgICBpdGVtX2lkOiB6MTkuc3RyaW5nKCksXG4gICAgICAgIG91dHB1dF9pbmRleDogejE5Lm51bWJlcigpLFxuICAgICAgICBkZWx0YTogejE5LnN0cmluZygpXG4gICAgICB9KSxcbiAgICAgIHoxOS5vYmplY3Qoe1xuICAgICAgICB0eXBlOiB6MTkubGl0ZXJhbChcInJlc3BvbnNlLmNvZGVfaW50ZXJwcmV0ZXJfY2FsbF9jb2RlLmRvbmVcIiksXG4gICAgICAgIGl0ZW1faWQ6IHoxOS5zdHJpbmcoKSxcbiAgICAgICAgb3V0cHV0X2luZGV4OiB6MTkubnVtYmVyKCksXG4gICAgICAgIGNvZGU6IHoxOS5zdHJpbmcoKVxuICAgICAgfSksXG4gICAgICB6MTkub2JqZWN0KHtcbiAgICAgICAgdHlwZTogejE5LmxpdGVyYWwoXCJyZXNwb25zZS5vdXRwdXRfdGV4dC5hbm5vdGF0aW9uLmFkZGVkXCIpLFxuICAgICAgICBhbm5vdGF0aW9uOiB6MTkuZGlzY3JpbWluYXRlZFVuaW9uKFwidHlwZVwiLCBbXG4gICAgICAgICAgejE5Lm9iamVjdCh7XG4gICAgICAgICAgICB0eXBlOiB6MTkubGl0ZXJhbChcInVybF9jaXRhdGlvblwiKSxcbiAgICAgICAgICAgIHN0YXJ0X2luZGV4OiB6MTkubnVtYmVyKCksXG4gICAgICAgICAgICBlbmRfaW5kZXg6IHoxOS5udW1iZXIoKSxcbiAgICAgICAgICAgIHVybDogejE5LnN0cmluZygpLFxuICAgICAgICAgICAgdGl0bGU6IHoxOS5zdHJpbmcoKVxuICAgICAgICAgIH0pLFxuICAgICAgICAgIHoxOS5vYmplY3Qoe1xuICAgICAgICAgICAgdHlwZTogejE5LmxpdGVyYWwoXCJmaWxlX2NpdGF0aW9uXCIpLFxuICAgICAgICAgICAgZmlsZV9pZDogejE5LnN0cmluZygpLFxuICAgICAgICAgICAgZmlsZW5hbWU6IHoxOS5zdHJpbmcoKS5udWxsaXNoKCksXG4gICAgICAgICAgICBpbmRleDogejE5Lm51bWJlcigpLm51bGxpc2goKSxcbiAgICAgICAgICAgIHN0YXJ0X2luZGV4OiB6MTkubnVtYmVyKCkubnVsbGlzaCgpLFxuICAgICAgICAgICAgZW5kX2luZGV4OiB6MTkubnVtYmVyKCkubnVsbGlzaCgpLFxuICAgICAgICAgICAgcXVvdGU6IHoxOS5zdHJpbmcoKS5udWxsaXNoKClcbiAgICAgICAgICB9KSxcbiAgICAgICAgICB6MTkub2JqZWN0KHtcbiAgICAgICAgICAgIHR5cGU6IHoxOS5saXRlcmFsKFwiY29udGFpbmVyX2ZpbGVfY2l0YXRpb25cIiksXG4gICAgICAgICAgICBjb250YWluZXJfaWQ6IHoxOS5zdHJpbmcoKSxcbiAgICAgICAgICAgIGZpbGVfaWQ6IHoxOS5zdHJpbmcoKSxcbiAgICAgICAgICAgIGZpbGVuYW1lOiB6MTkuc3RyaW5nKCkubnVsbGlzaCgpLFxuICAgICAgICAgICAgc3RhcnRfaW5kZXg6IHoxOS5udW1iZXIoKS5udWxsaXNoKCksXG4gICAgICAgICAgICBlbmRfaW5kZXg6IHoxOS5udW1iZXIoKS5udWxsaXNoKCksXG4gICAgICAgICAgICBpbmRleDogejE5Lm51bWJlcigpLm51bGxpc2goKVxuICAgICAgICAgIH0pLFxuICAgICAgICAgIHoxOS5vYmplY3Qoe1xuICAgICAgICAgICAgdHlwZTogejE5LmxpdGVyYWwoXCJmaWxlX3BhdGhcIiksXG4gICAgICAgICAgICBmaWxlX2lkOiB6MTkuc3RyaW5nKCksXG4gICAgICAgICAgICBpbmRleDogejE5Lm51bWJlcigpLm51bGxpc2goKVxuICAgICAgICAgIH0pXG4gICAgICAgIF0pXG4gICAgICB9KSxcbiAgICAgIHoxOS5vYmplY3Qoe1xuICAgICAgICB0eXBlOiB6MTkubGl0ZXJhbChcInJlc3BvbnNlLnJlYXNvbmluZ19zdW1tYXJ5X3BhcnQuYWRkZWRcIiksXG4gICAgICAgIGl0ZW1faWQ6IHoxOS5zdHJpbmcoKSxcbiAgICAgICAgc3VtbWFyeV9pbmRleDogejE5Lm51bWJlcigpXG4gICAgICB9KSxcbiAgICAgIHoxOS5vYmplY3Qoe1xuICAgICAgICB0eXBlOiB6MTkubGl0ZXJhbChcInJlc3BvbnNlLnJlYXNvbmluZ19zdW1tYXJ5X3RleHQuZGVsdGFcIiksXG4gICAgICAgIGl0ZW1faWQ6IHoxOS5zdHJpbmcoKSxcbiAgICAgICAgc3VtbWFyeV9pbmRleDogejE5Lm51bWJlcigpLFxuICAgICAgICBkZWx0YTogejE5LnN0cmluZygpXG4gICAgICB9KSxcbiAgICAgIHoxOS5vYmplY3Qoe1xuICAgICAgICB0eXBlOiB6MTkubGl0ZXJhbChcInJlc3BvbnNlLnJlYXNvbmluZ19zdW1tYXJ5X3BhcnQuZG9uZVwiKSxcbiAgICAgICAgaXRlbV9pZDogejE5LnN0cmluZygpLFxuICAgICAgICBzdW1tYXJ5X2luZGV4OiB6MTkubnVtYmVyKClcbiAgICAgIH0pLFxuICAgICAgejE5Lm9iamVjdCh7XG4gICAgICAgIHR5cGU6IHoxOS5saXRlcmFsKFwicmVzcG9uc2UuYXBwbHlfcGF0Y2hfY2FsbF9vcGVyYXRpb25fZGlmZi5kZWx0YVwiKSxcbiAgICAgICAgaXRlbV9pZDogejE5LnN0cmluZygpLFxuICAgICAgICBvdXRwdXRfaW5kZXg6IHoxOS5udW1iZXIoKSxcbiAgICAgICAgZGVsdGE6IHoxOS5zdHJpbmcoKSxcbiAgICAgICAgb2JmdXNjYXRpb246IHoxOS5zdHJpbmcoKS5udWxsaXNoKClcbiAgICAgIH0pLFxuICAgICAgejE5Lm9iamVjdCh7XG4gICAgICAgIHR5cGU6IHoxOS5saXRlcmFsKFwicmVzcG9uc2UuYXBwbHlfcGF0Y2hfY2FsbF9vcGVyYXRpb25fZGlmZi5kb25lXCIpLFxuICAgICAgICBpdGVtX2lkOiB6MTkuc3RyaW5nKCksXG4gICAgICAgIG91dHB1dF9pbmRleDogejE5Lm51bWJlcigpLFxuICAgICAgICBkaWZmOiB6MTkuc3RyaW5nKClcbiAgICAgIH0pLFxuICAgICAgejE5Lm9iamVjdCh7XG4gICAgICAgIHR5cGU6IHoxOS5saXRlcmFsKFwiZXJyb3JcIiksXG4gICAgICAgIHNlcXVlbmNlX251bWJlcjogejE5Lm51bWJlcigpLFxuICAgICAgICBlcnJvcjogejE5Lm9iamVjdCh7XG4gICAgICAgICAgdHlwZTogejE5LnN0cmluZygpLFxuICAgICAgICAgIGNvZGU6IHoxOS5zdHJpbmcoKSxcbiAgICAgICAgICBtZXNzYWdlOiB6MTkuc3RyaW5nKCksXG4gICAgICAgICAgcGFyYW06IHoxOS5zdHJpbmcoKS5udWxsaXNoKClcbiAgICAgICAgfSlcbiAgICAgIH0pLFxuICAgICAgejE5Lm9iamVjdCh7IHR5cGU6IHoxOS5zdHJpbmcoKSB9KS5sb29zZSgpLnRyYW5zZm9ybSgodmFsdWUpID0+ICh7XG4gICAgICAgIHR5cGU6IFwidW5rbm93bl9jaHVua1wiLFxuICAgICAgICBtZXNzYWdlOiB2YWx1ZS50eXBlXG4gICAgICB9KSlcbiAgICAgIC8vIGZhbGxiYWNrIGZvciB1bmtub3duIGNodW5rc1xuICAgIF0pXG4gIClcbik7XG52YXIgb3BlbmFpUmVzcG9uc2VzUmVzcG9uc2VTY2hlbWEgPSBsYXp5U2NoZW1hMTcoXG4gICgpID0+IHpvZFNjaGVtYTE3KFxuICAgIHoxOS5vYmplY3Qoe1xuICAgICAgaWQ6IHoxOS5zdHJpbmcoKS5vcHRpb25hbCgpLFxuICAgICAgY3JlYXRlZF9hdDogejE5Lm51bWJlcigpLm9wdGlvbmFsKCksXG4gICAgICBlcnJvcjogejE5Lm9iamVjdCh7XG4gICAgICAgIG1lc3NhZ2U6IHoxOS5zdHJpbmcoKSxcbiAgICAgICAgdHlwZTogejE5LnN0cmluZygpLFxuICAgICAgICBwYXJhbTogejE5LnN0cmluZygpLm51bGxpc2goKSxcbiAgICAgICAgY29kZTogejE5LnN0cmluZygpXG4gICAgICB9KS5udWxsaXNoKCksXG4gICAgICBtb2RlbDogejE5LnN0cmluZygpLm9wdGlvbmFsKCksXG4gICAgICBvdXRwdXQ6IHoxOS5hcnJheShcbiAgICAgICAgejE5LmRpc2NyaW1pbmF0ZWRVbmlvbihcInR5cGVcIiwgW1xuICAgICAgICAgIHoxOS5vYmplY3Qoe1xuICAgICAgICAgICAgdHlwZTogejE5LmxpdGVyYWwoXCJtZXNzYWdlXCIpLFxuICAgICAgICAgICAgcm9sZTogejE5LmxpdGVyYWwoXCJhc3Npc3RhbnRcIiksXG4gICAgICAgICAgICBpZDogejE5LnN0cmluZygpLFxuICAgICAgICAgICAgY29udGVudDogejE5LmFycmF5KFxuICAgICAgICAgICAgICB6MTkub2JqZWN0KHtcbiAgICAgICAgICAgICAgICB0eXBlOiB6MTkubGl0ZXJhbChcIm91dHB1dF90ZXh0XCIpLFxuICAgICAgICAgICAgICAgIHRleHQ6IHoxOS5zdHJpbmcoKSxcbiAgICAgICAgICAgICAgICBsb2dwcm9iczogejE5LmFycmF5KFxuICAgICAgICAgICAgICAgICAgejE5Lm9iamVjdCh7XG4gICAgICAgICAgICAgICAgICAgIHRva2VuOiB6MTkuc3RyaW5nKCksXG4gICAgICAgICAgICAgICAgICAgIGxvZ3Byb2I6IHoxOS5udW1iZXIoKSxcbiAgICAgICAgICAgICAgICAgICAgdG9wX2xvZ3Byb2JzOiB6MTkuYXJyYXkoXG4gICAgICAgICAgICAgICAgICAgICAgejE5Lm9iamVjdCh7XG4gICAgICAgICAgICAgICAgICAgICAgICB0b2tlbjogejE5LnN0cmluZygpLFxuICAgICAgICAgICAgICAgICAgICAgICAgbG9ncHJvYjogejE5Lm51bWJlcigpXG4gICAgICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICApLm51bGxpc2goKSxcbiAgICAgICAgICAgICAgICBhbm5vdGF0aW9uczogejE5LmFycmF5KFxuICAgICAgICAgICAgICAgICAgejE5LmRpc2NyaW1pbmF0ZWRVbmlvbihcInR5cGVcIiwgW1xuICAgICAgICAgICAgICAgICAgICB6MTkub2JqZWN0KHtcbiAgICAgICAgICAgICAgICAgICAgICB0eXBlOiB6MTkubGl0ZXJhbChcInVybF9jaXRhdGlvblwiKSxcbiAgICAgICAgICAgICAgICAgICAgICBzdGFydF9pbmRleDogejE5Lm51bWJlcigpLFxuICAgICAgICAgICAgICAgICAgICAgIGVuZF9pbmRleDogejE5Lm51bWJlcigpLFxuICAgICAgICAgICAgICAgICAgICAgIHVybDogejE5LnN0cmluZygpLFxuICAgICAgICAgICAgICAgICAgICAgIHRpdGxlOiB6MTkuc3RyaW5nKClcbiAgICAgICAgICAgICAgICAgICAgfSksXG4gICAgICAgICAgICAgICAgICAgIHoxOS5vYmplY3Qoe1xuICAgICAgICAgICAgICAgICAgICAgIHR5cGU6IHoxOS5saXRlcmFsKFwiZmlsZV9jaXRhdGlvblwiKSxcbiAgICAgICAgICAgICAgICAgICAgICBmaWxlX2lkOiB6MTkuc3RyaW5nKCksXG4gICAgICAgICAgICAgICAgICAgICAgZmlsZW5hbWU6IHoxOS5zdHJpbmcoKS5udWxsaXNoKCksXG4gICAgICAgICAgICAgICAgICAgICAgaW5kZXg6IHoxOS5udW1iZXIoKS5udWxsaXNoKCksXG4gICAgICAgICAgICAgICAgICAgICAgc3RhcnRfaW5kZXg6IHoxOS5udW1iZXIoKS5udWxsaXNoKCksXG4gICAgICAgICAgICAgICAgICAgICAgZW5kX2luZGV4OiB6MTkubnVtYmVyKCkubnVsbGlzaCgpLFxuICAgICAgICAgICAgICAgICAgICAgIHF1b3RlOiB6MTkuc3RyaW5nKCkubnVsbGlzaCgpXG4gICAgICAgICAgICAgICAgICAgIH0pLFxuICAgICAgICAgICAgICAgICAgICB6MTkub2JqZWN0KHtcbiAgICAgICAgICAgICAgICAgICAgICB0eXBlOiB6MTkubGl0ZXJhbChcImNvbnRhaW5lcl9maWxlX2NpdGF0aW9uXCIpLFxuICAgICAgICAgICAgICAgICAgICAgIGNvbnRhaW5lcl9pZDogejE5LnN0cmluZygpLFxuICAgICAgICAgICAgICAgICAgICAgIGZpbGVfaWQ6IHoxOS5zdHJpbmcoKSxcbiAgICAgICAgICAgICAgICAgICAgICBmaWxlbmFtZTogejE5LnN0cmluZygpLm51bGxpc2goKSxcbiAgICAgICAgICAgICAgICAgICAgICBzdGFydF9pbmRleDogejE5Lm51bWJlcigpLm51bGxpc2goKSxcbiAgICAgICAgICAgICAgICAgICAgICBlbmRfaW5kZXg6IHoxOS5udW1iZXIoKS5udWxsaXNoKCksXG4gICAgICAgICAgICAgICAgICAgICAgaW5kZXg6IHoxOS5udW1iZXIoKS5udWxsaXNoKClcbiAgICAgICAgICAgICAgICAgICAgfSksXG4gICAgICAgICAgICAgICAgICAgIHoxOS5vYmplY3Qoe1xuICAgICAgICAgICAgICAgICAgICAgIHR5cGU6IHoxOS5saXRlcmFsKFwiZmlsZV9wYXRoXCIpLFxuICAgICAgICAgICAgICAgICAgICAgIGZpbGVfaWQ6IHoxOS5zdHJpbmcoKSxcbiAgICAgICAgICAgICAgICAgICAgICBpbmRleDogejE5Lm51bWJlcigpLm51bGxpc2goKVxuICAgICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgICAgXSlcbiAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICApXG4gICAgICAgICAgfSksXG4gICAgICAgICAgejE5Lm9iamVjdCh7XG4gICAgICAgICAgICB0eXBlOiB6MTkubGl0ZXJhbChcIndlYl9zZWFyY2hfY2FsbFwiKSxcbiAgICAgICAgICAgIGlkOiB6MTkuc3RyaW5nKCksXG4gICAgICAgICAgICBzdGF0dXM6IHoxOS5zdHJpbmcoKSxcbiAgICAgICAgICAgIGFjdGlvbjogejE5LmRpc2NyaW1pbmF0ZWRVbmlvbihcInR5cGVcIiwgW1xuICAgICAgICAgICAgICB6MTkub2JqZWN0KHtcbiAgICAgICAgICAgICAgICB0eXBlOiB6MTkubGl0ZXJhbChcInNlYXJjaFwiKSxcbiAgICAgICAgICAgICAgICBxdWVyeTogejE5LnN0cmluZygpLm51bGxpc2goKSxcbiAgICAgICAgICAgICAgICBzb3VyY2VzOiB6MTkuYXJyYXkoXG4gICAgICAgICAgICAgICAgICB6MTkuZGlzY3JpbWluYXRlZFVuaW9uKFwidHlwZVwiLCBbXG4gICAgICAgICAgICAgICAgICAgIHoxOS5vYmplY3QoeyB0eXBlOiB6MTkubGl0ZXJhbChcInVybFwiKSwgdXJsOiB6MTkuc3RyaW5nKCkgfSksXG4gICAgICAgICAgICAgICAgICAgIHoxOS5vYmplY3QoeyB0eXBlOiB6MTkubGl0ZXJhbChcImFwaVwiKSwgbmFtZTogejE5LnN0cmluZygpIH0pXG4gICAgICAgICAgICAgICAgICBdKVxuICAgICAgICAgICAgICAgICkubnVsbGlzaCgpXG4gICAgICAgICAgICAgIH0pLFxuICAgICAgICAgICAgICB6MTkub2JqZWN0KHtcbiAgICAgICAgICAgICAgICB0eXBlOiB6MTkubGl0ZXJhbChcIm9wZW5fcGFnZVwiKSxcbiAgICAgICAgICAgICAgICB1cmw6IHoxOS5zdHJpbmcoKS5udWxsaXNoKClcbiAgICAgICAgICAgICAgfSksXG4gICAgICAgICAgICAgIHoxOS5vYmplY3Qoe1xuICAgICAgICAgICAgICAgIHR5cGU6IHoxOS5saXRlcmFsKFwiZmluZF9pbl9wYWdlXCIpLFxuICAgICAgICAgICAgICAgIHVybDogejE5LnN0cmluZygpLm51bGxpc2goKSxcbiAgICAgICAgICAgICAgICBwYXR0ZXJuOiB6MTkuc3RyaW5nKCkubnVsbGlzaCgpXG4gICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICBdKVxuICAgICAgICAgIH0pLFxuICAgICAgICAgIHoxOS5vYmplY3Qoe1xuICAgICAgICAgICAgdHlwZTogejE5LmxpdGVyYWwoXCJmaWxlX3NlYXJjaF9jYWxsXCIpLFxuICAgICAgICAgICAgaWQ6IHoxOS5zdHJpbmcoKSxcbiAgICAgICAgICAgIHF1ZXJpZXM6IHoxOS5hcnJheSh6MTkuc3RyaW5nKCkpLFxuICAgICAgICAgICAgcmVzdWx0czogejE5LmFycmF5KFxuICAgICAgICAgICAgICB6MTkub2JqZWN0KHtcbiAgICAgICAgICAgICAgICBhdHRyaWJ1dGVzOiB6MTkucmVjb3JkKFxuICAgICAgICAgICAgICAgICAgejE5LnN0cmluZygpLFxuICAgICAgICAgICAgICAgICAgejE5LnVuaW9uKFt6MTkuc3RyaW5nKCksIHoxOS5udW1iZXIoKSwgejE5LmJvb2xlYW4oKV0pXG4gICAgICAgICAgICAgICAgKSxcbiAgICAgICAgICAgICAgICBmaWxlX2lkOiB6MTkuc3RyaW5nKCksXG4gICAgICAgICAgICAgICAgZmlsZW5hbWU6IHoxOS5zdHJpbmcoKSxcbiAgICAgICAgICAgICAgICBzY29yZTogejE5Lm51bWJlcigpLFxuICAgICAgICAgICAgICAgIHRleHQ6IHoxOS5zdHJpbmcoKVxuICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgKS5udWxsaXNoKClcbiAgICAgICAgICB9KSxcbiAgICAgICAgICB6MTkub2JqZWN0KHtcbiAgICAgICAgICAgIHR5cGU6IHoxOS5saXRlcmFsKFwiY29kZV9pbnRlcnByZXRlcl9jYWxsXCIpLFxuICAgICAgICAgICAgaWQ6IHoxOS5zdHJpbmcoKSxcbiAgICAgICAgICAgIGNvZGU6IHoxOS5zdHJpbmcoKS5udWxsYWJsZSgpLFxuICAgICAgICAgICAgY29udGFpbmVyX2lkOiB6MTkuc3RyaW5nKCksXG4gICAgICAgICAgICBvdXRwdXRzOiB6MTkuYXJyYXkoXG4gICAgICAgICAgICAgIHoxOS5kaXNjcmltaW5hdGVkVW5pb24oXCJ0eXBlXCIsIFtcbiAgICAgICAgICAgICAgICB6MTkub2JqZWN0KHsgdHlwZTogejE5LmxpdGVyYWwoXCJsb2dzXCIpLCBsb2dzOiB6MTkuc3RyaW5nKCkgfSksXG4gICAgICAgICAgICAgICAgejE5Lm9iamVjdCh7IHR5cGU6IHoxOS5saXRlcmFsKFwiaW1hZ2VcIiksIHVybDogejE5LnN0cmluZygpIH0pXG4gICAgICAgICAgICAgIF0pXG4gICAgICAgICAgICApLm51bGxhYmxlKClcbiAgICAgICAgICB9KSxcbiAgICAgICAgICB6MTkub2JqZWN0KHtcbiAgICAgICAgICAgIHR5cGU6IHoxOS5saXRlcmFsKFwiaW1hZ2VfZ2VuZXJhdGlvbl9jYWxsXCIpLFxuICAgICAgICAgICAgaWQ6IHoxOS5zdHJpbmcoKSxcbiAgICAgICAgICAgIHJlc3VsdDogejE5LnN0cmluZygpXG4gICAgICAgICAgfSksXG4gICAgICAgICAgejE5Lm9iamVjdCh7XG4gICAgICAgICAgICB0eXBlOiB6MTkubGl0ZXJhbChcImxvY2FsX3NoZWxsX2NhbGxcIiksXG4gICAgICAgICAgICBpZDogejE5LnN0cmluZygpLFxuICAgICAgICAgICAgY2FsbF9pZDogejE5LnN0cmluZygpLFxuICAgICAgICAgICAgYWN0aW9uOiB6MTkub2JqZWN0KHtcbiAgICAgICAgICAgICAgdHlwZTogejE5LmxpdGVyYWwoXCJleGVjXCIpLFxuICAgICAgICAgICAgICBjb21tYW5kOiB6MTkuYXJyYXkoejE5LnN0cmluZygpKSxcbiAgICAgICAgICAgICAgdGltZW91dF9tczogejE5Lm51bWJlcigpLm9wdGlvbmFsKCksXG4gICAgICAgICAgICAgIHVzZXI6IHoxOS5zdHJpbmcoKS5vcHRpb25hbCgpLFxuICAgICAgICAgICAgICB3b3JraW5nX2RpcmVjdG9yeTogejE5LnN0cmluZygpLm9wdGlvbmFsKCksXG4gICAgICAgICAgICAgIGVudjogejE5LnJlY29yZCh6MTkuc3RyaW5nKCksIHoxOS5zdHJpbmcoKSkub3B0aW9uYWwoKVxuICAgICAgICAgICAgfSlcbiAgICAgICAgICB9KSxcbiAgICAgICAgICB6MTkub2JqZWN0KHtcbiAgICAgICAgICAgIHR5cGU6IHoxOS5saXRlcmFsKFwiZnVuY3Rpb25fY2FsbFwiKSxcbiAgICAgICAgICAgIGNhbGxfaWQ6IHoxOS5zdHJpbmcoKSxcbiAgICAgICAgICAgIG5hbWU6IHoxOS5zdHJpbmcoKSxcbiAgICAgICAgICAgIGFyZ3VtZW50czogejE5LnN0cmluZygpLFxuICAgICAgICAgICAgaWQ6IHoxOS5zdHJpbmcoKVxuICAgICAgICAgIH0pLFxuICAgICAgICAgIHoxOS5vYmplY3Qoe1xuICAgICAgICAgICAgdHlwZTogejE5LmxpdGVyYWwoXCJjb21wdXRlcl9jYWxsXCIpLFxuICAgICAgICAgICAgaWQ6IHoxOS5zdHJpbmcoKSxcbiAgICAgICAgICAgIHN0YXR1czogejE5LnN0cmluZygpLm9wdGlvbmFsKClcbiAgICAgICAgICB9KSxcbiAgICAgICAgICB6MTkub2JqZWN0KHtcbiAgICAgICAgICAgIHR5cGU6IHoxOS5saXRlcmFsKFwicmVhc29uaW5nXCIpLFxuICAgICAgICAgICAgaWQ6IHoxOS5zdHJpbmcoKSxcbiAgICAgICAgICAgIGVuY3J5cHRlZF9jb250ZW50OiB6MTkuc3RyaW5nKCkubnVsbGlzaCgpLFxuICAgICAgICAgICAgc3VtbWFyeTogejE5LmFycmF5KFxuICAgICAgICAgICAgICB6MTkub2JqZWN0KHtcbiAgICAgICAgICAgICAgICB0eXBlOiB6MTkubGl0ZXJhbChcInN1bW1hcnlfdGV4dFwiKSxcbiAgICAgICAgICAgICAgICB0ZXh0OiB6MTkuc3RyaW5nKClcbiAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIClcbiAgICAgICAgICB9KSxcbiAgICAgICAgICB6MTkub2JqZWN0KHtcbiAgICAgICAgICAgIHR5cGU6IHoxOS5saXRlcmFsKFwibWNwX2NhbGxcIiksXG4gICAgICAgICAgICBpZDogejE5LnN0cmluZygpLFxuICAgICAgICAgICAgc3RhdHVzOiB6MTkuc3RyaW5nKCksXG4gICAgICAgICAgICBhcmd1bWVudHM6IHoxOS5zdHJpbmcoKSxcbiAgICAgICAgICAgIG5hbWU6IHoxOS5zdHJpbmcoKSxcbiAgICAgICAgICAgIHNlcnZlcl9sYWJlbDogejE5LnN0cmluZygpLFxuICAgICAgICAgICAgb3V0cHV0OiB6MTkuc3RyaW5nKCkubnVsbGlzaCgpLFxuICAgICAgICAgICAgZXJyb3I6IHoxOS51bmlvbihbXG4gICAgICAgICAgICAgIHoxOS5zdHJpbmcoKSxcbiAgICAgICAgICAgICAgejE5Lm9iamVjdCh7XG4gICAgICAgICAgICAgICAgdHlwZTogejE5LnN0cmluZygpLm9wdGlvbmFsKCksXG4gICAgICAgICAgICAgICAgY29kZTogejE5LnVuaW9uKFt6MTkubnVtYmVyKCksIHoxOS5zdHJpbmcoKV0pLm9wdGlvbmFsKCksXG4gICAgICAgICAgICAgICAgbWVzc2FnZTogejE5LnN0cmluZygpLm9wdGlvbmFsKClcbiAgICAgICAgICAgICAgfSkubG9vc2UoKVxuICAgICAgICAgICAgXSkubnVsbGlzaCgpLFxuICAgICAgICAgICAgYXBwcm92YWxfcmVxdWVzdF9pZDogejE5LnN0cmluZygpLm51bGxpc2goKVxuICAgICAgICAgIH0pLFxuICAgICAgICAgIHoxOS5vYmplY3Qoe1xuICAgICAgICAgICAgdHlwZTogejE5LmxpdGVyYWwoXCJtY3BfbGlzdF90b29sc1wiKSxcbiAgICAgICAgICAgIGlkOiB6MTkuc3RyaW5nKCksXG4gICAgICAgICAgICBzZXJ2ZXJfbGFiZWw6IHoxOS5zdHJpbmcoKSxcbiAgICAgICAgICAgIHRvb2xzOiB6MTkuYXJyYXkoXG4gICAgICAgICAgICAgIHoxOS5vYmplY3Qoe1xuICAgICAgICAgICAgICAgIG5hbWU6IHoxOS5zdHJpbmcoKSxcbiAgICAgICAgICAgICAgICBkZXNjcmlwdGlvbjogejE5LnN0cmluZygpLm9wdGlvbmFsKCksXG4gICAgICAgICAgICAgICAgaW5wdXRfc2NoZW1hOiB6MTkuYW55KCksXG4gICAgICAgICAgICAgICAgYW5ub3RhdGlvbnM6IHoxOS5yZWNvcmQoejE5LnN0cmluZygpLCB6MTkudW5rbm93bigpKS5vcHRpb25hbCgpXG4gICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICApLFxuICAgICAgICAgICAgZXJyb3I6IHoxOS51bmlvbihbXG4gICAgICAgICAgICAgIHoxOS5zdHJpbmcoKSxcbiAgICAgICAgICAgICAgejE5Lm9iamVjdCh7XG4gICAgICAgICAgICAgICAgdHlwZTogejE5LnN0cmluZygpLm9wdGlvbmFsKCksXG4gICAgICAgICAgICAgICAgY29kZTogejE5LnVuaW9uKFt6MTkubnVtYmVyKCksIHoxOS5zdHJpbmcoKV0pLm9wdGlvbmFsKCksXG4gICAgICAgICAgICAgICAgbWVzc2FnZTogejE5LnN0cmluZygpLm9wdGlvbmFsKClcbiAgICAgICAgICAgICAgfSkubG9vc2UoKVxuICAgICAgICAgICAgXSkub3B0aW9uYWwoKVxuICAgICAgICAgIH0pLFxuICAgICAgICAgIHoxOS5vYmplY3Qoe1xuICAgICAgICAgICAgdHlwZTogejE5LmxpdGVyYWwoXCJtY3BfYXBwcm92YWxfcmVxdWVzdFwiKSxcbiAgICAgICAgICAgIGlkOiB6MTkuc3RyaW5nKCksXG4gICAgICAgICAgICBzZXJ2ZXJfbGFiZWw6IHoxOS5zdHJpbmcoKSxcbiAgICAgICAgICAgIG5hbWU6IHoxOS5zdHJpbmcoKSxcbiAgICAgICAgICAgIGFyZ3VtZW50czogejE5LnN0cmluZygpLFxuICAgICAgICAgICAgYXBwcm92YWxfcmVxdWVzdF9pZDogejE5LnN0cmluZygpLm9wdGlvbmFsKClcbiAgICAgICAgICB9KSxcbiAgICAgICAgICB6MTkub2JqZWN0KHtcbiAgICAgICAgICAgIHR5cGU6IHoxOS5saXRlcmFsKFwiYXBwbHlfcGF0Y2hfY2FsbFwiKSxcbiAgICAgICAgICAgIGlkOiB6MTkuc3RyaW5nKCksXG4gICAgICAgICAgICBjYWxsX2lkOiB6MTkuc3RyaW5nKCksXG4gICAgICAgICAgICBzdGF0dXM6IHoxOS5lbnVtKFtcImluX3Byb2dyZXNzXCIsIFwiY29tcGxldGVkXCJdKSxcbiAgICAgICAgICAgIG9wZXJhdGlvbjogejE5LmRpc2NyaW1pbmF0ZWRVbmlvbihcInR5cGVcIiwgW1xuICAgICAgICAgICAgICB6MTkub2JqZWN0KHtcbiAgICAgICAgICAgICAgICB0eXBlOiB6MTkubGl0ZXJhbChcImNyZWF0ZV9maWxlXCIpLFxuICAgICAgICAgICAgICAgIHBhdGg6IHoxOS5zdHJpbmcoKSxcbiAgICAgICAgICAgICAgICBkaWZmOiB6MTkuc3RyaW5nKClcbiAgICAgICAgICAgICAgfSksXG4gICAgICAgICAgICAgIHoxOS5vYmplY3Qoe1xuICAgICAgICAgICAgICAgIHR5cGU6IHoxOS5saXRlcmFsKFwiZGVsZXRlX2ZpbGVcIiksXG4gICAgICAgICAgICAgICAgcGF0aDogejE5LnN0cmluZygpXG4gICAgICAgICAgICAgIH0pLFxuICAgICAgICAgICAgICB6MTkub2JqZWN0KHtcbiAgICAgICAgICAgICAgICB0eXBlOiB6MTkubGl0ZXJhbChcInVwZGF0ZV9maWxlXCIpLFxuICAgICAgICAgICAgICAgIHBhdGg6IHoxOS5zdHJpbmcoKSxcbiAgICAgICAgICAgICAgICBkaWZmOiB6MTkuc3RyaW5nKClcbiAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIF0pXG4gICAgICAgICAgfSksXG4gICAgICAgICAgejE5Lm9iamVjdCh7XG4gICAgICAgICAgICB0eXBlOiB6MTkubGl0ZXJhbChcInNoZWxsX2NhbGxcIiksXG4gICAgICAgICAgICBpZDogejE5LnN0cmluZygpLFxuICAgICAgICAgICAgY2FsbF9pZDogejE5LnN0cmluZygpLFxuICAgICAgICAgICAgc3RhdHVzOiB6MTkuZW51bShbXCJpbl9wcm9ncmVzc1wiLCBcImNvbXBsZXRlZFwiLCBcImluY29tcGxldGVcIl0pLFxuICAgICAgICAgICAgYWN0aW9uOiB6MTkub2JqZWN0KHtcbiAgICAgICAgICAgICAgY29tbWFuZHM6IHoxOS5hcnJheSh6MTkuc3RyaW5nKCkpXG4gICAgICAgICAgICB9KVxuICAgICAgICAgIH0pXG4gICAgICAgIF0pXG4gICAgICApLm9wdGlvbmFsKCksXG4gICAgICBzZXJ2aWNlX3RpZXI6IHoxOS5zdHJpbmcoKS5udWxsaXNoKCksXG4gICAgICBpbmNvbXBsZXRlX2RldGFpbHM6IHoxOS5vYmplY3QoeyByZWFzb246IHoxOS5zdHJpbmcoKSB9KS5udWxsaXNoKCksXG4gICAgICB1c2FnZTogejE5Lm9iamVjdCh7XG4gICAgICAgIGlucHV0X3Rva2VuczogejE5Lm51bWJlcigpLFxuICAgICAgICBpbnB1dF90b2tlbnNfZGV0YWlsczogejE5Lm9iamVjdCh7IGNhY2hlZF90b2tlbnM6IHoxOS5udW1iZXIoKS5udWxsaXNoKCkgfSkubnVsbGlzaCgpLFxuICAgICAgICBvdXRwdXRfdG9rZW5zOiB6MTkubnVtYmVyKCksXG4gICAgICAgIG91dHB1dF90b2tlbnNfZGV0YWlsczogejE5Lm9iamVjdCh7IHJlYXNvbmluZ190b2tlbnM6IHoxOS5udW1iZXIoKS5udWxsaXNoKCkgfSkubnVsbGlzaCgpXG4gICAgICB9KS5vcHRpb25hbCgpXG4gICAgfSlcbiAgKVxuKTtcblxuLy8gc3JjL3Jlc3BvbnNlcy9vcGVuYWktcmVzcG9uc2VzLW9wdGlvbnMudHNcbmltcG9ydCB7IGxhenlTY2hlbWEgYXMgbGF6eVNjaGVtYTE4LCB6b2RTY2hlbWEgYXMgem9kU2NoZW1hMTggfSBmcm9tIFwiQGFpLXNkay9wcm92aWRlci11dGlsc1wiO1xuaW1wb3J0IHsgeiBhcyB6MjAgfSBmcm9tIFwiem9kL3Y0XCI7XG52YXIgVE9QX0xPR1BST0JTX01BWCA9IDIwO1xudmFyIG9wZW5haVJlc3BvbnNlc1JlYXNvbmluZ01vZGVsSWRzID0gW1xuICBcIm8xXCIsXG4gIFwibzEtMjAyNC0xMi0xN1wiLFxuICBcIm8zXCIsXG4gIFwibzMtMjAyNS0wNC0xNlwiLFxuICBcIm8zLWRlZXAtcmVzZWFyY2hcIixcbiAgXCJvMy1kZWVwLXJlc2VhcmNoLTIwMjUtMDYtMjZcIixcbiAgXCJvMy1taW5pXCIsXG4gIFwibzMtbWluaS0yMDI1LTAxLTMxXCIsXG4gIFwibzQtbWluaVwiLFxuICBcIm80LW1pbmktMjAyNS0wNC0xNlwiLFxuICBcIm80LW1pbmktZGVlcC1yZXNlYXJjaFwiLFxuICBcIm80LW1pbmktZGVlcC1yZXNlYXJjaC0yMDI1LTA2LTI2XCIsXG4gIFwiY29kZXgtbWluaS1sYXRlc3RcIixcbiAgXCJjb21wdXRlci11c2UtcHJldmlld1wiLFxuICBcImdwdC01XCIsXG4gIFwiZ3B0LTUtMjAyNS0wOC0wN1wiLFxuICBcImdwdC01LWNvZGV4XCIsXG4gIFwiZ3B0LTUtbWluaVwiLFxuICBcImdwdC01LW1pbmktMjAyNS0wOC0wN1wiLFxuICBcImdwdC01LW5hbm9cIixcbiAgXCJncHQtNS1uYW5vLTIwMjUtMDgtMDdcIixcbiAgXCJncHQtNS1wcm9cIixcbiAgXCJncHQtNS1wcm8tMjAyNS0xMC0wNlwiLFxuICBcImdwdC01LjFcIixcbiAgXCJncHQtNS4xLWNoYXQtbGF0ZXN0XCIsXG4gIFwiZ3B0LTUuMS1jb2RleC1taW5pXCIsXG4gIFwiZ3B0LTUuMS1jb2RleFwiLFxuICBcImdwdC01LjEtY29kZXgtbWF4XCIsXG4gIFwiZ3B0LTUuMlwiLFxuICBcImdwdC01LjItY2hhdC1sYXRlc3RcIixcbiAgXCJncHQtNS4yLXByb1wiXG5dO1xudmFyIG9wZW5haVJlc3BvbnNlc01vZGVsSWRzID0gW1xuICBcImdwdC00LjFcIixcbiAgXCJncHQtNC4xLTIwMjUtMDQtMTRcIixcbiAgXCJncHQtNC4xLW1pbmlcIixcbiAgXCJncHQtNC4xLW1pbmktMjAyNS0wNC0xNFwiLFxuICBcImdwdC00LjEtbmFub1wiLFxuICBcImdwdC00LjEtbmFuby0yMDI1LTA0LTE0XCIsXG4gIFwiZ3B0LTRvXCIsXG4gIFwiZ3B0LTRvLTIwMjQtMDUtMTNcIixcbiAgXCJncHQtNG8tMjAyNC0wOC0wNlwiLFxuICBcImdwdC00by0yMDI0LTExLTIwXCIsXG4gIFwiZ3B0LTRvLWF1ZGlvLXByZXZpZXdcIixcbiAgXCJncHQtNG8tYXVkaW8tcHJldmlldy0yMDI0LTEwLTAxXCIsXG4gIFwiZ3B0LTRvLWF1ZGlvLXByZXZpZXctMjAyNC0xMi0xN1wiLFxuICBcImdwdC00by1zZWFyY2gtcHJldmlld1wiLFxuICBcImdwdC00by1zZWFyY2gtcHJldmlldy0yMDI1LTAzLTExXCIsXG4gIFwiZ3B0LTRvLW1pbmktc2VhcmNoLXByZXZpZXdcIixcbiAgXCJncHQtNG8tbWluaS1zZWFyY2gtcHJldmlldy0yMDI1LTAzLTExXCIsXG4gIFwiZ3B0LTRvLW1pbmlcIixcbiAgXCJncHQtNG8tbWluaS0yMDI0LTA3LTE4XCIsXG4gIFwiZ3B0LTQtdHVyYm9cIixcbiAgXCJncHQtNC10dXJiby0yMDI0LTA0LTA5XCIsXG4gIFwiZ3B0LTQtdHVyYm8tcHJldmlld1wiLFxuICBcImdwdC00LTAxMjUtcHJldmlld1wiLFxuICBcImdwdC00LTExMDYtcHJldmlld1wiLFxuICBcImdwdC00XCIsXG4gIFwiZ3B0LTQtMDYxM1wiLFxuICBcImdwdC00LjUtcHJldmlld1wiLFxuICBcImdwdC00LjUtcHJldmlldy0yMDI1LTAyLTI3XCIsXG4gIFwiZ3B0LTMuNS10dXJiby0wMTI1XCIsXG4gIFwiZ3B0LTMuNS10dXJib1wiLFxuICBcImdwdC0zLjUtdHVyYm8tMTEwNlwiLFxuICBcImNoYXRncHQtNG8tbGF0ZXN0XCIsXG4gIFwiZ3B0LTUtY2hhdC1sYXRlc3RcIixcbiAgLi4ub3BlbmFpUmVzcG9uc2VzUmVhc29uaW5nTW9kZWxJZHNcbl07XG52YXIgb3BlbmFpUmVzcG9uc2VzUHJvdmlkZXJPcHRpb25zU2NoZW1hID0gbGF6eVNjaGVtYTE4KFxuICAoKSA9PiB6b2RTY2hlbWExOChcbiAgICB6MjAub2JqZWN0KHtcbiAgICAgIC8qKlxuICAgICAgICogVGhlIElEIG9mIHRoZSBPcGVuQUkgQ29udmVyc2F0aW9uIHRvIGNvbnRpbnVlLlxuICAgICAgICogWW91IG11c3QgY3JlYXRlIGEgY29udmVyc2F0aW9uIGZpcnN0IHZpYSB0aGUgT3BlbkFJIEFQSS5cbiAgICAgICAqIENhbm5vdCBiZSB1c2VkIGluIGNvbmp1bmN0aW9uIHdpdGggYHByZXZpb3VzUmVzcG9uc2VJZGAuXG4gICAgICAgKiBEZWZhdWx0cyB0byBgdW5kZWZpbmVkYC5cbiAgICAgICAqIEBzZWUgaHR0cHM6Ly9wbGF0Zm9ybS5vcGVuYWkuY29tL2RvY3MvYXBpLXJlZmVyZW5jZS9jb252ZXJzYXRpb25zL2NyZWF0ZVxuICAgICAgICovXG4gICAgICBjb252ZXJzYXRpb246IHoyMC5zdHJpbmcoKS5udWxsaXNoKCksXG4gICAgICAvKipcbiAgICAgICAqIFRoZSBzZXQgb2YgZXh0cmEgZmllbGRzIHRvIGluY2x1ZGUgaW4gdGhlIHJlc3BvbnNlIChhZHZhbmNlZCwgdXN1YWxseSBub3QgbmVlZGVkKS5cbiAgICAgICAqIEV4YW1wbGUgdmFsdWVzOiAncmVhc29uaW5nLmVuY3J5cHRlZF9jb250ZW50JywgJ2ZpbGVfc2VhcmNoX2NhbGwucmVzdWx0cycsICdtZXNzYWdlLm91dHB1dF90ZXh0LmxvZ3Byb2JzJy5cbiAgICAgICAqL1xuICAgICAgaW5jbHVkZTogejIwLmFycmF5KFxuICAgICAgICB6MjAuZW51bShbXG4gICAgICAgICAgXCJyZWFzb25pbmcuZW5jcnlwdGVkX2NvbnRlbnRcIixcbiAgICAgICAgICAvLyBoYW5kbGVkIGludGVybmFsbHkgYnkgZGVmYXVsdCwgb25seSBuZWVkZWQgZm9yIHVua25vd24gcmVhc29uaW5nIG1vZGVsc1xuICAgICAgICAgIFwiZmlsZV9zZWFyY2hfY2FsbC5yZXN1bHRzXCIsXG4gICAgICAgICAgXCJtZXNzYWdlLm91dHB1dF90ZXh0LmxvZ3Byb2JzXCJcbiAgICAgICAgXSlcbiAgICAgICkubnVsbGlzaCgpLFxuICAgICAgLyoqXG4gICAgICAgKiBJbnN0cnVjdGlvbnMgZm9yIHRoZSBtb2RlbC5cbiAgICAgICAqIFRoZXkgY2FuIGJlIHVzZWQgdG8gY2hhbmdlIHRoZSBzeXN0ZW0gb3IgZGV2ZWxvcGVyIG1lc3NhZ2Ugd2hlbiBjb250aW51aW5nIGEgY29udmVyc2F0aW9uIHVzaW5nIHRoZSBgcHJldmlvdXNSZXNwb25zZUlkYCBvcHRpb24uXG4gICAgICAgKiBEZWZhdWx0cyB0byBgdW5kZWZpbmVkYC5cbiAgICAgICAqL1xuICAgICAgaW5zdHJ1Y3Rpb25zOiB6MjAuc3RyaW5nKCkubnVsbGlzaCgpLFxuICAgICAgLyoqXG4gICAgICAgKiBSZXR1cm4gdGhlIGxvZyBwcm9iYWJpbGl0aWVzIG9mIHRoZSB0b2tlbnMuIEluY2x1ZGluZyBsb2dwcm9icyB3aWxsIGluY3JlYXNlXG4gICAgICAgKiB0aGUgcmVzcG9uc2Ugc2l6ZSBhbmQgY2FuIHNsb3cgZG93biByZXNwb25zZSB0aW1lcy4gSG93ZXZlciwgaXQgY2FuXG4gICAgICAgKiBiZSB1c2VmdWwgdG8gYmV0dGVyIHVuZGVyc3RhbmQgaG93IHRoZSBtb2RlbCBpcyBiZWhhdmluZy5cbiAgICAgICAqXG4gICAgICAgKiBTZXR0aW5nIHRvIHRydWUgd2lsbCByZXR1cm4gdGhlIGxvZyBwcm9iYWJpbGl0aWVzIG9mIHRoZSB0b2tlbnMgdGhhdFxuICAgICAgICogd2VyZSBnZW5lcmF0ZWQuXG4gICAgICAgKlxuICAgICAgICogU2V0dGluZyB0byBhIG51bWJlciB3aWxsIHJldHVybiB0aGUgbG9nIHByb2JhYmlsaXRpZXMgb2YgdGhlIHRvcCBuXG4gICAgICAgKiB0b2tlbnMgdGhhdCB3ZXJlIGdlbmVyYXRlZC5cbiAgICAgICAqXG4gICAgICAgKiBAc2VlIGh0dHBzOi8vcGxhdGZvcm0ub3BlbmFpLmNvbS9kb2NzL2FwaS1yZWZlcmVuY2UvcmVzcG9uc2VzL2NyZWF0ZVxuICAgICAgICogQHNlZSBodHRwczovL2Nvb2tib29rLm9wZW5haS5jb20vZXhhbXBsZXMvdXNpbmdfbG9ncHJvYnNcbiAgICAgICAqL1xuICAgICAgbG9ncHJvYnM6IHoyMC51bmlvbihbejIwLmJvb2xlYW4oKSwgejIwLm51bWJlcigpLm1pbigxKS5tYXgoVE9QX0xPR1BST0JTX01BWCldKS5vcHRpb25hbCgpLFxuICAgICAgLyoqXG4gICAgICAgKiBUaGUgbWF4aW11bSBudW1iZXIgb2YgdG90YWwgY2FsbHMgdG8gYnVpbHQtaW4gdG9vbHMgdGhhdCBjYW4gYmUgcHJvY2Vzc2VkIGluIGEgcmVzcG9uc2UuXG4gICAgICAgKiBUaGlzIG1heGltdW0gbnVtYmVyIGFwcGxpZXMgYWNyb3NzIGFsbCBidWlsdC1pbiB0b29sIGNhbGxzLCBub3QgcGVyIGluZGl2aWR1YWwgdG9vbC5cbiAgICAgICAqIEFueSBmdXJ0aGVyIGF0dGVtcHRzIHRvIGNhbGwgYSB0b29sIGJ5IHRoZSBtb2RlbCB3aWxsIGJlIGlnbm9yZWQuXG4gICAgICAgKi9cbiAgICAgIG1heFRvb2xDYWxsczogejIwLm51bWJlcigpLm51bGxpc2goKSxcbiAgICAgIC8qKlxuICAgICAgICogQWRkaXRpb25hbCBtZXRhZGF0YSB0byBzdG9yZSB3aXRoIHRoZSBnZW5lcmF0aW9uLlxuICAgICAgICovXG4gICAgICBtZXRhZGF0YTogejIwLmFueSgpLm51bGxpc2goKSxcbiAgICAgIC8qKlxuICAgICAgICogV2hldGhlciB0byB1c2UgcGFyYWxsZWwgdG9vbCBjYWxscy4gRGVmYXVsdHMgdG8gYHRydWVgLlxuICAgICAgICovXG4gICAgICBwYXJhbGxlbFRvb2xDYWxsczogejIwLmJvb2xlYW4oKS5udWxsaXNoKCksXG4gICAgICAvKipcbiAgICAgICAqIFRoZSBJRCBvZiB0aGUgcHJldmlvdXMgcmVzcG9uc2UuIFlvdSBjYW4gdXNlIGl0IHRvIGNvbnRpbnVlIGEgY29udmVyc2F0aW9uLlxuICAgICAgICogRGVmYXVsdHMgdG8gYHVuZGVmaW5lZGAuXG4gICAgICAgKi9cbiAgICAgIHByZXZpb3VzUmVzcG9uc2VJZDogejIwLnN0cmluZygpLm51bGxpc2goKSxcbiAgICAgIC8qKlxuICAgICAgICogU2V0cyBhIGNhY2hlIGtleSB0byB0aWUgdGhpcyBwcm9tcHQgdG8gY2FjaGVkIHByZWZpeGVzIGZvciBiZXR0ZXIgY2FjaGluZyBwZXJmb3JtYW5jZS5cbiAgICAgICAqL1xuICAgICAgcHJvbXB0Q2FjaGVLZXk6IHoyMC5zdHJpbmcoKS5udWxsaXNoKCksXG4gICAgICAvKipcbiAgICAgICAqIFRoZSByZXRlbnRpb24gcG9saWN5IGZvciB0aGUgcHJvbXB0IGNhY2hlLlxuICAgICAgICogLSAnaW5fbWVtb3J5JzogRGVmYXVsdC4gU3RhbmRhcmQgcHJvbXB0IGNhY2hpbmcgYmVoYXZpb3IuXG4gICAgICAgKiAtICcyNGgnOiBFeHRlbmRlZCBwcm9tcHQgY2FjaGluZyB0aGF0IGtlZXBzIGNhY2hlZCBwcmVmaXhlcyBhY3RpdmUgZm9yIHVwIHRvIDI0IGhvdXJzLlxuICAgICAgICogICAgICAgICAgQ3VycmVudGx5IG9ubHkgYXZhaWxhYmxlIGZvciA1LjEgc2VyaWVzIG1vZGVscy5cbiAgICAgICAqXG4gICAgICAgKiBAZGVmYXVsdCAnaW5fbWVtb3J5J1xuICAgICAgICovXG4gICAgICBwcm9tcHRDYWNoZVJldGVudGlvbjogejIwLmVudW0oW1wiaW5fbWVtb3J5XCIsIFwiMjRoXCJdKS5udWxsaXNoKCksXG4gICAgICAvKipcbiAgICAgICAqIFJlYXNvbmluZyBlZmZvcnQgZm9yIHJlYXNvbmluZyBtb2RlbHMuIERlZmF1bHRzIHRvIGBtZWRpdW1gLiBJZiB5b3UgdXNlXG4gICAgICAgKiBgcHJvdmlkZXJPcHRpb25zYCB0byBzZXQgdGhlIGByZWFzb25pbmdFZmZvcnRgIG9wdGlvbiwgdGhpcyBtb2RlbCBzZXR0aW5nIHdpbGwgYmUgaWdub3JlZC5cbiAgICAgICAqIFZhbGlkIHZhbHVlczogJ25vbmUnIHwgJ21pbmltYWwnIHwgJ2xvdycgfCAnbWVkaXVtJyB8ICdoaWdoJyB8ICd4aGlnaCdcbiAgICAgICAqXG4gICAgICAgKiBUaGUgJ25vbmUnIHR5cGUgZm9yIGByZWFzb25pbmdFZmZvcnRgIGlzIG9ubHkgYXZhaWxhYmxlIGZvciBPcGVuQUkncyBHUFQtNS4xXG4gICAgICAgKiBtb2RlbHMuIEFsc28sIHRoZSAneGhpZ2gnIHR5cGUgZm9yIGByZWFzb25pbmdFZmZvcnRgIGlzIG9ubHkgYXZhaWxhYmxlIGZvclxuICAgICAgICogT3BlbkFJJ3MgR1BULTUuMS1Db2RleC1NYXggbW9kZWwuIFNldHRpbmcgYHJlYXNvbmluZ0VmZm9ydGAgdG8gJ25vbmUnIG9yICd4aGlnaCcgd2l0aCB1bnN1cHBvcnRlZCBtb2RlbHMgd2lsbCByZXN1bHQgaW5cbiAgICAgICAqIGFuIGVycm9yLlxuICAgICAgICovXG4gICAgICByZWFzb25pbmdFZmZvcnQ6IHoyMC5zdHJpbmcoKS5udWxsaXNoKCksXG4gICAgICAvKipcbiAgICAgICAqIENvbnRyb2xzIHJlYXNvbmluZyBzdW1tYXJ5IG91dHB1dCBmcm9tIHRoZSBtb2RlbC5cbiAgICAgICAqIFNldCB0byBcImF1dG9cIiB0byBhdXRvbWF0aWNhbGx5IHJlY2VpdmUgdGhlIHJpY2hlc3QgbGV2ZWwgYXZhaWxhYmxlLFxuICAgICAgICogb3IgXCJkZXRhaWxlZFwiIGZvciBjb21wcmVoZW5zaXZlIHN1bW1hcmllcy5cbiAgICAgICAqL1xuICAgICAgcmVhc29uaW5nU3VtbWFyeTogejIwLnN0cmluZygpLm51bGxpc2goKSxcbiAgICAgIC8qKlxuICAgICAgICogVGhlIGlkZW50aWZpZXIgZm9yIHNhZmV0eSBtb25pdG9yaW5nIGFuZCB0cmFja2luZy5cbiAgICAgICAqL1xuICAgICAgc2FmZXR5SWRlbnRpZmllcjogejIwLnN0cmluZygpLm51bGxpc2goKSxcbiAgICAgIC8qKlxuICAgICAgICogU2VydmljZSB0aWVyIGZvciB0aGUgcmVxdWVzdC5cbiAgICAgICAqIFNldCB0byAnZmxleCcgZm9yIDUwJSBjaGVhcGVyIHByb2Nlc3NpbmcgYXQgdGhlIGNvc3Qgb2YgaW5jcmVhc2VkIGxhdGVuY3kgKGF2YWlsYWJsZSBmb3IgbzMsIG80LW1pbmksIGFuZCBncHQtNSBtb2RlbHMpLlxuICAgICAgICogU2V0IHRvICdwcmlvcml0eScgZm9yIGZhc3RlciBwcm9jZXNzaW5nIHdpdGggRW50ZXJwcmlzZSBhY2Nlc3MgKGF2YWlsYWJsZSBmb3IgZ3B0LTQsIGdwdC01LCBncHQtNS1taW5pLCBvMywgbzQtbWluaTsgZ3B0LTUtbmFubyBpcyBub3Qgc3VwcG9ydGVkKS5cbiAgICAgICAqXG4gICAgICAgKiBEZWZhdWx0cyB0byAnYXV0bycuXG4gICAgICAgKi9cbiAgICAgIHNlcnZpY2VUaWVyOiB6MjAuZW51bShbXCJhdXRvXCIsIFwiZmxleFwiLCBcInByaW9yaXR5XCIsIFwiZGVmYXVsdFwiXSkubnVsbGlzaCgpLFxuICAgICAgLyoqXG4gICAgICAgKiBXaGV0aGVyIHRvIHN0b3JlIHRoZSBnZW5lcmF0aW9uLiBEZWZhdWx0cyB0byBgdHJ1ZWAuXG4gICAgICAgKi9cbiAgICAgIHN0b3JlOiB6MjAuYm9vbGVhbigpLm51bGxpc2goKSxcbiAgICAgIC8qKlxuICAgICAgICogV2hldGhlciB0byB1c2Ugc3RyaWN0IEpTT04gc2NoZW1hIHZhbGlkYXRpb24uXG4gICAgICAgKiBEZWZhdWx0cyB0byBgdHJ1ZWAuXG4gICAgICAgKi9cbiAgICAgIHN0cmljdEpzb25TY2hlbWE6IHoyMC5ib29sZWFuKCkubnVsbGlzaCgpLFxuICAgICAgLyoqXG4gICAgICAgKiBDb250cm9scyB0aGUgdmVyYm9zaXR5IG9mIHRoZSBtb2RlbCdzIHJlc3BvbnNlcy4gTG93ZXIgdmFsdWVzICgnbG93Jykgd2lsbCByZXN1bHRcbiAgICAgICAqIGluIG1vcmUgY29uY2lzZSByZXNwb25zZXMsIHdoaWxlIGhpZ2hlciB2YWx1ZXMgKCdoaWdoJykgd2lsbCByZXN1bHQgaW4gbW9yZSB2ZXJib3NlIHJlc3BvbnNlcy5cbiAgICAgICAqIFZhbGlkIHZhbHVlczogJ2xvdycsICdtZWRpdW0nLCAnaGlnaCcuXG4gICAgICAgKi9cbiAgICAgIHRleHRWZXJib3NpdHk6IHoyMC5lbnVtKFtcImxvd1wiLCBcIm1lZGl1bVwiLCBcImhpZ2hcIl0pLm51bGxpc2goKSxcbiAgICAgIC8qKlxuICAgICAgICogQ29udHJvbHMgb3V0cHV0IHRydW5jYXRpb24uICdhdXRvJyAoZGVmYXVsdCkgcGVyZm9ybXMgdHJ1bmNhdGlvbiBhdXRvbWF0aWNhbGx5O1xuICAgICAgICogJ2Rpc2FibGVkJyB0dXJucyB0cnVuY2F0aW9uIG9mZi5cbiAgICAgICAqL1xuICAgICAgdHJ1bmNhdGlvbjogejIwLmVudW0oW1wiYXV0b1wiLCBcImRpc2FibGVkXCJdKS5udWxsaXNoKCksXG4gICAgICAvKipcbiAgICAgICAqIEEgdW5pcXVlIGlkZW50aWZpZXIgcmVwcmVzZW50aW5nIHlvdXIgZW5kLXVzZXIsIHdoaWNoIGNhbiBoZWxwIE9wZW5BSSB0b1xuICAgICAgICogbW9uaXRvciBhbmQgZGV0ZWN0IGFidXNlLlxuICAgICAgICogRGVmYXVsdHMgdG8gYHVuZGVmaW5lZGAuXG4gICAgICAgKiBAc2VlIGh0dHBzOi8vcGxhdGZvcm0ub3BlbmFpLmNvbS9kb2NzL2d1aWRlcy9zYWZldHktYmVzdC1wcmFjdGljZXMvZW5kLXVzZXItaWRzXG4gICAgICAgKi9cbiAgICAgIHVzZXI6IHoyMC5zdHJpbmcoKS5udWxsaXNoKCksXG4gICAgICAvKipcbiAgICAgICAqIE92ZXJyaWRlIHRoZSBzeXN0ZW0gbWVzc2FnZSBtb2RlIGZvciB0aGlzIG1vZGVsLlxuICAgICAgICogLSAnc3lzdGVtJzogVXNlIHRoZSAnc3lzdGVtJyByb2xlIGZvciBzeXN0ZW0gbWVzc2FnZXMgKGRlZmF1bHQgZm9yIG1vc3QgbW9kZWxzKVxuICAgICAgICogLSAnZGV2ZWxvcGVyJzogVXNlIHRoZSAnZGV2ZWxvcGVyJyByb2xlIGZvciBzeXN0ZW0gbWVzc2FnZXMgKHVzZWQgYnkgcmVhc29uaW5nIG1vZGVscylcbiAgICAgICAqIC0gJ3JlbW92ZSc6IFJlbW92ZSBzeXN0ZW0gbWVzc2FnZXMgZW50aXJlbHlcbiAgICAgICAqXG4gICAgICAgKiBJZiBub3Qgc3BlY2lmaWVkLCB0aGUgbW9kZSBpcyBhdXRvbWF0aWNhbGx5IGRldGVybWluZWQgYmFzZWQgb24gdGhlIG1vZGVsLlxuICAgICAgICovXG4gICAgICBzeXN0ZW1NZXNzYWdlTW9kZTogejIwLmVudW0oW1wic3lzdGVtXCIsIFwiZGV2ZWxvcGVyXCIsIFwicmVtb3ZlXCJdKS5vcHRpb25hbCgpLFxuICAgICAgLyoqXG4gICAgICAgKiBGb3JjZSB0cmVhdGluZyB0aGlzIG1vZGVsIGFzIGEgcmVhc29uaW5nIG1vZGVsLlxuICAgICAgICpcbiAgICAgICAqIFRoaXMgaXMgdXNlZnVsIGZvciBcInN0ZWFsdGhcIiByZWFzb25pbmcgbW9kZWxzIChlLmcuIHZpYSBhIGN1c3RvbSBiYXNlVVJMKVxuICAgICAgICogd2hlcmUgdGhlIG1vZGVsIElEIGlzIG5vdCByZWNvZ25pemVkIGJ5IHRoZSBTREsncyBhbGxvd2xpc3QuXG4gICAgICAgKlxuICAgICAgICogV2hlbiBlbmFibGVkLCB0aGUgU0RLIGFwcGxpZXMgcmVhc29uaW5nLW1vZGVsIHBhcmFtZXRlciBjb21wYXRpYmlsaXR5IHJ1bGVzXG4gICAgICAgKiBhbmQgZGVmYXVsdHMgYHN5c3RlbU1lc3NhZ2VNb2RlYCB0byBgZGV2ZWxvcGVyYCB1bmxlc3Mgb3ZlcnJpZGRlbi5cbiAgICAgICAqL1xuICAgICAgZm9yY2VSZWFzb25pbmc6IHoyMC5ib29sZWFuKCkub3B0aW9uYWwoKVxuICAgIH0pXG4gIClcbik7XG5cbi8vIHNyYy9yZXNwb25zZXMvb3BlbmFpLXJlc3BvbnNlcy1wcmVwYXJlLXRvb2xzLnRzXG5pbXBvcnQge1xuICBVbnN1cHBvcnRlZEZ1bmN0aW9uYWxpdHlFcnJvciBhcyBVbnN1cHBvcnRlZEZ1bmN0aW9uYWxpdHlFcnJvcjVcbn0gZnJvbSBcIkBhaS1zZGsvcHJvdmlkZXJcIjtcbmltcG9ydCB7IHZhbGlkYXRlVHlwZXMgYXMgdmFsaWRhdGVUeXBlczIgfSBmcm9tIFwiQGFpLXNkay9wcm92aWRlci11dGlsc1wiO1xuYXN5bmMgZnVuY3Rpb24gcHJlcGFyZVJlc3BvbnNlc1Rvb2xzKHtcbiAgdG9vbHMsXG4gIHRvb2xDaG9pY2Vcbn0pIHtcbiAgdG9vbHMgPSAodG9vbHMgPT0gbnVsbCA/IHZvaWQgMCA6IHRvb2xzLmxlbmd0aCkgPyB0b29scyA6IHZvaWQgMDtcbiAgY29uc3QgdG9vbFdhcm5pbmdzID0gW107XG4gIGlmICh0b29scyA9PSBudWxsKSB7XG4gICAgcmV0dXJuIHsgdG9vbHM6IHZvaWQgMCwgdG9vbENob2ljZTogdm9pZCAwLCB0b29sV2FybmluZ3MgfTtcbiAgfVxuICBjb25zdCBvcGVuYWlUb29sczIgPSBbXTtcbiAgZm9yIChjb25zdCB0b29sIG9mIHRvb2xzKSB7XG4gICAgc3dpdGNoICh0b29sLnR5cGUpIHtcbiAgICAgIGNhc2UgXCJmdW5jdGlvblwiOlxuICAgICAgICBvcGVuYWlUb29sczIucHVzaCh7XG4gICAgICAgICAgdHlwZTogXCJmdW5jdGlvblwiLFxuICAgICAgICAgIG5hbWU6IHRvb2wubmFtZSxcbiAgICAgICAgICBkZXNjcmlwdGlvbjogdG9vbC5kZXNjcmlwdGlvbixcbiAgICAgICAgICBwYXJhbWV0ZXJzOiB0b29sLmlucHV0U2NoZW1hLFxuICAgICAgICAgIC4uLnRvb2wuc3RyaWN0ICE9IG51bGwgPyB7IHN0cmljdDogdG9vbC5zdHJpY3QgfSA6IHt9XG4gICAgICAgIH0pO1xuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgXCJwcm92aWRlclwiOiB7XG4gICAgICAgIHN3aXRjaCAodG9vbC5pZCkge1xuICAgICAgICAgIGNhc2UgXCJvcGVuYWkuZmlsZV9zZWFyY2hcIjoge1xuICAgICAgICAgICAgY29uc3QgYXJncyA9IGF3YWl0IHZhbGlkYXRlVHlwZXMyKHtcbiAgICAgICAgICAgICAgdmFsdWU6IHRvb2wuYXJncyxcbiAgICAgICAgICAgICAgc2NoZW1hOiBmaWxlU2VhcmNoQXJnc1NjaGVtYVxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBvcGVuYWlUb29sczIucHVzaCh7XG4gICAgICAgICAgICAgIHR5cGU6IFwiZmlsZV9zZWFyY2hcIixcbiAgICAgICAgICAgICAgdmVjdG9yX3N0b3JlX2lkczogYXJncy52ZWN0b3JTdG9yZUlkcyxcbiAgICAgICAgICAgICAgbWF4X251bV9yZXN1bHRzOiBhcmdzLm1heE51bVJlc3VsdHMsXG4gICAgICAgICAgICAgIHJhbmtpbmdfb3B0aW9uczogYXJncy5yYW5raW5nID8ge1xuICAgICAgICAgICAgICAgIHJhbmtlcjogYXJncy5yYW5raW5nLnJhbmtlcixcbiAgICAgICAgICAgICAgICBzY29yZV90aHJlc2hvbGQ6IGFyZ3MucmFua2luZy5zY29yZVRocmVzaG9sZFxuICAgICAgICAgICAgICB9IDogdm9pZCAwLFxuICAgICAgICAgICAgICBmaWx0ZXJzOiBhcmdzLmZpbHRlcnNcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgfVxuICAgICAgICAgIGNhc2UgXCJvcGVuYWkubG9jYWxfc2hlbGxcIjoge1xuICAgICAgICAgICAgb3BlbmFpVG9vbHMyLnB1c2goe1xuICAgICAgICAgICAgICB0eXBlOiBcImxvY2FsX3NoZWxsXCJcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgfVxuICAgICAgICAgIGNhc2UgXCJvcGVuYWkuc2hlbGxcIjoge1xuICAgICAgICAgICAgb3BlbmFpVG9vbHMyLnB1c2goe1xuICAgICAgICAgICAgICB0eXBlOiBcInNoZWxsXCJcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgfVxuICAgICAgICAgIGNhc2UgXCJvcGVuYWkuYXBwbHlfcGF0Y2hcIjoge1xuICAgICAgICAgICAgb3BlbmFpVG9vbHMyLnB1c2goe1xuICAgICAgICAgICAgICB0eXBlOiBcImFwcGx5X3BhdGNoXCJcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgfVxuICAgICAgICAgIGNhc2UgXCJvcGVuYWkud2ViX3NlYXJjaF9wcmV2aWV3XCI6IHtcbiAgICAgICAgICAgIGNvbnN0IGFyZ3MgPSBhd2FpdCB2YWxpZGF0ZVR5cGVzMih7XG4gICAgICAgICAgICAgIHZhbHVlOiB0b29sLmFyZ3MsXG4gICAgICAgICAgICAgIHNjaGVtYTogd2ViU2VhcmNoUHJldmlld0FyZ3NTY2hlbWFcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgb3BlbmFpVG9vbHMyLnB1c2goe1xuICAgICAgICAgICAgICB0eXBlOiBcIndlYl9zZWFyY2hfcHJldmlld1wiLFxuICAgICAgICAgICAgICBzZWFyY2hfY29udGV4dF9zaXplOiBhcmdzLnNlYXJjaENvbnRleHRTaXplLFxuICAgICAgICAgICAgICB1c2VyX2xvY2F0aW9uOiBhcmdzLnVzZXJMb2NhdGlvblxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgICB9XG4gICAgICAgICAgY2FzZSBcIm9wZW5haS53ZWJfc2VhcmNoXCI6IHtcbiAgICAgICAgICAgIGNvbnN0IGFyZ3MgPSBhd2FpdCB2YWxpZGF0ZVR5cGVzMih7XG4gICAgICAgICAgICAgIHZhbHVlOiB0b29sLmFyZ3MsXG4gICAgICAgICAgICAgIHNjaGVtYTogd2ViU2VhcmNoQXJnc1NjaGVtYVxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBvcGVuYWlUb29sczIucHVzaCh7XG4gICAgICAgICAgICAgIHR5cGU6IFwid2ViX3NlYXJjaFwiLFxuICAgICAgICAgICAgICBmaWx0ZXJzOiBhcmdzLmZpbHRlcnMgIT0gbnVsbCA/IHsgYWxsb3dlZF9kb21haW5zOiBhcmdzLmZpbHRlcnMuYWxsb3dlZERvbWFpbnMgfSA6IHZvaWQgMCxcbiAgICAgICAgICAgICAgZXh0ZXJuYWxfd2ViX2FjY2VzczogYXJncy5leHRlcm5hbFdlYkFjY2VzcyxcbiAgICAgICAgICAgICAgc2VhcmNoX2NvbnRleHRfc2l6ZTogYXJncy5zZWFyY2hDb250ZXh0U2l6ZSxcbiAgICAgICAgICAgICAgdXNlcl9sb2NhdGlvbjogYXJncy51c2VyTG9jYXRpb25cbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgfVxuICAgICAgICAgIGNhc2UgXCJvcGVuYWkuY29kZV9pbnRlcnByZXRlclwiOiB7XG4gICAgICAgICAgICBjb25zdCBhcmdzID0gYXdhaXQgdmFsaWRhdGVUeXBlczIoe1xuICAgICAgICAgICAgICB2YWx1ZTogdG9vbC5hcmdzLFxuICAgICAgICAgICAgICBzY2hlbWE6IGNvZGVJbnRlcnByZXRlckFyZ3NTY2hlbWFcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgb3BlbmFpVG9vbHMyLnB1c2goe1xuICAgICAgICAgICAgICB0eXBlOiBcImNvZGVfaW50ZXJwcmV0ZXJcIixcbiAgICAgICAgICAgICAgY29udGFpbmVyOiBhcmdzLmNvbnRhaW5lciA9PSBudWxsID8geyB0eXBlOiBcImF1dG9cIiwgZmlsZV9pZHM6IHZvaWQgMCB9IDogdHlwZW9mIGFyZ3MuY29udGFpbmVyID09PSBcInN0cmluZ1wiID8gYXJncy5jb250YWluZXIgOiB7IHR5cGU6IFwiYXV0b1wiLCBmaWxlX2lkczogYXJncy5jb250YWluZXIuZmlsZUlkcyB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgIH1cbiAgICAgICAgICBjYXNlIFwib3BlbmFpLmltYWdlX2dlbmVyYXRpb25cIjoge1xuICAgICAgICAgICAgY29uc3QgYXJncyA9IGF3YWl0IHZhbGlkYXRlVHlwZXMyKHtcbiAgICAgICAgICAgICAgdmFsdWU6IHRvb2wuYXJncyxcbiAgICAgICAgICAgICAgc2NoZW1hOiBpbWFnZUdlbmVyYXRpb25BcmdzU2NoZW1hXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIG9wZW5haVRvb2xzMi5wdXNoKHtcbiAgICAgICAgICAgICAgdHlwZTogXCJpbWFnZV9nZW5lcmF0aW9uXCIsXG4gICAgICAgICAgICAgIGJhY2tncm91bmQ6IGFyZ3MuYmFja2dyb3VuZCxcbiAgICAgICAgICAgICAgaW5wdXRfZmlkZWxpdHk6IGFyZ3MuaW5wdXRGaWRlbGl0eSxcbiAgICAgICAgICAgICAgaW5wdXRfaW1hZ2VfbWFzazogYXJncy5pbnB1dEltYWdlTWFzayA/IHtcbiAgICAgICAgICAgICAgICBmaWxlX2lkOiBhcmdzLmlucHV0SW1hZ2VNYXNrLmZpbGVJZCxcbiAgICAgICAgICAgICAgICBpbWFnZV91cmw6IGFyZ3MuaW5wdXRJbWFnZU1hc2suaW1hZ2VVcmxcbiAgICAgICAgICAgICAgfSA6IHZvaWQgMCxcbiAgICAgICAgICAgICAgbW9kZWw6IGFyZ3MubW9kZWwsXG4gICAgICAgICAgICAgIG1vZGVyYXRpb246IGFyZ3MubW9kZXJhdGlvbixcbiAgICAgICAgICAgICAgcGFydGlhbF9pbWFnZXM6IGFyZ3MucGFydGlhbEltYWdlcyxcbiAgICAgICAgICAgICAgcXVhbGl0eTogYXJncy5xdWFsaXR5LFxuICAgICAgICAgICAgICBvdXRwdXRfY29tcHJlc3Npb246IGFyZ3Mub3V0cHV0Q29tcHJlc3Npb24sXG4gICAgICAgICAgICAgIG91dHB1dF9mb3JtYXQ6IGFyZ3Mub3V0cHV0Rm9ybWF0LFxuICAgICAgICAgICAgICBzaXplOiBhcmdzLnNpemVcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgfVxuICAgICAgICAgIGNhc2UgXCJvcGVuYWkubWNwXCI6IHtcbiAgICAgICAgICAgIGNvbnN0IGFyZ3MgPSBhd2FpdCB2YWxpZGF0ZVR5cGVzMih7XG4gICAgICAgICAgICAgIHZhbHVlOiB0b29sLmFyZ3MsXG4gICAgICAgICAgICAgIHNjaGVtYTogbWNwQXJnc1NjaGVtYVxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBjb25zdCBtYXBBcHByb3ZhbEZpbHRlciA9IChmaWx0ZXIpID0+ICh7XG4gICAgICAgICAgICAgIHRvb2xfbmFtZXM6IGZpbHRlci50b29sTmFtZXNcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgY29uc3QgcmVxdWlyZUFwcHJvdmFsID0gYXJncy5yZXF1aXJlQXBwcm92YWw7XG4gICAgICAgICAgICBjb25zdCByZXF1aXJlQXBwcm92YWxQYXJhbSA9IHJlcXVpcmVBcHByb3ZhbCA9PSBudWxsID8gdm9pZCAwIDogdHlwZW9mIHJlcXVpcmVBcHByb3ZhbCA9PT0gXCJzdHJpbmdcIiA/IHJlcXVpcmVBcHByb3ZhbCA6IHJlcXVpcmVBcHByb3ZhbC5uZXZlciAhPSBudWxsID8geyBuZXZlcjogbWFwQXBwcm92YWxGaWx0ZXIocmVxdWlyZUFwcHJvdmFsLm5ldmVyKSB9IDogdm9pZCAwO1xuICAgICAgICAgICAgb3BlbmFpVG9vbHMyLnB1c2goe1xuICAgICAgICAgICAgICB0eXBlOiBcIm1jcFwiLFxuICAgICAgICAgICAgICBzZXJ2ZXJfbGFiZWw6IGFyZ3Muc2VydmVyTGFiZWwsXG4gICAgICAgICAgICAgIGFsbG93ZWRfdG9vbHM6IEFycmF5LmlzQXJyYXkoYXJncy5hbGxvd2VkVG9vbHMpID8gYXJncy5hbGxvd2VkVG9vbHMgOiBhcmdzLmFsbG93ZWRUb29scyA/IHtcbiAgICAgICAgICAgICAgICByZWFkX29ubHk6IGFyZ3MuYWxsb3dlZFRvb2xzLnJlYWRPbmx5LFxuICAgICAgICAgICAgICAgIHRvb2xfbmFtZXM6IGFyZ3MuYWxsb3dlZFRvb2xzLnRvb2xOYW1lc1xuICAgICAgICAgICAgICB9IDogdm9pZCAwLFxuICAgICAgICAgICAgICBhdXRob3JpemF0aW9uOiBhcmdzLmF1dGhvcml6YXRpb24sXG4gICAgICAgICAgICAgIGNvbm5lY3Rvcl9pZDogYXJncy5jb25uZWN0b3JJZCxcbiAgICAgICAgICAgICAgaGVhZGVyczogYXJncy5oZWFkZXJzLFxuICAgICAgICAgICAgICByZXF1aXJlX2FwcHJvdmFsOiByZXF1aXJlQXBwcm92YWxQYXJhbSAhPSBudWxsID8gcmVxdWlyZUFwcHJvdmFsUGFyYW0gOiBcIm5ldmVyXCIsXG4gICAgICAgICAgICAgIHNlcnZlcl9kZXNjcmlwdGlvbjogYXJncy5zZXJ2ZXJEZXNjcmlwdGlvbixcbiAgICAgICAgICAgICAgc2VydmVyX3VybDogYXJncy5zZXJ2ZXJVcmxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGJyZWFrO1xuICAgICAgfVxuICAgICAgZGVmYXVsdDpcbiAgICAgICAgdG9vbFdhcm5pbmdzLnB1c2goe1xuICAgICAgICAgIHR5cGU6IFwidW5zdXBwb3J0ZWRcIixcbiAgICAgICAgICBmZWF0dXJlOiBgZnVuY3Rpb24gdG9vbCAke3Rvb2x9YFxuICAgICAgICB9KTtcbiAgICAgICAgYnJlYWs7XG4gICAgfVxuICB9XG4gIGlmICh0b29sQ2hvaWNlID09IG51bGwpIHtcbiAgICByZXR1cm4geyB0b29sczogb3BlbmFpVG9vbHMyLCB0b29sQ2hvaWNlOiB2b2lkIDAsIHRvb2xXYXJuaW5ncyB9O1xuICB9XG4gIGNvbnN0IHR5cGUgPSB0b29sQ2hvaWNlLnR5cGU7XG4gIHN3aXRjaCAodHlwZSkge1xuICAgIGNhc2UgXCJhdXRvXCI6XG4gICAgY2FzZSBcIm5vbmVcIjpcbiAgICBjYXNlIFwicmVxdWlyZWRcIjpcbiAgICAgIHJldHVybiB7IHRvb2xzOiBvcGVuYWlUb29sczIsIHRvb2xDaG9pY2U6IHR5cGUsIHRvb2xXYXJuaW5ncyB9O1xuICAgIGNhc2UgXCJ0b29sXCI6XG4gICAgICByZXR1cm4ge1xuICAgICAgICB0b29sczogb3BlbmFpVG9vbHMyLFxuICAgICAgICB0b29sQ2hvaWNlOiB0b29sQ2hvaWNlLnRvb2xOYW1lID09PSBcImNvZGVfaW50ZXJwcmV0ZXJcIiB8fCB0b29sQ2hvaWNlLnRvb2xOYW1lID09PSBcImZpbGVfc2VhcmNoXCIgfHwgdG9vbENob2ljZS50b29sTmFtZSA9PT0gXCJpbWFnZV9nZW5lcmF0aW9uXCIgfHwgdG9vbENob2ljZS50b29sTmFtZSA9PT0gXCJ3ZWJfc2VhcmNoX3ByZXZpZXdcIiB8fCB0b29sQ2hvaWNlLnRvb2xOYW1lID09PSBcIndlYl9zZWFyY2hcIiB8fCB0b29sQ2hvaWNlLnRvb2xOYW1lID09PSBcIm1jcFwiIHx8IHRvb2xDaG9pY2UudG9vbE5hbWUgPT09IFwiYXBwbHlfcGF0Y2hcIiA/IHsgdHlwZTogdG9vbENob2ljZS50b29sTmFtZSB9IDogeyB0eXBlOiBcImZ1bmN0aW9uXCIsIG5hbWU6IHRvb2xDaG9pY2UudG9vbE5hbWUgfSxcbiAgICAgICAgdG9vbFdhcm5pbmdzXG4gICAgICB9O1xuICAgIGRlZmF1bHQ6IHtcbiAgICAgIGNvbnN0IF9leGhhdXN0aXZlQ2hlY2sgPSB0eXBlO1xuICAgICAgdGhyb3cgbmV3IFVuc3VwcG9ydGVkRnVuY3Rpb25hbGl0eUVycm9yNSh7XG4gICAgICAgIGZ1bmN0aW9uYWxpdHk6IGB0b29sIGNob2ljZSB0eXBlOiAke19leGhhdXN0aXZlQ2hlY2t9YFxuICAgICAgfSk7XG4gICAgfVxuICB9XG59XG5cbi8vIHNyYy9yZXNwb25zZXMvb3BlbmFpLXJlc3BvbnNlcy1sYW5ndWFnZS1tb2RlbC50c1xuZnVuY3Rpb24gZXh0cmFjdEFwcHJvdmFsUmVxdWVzdElkVG9Ub29sQ2FsbElkTWFwcGluZyhwcm9tcHQpIHtcbiAgdmFyIF9hLCBfYjtcbiAgY29uc3QgbWFwcGluZyA9IHt9O1xuICBmb3IgKGNvbnN0IG1lc3NhZ2Ugb2YgcHJvbXB0KSB7XG4gICAgaWYgKG1lc3NhZ2Uucm9sZSAhPT0gXCJhc3Npc3RhbnRcIikgY29udGludWU7XG4gICAgZm9yIChjb25zdCBwYXJ0IG9mIG1lc3NhZ2UuY29udGVudCkge1xuICAgICAgaWYgKHBhcnQudHlwZSAhPT0gXCJ0b29sLWNhbGxcIikgY29udGludWU7XG4gICAgICBjb25zdCBhcHByb3ZhbFJlcXVlc3RJZCA9IChfYiA9IChfYSA9IHBhcnQucHJvdmlkZXJPcHRpb25zKSA9PSBudWxsID8gdm9pZCAwIDogX2Eub3BlbmFpKSA9PSBudWxsID8gdm9pZCAwIDogX2IuYXBwcm92YWxSZXF1ZXN0SWQ7XG4gICAgICBpZiAoYXBwcm92YWxSZXF1ZXN0SWQgIT0gbnVsbCkge1xuICAgICAgICBtYXBwaW5nW2FwcHJvdmFsUmVxdWVzdElkXSA9IHBhcnQudG9vbENhbGxJZDtcbiAgICAgIH1cbiAgICB9XG4gIH1cbiAgcmV0dXJuIG1hcHBpbmc7XG59XG52YXIgT3BlbkFJUmVzcG9uc2VzTGFuZ3VhZ2VNb2RlbCA9IGNsYXNzIHtcbiAgY29uc3RydWN0b3IobW9kZWxJZCwgY29uZmlnKSB7XG4gICAgdGhpcy5zcGVjaWZpY2F0aW9uVmVyc2lvbiA9IFwidjNcIjtcbiAgICB0aGlzLnN1cHBvcnRlZFVybHMgPSB7XG4gICAgICBcImltYWdlLypcIjogWy9eaHR0cHM/OlxcL1xcLy4qJC9dLFxuICAgICAgXCJhcHBsaWNhdGlvbi9wZGZcIjogWy9eaHR0cHM/OlxcL1xcLy4qJC9dXG4gICAgfTtcbiAgICB0aGlzLm1vZGVsSWQgPSBtb2RlbElkO1xuICAgIHRoaXMuY29uZmlnID0gY29uZmlnO1xuICB9XG4gIGdldCBwcm92aWRlcigpIHtcbiAgICByZXR1cm4gdGhpcy5jb25maWcucHJvdmlkZXI7XG4gIH1cbiAgYXN5bmMgZ2V0QXJncyh7XG4gICAgbWF4T3V0cHV0VG9rZW5zLFxuICAgIHRlbXBlcmF0dXJlLFxuICAgIHN0b3BTZXF1ZW5jZXMsXG4gICAgdG9wUCxcbiAgICB0b3BLLFxuICAgIHByZXNlbmNlUGVuYWx0eSxcbiAgICBmcmVxdWVuY3lQZW5hbHR5LFxuICAgIHNlZWQsXG4gICAgcHJvbXB0LFxuICAgIHByb3ZpZGVyT3B0aW9ucyxcbiAgICB0b29scyxcbiAgICB0b29sQ2hvaWNlLFxuICAgIHJlc3BvbnNlRm9ybWF0XG4gIH0pIHtcbiAgICB2YXIgX2EsIF9iLCBfYywgX2QsIF9lLCBfZjtcbiAgICBjb25zdCB3YXJuaW5ncyA9IFtdO1xuICAgIGNvbnN0IG1vZGVsQ2FwYWJpbGl0aWVzID0gZ2V0T3BlbkFJTGFuZ3VhZ2VNb2RlbENhcGFiaWxpdGllcyh0aGlzLm1vZGVsSWQpO1xuICAgIGlmICh0b3BLICE9IG51bGwpIHtcbiAgICAgIHdhcm5pbmdzLnB1c2goeyB0eXBlOiBcInVuc3VwcG9ydGVkXCIsIGZlYXR1cmU6IFwidG9wS1wiIH0pO1xuICAgIH1cbiAgICBpZiAoc2VlZCAhPSBudWxsKSB7XG4gICAgICB3YXJuaW5ncy5wdXNoKHsgdHlwZTogXCJ1bnN1cHBvcnRlZFwiLCBmZWF0dXJlOiBcInNlZWRcIiB9KTtcbiAgICB9XG4gICAgaWYgKHByZXNlbmNlUGVuYWx0eSAhPSBudWxsKSB7XG4gICAgICB3YXJuaW5ncy5wdXNoKHsgdHlwZTogXCJ1bnN1cHBvcnRlZFwiLCBmZWF0dXJlOiBcInByZXNlbmNlUGVuYWx0eVwiIH0pO1xuICAgIH1cbiAgICBpZiAoZnJlcXVlbmN5UGVuYWx0eSAhPSBudWxsKSB7XG4gICAgICB3YXJuaW5ncy5wdXNoKHsgdHlwZTogXCJ1bnN1cHBvcnRlZFwiLCBmZWF0dXJlOiBcImZyZXF1ZW5jeVBlbmFsdHlcIiB9KTtcbiAgICB9XG4gICAgaWYgKHN0b3BTZXF1ZW5jZXMgIT0gbnVsbCkge1xuICAgICAgd2FybmluZ3MucHVzaCh7IHR5cGU6IFwidW5zdXBwb3J0ZWRcIiwgZmVhdHVyZTogXCJzdG9wU2VxdWVuY2VzXCIgfSk7XG4gICAgfVxuICAgIGNvbnN0IHByb3ZpZGVyT3B0aW9uc05hbWUgPSB0aGlzLmNvbmZpZy5wcm92aWRlci5pbmNsdWRlcyhcImF6dXJlXCIpID8gXCJhenVyZVwiIDogXCJvcGVuYWlcIjtcbiAgICBsZXQgb3BlbmFpT3B0aW9ucyA9IGF3YWl0IHBhcnNlUHJvdmlkZXJPcHRpb25zNSh7XG4gICAgICBwcm92aWRlcjogcHJvdmlkZXJPcHRpb25zTmFtZSxcbiAgICAgIHByb3ZpZGVyT3B0aW9ucyxcbiAgICAgIHNjaGVtYTogb3BlbmFpUmVzcG9uc2VzUHJvdmlkZXJPcHRpb25zU2NoZW1hXG4gICAgfSk7XG4gICAgaWYgKG9wZW5haU9wdGlvbnMgPT0gbnVsbCAmJiBwcm92aWRlck9wdGlvbnNOYW1lICE9PSBcIm9wZW5haVwiKSB7XG4gICAgICBvcGVuYWlPcHRpb25zID0gYXdhaXQgcGFyc2VQcm92aWRlck9wdGlvbnM1KHtcbiAgICAgICAgcHJvdmlkZXI6IFwib3BlbmFpXCIsXG4gICAgICAgIHByb3ZpZGVyT3B0aW9ucyxcbiAgICAgICAgc2NoZW1hOiBvcGVuYWlSZXNwb25zZXNQcm92aWRlck9wdGlvbnNTY2hlbWFcbiAgICAgIH0pO1xuICAgIH1cbiAgICBjb25zdCBpc1JlYXNvbmluZ01vZGVsID0gKF9hID0gb3BlbmFpT3B0aW9ucyA9PSBudWxsID8gdm9pZCAwIDogb3BlbmFpT3B0aW9ucy5mb3JjZVJlYXNvbmluZykgIT0gbnVsbCA/IF9hIDogbW9kZWxDYXBhYmlsaXRpZXMuaXNSZWFzb25pbmdNb2RlbDtcbiAgICBpZiAoKG9wZW5haU9wdGlvbnMgPT0gbnVsbCA/IHZvaWQgMCA6IG9wZW5haU9wdGlvbnMuY29udmVyc2F0aW9uKSAmJiAob3BlbmFpT3B0aW9ucyA9PSBudWxsID8gdm9pZCAwIDogb3BlbmFpT3B0aW9ucy5wcmV2aW91c1Jlc3BvbnNlSWQpKSB7XG4gICAgICB3YXJuaW5ncy5wdXNoKHtcbiAgICAgICAgdHlwZTogXCJ1bnN1cHBvcnRlZFwiLFxuICAgICAgICBmZWF0dXJlOiBcImNvbnZlcnNhdGlvblwiLFxuICAgICAgICBkZXRhaWxzOiBcImNvbnZlcnNhdGlvbiBhbmQgcHJldmlvdXNSZXNwb25zZUlkIGNhbm5vdCBiZSB1c2VkIHRvZ2V0aGVyXCJcbiAgICAgIH0pO1xuICAgIH1cbiAgICBjb25zdCB0b29sTmFtZU1hcHBpbmcgPSBjcmVhdGVUb29sTmFtZU1hcHBpbmcoe1xuICAgICAgdG9vbHMsXG4gICAgICBwcm92aWRlclRvb2xOYW1lczoge1xuICAgICAgICBcIm9wZW5haS5jb2RlX2ludGVycHJldGVyXCI6IFwiY29kZV9pbnRlcnByZXRlclwiLFxuICAgICAgICBcIm9wZW5haS5maWxlX3NlYXJjaFwiOiBcImZpbGVfc2VhcmNoXCIsXG4gICAgICAgIFwib3BlbmFpLmltYWdlX2dlbmVyYXRpb25cIjogXCJpbWFnZV9nZW5lcmF0aW9uXCIsXG4gICAgICAgIFwib3BlbmFpLmxvY2FsX3NoZWxsXCI6IFwibG9jYWxfc2hlbGxcIixcbiAgICAgICAgXCJvcGVuYWkuc2hlbGxcIjogXCJzaGVsbFwiLFxuICAgICAgICBcIm9wZW5haS53ZWJfc2VhcmNoXCI6IFwid2ViX3NlYXJjaFwiLFxuICAgICAgICBcIm9wZW5haS53ZWJfc2VhcmNoX3ByZXZpZXdcIjogXCJ3ZWJfc2VhcmNoX3ByZXZpZXdcIixcbiAgICAgICAgXCJvcGVuYWkubWNwXCI6IFwibWNwXCIsXG4gICAgICAgIFwib3BlbmFpLmFwcGx5X3BhdGNoXCI6IFwiYXBwbHlfcGF0Y2hcIlxuICAgICAgfVxuICAgIH0pO1xuICAgIGNvbnN0IHsgaW5wdXQsIHdhcm5pbmdzOiBpbnB1dFdhcm5pbmdzIH0gPSBhd2FpdCBjb252ZXJ0VG9PcGVuQUlSZXNwb25zZXNJbnB1dCh7XG4gICAgICBwcm9tcHQsXG4gICAgICB0b29sTmFtZU1hcHBpbmcsXG4gICAgICBzeXN0ZW1NZXNzYWdlTW9kZTogKF9iID0gb3BlbmFpT3B0aW9ucyA9PSBudWxsID8gdm9pZCAwIDogb3BlbmFpT3B0aW9ucy5zeXN0ZW1NZXNzYWdlTW9kZSkgIT0gbnVsbCA/IF9iIDogaXNSZWFzb25pbmdNb2RlbCA/IFwiZGV2ZWxvcGVyXCIgOiBtb2RlbENhcGFiaWxpdGllcy5zeXN0ZW1NZXNzYWdlTW9kZSxcbiAgICAgIHByb3ZpZGVyT3B0aW9uc05hbWUsXG4gICAgICBmaWxlSWRQcmVmaXhlczogdGhpcy5jb25maWcuZmlsZUlkUHJlZml4ZXMsXG4gICAgICBzdG9yZTogKF9jID0gb3BlbmFpT3B0aW9ucyA9PSBudWxsID8gdm9pZCAwIDogb3BlbmFpT3B0aW9ucy5zdG9yZSkgIT0gbnVsbCA/IF9jIDogdHJ1ZSxcbiAgICAgIGhhc0xvY2FsU2hlbGxUb29sOiBoYXNPcGVuQUlUb29sKFwib3BlbmFpLmxvY2FsX3NoZWxsXCIpLFxuICAgICAgaGFzU2hlbGxUb29sOiBoYXNPcGVuQUlUb29sKFwib3BlbmFpLnNoZWxsXCIpLFxuICAgICAgaGFzQXBwbHlQYXRjaFRvb2w6IGhhc09wZW5BSVRvb2woXCJvcGVuYWkuYXBwbHlfcGF0Y2hcIilcbiAgICB9KTtcbiAgICB3YXJuaW5ncy5wdXNoKC4uLmlucHV0V2FybmluZ3MpO1xuICAgIGNvbnN0IHN0cmljdEpzb25TY2hlbWEgPSAoX2QgPSBvcGVuYWlPcHRpb25zID09IG51bGwgPyB2b2lkIDAgOiBvcGVuYWlPcHRpb25zLnN0cmljdEpzb25TY2hlbWEpICE9IG51bGwgPyBfZCA6IHRydWU7XG4gICAgbGV0IGluY2x1ZGUgPSBvcGVuYWlPcHRpb25zID09IG51bGwgPyB2b2lkIDAgOiBvcGVuYWlPcHRpb25zLmluY2x1ZGU7XG4gICAgZnVuY3Rpb24gYWRkSW5jbHVkZShrZXkpIHtcbiAgICAgIGlmIChpbmNsdWRlID09IG51bGwpIHtcbiAgICAgICAgaW5jbHVkZSA9IFtrZXldO1xuICAgICAgfSBlbHNlIGlmICghaW5jbHVkZS5pbmNsdWRlcyhrZXkpKSB7XG4gICAgICAgIGluY2x1ZGUgPSBbLi4uaW5jbHVkZSwga2V5XTtcbiAgICAgIH1cbiAgICB9XG4gICAgZnVuY3Rpb24gaGFzT3BlbkFJVG9vbChpZCkge1xuICAgICAgcmV0dXJuICh0b29scyA9PSBudWxsID8gdm9pZCAwIDogdG9vbHMuZmluZCgodG9vbCkgPT4gdG9vbC50eXBlID09PSBcInByb3ZpZGVyXCIgJiYgdG9vbC5pZCA9PT0gaWQpKSAhPSBudWxsO1xuICAgIH1cbiAgICBjb25zdCB0b3BMb2dwcm9icyA9IHR5cGVvZiAob3BlbmFpT3B0aW9ucyA9PSBudWxsID8gdm9pZCAwIDogb3BlbmFpT3B0aW9ucy5sb2dwcm9icykgPT09IFwibnVtYmVyXCIgPyBvcGVuYWlPcHRpb25zID09IG51bGwgPyB2b2lkIDAgOiBvcGVuYWlPcHRpb25zLmxvZ3Byb2JzIDogKG9wZW5haU9wdGlvbnMgPT0gbnVsbCA/IHZvaWQgMCA6IG9wZW5haU9wdGlvbnMubG9ncHJvYnMpID09PSB0cnVlID8gVE9QX0xPR1BST0JTX01BWCA6IHZvaWQgMDtcbiAgICBpZiAodG9wTG9ncHJvYnMpIHtcbiAgICAgIGFkZEluY2x1ZGUoXCJtZXNzYWdlLm91dHB1dF90ZXh0LmxvZ3Byb2JzXCIpO1xuICAgIH1cbiAgICBjb25zdCB3ZWJTZWFyY2hUb29sTmFtZSA9IChfZSA9IHRvb2xzID09IG51bGwgPyB2b2lkIDAgOiB0b29scy5maW5kKFxuICAgICAgKHRvb2wpID0+IHRvb2wudHlwZSA9PT0gXCJwcm92aWRlclwiICYmICh0b29sLmlkID09PSBcIm9wZW5haS53ZWJfc2VhcmNoXCIgfHwgdG9vbC5pZCA9PT0gXCJvcGVuYWkud2ViX3NlYXJjaF9wcmV2aWV3XCIpXG4gICAgKSkgPT0gbnVsbCA/IHZvaWQgMCA6IF9lLm5hbWU7XG4gICAgaWYgKHdlYlNlYXJjaFRvb2xOYW1lKSB7XG4gICAgICBhZGRJbmNsdWRlKFwid2ViX3NlYXJjaF9jYWxsLmFjdGlvbi5zb3VyY2VzXCIpO1xuICAgIH1cbiAgICBpZiAoaGFzT3BlbkFJVG9vbChcIm9wZW5haS5jb2RlX2ludGVycHJldGVyXCIpKSB7XG4gICAgICBhZGRJbmNsdWRlKFwiY29kZV9pbnRlcnByZXRlcl9jYWxsLm91dHB1dHNcIik7XG4gICAgfVxuICAgIGNvbnN0IHN0b3JlID0gb3BlbmFpT3B0aW9ucyA9PSBudWxsID8gdm9pZCAwIDogb3BlbmFpT3B0aW9ucy5zdG9yZTtcbiAgICBpZiAoc3RvcmUgPT09IGZhbHNlICYmIGlzUmVhc29uaW5nTW9kZWwpIHtcbiAgICAgIGFkZEluY2x1ZGUoXCJyZWFzb25pbmcuZW5jcnlwdGVkX2NvbnRlbnRcIik7XG4gICAgfVxuICAgIGNvbnN0IGJhc2VBcmdzID0ge1xuICAgICAgbW9kZWw6IHRoaXMubW9kZWxJZCxcbiAgICAgIGlucHV0LFxuICAgICAgdGVtcGVyYXR1cmUsXG4gICAgICB0b3BfcDogdG9wUCxcbiAgICAgIG1heF9vdXRwdXRfdG9rZW5zOiBtYXhPdXRwdXRUb2tlbnMsXG4gICAgICAuLi4oKHJlc3BvbnNlRm9ybWF0ID09IG51bGwgPyB2b2lkIDAgOiByZXNwb25zZUZvcm1hdC50eXBlKSA9PT0gXCJqc29uXCIgfHwgKG9wZW5haU9wdGlvbnMgPT0gbnVsbCA/IHZvaWQgMCA6IG9wZW5haU9wdGlvbnMudGV4dFZlcmJvc2l0eSkpICYmIHtcbiAgICAgICAgdGV4dDoge1xuICAgICAgICAgIC4uLihyZXNwb25zZUZvcm1hdCA9PSBudWxsID8gdm9pZCAwIDogcmVzcG9uc2VGb3JtYXQudHlwZSkgPT09IFwianNvblwiICYmIHtcbiAgICAgICAgICAgIGZvcm1hdDogcmVzcG9uc2VGb3JtYXQuc2NoZW1hICE9IG51bGwgPyB7XG4gICAgICAgICAgICAgIHR5cGU6IFwianNvbl9zY2hlbWFcIixcbiAgICAgICAgICAgICAgc3RyaWN0OiBzdHJpY3RKc29uU2NoZW1hLFxuICAgICAgICAgICAgICBuYW1lOiAoX2YgPSByZXNwb25zZUZvcm1hdC5uYW1lKSAhPSBudWxsID8gX2YgOiBcInJlc3BvbnNlXCIsXG4gICAgICAgICAgICAgIGRlc2NyaXB0aW9uOiByZXNwb25zZUZvcm1hdC5kZXNjcmlwdGlvbixcbiAgICAgICAgICAgICAgc2NoZW1hOiByZXNwb25zZUZvcm1hdC5zY2hlbWFcbiAgICAgICAgICAgIH0gOiB7IHR5cGU6IFwianNvbl9vYmplY3RcIiB9XG4gICAgICAgICAgfSxcbiAgICAgICAgICAuLi4ob3BlbmFpT3B0aW9ucyA9PSBudWxsID8gdm9pZCAwIDogb3BlbmFpT3B0aW9ucy50ZXh0VmVyYm9zaXR5KSAmJiB7XG4gICAgICAgICAgICB2ZXJib3NpdHk6IG9wZW5haU9wdGlvbnMudGV4dFZlcmJvc2l0eVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfSxcbiAgICAgIC8vIHByb3ZpZGVyIG9wdGlvbnM6XG4gICAgICBjb252ZXJzYXRpb246IG9wZW5haU9wdGlvbnMgPT0gbnVsbCA/IHZvaWQgMCA6IG9wZW5haU9wdGlvbnMuY29udmVyc2F0aW9uLFxuICAgICAgbWF4X3Rvb2xfY2FsbHM6IG9wZW5haU9wdGlvbnMgPT0gbnVsbCA/IHZvaWQgMCA6IG9wZW5haU9wdGlvbnMubWF4VG9vbENhbGxzLFxuICAgICAgbWV0YWRhdGE6IG9wZW5haU9wdGlvbnMgPT0gbnVsbCA/IHZvaWQgMCA6IG9wZW5haU9wdGlvbnMubWV0YWRhdGEsXG4gICAgICBwYXJhbGxlbF90b29sX2NhbGxzOiBvcGVuYWlPcHRpb25zID09IG51bGwgPyB2b2lkIDAgOiBvcGVuYWlPcHRpb25zLnBhcmFsbGVsVG9vbENhbGxzLFxuICAgICAgcHJldmlvdXNfcmVzcG9uc2VfaWQ6IG9wZW5haU9wdGlvbnMgPT0gbnVsbCA/IHZvaWQgMCA6IG9wZW5haU9wdGlvbnMucHJldmlvdXNSZXNwb25zZUlkLFxuICAgICAgc3RvcmUsXG4gICAgICB1c2VyOiBvcGVuYWlPcHRpb25zID09IG51bGwgPyB2b2lkIDAgOiBvcGVuYWlPcHRpb25zLnVzZXIsXG4gICAgICBpbnN0cnVjdGlvbnM6IG9wZW5haU9wdGlvbnMgPT0gbnVsbCA/IHZvaWQgMCA6IG9wZW5haU9wdGlvbnMuaW5zdHJ1Y3Rpb25zLFxuICAgICAgc2VydmljZV90aWVyOiBvcGVuYWlPcHRpb25zID09IG51bGwgPyB2b2lkIDAgOiBvcGVuYWlPcHRpb25zLnNlcnZpY2VUaWVyLFxuICAgICAgaW5jbHVkZSxcbiAgICAgIHByb21wdF9jYWNoZV9rZXk6IG9wZW5haU9wdGlvbnMgPT0gbnVsbCA/IHZvaWQgMCA6IG9wZW5haU9wdGlvbnMucHJvbXB0Q2FjaGVLZXksXG4gICAgICBwcm9tcHRfY2FjaGVfcmV0ZW50aW9uOiBvcGVuYWlPcHRpb25zID09IG51bGwgPyB2b2lkIDAgOiBvcGVuYWlPcHRpb25zLnByb21wdENhY2hlUmV0ZW50aW9uLFxuICAgICAgc2FmZXR5X2lkZW50aWZpZXI6IG9wZW5haU9wdGlvbnMgPT0gbnVsbCA/IHZvaWQgMCA6IG9wZW5haU9wdGlvbnMuc2FmZXR5SWRlbnRpZmllcixcbiAgICAgIHRvcF9sb2dwcm9iczogdG9wTG9ncHJvYnMsXG4gICAgICB0cnVuY2F0aW9uOiBvcGVuYWlPcHRpb25zID09IG51bGwgPyB2b2lkIDAgOiBvcGVuYWlPcHRpb25zLnRydW5jYXRpb24sXG4gICAgICAvLyBtb2RlbC1zcGVjaWZpYyBzZXR0aW5nczpcbiAgICAgIC4uLmlzUmVhc29uaW5nTW9kZWwgJiYgKChvcGVuYWlPcHRpb25zID09IG51bGwgPyB2b2lkIDAgOiBvcGVuYWlPcHRpb25zLnJlYXNvbmluZ0VmZm9ydCkgIT0gbnVsbCB8fCAob3BlbmFpT3B0aW9ucyA9PSBudWxsID8gdm9pZCAwIDogb3BlbmFpT3B0aW9ucy5yZWFzb25pbmdTdW1tYXJ5KSAhPSBudWxsKSAmJiB7XG4gICAgICAgIHJlYXNvbmluZzoge1xuICAgICAgICAgIC4uLihvcGVuYWlPcHRpb25zID09IG51bGwgPyB2b2lkIDAgOiBvcGVuYWlPcHRpb25zLnJlYXNvbmluZ0VmZm9ydCkgIT0gbnVsbCAmJiB7XG4gICAgICAgICAgICBlZmZvcnQ6IG9wZW5haU9wdGlvbnMucmVhc29uaW5nRWZmb3J0XG4gICAgICAgICAgfSxcbiAgICAgICAgICAuLi4ob3BlbmFpT3B0aW9ucyA9PSBudWxsID8gdm9pZCAwIDogb3BlbmFpT3B0aW9ucy5yZWFzb25pbmdTdW1tYXJ5KSAhPSBudWxsICYmIHtcbiAgICAgICAgICAgIHN1bW1hcnk6IG9wZW5haU9wdGlvbnMucmVhc29uaW5nU3VtbWFyeVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgIH07XG4gICAgaWYgKGlzUmVhc29uaW5nTW9kZWwpIHtcbiAgICAgIGlmICghKChvcGVuYWlPcHRpb25zID09IG51bGwgPyB2b2lkIDAgOiBvcGVuYWlPcHRpb25zLnJlYXNvbmluZ0VmZm9ydCkgPT09IFwibm9uZVwiICYmIG1vZGVsQ2FwYWJpbGl0aWVzLnN1cHBvcnRzTm9uUmVhc29uaW5nUGFyYW1ldGVycykpIHtcbiAgICAgICAgaWYgKGJhc2VBcmdzLnRlbXBlcmF0dXJlICE9IG51bGwpIHtcbiAgICAgICAgICBiYXNlQXJncy50ZW1wZXJhdHVyZSA9IHZvaWQgMDtcbiAgICAgICAgICB3YXJuaW5ncy5wdXNoKHtcbiAgICAgICAgICAgIHR5cGU6IFwidW5zdXBwb3J0ZWRcIixcbiAgICAgICAgICAgIGZlYXR1cmU6IFwidGVtcGVyYXR1cmVcIixcbiAgICAgICAgICAgIGRldGFpbHM6IFwidGVtcGVyYXR1cmUgaXMgbm90IHN1cHBvcnRlZCBmb3IgcmVhc29uaW5nIG1vZGVsc1wiXG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGJhc2VBcmdzLnRvcF9wICE9IG51bGwpIHtcbiAgICAgICAgICBiYXNlQXJncy50b3BfcCA9IHZvaWQgMDtcbiAgICAgICAgICB3YXJuaW5ncy5wdXNoKHtcbiAgICAgICAgICAgIHR5cGU6IFwidW5zdXBwb3J0ZWRcIixcbiAgICAgICAgICAgIGZlYXR1cmU6IFwidG9wUFwiLFxuICAgICAgICAgICAgZGV0YWlsczogXCJ0b3BQIGlzIG5vdCBzdXBwb3J0ZWQgZm9yIHJlYXNvbmluZyBtb2RlbHNcIlxuICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIGlmICgob3BlbmFpT3B0aW9ucyA9PSBudWxsID8gdm9pZCAwIDogb3BlbmFpT3B0aW9ucy5yZWFzb25pbmdFZmZvcnQpICE9IG51bGwpIHtcbiAgICAgICAgd2FybmluZ3MucHVzaCh7XG4gICAgICAgICAgdHlwZTogXCJ1bnN1cHBvcnRlZFwiLFxuICAgICAgICAgIGZlYXR1cmU6IFwicmVhc29uaW5nRWZmb3J0XCIsXG4gICAgICAgICAgZGV0YWlsczogXCJyZWFzb25pbmdFZmZvcnQgaXMgbm90IHN1cHBvcnRlZCBmb3Igbm9uLXJlYXNvbmluZyBtb2RlbHNcIlxuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICAgIGlmICgob3BlbmFpT3B0aW9ucyA9PSBudWxsID8gdm9pZCAwIDogb3BlbmFpT3B0aW9ucy5yZWFzb25pbmdTdW1tYXJ5KSAhPSBudWxsKSB7XG4gICAgICAgIHdhcm5pbmdzLnB1c2goe1xuICAgICAgICAgIHR5cGU6IFwidW5zdXBwb3J0ZWRcIixcbiAgICAgICAgICBmZWF0dXJlOiBcInJlYXNvbmluZ1N1bW1hcnlcIixcbiAgICAgICAgICBkZXRhaWxzOiBcInJlYXNvbmluZ1N1bW1hcnkgaXMgbm90IHN1cHBvcnRlZCBmb3Igbm9uLXJlYXNvbmluZyBtb2RlbHNcIlxuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICB9XG4gICAgaWYgKChvcGVuYWlPcHRpb25zID09IG51bGwgPyB2b2lkIDAgOiBvcGVuYWlPcHRpb25zLnNlcnZpY2VUaWVyKSA9PT0gXCJmbGV4XCIgJiYgIW1vZGVsQ2FwYWJpbGl0aWVzLnN1cHBvcnRzRmxleFByb2Nlc3NpbmcpIHtcbiAgICAgIHdhcm5pbmdzLnB1c2goe1xuICAgICAgICB0eXBlOiBcInVuc3VwcG9ydGVkXCIsXG4gICAgICAgIGZlYXR1cmU6IFwic2VydmljZVRpZXJcIixcbiAgICAgICAgZGV0YWlsczogXCJmbGV4IHByb2Nlc3NpbmcgaXMgb25seSBhdmFpbGFibGUgZm9yIG8zLCBvNC1taW5pLCBhbmQgZ3B0LTUgbW9kZWxzXCJcbiAgICAgIH0pO1xuICAgICAgZGVsZXRlIGJhc2VBcmdzLnNlcnZpY2VfdGllcjtcbiAgICB9XG4gICAgaWYgKChvcGVuYWlPcHRpb25zID09IG51bGwgPyB2b2lkIDAgOiBvcGVuYWlPcHRpb25zLnNlcnZpY2VUaWVyKSA9PT0gXCJwcmlvcml0eVwiICYmICFtb2RlbENhcGFiaWxpdGllcy5zdXBwb3J0c1ByaW9yaXR5UHJvY2Vzc2luZykge1xuICAgICAgd2FybmluZ3MucHVzaCh7XG4gICAgICAgIHR5cGU6IFwidW5zdXBwb3J0ZWRcIixcbiAgICAgICAgZmVhdHVyZTogXCJzZXJ2aWNlVGllclwiLFxuICAgICAgICBkZXRhaWxzOiBcInByaW9yaXR5IHByb2Nlc3NpbmcgaXMgb25seSBhdmFpbGFibGUgZm9yIHN1cHBvcnRlZCBtb2RlbHMgKGdwdC00LCBncHQtNSwgZ3B0LTUtbWluaSwgbzMsIG80LW1pbmkpIGFuZCByZXF1aXJlcyBFbnRlcnByaXNlIGFjY2Vzcy4gZ3B0LTUtbmFubyBpcyBub3Qgc3VwcG9ydGVkXCJcbiAgICAgIH0pO1xuICAgICAgZGVsZXRlIGJhc2VBcmdzLnNlcnZpY2VfdGllcjtcbiAgICB9XG4gICAgY29uc3Qge1xuICAgICAgdG9vbHM6IG9wZW5haVRvb2xzMixcbiAgICAgIHRvb2xDaG9pY2U6IG9wZW5haVRvb2xDaG9pY2UsXG4gICAgICB0b29sV2FybmluZ3NcbiAgICB9ID0gYXdhaXQgcHJlcGFyZVJlc3BvbnNlc1Rvb2xzKHtcbiAgICAgIHRvb2xzLFxuICAgICAgdG9vbENob2ljZVxuICAgIH0pO1xuICAgIHJldHVybiB7XG4gICAgICB3ZWJTZWFyY2hUb29sTmFtZSxcbiAgICAgIGFyZ3M6IHtcbiAgICAgICAgLi4uYmFzZUFyZ3MsXG4gICAgICAgIHRvb2xzOiBvcGVuYWlUb29sczIsXG4gICAgICAgIHRvb2xfY2hvaWNlOiBvcGVuYWlUb29sQ2hvaWNlXG4gICAgICB9LFxuICAgICAgd2FybmluZ3M6IFsuLi53YXJuaW5ncywgLi4udG9vbFdhcm5pbmdzXSxcbiAgICAgIHN0b3JlLFxuICAgICAgdG9vbE5hbWVNYXBwaW5nLFxuICAgICAgcHJvdmlkZXJPcHRpb25zTmFtZVxuICAgIH07XG4gIH1cbiAgYXN5bmMgZG9HZW5lcmF0ZShvcHRpb25zKSB7XG4gICAgdmFyIF9hLCBfYiwgX2MsIF9kLCBfZSwgX2YsIF9nLCBfaCwgX2ksIF9qLCBfaywgX2wsIF9tLCBfbiwgX28sIF9wLCBfcSwgX3IsIF9zLCBfdCwgX3UsIF92LCBfdywgX3gsIF95LCBfeiwgX0EsIF9CLCBfQywgX0QsIF9FO1xuICAgIGNvbnN0IHtcbiAgICAgIGFyZ3M6IGJvZHksXG4gICAgICB3YXJuaW5ncyxcbiAgICAgIHdlYlNlYXJjaFRvb2xOYW1lLFxuICAgICAgdG9vbE5hbWVNYXBwaW5nLFxuICAgICAgcHJvdmlkZXJPcHRpb25zTmFtZVxuICAgIH0gPSBhd2FpdCB0aGlzLmdldEFyZ3Mob3B0aW9ucyk7XG4gICAgY29uc3QgdXJsID0gdGhpcy5jb25maWcudXJsKHtcbiAgICAgIHBhdGg6IFwiL3Jlc3BvbnNlc1wiLFxuICAgICAgbW9kZWxJZDogdGhpcy5tb2RlbElkXG4gICAgfSk7XG4gICAgY29uc3QgYXBwcm92YWxSZXF1ZXN0SWRUb0R1bW15VG9vbENhbGxJZEZyb21Qcm9tcHQgPSBleHRyYWN0QXBwcm92YWxSZXF1ZXN0SWRUb1Rvb2xDYWxsSWRNYXBwaW5nKG9wdGlvbnMucHJvbXB0KTtcbiAgICBjb25zdCB7XG4gICAgICByZXNwb25zZUhlYWRlcnMsXG4gICAgICB2YWx1ZTogcmVzcG9uc2UsXG4gICAgICByYXdWYWx1ZTogcmF3UmVzcG9uc2VcbiAgICB9ID0gYXdhaXQgcG9zdEpzb25Ub0FwaTUoe1xuICAgICAgdXJsLFxuICAgICAgaGVhZGVyczogY29tYmluZUhlYWRlcnM1KHRoaXMuY29uZmlnLmhlYWRlcnMoKSwgb3B0aW9ucy5oZWFkZXJzKSxcbiAgICAgIGJvZHksXG4gICAgICBmYWlsZWRSZXNwb25zZUhhbmRsZXI6IG9wZW5haUZhaWxlZFJlc3BvbnNlSGFuZGxlcixcbiAgICAgIHN1Y2Nlc3NmdWxSZXNwb25zZUhhbmRsZXI6IGNyZWF0ZUpzb25SZXNwb25zZUhhbmRsZXI1KFxuICAgICAgICBvcGVuYWlSZXNwb25zZXNSZXNwb25zZVNjaGVtYVxuICAgICAgKSxcbiAgICAgIGFib3J0U2lnbmFsOiBvcHRpb25zLmFib3J0U2lnbmFsLFxuICAgICAgZmV0Y2g6IHRoaXMuY29uZmlnLmZldGNoXG4gICAgfSk7XG4gICAgaWYgKHJlc3BvbnNlLmVycm9yKSB7XG4gICAgICB0aHJvdyBuZXcgQVBJQ2FsbEVycm9yKHtcbiAgICAgICAgbWVzc2FnZTogcmVzcG9uc2UuZXJyb3IubWVzc2FnZSxcbiAgICAgICAgdXJsLFxuICAgICAgICByZXF1ZXN0Qm9keVZhbHVlczogYm9keSxcbiAgICAgICAgc3RhdHVzQ29kZTogNDAwLFxuICAgICAgICByZXNwb25zZUhlYWRlcnMsXG4gICAgICAgIHJlc3BvbnNlQm9keTogcmF3UmVzcG9uc2UsXG4gICAgICAgIGlzUmV0cnlhYmxlOiBmYWxzZVxuICAgICAgfSk7XG4gICAgfVxuICAgIGNvbnN0IGNvbnRlbnQgPSBbXTtcbiAgICBjb25zdCBsb2dwcm9icyA9IFtdO1xuICAgIGxldCBoYXNGdW5jdGlvbkNhbGwgPSBmYWxzZTtcbiAgICBmb3IgKGNvbnN0IHBhcnQgb2YgcmVzcG9uc2Uub3V0cHV0KSB7XG4gICAgICBzd2l0Y2ggKHBhcnQudHlwZSkge1xuICAgICAgICBjYXNlIFwicmVhc29uaW5nXCI6IHtcbiAgICAgICAgICBpZiAocGFydC5zdW1tYXJ5Lmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgICAgcGFydC5zdW1tYXJ5LnB1c2goeyB0eXBlOiBcInN1bW1hcnlfdGV4dFwiLCB0ZXh0OiBcIlwiIH0pO1xuICAgICAgICAgIH1cbiAgICAgICAgICBmb3IgKGNvbnN0IHN1bW1hcnkgb2YgcGFydC5zdW1tYXJ5KSB7XG4gICAgICAgICAgICBjb250ZW50LnB1c2goe1xuICAgICAgICAgICAgICB0eXBlOiBcInJlYXNvbmluZ1wiLFxuICAgICAgICAgICAgICB0ZXh0OiBzdW1tYXJ5LnRleHQsXG4gICAgICAgICAgICAgIHByb3ZpZGVyTWV0YWRhdGE6IHtcbiAgICAgICAgICAgICAgICBbcHJvdmlkZXJPcHRpb25zTmFtZV06IHtcbiAgICAgICAgICAgICAgICAgIGl0ZW1JZDogcGFydC5pZCxcbiAgICAgICAgICAgICAgICAgIHJlYXNvbmluZ0VuY3J5cHRlZENvbnRlbnQ6IChfYSA9IHBhcnQuZW5jcnlwdGVkX2NvbnRlbnQpICE9IG51bGwgPyBfYSA6IG51bGxcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgIH1cbiAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgICAgICBjYXNlIFwiaW1hZ2VfZ2VuZXJhdGlvbl9jYWxsXCI6IHtcbiAgICAgICAgICBjb250ZW50LnB1c2goe1xuICAgICAgICAgICAgdHlwZTogXCJ0b29sLWNhbGxcIixcbiAgICAgICAgICAgIHRvb2xDYWxsSWQ6IHBhcnQuaWQsXG4gICAgICAgICAgICB0b29sTmFtZTogdG9vbE5hbWVNYXBwaW5nLnRvQ3VzdG9tVG9vbE5hbWUoXCJpbWFnZV9nZW5lcmF0aW9uXCIpLFxuICAgICAgICAgICAgaW5wdXQ6IFwie31cIixcbiAgICAgICAgICAgIHByb3ZpZGVyRXhlY3V0ZWQ6IHRydWVcbiAgICAgICAgICB9KTtcbiAgICAgICAgICBjb250ZW50LnB1c2goe1xuICAgICAgICAgICAgdHlwZTogXCJ0b29sLXJlc3VsdFwiLFxuICAgICAgICAgICAgdG9vbENhbGxJZDogcGFydC5pZCxcbiAgICAgICAgICAgIHRvb2xOYW1lOiB0b29sTmFtZU1hcHBpbmcudG9DdXN0b21Ub29sTmFtZShcImltYWdlX2dlbmVyYXRpb25cIiksXG4gICAgICAgICAgICByZXN1bHQ6IHtcbiAgICAgICAgICAgICAgcmVzdWx0OiBwYXJ0LnJlc3VsdFxuICAgICAgICAgICAgfVxuICAgICAgICAgIH0pO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgICAgIGNhc2UgXCJsb2NhbF9zaGVsbF9jYWxsXCI6IHtcbiAgICAgICAgICBjb250ZW50LnB1c2goe1xuICAgICAgICAgICAgdHlwZTogXCJ0b29sLWNhbGxcIixcbiAgICAgICAgICAgIHRvb2xDYWxsSWQ6IHBhcnQuY2FsbF9pZCxcbiAgICAgICAgICAgIHRvb2xOYW1lOiB0b29sTmFtZU1hcHBpbmcudG9DdXN0b21Ub29sTmFtZShcImxvY2FsX3NoZWxsXCIpLFxuICAgICAgICAgICAgaW5wdXQ6IEpTT04uc3RyaW5naWZ5KHtcbiAgICAgICAgICAgICAgYWN0aW9uOiBwYXJ0LmFjdGlvblxuICAgICAgICAgICAgfSksXG4gICAgICAgICAgICBwcm92aWRlck1ldGFkYXRhOiB7XG4gICAgICAgICAgICAgIFtwcm92aWRlck9wdGlvbnNOYW1lXToge1xuICAgICAgICAgICAgICAgIGl0ZW1JZDogcGFydC5pZFxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSk7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICAgICAgY2FzZSBcInNoZWxsX2NhbGxcIjoge1xuICAgICAgICAgIGNvbnRlbnQucHVzaCh7XG4gICAgICAgICAgICB0eXBlOiBcInRvb2wtY2FsbFwiLFxuICAgICAgICAgICAgdG9vbENhbGxJZDogcGFydC5jYWxsX2lkLFxuICAgICAgICAgICAgdG9vbE5hbWU6IHRvb2xOYW1lTWFwcGluZy50b0N1c3RvbVRvb2xOYW1lKFwic2hlbGxcIiksXG4gICAgICAgICAgICBpbnB1dDogSlNPTi5zdHJpbmdpZnkoe1xuICAgICAgICAgICAgICBhY3Rpb246IHtcbiAgICAgICAgICAgICAgICBjb21tYW5kczogcGFydC5hY3Rpb24uY29tbWFuZHNcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSksXG4gICAgICAgICAgICBwcm92aWRlck1ldGFkYXRhOiB7XG4gICAgICAgICAgICAgIFtwcm92aWRlck9wdGlvbnNOYW1lXToge1xuICAgICAgICAgICAgICAgIGl0ZW1JZDogcGFydC5pZFxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSk7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICAgICAgY2FzZSBcIm1lc3NhZ2VcIjoge1xuICAgICAgICAgIGZvciAoY29uc3QgY29udGVudFBhcnQgb2YgcGFydC5jb250ZW50KSB7XG4gICAgICAgICAgICBpZiAoKChfYyA9IChfYiA9IG9wdGlvbnMucHJvdmlkZXJPcHRpb25zKSA9PSBudWxsID8gdm9pZCAwIDogX2JbcHJvdmlkZXJPcHRpb25zTmFtZV0pID09IG51bGwgPyB2b2lkIDAgOiBfYy5sb2dwcm9icykgJiYgY29udGVudFBhcnQubG9ncHJvYnMpIHtcbiAgICAgICAgICAgICAgbG9ncHJvYnMucHVzaChjb250ZW50UGFydC5sb2dwcm9icyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCBwcm92aWRlck1ldGFkYXRhMiA9IHtcbiAgICAgICAgICAgICAgaXRlbUlkOiBwYXJ0LmlkLFxuICAgICAgICAgICAgICAuLi5jb250ZW50UGFydC5hbm5vdGF0aW9ucy5sZW5ndGggPiAwICYmIHtcbiAgICAgICAgICAgICAgICBhbm5vdGF0aW9uczogY29udGVudFBhcnQuYW5ub3RhdGlvbnNcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIGNvbnRlbnQucHVzaCh7XG4gICAgICAgICAgICAgIHR5cGU6IFwidGV4dFwiLFxuICAgICAgICAgICAgICB0ZXh0OiBjb250ZW50UGFydC50ZXh0LFxuICAgICAgICAgICAgICBwcm92aWRlck1ldGFkYXRhOiB7XG4gICAgICAgICAgICAgICAgW3Byb3ZpZGVyT3B0aW9uc05hbWVdOiBwcm92aWRlck1ldGFkYXRhMlxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGZvciAoY29uc3QgYW5ub3RhdGlvbiBvZiBjb250ZW50UGFydC5hbm5vdGF0aW9ucykge1xuICAgICAgICAgICAgICBpZiAoYW5ub3RhdGlvbi50eXBlID09PSBcInVybF9jaXRhdGlvblwiKSB7XG4gICAgICAgICAgICAgICAgY29udGVudC5wdXNoKHtcbiAgICAgICAgICAgICAgICAgIHR5cGU6IFwic291cmNlXCIsXG4gICAgICAgICAgICAgICAgICBzb3VyY2VUeXBlOiBcInVybFwiLFxuICAgICAgICAgICAgICAgICAgaWQ6IChfZiA9IChfZSA9IChfZCA9IHRoaXMuY29uZmlnKS5nZW5lcmF0ZUlkKSA9PSBudWxsID8gdm9pZCAwIDogX2UuY2FsbChfZCkpICE9IG51bGwgPyBfZiA6IGdlbmVyYXRlSWQyKCksXG4gICAgICAgICAgICAgICAgICB1cmw6IGFubm90YXRpb24udXJsLFxuICAgICAgICAgICAgICAgICAgdGl0bGU6IGFubm90YXRpb24udGl0bGVcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgfSBlbHNlIGlmIChhbm5vdGF0aW9uLnR5cGUgPT09IFwiZmlsZV9jaXRhdGlvblwiKSB7XG4gICAgICAgICAgICAgICAgY29udGVudC5wdXNoKHtcbiAgICAgICAgICAgICAgICAgIHR5cGU6IFwic291cmNlXCIsXG4gICAgICAgICAgICAgICAgICBzb3VyY2VUeXBlOiBcImRvY3VtZW50XCIsXG4gICAgICAgICAgICAgICAgICBpZDogKF9pID0gKF9oID0gKF9nID0gdGhpcy5jb25maWcpLmdlbmVyYXRlSWQpID09IG51bGwgPyB2b2lkIDAgOiBfaC5jYWxsKF9nKSkgIT0gbnVsbCA/IF9pIDogZ2VuZXJhdGVJZDIoKSxcbiAgICAgICAgICAgICAgICAgIG1lZGlhVHlwZTogXCJ0ZXh0L3BsYWluXCIsXG4gICAgICAgICAgICAgICAgICB0aXRsZTogKF9rID0gKF9qID0gYW5ub3RhdGlvbi5xdW90ZSkgIT0gbnVsbCA/IF9qIDogYW5ub3RhdGlvbi5maWxlbmFtZSkgIT0gbnVsbCA/IF9rIDogXCJEb2N1bWVudFwiLFxuICAgICAgICAgICAgICAgICAgZmlsZW5hbWU6IChfbCA9IGFubm90YXRpb24uZmlsZW5hbWUpICE9IG51bGwgPyBfbCA6IGFubm90YXRpb24uZmlsZV9pZCxcbiAgICAgICAgICAgICAgICAgIC4uLmFubm90YXRpb24uZmlsZV9pZCA/IHtcbiAgICAgICAgICAgICAgICAgICAgcHJvdmlkZXJNZXRhZGF0YToge1xuICAgICAgICAgICAgICAgICAgICAgIFtwcm92aWRlck9wdGlvbnNOYW1lXToge1xuICAgICAgICAgICAgICAgICAgICAgICAgZmlsZUlkOiBhbm5vdGF0aW9uLmZpbGVfaWRcbiAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgIH0gOiB7fVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICB9IGVsc2UgaWYgKGFubm90YXRpb24udHlwZSA9PT0gXCJjb250YWluZXJfZmlsZV9jaXRhdGlvblwiKSB7XG4gICAgICAgICAgICAgICAgY29udGVudC5wdXNoKHtcbiAgICAgICAgICAgICAgICAgIHR5cGU6IFwic291cmNlXCIsXG4gICAgICAgICAgICAgICAgICBzb3VyY2VUeXBlOiBcImRvY3VtZW50XCIsXG4gICAgICAgICAgICAgICAgICBpZDogKF9vID0gKF9uID0gKF9tID0gdGhpcy5jb25maWcpLmdlbmVyYXRlSWQpID09IG51bGwgPyB2b2lkIDAgOiBfbi5jYWxsKF9tKSkgIT0gbnVsbCA/IF9vIDogZ2VuZXJhdGVJZDIoKSxcbiAgICAgICAgICAgICAgICAgIG1lZGlhVHlwZTogXCJ0ZXh0L3BsYWluXCIsXG4gICAgICAgICAgICAgICAgICB0aXRsZTogKF9xID0gKF9wID0gYW5ub3RhdGlvbi5maWxlbmFtZSkgIT0gbnVsbCA/IF9wIDogYW5ub3RhdGlvbi5maWxlX2lkKSAhPSBudWxsID8gX3EgOiBcIkRvY3VtZW50XCIsXG4gICAgICAgICAgICAgICAgICBmaWxlbmFtZTogKF9yID0gYW5ub3RhdGlvbi5maWxlbmFtZSkgIT0gbnVsbCA/IF9yIDogYW5ub3RhdGlvbi5maWxlX2lkLFxuICAgICAgICAgICAgICAgICAgcHJvdmlkZXJNZXRhZGF0YToge1xuICAgICAgICAgICAgICAgICAgICBbcHJvdmlkZXJPcHRpb25zTmFtZV06IHtcbiAgICAgICAgICAgICAgICAgICAgICBmaWxlSWQ6IGFubm90YXRpb24uZmlsZV9pZCxcbiAgICAgICAgICAgICAgICAgICAgICBjb250YWluZXJJZDogYW5ub3RhdGlvbi5jb250YWluZXJfaWQsXG4gICAgICAgICAgICAgICAgICAgICAgLi4uYW5ub3RhdGlvbi5pbmRleCAhPSBudWxsID8geyBpbmRleDogYW5ub3RhdGlvbi5pbmRleCB9IDoge31cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICB9IGVsc2UgaWYgKGFubm90YXRpb24udHlwZSA9PT0gXCJmaWxlX3BhdGhcIikge1xuICAgICAgICAgICAgICAgIGNvbnRlbnQucHVzaCh7XG4gICAgICAgICAgICAgICAgICB0eXBlOiBcInNvdXJjZVwiLFxuICAgICAgICAgICAgICAgICAgc291cmNlVHlwZTogXCJkb2N1bWVudFwiLFxuICAgICAgICAgICAgICAgICAgaWQ6IChfdSA9IChfdCA9IChfcyA9IHRoaXMuY29uZmlnKS5nZW5lcmF0ZUlkKSA9PSBudWxsID8gdm9pZCAwIDogX3QuY2FsbChfcykpICE9IG51bGwgPyBfdSA6IGdlbmVyYXRlSWQyKCksXG4gICAgICAgICAgICAgICAgICBtZWRpYVR5cGU6IFwiYXBwbGljYXRpb24vb2N0ZXQtc3RyZWFtXCIsXG4gICAgICAgICAgICAgICAgICB0aXRsZTogYW5ub3RhdGlvbi5maWxlX2lkLFxuICAgICAgICAgICAgICAgICAgZmlsZW5hbWU6IGFubm90YXRpb24uZmlsZV9pZCxcbiAgICAgICAgICAgICAgICAgIHByb3ZpZGVyTWV0YWRhdGE6IHtcbiAgICAgICAgICAgICAgICAgICAgW3Byb3ZpZGVyT3B0aW9uc05hbWVdOiB7XG4gICAgICAgICAgICAgICAgICAgICAgZmlsZUlkOiBhbm5vdGF0aW9uLmZpbGVfaWQsXG4gICAgICAgICAgICAgICAgICAgICAgLi4uYW5ub3RhdGlvbi5pbmRleCAhPSBudWxsID8geyBpbmRleDogYW5ub3RhdGlvbi5pbmRleCB9IDoge31cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgICAgIGNhc2UgXCJmdW5jdGlvbl9jYWxsXCI6IHtcbiAgICAgICAgICBoYXNGdW5jdGlvbkNhbGwgPSB0cnVlO1xuICAgICAgICAgIGNvbnRlbnQucHVzaCh7XG4gICAgICAgICAgICB0eXBlOiBcInRvb2wtY2FsbFwiLFxuICAgICAgICAgICAgdG9vbENhbGxJZDogcGFydC5jYWxsX2lkLFxuICAgICAgICAgICAgdG9vbE5hbWU6IHBhcnQubmFtZSxcbiAgICAgICAgICAgIGlucHV0OiBwYXJ0LmFyZ3VtZW50cyxcbiAgICAgICAgICAgIHByb3ZpZGVyTWV0YWRhdGE6IHtcbiAgICAgICAgICAgICAgW3Byb3ZpZGVyT3B0aW9uc05hbWVdOiB7XG4gICAgICAgICAgICAgICAgaXRlbUlkOiBwYXJ0LmlkXG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9KTtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgICAgICBjYXNlIFwid2ViX3NlYXJjaF9jYWxsXCI6IHtcbiAgICAgICAgICBjb250ZW50LnB1c2goe1xuICAgICAgICAgICAgdHlwZTogXCJ0b29sLWNhbGxcIixcbiAgICAgICAgICAgIHRvb2xDYWxsSWQ6IHBhcnQuaWQsXG4gICAgICAgICAgICB0b29sTmFtZTogdG9vbE5hbWVNYXBwaW5nLnRvQ3VzdG9tVG9vbE5hbWUoXG4gICAgICAgICAgICAgIHdlYlNlYXJjaFRvb2xOYW1lICE9IG51bGwgPyB3ZWJTZWFyY2hUb29sTmFtZSA6IFwid2ViX3NlYXJjaFwiXG4gICAgICAgICAgICApLFxuICAgICAgICAgICAgaW5wdXQ6IEpTT04uc3RyaW5naWZ5KHt9KSxcbiAgICAgICAgICAgIHByb3ZpZGVyRXhlY3V0ZWQ6IHRydWVcbiAgICAgICAgICB9KTtcbiAgICAgICAgICBjb250ZW50LnB1c2goe1xuICAgICAgICAgICAgdHlwZTogXCJ0b29sLXJlc3VsdFwiLFxuICAgICAgICAgICAgdG9vbENhbGxJZDogcGFydC5pZCxcbiAgICAgICAgICAgIHRvb2xOYW1lOiB0b29sTmFtZU1hcHBpbmcudG9DdXN0b21Ub29sTmFtZShcbiAgICAgICAgICAgICAgd2ViU2VhcmNoVG9vbE5hbWUgIT0gbnVsbCA/IHdlYlNlYXJjaFRvb2xOYW1lIDogXCJ3ZWJfc2VhcmNoXCJcbiAgICAgICAgICAgICksXG4gICAgICAgICAgICByZXN1bHQ6IG1hcFdlYlNlYXJjaE91dHB1dChwYXJ0LmFjdGlvbilcbiAgICAgICAgICB9KTtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgICAgICBjYXNlIFwibWNwX2NhbGxcIjoge1xuICAgICAgICAgIGNvbnN0IHRvb2xDYWxsSWQgPSBwYXJ0LmFwcHJvdmFsX3JlcXVlc3RfaWQgIT0gbnVsbCA/IChfdiA9IGFwcHJvdmFsUmVxdWVzdElkVG9EdW1teVRvb2xDYWxsSWRGcm9tUHJvbXB0W3BhcnQuYXBwcm92YWxfcmVxdWVzdF9pZF0pICE9IG51bGwgPyBfdiA6IHBhcnQuaWQgOiBwYXJ0LmlkO1xuICAgICAgICAgIGNvbnN0IHRvb2xOYW1lID0gYG1jcC4ke3BhcnQubmFtZX1gO1xuICAgICAgICAgIGNvbnRlbnQucHVzaCh7XG4gICAgICAgICAgICB0eXBlOiBcInRvb2wtY2FsbFwiLFxuICAgICAgICAgICAgdG9vbENhbGxJZCxcbiAgICAgICAgICAgIHRvb2xOYW1lLFxuICAgICAgICAgICAgaW5wdXQ6IHBhcnQuYXJndW1lbnRzLFxuICAgICAgICAgICAgcHJvdmlkZXJFeGVjdXRlZDogdHJ1ZSxcbiAgICAgICAgICAgIGR5bmFtaWM6IHRydWVcbiAgICAgICAgICB9KTtcbiAgICAgICAgICBjb250ZW50LnB1c2goe1xuICAgICAgICAgICAgdHlwZTogXCJ0b29sLXJlc3VsdFwiLFxuICAgICAgICAgICAgdG9vbENhbGxJZCxcbiAgICAgICAgICAgIHRvb2xOYW1lLFxuICAgICAgICAgICAgcmVzdWx0OiB7XG4gICAgICAgICAgICAgIHR5cGU6IFwiY2FsbFwiLFxuICAgICAgICAgICAgICBzZXJ2ZXJMYWJlbDogcGFydC5zZXJ2ZXJfbGFiZWwsXG4gICAgICAgICAgICAgIG5hbWU6IHBhcnQubmFtZSxcbiAgICAgICAgICAgICAgYXJndW1lbnRzOiBwYXJ0LmFyZ3VtZW50cyxcbiAgICAgICAgICAgICAgLi4ucGFydC5vdXRwdXQgIT0gbnVsbCA/IHsgb3V0cHV0OiBwYXJ0Lm91dHB1dCB9IDoge30sXG4gICAgICAgICAgICAgIC4uLnBhcnQuZXJyb3IgIT0gbnVsbCA/IHsgZXJyb3I6IHBhcnQuZXJyb3IgfSA6IHt9XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgcHJvdmlkZXJNZXRhZGF0YToge1xuICAgICAgICAgICAgICBbcHJvdmlkZXJPcHRpb25zTmFtZV06IHtcbiAgICAgICAgICAgICAgICBpdGVtSWQ6IHBhcnQuaWRcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH0pO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgICAgIGNhc2UgXCJtY3BfbGlzdF90b29sc1wiOiB7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICAgICAgY2FzZSBcIm1jcF9hcHByb3ZhbF9yZXF1ZXN0XCI6IHtcbiAgICAgICAgICBjb25zdCBhcHByb3ZhbFJlcXVlc3RJZCA9IChfdyA9IHBhcnQuYXBwcm92YWxfcmVxdWVzdF9pZCkgIT0gbnVsbCA/IF93IDogcGFydC5pZDtcbiAgICAgICAgICBjb25zdCBkdW1teVRvb2xDYWxsSWQgPSAoX3ogPSAoX3kgPSAoX3ggPSB0aGlzLmNvbmZpZykuZ2VuZXJhdGVJZCkgPT0gbnVsbCA/IHZvaWQgMCA6IF95LmNhbGwoX3gpKSAhPSBudWxsID8gX3ogOiBnZW5lcmF0ZUlkMigpO1xuICAgICAgICAgIGNvbnN0IHRvb2xOYW1lID0gYG1jcC4ke3BhcnQubmFtZX1gO1xuICAgICAgICAgIGNvbnRlbnQucHVzaCh7XG4gICAgICAgICAgICB0eXBlOiBcInRvb2wtY2FsbFwiLFxuICAgICAgICAgICAgdG9vbENhbGxJZDogZHVtbXlUb29sQ2FsbElkLFxuICAgICAgICAgICAgdG9vbE5hbWUsXG4gICAgICAgICAgICBpbnB1dDogcGFydC5hcmd1bWVudHMsXG4gICAgICAgICAgICBwcm92aWRlckV4ZWN1dGVkOiB0cnVlLFxuICAgICAgICAgICAgZHluYW1pYzogdHJ1ZVxuICAgICAgICAgIH0pO1xuICAgICAgICAgIGNvbnRlbnQucHVzaCh7XG4gICAgICAgICAgICB0eXBlOiBcInRvb2wtYXBwcm92YWwtcmVxdWVzdFwiLFxuICAgICAgICAgICAgYXBwcm92YWxJZDogYXBwcm92YWxSZXF1ZXN0SWQsXG4gICAgICAgICAgICB0b29sQ2FsbElkOiBkdW1teVRvb2xDYWxsSWRcbiAgICAgICAgICB9KTtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgICAgICBjYXNlIFwiY29tcHV0ZXJfY2FsbFwiOiB7XG4gICAgICAgICAgY29udGVudC5wdXNoKHtcbiAgICAgICAgICAgIHR5cGU6IFwidG9vbC1jYWxsXCIsXG4gICAgICAgICAgICB0b29sQ2FsbElkOiBwYXJ0LmlkLFxuICAgICAgICAgICAgdG9vbE5hbWU6IHRvb2xOYW1lTWFwcGluZy50b0N1c3RvbVRvb2xOYW1lKFwiY29tcHV0ZXJfdXNlXCIpLFxuICAgICAgICAgICAgaW5wdXQ6IFwiXCIsXG4gICAgICAgICAgICBwcm92aWRlckV4ZWN1dGVkOiB0cnVlXG4gICAgICAgICAgfSk7XG4gICAgICAgICAgY29udGVudC5wdXNoKHtcbiAgICAgICAgICAgIHR5cGU6IFwidG9vbC1yZXN1bHRcIixcbiAgICAgICAgICAgIHRvb2xDYWxsSWQ6IHBhcnQuaWQsXG4gICAgICAgICAgICB0b29sTmFtZTogdG9vbE5hbWVNYXBwaW5nLnRvQ3VzdG9tVG9vbE5hbWUoXCJjb21wdXRlcl91c2VcIiksXG4gICAgICAgICAgICByZXN1bHQ6IHtcbiAgICAgICAgICAgICAgdHlwZTogXCJjb21wdXRlcl91c2VfdG9vbF9yZXN1bHRcIixcbiAgICAgICAgICAgICAgc3RhdHVzOiBwYXJ0LnN0YXR1cyB8fCBcImNvbXBsZXRlZFwiXG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSk7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICAgICAgY2FzZSBcImZpbGVfc2VhcmNoX2NhbGxcIjoge1xuICAgICAgICAgIGNvbnRlbnQucHVzaCh7XG4gICAgICAgICAgICB0eXBlOiBcInRvb2wtY2FsbFwiLFxuICAgICAgICAgICAgdG9vbENhbGxJZDogcGFydC5pZCxcbiAgICAgICAgICAgIHRvb2xOYW1lOiB0b29sTmFtZU1hcHBpbmcudG9DdXN0b21Ub29sTmFtZShcImZpbGVfc2VhcmNoXCIpLFxuICAgICAgICAgICAgaW5wdXQ6IFwie31cIixcbiAgICAgICAgICAgIHByb3ZpZGVyRXhlY3V0ZWQ6IHRydWVcbiAgICAgICAgICB9KTtcbiAgICAgICAgICBjb250ZW50LnB1c2goe1xuICAgICAgICAgICAgdHlwZTogXCJ0b29sLXJlc3VsdFwiLFxuICAgICAgICAgICAgdG9vbENhbGxJZDogcGFydC5pZCxcbiAgICAgICAgICAgIHRvb2xOYW1lOiB0b29sTmFtZU1hcHBpbmcudG9DdXN0b21Ub29sTmFtZShcImZpbGVfc2VhcmNoXCIpLFxuICAgICAgICAgICAgcmVzdWx0OiB7XG4gICAgICAgICAgICAgIHF1ZXJpZXM6IHBhcnQucXVlcmllcyxcbiAgICAgICAgICAgICAgcmVzdWx0czogKF9CID0gKF9BID0gcGFydC5yZXN1bHRzKSA9PSBudWxsID8gdm9pZCAwIDogX0EubWFwKChyZXN1bHQpID0+ICh7XG4gICAgICAgICAgICAgICAgYXR0cmlidXRlczogcmVzdWx0LmF0dHJpYnV0ZXMsXG4gICAgICAgICAgICAgICAgZmlsZUlkOiByZXN1bHQuZmlsZV9pZCxcbiAgICAgICAgICAgICAgICBmaWxlbmFtZTogcmVzdWx0LmZpbGVuYW1lLFxuICAgICAgICAgICAgICAgIHNjb3JlOiByZXN1bHQuc2NvcmUsXG4gICAgICAgICAgICAgICAgdGV4dDogcmVzdWx0LnRleHRcbiAgICAgICAgICAgICAgfSkpKSAhPSBudWxsID8gX0IgOiBudWxsXG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSk7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICAgICAgY2FzZSBcImNvZGVfaW50ZXJwcmV0ZXJfY2FsbFwiOiB7XG4gICAgICAgICAgY29udGVudC5wdXNoKHtcbiAgICAgICAgICAgIHR5cGU6IFwidG9vbC1jYWxsXCIsXG4gICAgICAgICAgICB0b29sQ2FsbElkOiBwYXJ0LmlkLFxuICAgICAgICAgICAgdG9vbE5hbWU6IHRvb2xOYW1lTWFwcGluZy50b0N1c3RvbVRvb2xOYW1lKFwiY29kZV9pbnRlcnByZXRlclwiKSxcbiAgICAgICAgICAgIGlucHV0OiBKU09OLnN0cmluZ2lmeSh7XG4gICAgICAgICAgICAgIGNvZGU6IHBhcnQuY29kZSxcbiAgICAgICAgICAgICAgY29udGFpbmVySWQ6IHBhcnQuY29udGFpbmVyX2lkXG4gICAgICAgICAgICB9KSxcbiAgICAgICAgICAgIHByb3ZpZGVyRXhlY3V0ZWQ6IHRydWVcbiAgICAgICAgICB9KTtcbiAgICAgICAgICBjb250ZW50LnB1c2goe1xuICAgICAgICAgICAgdHlwZTogXCJ0b29sLXJlc3VsdFwiLFxuICAgICAgICAgICAgdG9vbENhbGxJZDogcGFydC5pZCxcbiAgICAgICAgICAgIHRvb2xOYW1lOiB0b29sTmFtZU1hcHBpbmcudG9DdXN0b21Ub29sTmFtZShcImNvZGVfaW50ZXJwcmV0ZXJcIiksXG4gICAgICAgICAgICByZXN1bHQ6IHtcbiAgICAgICAgICAgICAgb3V0cHV0czogcGFydC5vdXRwdXRzXG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSk7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICAgICAgY2FzZSBcImFwcGx5X3BhdGNoX2NhbGxcIjoge1xuICAgICAgICAgIGNvbnRlbnQucHVzaCh7XG4gICAgICAgICAgICB0eXBlOiBcInRvb2wtY2FsbFwiLFxuICAgICAgICAgICAgdG9vbENhbGxJZDogcGFydC5jYWxsX2lkLFxuICAgICAgICAgICAgdG9vbE5hbWU6IHRvb2xOYW1lTWFwcGluZy50b0N1c3RvbVRvb2xOYW1lKFwiYXBwbHlfcGF0Y2hcIiksXG4gICAgICAgICAgICBpbnB1dDogSlNPTi5zdHJpbmdpZnkoe1xuICAgICAgICAgICAgICBjYWxsSWQ6IHBhcnQuY2FsbF9pZCxcbiAgICAgICAgICAgICAgb3BlcmF0aW9uOiBwYXJ0Lm9wZXJhdGlvblxuICAgICAgICAgICAgfSksXG4gICAgICAgICAgICBwcm92aWRlck1ldGFkYXRhOiB7XG4gICAgICAgICAgICAgIFtwcm92aWRlck9wdGlvbnNOYW1lXToge1xuICAgICAgICAgICAgICAgIGl0ZW1JZDogcGFydC5pZFxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSk7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gICAgY29uc3QgcHJvdmlkZXJNZXRhZGF0YSA9IHtcbiAgICAgIFtwcm92aWRlck9wdGlvbnNOYW1lXTogeyByZXNwb25zZUlkOiByZXNwb25zZS5pZCB9XG4gICAgfTtcbiAgICBpZiAobG9ncHJvYnMubGVuZ3RoID4gMCkge1xuICAgICAgcHJvdmlkZXJNZXRhZGF0YVtwcm92aWRlck9wdGlvbnNOYW1lXS5sb2dwcm9icyA9IGxvZ3Byb2JzO1xuICAgIH1cbiAgICBpZiAodHlwZW9mIHJlc3BvbnNlLnNlcnZpY2VfdGllciA9PT0gXCJzdHJpbmdcIikge1xuICAgICAgcHJvdmlkZXJNZXRhZGF0YVtwcm92aWRlck9wdGlvbnNOYW1lXS5zZXJ2aWNlVGllciA9IHJlc3BvbnNlLnNlcnZpY2VfdGllcjtcbiAgICB9XG4gICAgY29uc3QgdXNhZ2UgPSByZXNwb25zZS51c2FnZTtcbiAgICByZXR1cm4ge1xuICAgICAgY29udGVudCxcbiAgICAgIGZpbmlzaFJlYXNvbjoge1xuICAgICAgICB1bmlmaWVkOiBtYXBPcGVuQUlSZXNwb25zZUZpbmlzaFJlYXNvbih7XG4gICAgICAgICAgZmluaXNoUmVhc29uOiAoX0MgPSByZXNwb25zZS5pbmNvbXBsZXRlX2RldGFpbHMpID09IG51bGwgPyB2b2lkIDAgOiBfQy5yZWFzb24sXG4gICAgICAgICAgaGFzRnVuY3Rpb25DYWxsXG4gICAgICAgIH0pLFxuICAgICAgICByYXc6IChfRSA9IChfRCA9IHJlc3BvbnNlLmluY29tcGxldGVfZGV0YWlscykgPT0gbnVsbCA/IHZvaWQgMCA6IF9ELnJlYXNvbikgIT0gbnVsbCA/IF9FIDogdm9pZCAwXG4gICAgICB9LFxuICAgICAgdXNhZ2U6IGNvbnZlcnRPcGVuQUlSZXNwb25zZXNVc2FnZSh1c2FnZSksXG4gICAgICByZXF1ZXN0OiB7IGJvZHkgfSxcbiAgICAgIHJlc3BvbnNlOiB7XG4gICAgICAgIGlkOiByZXNwb25zZS5pZCxcbiAgICAgICAgdGltZXN0YW1wOiBuZXcgRGF0ZShyZXNwb25zZS5jcmVhdGVkX2F0ICogMWUzKSxcbiAgICAgICAgbW9kZWxJZDogcmVzcG9uc2UubW9kZWwsXG4gICAgICAgIGhlYWRlcnM6IHJlc3BvbnNlSGVhZGVycyxcbiAgICAgICAgYm9keTogcmF3UmVzcG9uc2VcbiAgICAgIH0sXG4gICAgICBwcm92aWRlck1ldGFkYXRhLFxuICAgICAgd2FybmluZ3NcbiAgICB9O1xuICB9XG4gIGFzeW5jIGRvU3RyZWFtKG9wdGlvbnMpIHtcbiAgICBjb25zdCB7XG4gICAgICBhcmdzOiBib2R5LFxuICAgICAgd2FybmluZ3MsXG4gICAgICB3ZWJTZWFyY2hUb29sTmFtZSxcbiAgICAgIHRvb2xOYW1lTWFwcGluZyxcbiAgICAgIHN0b3JlLFxuICAgICAgcHJvdmlkZXJPcHRpb25zTmFtZVxuICAgIH0gPSBhd2FpdCB0aGlzLmdldEFyZ3Mob3B0aW9ucyk7XG4gICAgY29uc3QgeyByZXNwb25zZUhlYWRlcnMsIHZhbHVlOiByZXNwb25zZSB9ID0gYXdhaXQgcG9zdEpzb25Ub0FwaTUoe1xuICAgICAgdXJsOiB0aGlzLmNvbmZpZy51cmwoe1xuICAgICAgICBwYXRoOiBcIi9yZXNwb25zZXNcIixcbiAgICAgICAgbW9kZWxJZDogdGhpcy5tb2RlbElkXG4gICAgICB9KSxcbiAgICAgIGhlYWRlcnM6IGNvbWJpbmVIZWFkZXJzNSh0aGlzLmNvbmZpZy5oZWFkZXJzKCksIG9wdGlvbnMuaGVhZGVycyksXG4gICAgICBib2R5OiB7XG4gICAgICAgIC4uLmJvZHksXG4gICAgICAgIHN0cmVhbTogdHJ1ZVxuICAgICAgfSxcbiAgICAgIGZhaWxlZFJlc3BvbnNlSGFuZGxlcjogb3BlbmFpRmFpbGVkUmVzcG9uc2VIYW5kbGVyLFxuICAgICAgc3VjY2Vzc2Z1bFJlc3BvbnNlSGFuZGxlcjogY3JlYXRlRXZlbnRTb3VyY2VSZXNwb25zZUhhbmRsZXIzKFxuICAgICAgICBvcGVuYWlSZXNwb25zZXNDaHVua1NjaGVtYVxuICAgICAgKSxcbiAgICAgIGFib3J0U2lnbmFsOiBvcHRpb25zLmFib3J0U2lnbmFsLFxuICAgICAgZmV0Y2g6IHRoaXMuY29uZmlnLmZldGNoXG4gICAgfSk7XG4gICAgY29uc3Qgc2VsZiA9IHRoaXM7XG4gICAgY29uc3QgYXBwcm92YWxSZXF1ZXN0SWRUb0R1bW15VG9vbENhbGxJZEZyb21Qcm9tcHQgPSBleHRyYWN0QXBwcm92YWxSZXF1ZXN0SWRUb1Rvb2xDYWxsSWRNYXBwaW5nKG9wdGlvbnMucHJvbXB0KTtcbiAgICBjb25zdCBhcHByb3ZhbFJlcXVlc3RJZFRvRHVtbXlUb29sQ2FsbElkRnJvbVN0cmVhbSA9IC8qIEBfX1BVUkVfXyAqLyBuZXcgTWFwKCk7XG4gICAgbGV0IGZpbmlzaFJlYXNvbiA9IHtcbiAgICAgIHVuaWZpZWQ6IFwib3RoZXJcIixcbiAgICAgIHJhdzogdm9pZCAwXG4gICAgfTtcbiAgICBsZXQgdXNhZ2UgPSB2b2lkIDA7XG4gICAgY29uc3QgbG9ncHJvYnMgPSBbXTtcbiAgICBsZXQgcmVzcG9uc2VJZCA9IG51bGw7XG4gICAgY29uc3Qgb25nb2luZ1Rvb2xDYWxscyA9IHt9O1xuICAgIGNvbnN0IG9uZ29pbmdBbm5vdGF0aW9ucyA9IFtdO1xuICAgIGxldCBoYXNGdW5jdGlvbkNhbGwgPSBmYWxzZTtcbiAgICBjb25zdCBhY3RpdmVSZWFzb25pbmcgPSB7fTtcbiAgICBsZXQgc2VydmljZVRpZXI7XG4gICAgcmV0dXJuIHtcbiAgICAgIHN0cmVhbTogcmVzcG9uc2UucGlwZVRocm91Z2goXG4gICAgICAgIG5ldyBUcmFuc2Zvcm1TdHJlYW0oe1xuICAgICAgICAgIHN0YXJ0KGNvbnRyb2xsZXIpIHtcbiAgICAgICAgICAgIGNvbnRyb2xsZXIuZW5xdWV1ZSh7IHR5cGU6IFwic3RyZWFtLXN0YXJ0XCIsIHdhcm5pbmdzIH0pO1xuICAgICAgICAgIH0sXG4gICAgICAgICAgdHJhbnNmb3JtKGNodW5rLCBjb250cm9sbGVyKSB7XG4gICAgICAgICAgICB2YXIgX2EsIF9iLCBfYywgX2QsIF9lLCBfZiwgX2csIF9oLCBfaSwgX2osIF9rLCBfbCwgX20sIF9uLCBfbywgX3AsIF9xLCBfciwgX3MsIF90LCBfdSwgX3YsIF93LCBfeCwgX3ksIF96LCBfQSwgX0IsIF9DLCBfRCwgX0UsIF9GLCBfRywgX0gsIF9JLCBfSjtcbiAgICAgICAgICAgIGlmIChvcHRpb25zLmluY2x1ZGVSYXdDaHVua3MpIHtcbiAgICAgICAgICAgICAgY29udHJvbGxlci5lbnF1ZXVlKHsgdHlwZTogXCJyYXdcIiwgcmF3VmFsdWU6IGNodW5rLnJhd1ZhbHVlIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKCFjaHVuay5zdWNjZXNzKSB7XG4gICAgICAgICAgICAgIGZpbmlzaFJlYXNvbiA9IHsgdW5pZmllZDogXCJlcnJvclwiLCByYXc6IHZvaWQgMCB9O1xuICAgICAgICAgICAgICBjb250cm9sbGVyLmVucXVldWUoeyB0eXBlOiBcImVycm9yXCIsIGVycm9yOiBjaHVuay5lcnJvciB9KTtcbiAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3QgdmFsdWUgPSBjaHVuay52YWx1ZTtcbiAgICAgICAgICAgIGlmIChpc1Jlc3BvbnNlT3V0cHV0SXRlbUFkZGVkQ2h1bmsodmFsdWUpKSB7XG4gICAgICAgICAgICAgIGlmICh2YWx1ZS5pdGVtLnR5cGUgPT09IFwiZnVuY3Rpb25fY2FsbFwiKSB7XG4gICAgICAgICAgICAgICAgb25nb2luZ1Rvb2xDYWxsc1t2YWx1ZS5vdXRwdXRfaW5kZXhdID0ge1xuICAgICAgICAgICAgICAgICAgdG9vbE5hbWU6IHZhbHVlLml0ZW0ubmFtZSxcbiAgICAgICAgICAgICAgICAgIHRvb2xDYWxsSWQ6IHZhbHVlLml0ZW0uY2FsbF9pZFxuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgY29udHJvbGxlci5lbnF1ZXVlKHtcbiAgICAgICAgICAgICAgICAgIHR5cGU6IFwidG9vbC1pbnB1dC1zdGFydFwiLFxuICAgICAgICAgICAgICAgICAgaWQ6IHZhbHVlLml0ZW0uY2FsbF9pZCxcbiAgICAgICAgICAgICAgICAgIHRvb2xOYW1lOiB2YWx1ZS5pdGVtLm5hbWVcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgfSBlbHNlIGlmICh2YWx1ZS5pdGVtLnR5cGUgPT09IFwid2ViX3NlYXJjaF9jYWxsXCIpIHtcbiAgICAgICAgICAgICAgICBvbmdvaW5nVG9vbENhbGxzW3ZhbHVlLm91dHB1dF9pbmRleF0gPSB7XG4gICAgICAgICAgICAgICAgICB0b29sTmFtZTogdG9vbE5hbWVNYXBwaW5nLnRvQ3VzdG9tVG9vbE5hbWUoXG4gICAgICAgICAgICAgICAgICAgIHdlYlNlYXJjaFRvb2xOYW1lICE9IG51bGwgPyB3ZWJTZWFyY2hUb29sTmFtZSA6IFwid2ViX3NlYXJjaFwiXG4gICAgICAgICAgICAgICAgICApLFxuICAgICAgICAgICAgICAgICAgdG9vbENhbGxJZDogdmFsdWUuaXRlbS5pZFxuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgY29udHJvbGxlci5lbnF1ZXVlKHtcbiAgICAgICAgICAgICAgICAgIHR5cGU6IFwidG9vbC1pbnB1dC1zdGFydFwiLFxuICAgICAgICAgICAgICAgICAgaWQ6IHZhbHVlLml0ZW0uaWQsXG4gICAgICAgICAgICAgICAgICB0b29sTmFtZTogdG9vbE5hbWVNYXBwaW5nLnRvQ3VzdG9tVG9vbE5hbWUoXG4gICAgICAgICAgICAgICAgICAgIHdlYlNlYXJjaFRvb2xOYW1lICE9IG51bGwgPyB3ZWJTZWFyY2hUb29sTmFtZSA6IFwid2ViX3NlYXJjaFwiXG4gICAgICAgICAgICAgICAgICApLFxuICAgICAgICAgICAgICAgICAgcHJvdmlkZXJFeGVjdXRlZDogdHJ1ZVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIGNvbnRyb2xsZXIuZW5xdWV1ZSh7XG4gICAgICAgICAgICAgICAgICB0eXBlOiBcInRvb2wtaW5wdXQtZW5kXCIsXG4gICAgICAgICAgICAgICAgICBpZDogdmFsdWUuaXRlbS5pZFxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIGNvbnRyb2xsZXIuZW5xdWV1ZSh7XG4gICAgICAgICAgICAgICAgICB0eXBlOiBcInRvb2wtY2FsbFwiLFxuICAgICAgICAgICAgICAgICAgdG9vbENhbGxJZDogdmFsdWUuaXRlbS5pZCxcbiAgICAgICAgICAgICAgICAgIHRvb2xOYW1lOiB0b29sTmFtZU1hcHBpbmcudG9DdXN0b21Ub29sTmFtZShcbiAgICAgICAgICAgICAgICAgICAgd2ViU2VhcmNoVG9vbE5hbWUgIT0gbnVsbCA/IHdlYlNlYXJjaFRvb2xOYW1lIDogXCJ3ZWJfc2VhcmNoXCJcbiAgICAgICAgICAgICAgICAgICksXG4gICAgICAgICAgICAgICAgICBpbnB1dDogSlNPTi5zdHJpbmdpZnkoe30pLFxuICAgICAgICAgICAgICAgICAgcHJvdmlkZXJFeGVjdXRlZDogdHJ1ZVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICB9IGVsc2UgaWYgKHZhbHVlLml0ZW0udHlwZSA9PT0gXCJjb21wdXRlcl9jYWxsXCIpIHtcbiAgICAgICAgICAgICAgICBvbmdvaW5nVG9vbENhbGxzW3ZhbHVlLm91dHB1dF9pbmRleF0gPSB7XG4gICAgICAgICAgICAgICAgICB0b29sTmFtZTogdG9vbE5hbWVNYXBwaW5nLnRvQ3VzdG9tVG9vbE5hbWUoXCJjb21wdXRlcl91c2VcIiksXG4gICAgICAgICAgICAgICAgICB0b29sQ2FsbElkOiB2YWx1ZS5pdGVtLmlkXG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICBjb250cm9sbGVyLmVucXVldWUoe1xuICAgICAgICAgICAgICAgICAgdHlwZTogXCJ0b29sLWlucHV0LXN0YXJ0XCIsXG4gICAgICAgICAgICAgICAgICBpZDogdmFsdWUuaXRlbS5pZCxcbiAgICAgICAgICAgICAgICAgIHRvb2xOYW1lOiB0b29sTmFtZU1hcHBpbmcudG9DdXN0b21Ub29sTmFtZShcImNvbXB1dGVyX3VzZVwiKSxcbiAgICAgICAgICAgICAgICAgIHByb3ZpZGVyRXhlY3V0ZWQ6IHRydWVcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgfSBlbHNlIGlmICh2YWx1ZS5pdGVtLnR5cGUgPT09IFwiY29kZV9pbnRlcnByZXRlcl9jYWxsXCIpIHtcbiAgICAgICAgICAgICAgICBvbmdvaW5nVG9vbENhbGxzW3ZhbHVlLm91dHB1dF9pbmRleF0gPSB7XG4gICAgICAgICAgICAgICAgICB0b29sTmFtZTogdG9vbE5hbWVNYXBwaW5nLnRvQ3VzdG9tVG9vbE5hbWUoXCJjb2RlX2ludGVycHJldGVyXCIpLFxuICAgICAgICAgICAgICAgICAgdG9vbENhbGxJZDogdmFsdWUuaXRlbS5pZCxcbiAgICAgICAgICAgICAgICAgIGNvZGVJbnRlcnByZXRlcjoge1xuICAgICAgICAgICAgICAgICAgICBjb250YWluZXJJZDogdmFsdWUuaXRlbS5jb250YWluZXJfaWRcbiAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIGNvbnRyb2xsZXIuZW5xdWV1ZSh7XG4gICAgICAgICAgICAgICAgICB0eXBlOiBcInRvb2wtaW5wdXQtc3RhcnRcIixcbiAgICAgICAgICAgICAgICAgIGlkOiB2YWx1ZS5pdGVtLmlkLFxuICAgICAgICAgICAgICAgICAgdG9vbE5hbWU6IHRvb2xOYW1lTWFwcGluZy50b0N1c3RvbVRvb2xOYW1lKFwiY29kZV9pbnRlcnByZXRlclwiKSxcbiAgICAgICAgICAgICAgICAgIHByb3ZpZGVyRXhlY3V0ZWQ6IHRydWVcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICBjb250cm9sbGVyLmVucXVldWUoe1xuICAgICAgICAgICAgICAgICAgdHlwZTogXCJ0b29sLWlucHV0LWRlbHRhXCIsXG4gICAgICAgICAgICAgICAgICBpZDogdmFsdWUuaXRlbS5pZCxcbiAgICAgICAgICAgICAgICAgIGRlbHRhOiBge1wiY29udGFpbmVySWRcIjpcIiR7dmFsdWUuaXRlbS5jb250YWluZXJfaWR9XCIsXCJjb2RlXCI6XCJgXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgIH0gZWxzZSBpZiAodmFsdWUuaXRlbS50eXBlID09PSBcImZpbGVfc2VhcmNoX2NhbGxcIikge1xuICAgICAgICAgICAgICAgIGNvbnRyb2xsZXIuZW5xdWV1ZSh7XG4gICAgICAgICAgICAgICAgICB0eXBlOiBcInRvb2wtY2FsbFwiLFxuICAgICAgICAgICAgICAgICAgdG9vbENhbGxJZDogdmFsdWUuaXRlbS5pZCxcbiAgICAgICAgICAgICAgICAgIHRvb2xOYW1lOiB0b29sTmFtZU1hcHBpbmcudG9DdXN0b21Ub29sTmFtZShcImZpbGVfc2VhcmNoXCIpLFxuICAgICAgICAgICAgICAgICAgaW5wdXQ6IFwie31cIixcbiAgICAgICAgICAgICAgICAgIHByb3ZpZGVyRXhlY3V0ZWQ6IHRydWVcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgfSBlbHNlIGlmICh2YWx1ZS5pdGVtLnR5cGUgPT09IFwiaW1hZ2VfZ2VuZXJhdGlvbl9jYWxsXCIpIHtcbiAgICAgICAgICAgICAgICBjb250cm9sbGVyLmVucXVldWUoe1xuICAgICAgICAgICAgICAgICAgdHlwZTogXCJ0b29sLWNhbGxcIixcbiAgICAgICAgICAgICAgICAgIHRvb2xDYWxsSWQ6IHZhbHVlLml0ZW0uaWQsXG4gICAgICAgICAgICAgICAgICB0b29sTmFtZTogdG9vbE5hbWVNYXBwaW5nLnRvQ3VzdG9tVG9vbE5hbWUoXCJpbWFnZV9nZW5lcmF0aW9uXCIpLFxuICAgICAgICAgICAgICAgICAgaW5wdXQ6IFwie31cIixcbiAgICAgICAgICAgICAgICAgIHByb3ZpZGVyRXhlY3V0ZWQ6IHRydWVcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgfSBlbHNlIGlmICh2YWx1ZS5pdGVtLnR5cGUgPT09IFwibWNwX2NhbGxcIiB8fCB2YWx1ZS5pdGVtLnR5cGUgPT09IFwibWNwX2xpc3RfdG9vbHNcIiB8fCB2YWx1ZS5pdGVtLnR5cGUgPT09IFwibWNwX2FwcHJvdmFsX3JlcXVlc3RcIikge1xuICAgICAgICAgICAgICB9IGVsc2UgaWYgKHZhbHVlLml0ZW0udHlwZSA9PT0gXCJhcHBseV9wYXRjaF9jYWxsXCIpIHtcbiAgICAgICAgICAgICAgICBjb25zdCB7IGNhbGxfaWQ6IGNhbGxJZCwgb3BlcmF0aW9uIH0gPSB2YWx1ZS5pdGVtO1xuICAgICAgICAgICAgICAgIG9uZ29pbmdUb29sQ2FsbHNbdmFsdWUub3V0cHV0X2luZGV4XSA9IHtcbiAgICAgICAgICAgICAgICAgIHRvb2xOYW1lOiB0b29sTmFtZU1hcHBpbmcudG9DdXN0b21Ub29sTmFtZShcImFwcGx5X3BhdGNoXCIpLFxuICAgICAgICAgICAgICAgICAgdG9vbENhbGxJZDogY2FsbElkLFxuICAgICAgICAgICAgICAgICAgYXBwbHlQYXRjaDoge1xuICAgICAgICAgICAgICAgICAgICAvLyBkZWxldGVfZmlsZSBkb2Vzbid0IGhhdmUgZGlmZlxuICAgICAgICAgICAgICAgICAgICBoYXNEaWZmOiBvcGVyYXRpb24udHlwZSA9PT0gXCJkZWxldGVfZmlsZVwiLFxuICAgICAgICAgICAgICAgICAgICBlbmRFbWl0dGVkOiBvcGVyYXRpb24udHlwZSA9PT0gXCJkZWxldGVfZmlsZVwiXG4gICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICBjb250cm9sbGVyLmVucXVldWUoe1xuICAgICAgICAgICAgICAgICAgdHlwZTogXCJ0b29sLWlucHV0LXN0YXJ0XCIsXG4gICAgICAgICAgICAgICAgICBpZDogY2FsbElkLFxuICAgICAgICAgICAgICAgICAgdG9vbE5hbWU6IHRvb2xOYW1lTWFwcGluZy50b0N1c3RvbVRvb2xOYW1lKFwiYXBwbHlfcGF0Y2hcIilcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICBpZiAob3BlcmF0aW9uLnR5cGUgPT09IFwiZGVsZXRlX2ZpbGVcIikge1xuICAgICAgICAgICAgICAgICAgY29uc3QgaW5wdXRTdHJpbmcgPSBKU09OLnN0cmluZ2lmeSh7XG4gICAgICAgICAgICAgICAgICAgIGNhbGxJZCxcbiAgICAgICAgICAgICAgICAgICAgb3BlcmF0aW9uXG4gICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgIGNvbnRyb2xsZXIuZW5xdWV1ZSh7XG4gICAgICAgICAgICAgICAgICAgIHR5cGU6IFwidG9vbC1pbnB1dC1kZWx0YVwiLFxuICAgICAgICAgICAgICAgICAgICBpZDogY2FsbElkLFxuICAgICAgICAgICAgICAgICAgICBkZWx0YTogaW5wdXRTdHJpbmdcbiAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgY29udHJvbGxlci5lbnF1ZXVlKHtcbiAgICAgICAgICAgICAgICAgICAgdHlwZTogXCJ0b29sLWlucHV0LWVuZFwiLFxuICAgICAgICAgICAgICAgICAgICBpZDogY2FsbElkXG4gICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgY29udHJvbGxlci5lbnF1ZXVlKHtcbiAgICAgICAgICAgICAgICAgICAgdHlwZTogXCJ0b29sLWlucHV0LWRlbHRhXCIsXG4gICAgICAgICAgICAgICAgICAgIGlkOiBjYWxsSWQsXG4gICAgICAgICAgICAgICAgICAgIGRlbHRhOiBge1wiY2FsbElkXCI6XCIke2VzY2FwZUpTT05EZWx0YShjYWxsSWQpfVwiLFwib3BlcmF0aW9uXCI6e1widHlwZVwiOlwiJHtlc2NhcGVKU09ORGVsdGEob3BlcmF0aW9uLnR5cGUpfVwiLFwicGF0aFwiOlwiJHtlc2NhcGVKU09ORGVsdGEob3BlcmF0aW9uLnBhdGgpfVwiLFwiZGlmZlwiOlwiYFxuICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICB9IGVsc2UgaWYgKHZhbHVlLml0ZW0udHlwZSA9PT0gXCJzaGVsbF9jYWxsXCIpIHtcbiAgICAgICAgICAgICAgICBvbmdvaW5nVG9vbENhbGxzW3ZhbHVlLm91dHB1dF9pbmRleF0gPSB7XG4gICAgICAgICAgICAgICAgICB0b29sTmFtZTogdG9vbE5hbWVNYXBwaW5nLnRvQ3VzdG9tVG9vbE5hbWUoXCJzaGVsbFwiKSxcbiAgICAgICAgICAgICAgICAgIHRvb2xDYWxsSWQ6IHZhbHVlLml0ZW0uY2FsbF9pZFxuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgIH0gZWxzZSBpZiAodmFsdWUuaXRlbS50eXBlID09PSBcIm1lc3NhZ2VcIikge1xuICAgICAgICAgICAgICAgIG9uZ29pbmdBbm5vdGF0aW9ucy5zcGxpY2UoMCwgb25nb2luZ0Fubm90YXRpb25zLmxlbmd0aCk7XG4gICAgICAgICAgICAgICAgY29udHJvbGxlci5lbnF1ZXVlKHtcbiAgICAgICAgICAgICAgICAgIHR5cGU6IFwidGV4dC1zdGFydFwiLFxuICAgICAgICAgICAgICAgICAgaWQ6IHZhbHVlLml0ZW0uaWQsXG4gICAgICAgICAgICAgICAgICBwcm92aWRlck1ldGFkYXRhOiB7XG4gICAgICAgICAgICAgICAgICAgIFtwcm92aWRlck9wdGlvbnNOYW1lXToge1xuICAgICAgICAgICAgICAgICAgICAgIGl0ZW1JZDogdmFsdWUuaXRlbS5pZFxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgIH0gZWxzZSBpZiAoaXNSZXNwb25zZU91dHB1dEl0ZW1BZGRlZENodW5rKHZhbHVlKSAmJiB2YWx1ZS5pdGVtLnR5cGUgPT09IFwicmVhc29uaW5nXCIpIHtcbiAgICAgICAgICAgICAgICBhY3RpdmVSZWFzb25pbmdbdmFsdWUuaXRlbS5pZF0gPSB7XG4gICAgICAgICAgICAgICAgICBlbmNyeXB0ZWRDb250ZW50OiB2YWx1ZS5pdGVtLmVuY3J5cHRlZF9jb250ZW50LFxuICAgICAgICAgICAgICAgICAgc3VtbWFyeVBhcnRzOiB7IDA6IFwiYWN0aXZlXCIgfVxuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgY29udHJvbGxlci5lbnF1ZXVlKHtcbiAgICAgICAgICAgICAgICAgIHR5cGU6IFwicmVhc29uaW5nLXN0YXJ0XCIsXG4gICAgICAgICAgICAgICAgICBpZDogYCR7dmFsdWUuaXRlbS5pZH06MGAsXG4gICAgICAgICAgICAgICAgICBwcm92aWRlck1ldGFkYXRhOiB7XG4gICAgICAgICAgICAgICAgICAgIFtwcm92aWRlck9wdGlvbnNOYW1lXToge1xuICAgICAgICAgICAgICAgICAgICAgIGl0ZW1JZDogdmFsdWUuaXRlbS5pZCxcbiAgICAgICAgICAgICAgICAgICAgICByZWFzb25pbmdFbmNyeXB0ZWRDb250ZW50OiAoX2EgPSB2YWx1ZS5pdGVtLmVuY3J5cHRlZF9jb250ZW50KSAhPSBudWxsID8gX2EgOiBudWxsXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSBlbHNlIGlmIChpc1Jlc3BvbnNlT3V0cHV0SXRlbURvbmVDaHVuayh2YWx1ZSkpIHtcbiAgICAgICAgICAgICAgaWYgKHZhbHVlLml0ZW0udHlwZSA9PT0gXCJtZXNzYWdlXCIpIHtcbiAgICAgICAgICAgICAgICBjb250cm9sbGVyLmVucXVldWUoe1xuICAgICAgICAgICAgICAgICAgdHlwZTogXCJ0ZXh0LWVuZFwiLFxuICAgICAgICAgICAgICAgICAgaWQ6IHZhbHVlLml0ZW0uaWQsXG4gICAgICAgICAgICAgICAgICBwcm92aWRlck1ldGFkYXRhOiB7XG4gICAgICAgICAgICAgICAgICAgIFtwcm92aWRlck9wdGlvbnNOYW1lXToge1xuICAgICAgICAgICAgICAgICAgICAgIGl0ZW1JZDogdmFsdWUuaXRlbS5pZCxcbiAgICAgICAgICAgICAgICAgICAgICAuLi5vbmdvaW5nQW5ub3RhdGlvbnMubGVuZ3RoID4gMCAmJiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBhbm5vdGF0aW9uczogb25nb2luZ0Fubm90YXRpb25zXG4gICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgIH0gZWxzZSBpZiAodmFsdWUuaXRlbS50eXBlID09PSBcImZ1bmN0aW9uX2NhbGxcIikge1xuICAgICAgICAgICAgICAgIG9uZ29pbmdUb29sQ2FsbHNbdmFsdWUub3V0cHV0X2luZGV4XSA9IHZvaWQgMDtcbiAgICAgICAgICAgICAgICBoYXNGdW5jdGlvbkNhbGwgPSB0cnVlO1xuICAgICAgICAgICAgICAgIGNvbnRyb2xsZXIuZW5xdWV1ZSh7XG4gICAgICAgICAgICAgICAgICB0eXBlOiBcInRvb2wtaW5wdXQtZW5kXCIsXG4gICAgICAgICAgICAgICAgICBpZDogdmFsdWUuaXRlbS5jYWxsX2lkXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgY29udHJvbGxlci5lbnF1ZXVlKHtcbiAgICAgICAgICAgICAgICAgIHR5cGU6IFwidG9vbC1jYWxsXCIsXG4gICAgICAgICAgICAgICAgICB0b29sQ2FsbElkOiB2YWx1ZS5pdGVtLmNhbGxfaWQsXG4gICAgICAgICAgICAgICAgICB0b29sTmFtZTogdmFsdWUuaXRlbS5uYW1lLFxuICAgICAgICAgICAgICAgICAgaW5wdXQ6IHZhbHVlLml0ZW0uYXJndW1lbnRzLFxuICAgICAgICAgICAgICAgICAgcHJvdmlkZXJNZXRhZGF0YToge1xuICAgICAgICAgICAgICAgICAgICBbcHJvdmlkZXJPcHRpb25zTmFtZV06IHtcbiAgICAgICAgICAgICAgICAgICAgICBpdGVtSWQ6IHZhbHVlLml0ZW0uaWRcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICB9IGVsc2UgaWYgKHZhbHVlLml0ZW0udHlwZSA9PT0gXCJ3ZWJfc2VhcmNoX2NhbGxcIikge1xuICAgICAgICAgICAgICAgIG9uZ29pbmdUb29sQ2FsbHNbdmFsdWUub3V0cHV0X2luZGV4XSA9IHZvaWQgMDtcbiAgICAgICAgICAgICAgICBjb250cm9sbGVyLmVucXVldWUoe1xuICAgICAgICAgICAgICAgICAgdHlwZTogXCJ0b29sLXJlc3VsdFwiLFxuICAgICAgICAgICAgICAgICAgdG9vbENhbGxJZDogdmFsdWUuaXRlbS5pZCxcbiAgICAgICAgICAgICAgICAgIHRvb2xOYW1lOiB0b29sTmFtZU1hcHBpbmcudG9DdXN0b21Ub29sTmFtZShcbiAgICAgICAgICAgICAgICAgICAgd2ViU2VhcmNoVG9vbE5hbWUgIT0gbnVsbCA/IHdlYlNlYXJjaFRvb2xOYW1lIDogXCJ3ZWJfc2VhcmNoXCJcbiAgICAgICAgICAgICAgICAgICksXG4gICAgICAgICAgICAgICAgICByZXN1bHQ6IG1hcFdlYlNlYXJjaE91dHB1dCh2YWx1ZS5pdGVtLmFjdGlvbilcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgfSBlbHNlIGlmICh2YWx1ZS5pdGVtLnR5cGUgPT09IFwiY29tcHV0ZXJfY2FsbFwiKSB7XG4gICAgICAgICAgICAgICAgb25nb2luZ1Rvb2xDYWxsc1t2YWx1ZS5vdXRwdXRfaW5kZXhdID0gdm9pZCAwO1xuICAgICAgICAgICAgICAgIGNvbnRyb2xsZXIuZW5xdWV1ZSh7XG4gICAgICAgICAgICAgICAgICB0eXBlOiBcInRvb2wtaW5wdXQtZW5kXCIsXG4gICAgICAgICAgICAgICAgICBpZDogdmFsdWUuaXRlbS5pZFxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIGNvbnRyb2xsZXIuZW5xdWV1ZSh7XG4gICAgICAgICAgICAgICAgICB0eXBlOiBcInRvb2wtY2FsbFwiLFxuICAgICAgICAgICAgICAgICAgdG9vbENhbGxJZDogdmFsdWUuaXRlbS5pZCxcbiAgICAgICAgICAgICAgICAgIHRvb2xOYW1lOiB0b29sTmFtZU1hcHBpbmcudG9DdXN0b21Ub29sTmFtZShcImNvbXB1dGVyX3VzZVwiKSxcbiAgICAgICAgICAgICAgICAgIGlucHV0OiBcIlwiLFxuICAgICAgICAgICAgICAgICAgcHJvdmlkZXJFeGVjdXRlZDogdHJ1ZVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIGNvbnRyb2xsZXIuZW5xdWV1ZSh7XG4gICAgICAgICAgICAgICAgICB0eXBlOiBcInRvb2wtcmVzdWx0XCIsXG4gICAgICAgICAgICAgICAgICB0b29sQ2FsbElkOiB2YWx1ZS5pdGVtLmlkLFxuICAgICAgICAgICAgICAgICAgdG9vbE5hbWU6IHRvb2xOYW1lTWFwcGluZy50b0N1c3RvbVRvb2xOYW1lKFwiY29tcHV0ZXJfdXNlXCIpLFxuICAgICAgICAgICAgICAgICAgcmVzdWx0OiB7XG4gICAgICAgICAgICAgICAgICAgIHR5cGU6IFwiY29tcHV0ZXJfdXNlX3Rvb2xfcmVzdWx0XCIsXG4gICAgICAgICAgICAgICAgICAgIHN0YXR1czogdmFsdWUuaXRlbS5zdGF0dXMgfHwgXCJjb21wbGV0ZWRcIlxuICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICB9IGVsc2UgaWYgKHZhbHVlLml0ZW0udHlwZSA9PT0gXCJmaWxlX3NlYXJjaF9jYWxsXCIpIHtcbiAgICAgICAgICAgICAgICBvbmdvaW5nVG9vbENhbGxzW3ZhbHVlLm91dHB1dF9pbmRleF0gPSB2b2lkIDA7XG4gICAgICAgICAgICAgICAgY29udHJvbGxlci5lbnF1ZXVlKHtcbiAgICAgICAgICAgICAgICAgIHR5cGU6IFwidG9vbC1yZXN1bHRcIixcbiAgICAgICAgICAgICAgICAgIHRvb2xDYWxsSWQ6IHZhbHVlLml0ZW0uaWQsXG4gICAgICAgICAgICAgICAgICB0b29sTmFtZTogdG9vbE5hbWVNYXBwaW5nLnRvQ3VzdG9tVG9vbE5hbWUoXCJmaWxlX3NlYXJjaFwiKSxcbiAgICAgICAgICAgICAgICAgIHJlc3VsdDoge1xuICAgICAgICAgICAgICAgICAgICBxdWVyaWVzOiB2YWx1ZS5pdGVtLnF1ZXJpZXMsXG4gICAgICAgICAgICAgICAgICAgIHJlc3VsdHM6IChfYyA9IChfYiA9IHZhbHVlLml0ZW0ucmVzdWx0cykgPT0gbnVsbCA/IHZvaWQgMCA6IF9iLm1hcCgocmVzdWx0KSA9PiAoe1xuICAgICAgICAgICAgICAgICAgICAgIGF0dHJpYnV0ZXM6IHJlc3VsdC5hdHRyaWJ1dGVzLFxuICAgICAgICAgICAgICAgICAgICAgIGZpbGVJZDogcmVzdWx0LmZpbGVfaWQsXG4gICAgICAgICAgICAgICAgICAgICAgZmlsZW5hbWU6IHJlc3VsdC5maWxlbmFtZSxcbiAgICAgICAgICAgICAgICAgICAgICBzY29yZTogcmVzdWx0LnNjb3JlLFxuICAgICAgICAgICAgICAgICAgICAgIHRleHQ6IHJlc3VsdC50ZXh0XG4gICAgICAgICAgICAgICAgICAgIH0pKSkgIT0gbnVsbCA/IF9jIDogbnVsbFxuICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICB9IGVsc2UgaWYgKHZhbHVlLml0ZW0udHlwZSA9PT0gXCJjb2RlX2ludGVycHJldGVyX2NhbGxcIikge1xuICAgICAgICAgICAgICAgIG9uZ29pbmdUb29sQ2FsbHNbdmFsdWUub3V0cHV0X2luZGV4XSA9IHZvaWQgMDtcbiAgICAgICAgICAgICAgICBjb250cm9sbGVyLmVucXVldWUoe1xuICAgICAgICAgICAgICAgICAgdHlwZTogXCJ0b29sLXJlc3VsdFwiLFxuICAgICAgICAgICAgICAgICAgdG9vbENhbGxJZDogdmFsdWUuaXRlbS5pZCxcbiAgICAgICAgICAgICAgICAgIHRvb2xOYW1lOiB0b29sTmFtZU1hcHBpbmcudG9DdXN0b21Ub29sTmFtZShcImNvZGVfaW50ZXJwcmV0ZXJcIiksXG4gICAgICAgICAgICAgICAgICByZXN1bHQ6IHtcbiAgICAgICAgICAgICAgICAgICAgb3V0cHV0czogdmFsdWUuaXRlbS5vdXRwdXRzXG4gICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgIH0gZWxzZSBpZiAodmFsdWUuaXRlbS50eXBlID09PSBcImltYWdlX2dlbmVyYXRpb25fY2FsbFwiKSB7XG4gICAgICAgICAgICAgICAgY29udHJvbGxlci5lbnF1ZXVlKHtcbiAgICAgICAgICAgICAgICAgIHR5cGU6IFwidG9vbC1yZXN1bHRcIixcbiAgICAgICAgICAgICAgICAgIHRvb2xDYWxsSWQ6IHZhbHVlLml0ZW0uaWQsXG4gICAgICAgICAgICAgICAgICB0b29sTmFtZTogdG9vbE5hbWVNYXBwaW5nLnRvQ3VzdG9tVG9vbE5hbWUoXCJpbWFnZV9nZW5lcmF0aW9uXCIpLFxuICAgICAgICAgICAgICAgICAgcmVzdWx0OiB7XG4gICAgICAgICAgICAgICAgICAgIHJlc3VsdDogdmFsdWUuaXRlbS5yZXN1bHRcbiAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgfSBlbHNlIGlmICh2YWx1ZS5pdGVtLnR5cGUgPT09IFwibWNwX2NhbGxcIikge1xuICAgICAgICAgICAgICAgIG9uZ29pbmdUb29sQ2FsbHNbdmFsdWUub3V0cHV0X2luZGV4XSA9IHZvaWQgMDtcbiAgICAgICAgICAgICAgICBjb25zdCBhcHByb3ZhbFJlcXVlc3RJZCA9IChfZCA9IHZhbHVlLml0ZW0uYXBwcm92YWxfcmVxdWVzdF9pZCkgIT0gbnVsbCA/IF9kIDogdm9pZCAwO1xuICAgICAgICAgICAgICAgIGNvbnN0IGFsaWFzZWRUb29sQ2FsbElkID0gYXBwcm92YWxSZXF1ZXN0SWQgIT0gbnVsbCA/IChfZiA9IChfZSA9IGFwcHJvdmFsUmVxdWVzdElkVG9EdW1teVRvb2xDYWxsSWRGcm9tU3RyZWFtLmdldChcbiAgICAgICAgICAgICAgICAgIGFwcHJvdmFsUmVxdWVzdElkXG4gICAgICAgICAgICAgICAgKSkgIT0gbnVsbCA/IF9lIDogYXBwcm92YWxSZXF1ZXN0SWRUb0R1bW15VG9vbENhbGxJZEZyb21Qcm9tcHRbYXBwcm92YWxSZXF1ZXN0SWRdKSAhPSBudWxsID8gX2YgOiB2YWx1ZS5pdGVtLmlkIDogdmFsdWUuaXRlbS5pZDtcbiAgICAgICAgICAgICAgICBjb25zdCB0b29sTmFtZSA9IGBtY3AuJHt2YWx1ZS5pdGVtLm5hbWV9YDtcbiAgICAgICAgICAgICAgICBjb250cm9sbGVyLmVucXVldWUoe1xuICAgICAgICAgICAgICAgICAgdHlwZTogXCJ0b29sLWNhbGxcIixcbiAgICAgICAgICAgICAgICAgIHRvb2xDYWxsSWQ6IGFsaWFzZWRUb29sQ2FsbElkLFxuICAgICAgICAgICAgICAgICAgdG9vbE5hbWUsXG4gICAgICAgICAgICAgICAgICBpbnB1dDogdmFsdWUuaXRlbS5hcmd1bWVudHMsXG4gICAgICAgICAgICAgICAgICBwcm92aWRlckV4ZWN1dGVkOiB0cnVlLFxuICAgICAgICAgICAgICAgICAgZHluYW1pYzogdHJ1ZVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIGNvbnRyb2xsZXIuZW5xdWV1ZSh7XG4gICAgICAgICAgICAgICAgICB0eXBlOiBcInRvb2wtcmVzdWx0XCIsXG4gICAgICAgICAgICAgICAgICB0b29sQ2FsbElkOiBhbGlhc2VkVG9vbENhbGxJZCxcbiAgICAgICAgICAgICAgICAgIHRvb2xOYW1lLFxuICAgICAgICAgICAgICAgICAgcmVzdWx0OiB7XG4gICAgICAgICAgICAgICAgICAgIHR5cGU6IFwiY2FsbFwiLFxuICAgICAgICAgICAgICAgICAgICBzZXJ2ZXJMYWJlbDogdmFsdWUuaXRlbS5zZXJ2ZXJfbGFiZWwsXG4gICAgICAgICAgICAgICAgICAgIG5hbWU6IHZhbHVlLml0ZW0ubmFtZSxcbiAgICAgICAgICAgICAgICAgICAgYXJndW1lbnRzOiB2YWx1ZS5pdGVtLmFyZ3VtZW50cyxcbiAgICAgICAgICAgICAgICAgICAgLi4udmFsdWUuaXRlbS5vdXRwdXQgIT0gbnVsbCA/IHsgb3V0cHV0OiB2YWx1ZS5pdGVtLm91dHB1dCB9IDoge30sXG4gICAgICAgICAgICAgICAgICAgIC4uLnZhbHVlLml0ZW0uZXJyb3IgIT0gbnVsbCA/IHsgZXJyb3I6IHZhbHVlLml0ZW0uZXJyb3IgfSA6IHt9XG4gICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgcHJvdmlkZXJNZXRhZGF0YToge1xuICAgICAgICAgICAgICAgICAgICBbcHJvdmlkZXJPcHRpb25zTmFtZV06IHtcbiAgICAgICAgICAgICAgICAgICAgICBpdGVtSWQ6IHZhbHVlLml0ZW0uaWRcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICB9IGVsc2UgaWYgKHZhbHVlLml0ZW0udHlwZSA9PT0gXCJtY3BfbGlzdF90b29sc1wiKSB7XG4gICAgICAgICAgICAgICAgb25nb2luZ1Rvb2xDYWxsc1t2YWx1ZS5vdXRwdXRfaW5kZXhdID0gdm9pZCAwO1xuICAgICAgICAgICAgICB9IGVsc2UgaWYgKHZhbHVlLml0ZW0udHlwZSA9PT0gXCJhcHBseV9wYXRjaF9jYWxsXCIpIHtcbiAgICAgICAgICAgICAgICBjb25zdCB0b29sQ2FsbCA9IG9uZ29pbmdUb29sQ2FsbHNbdmFsdWUub3V0cHV0X2luZGV4XTtcbiAgICAgICAgICAgICAgICBpZiAoKHRvb2xDYWxsID09IG51bGwgPyB2b2lkIDAgOiB0b29sQ2FsbC5hcHBseVBhdGNoKSAmJiAhdG9vbENhbGwuYXBwbHlQYXRjaC5lbmRFbWl0dGVkICYmIHZhbHVlLml0ZW0ub3BlcmF0aW9uLnR5cGUgIT09IFwiZGVsZXRlX2ZpbGVcIikge1xuICAgICAgICAgICAgICAgICAgaWYgKCF0b29sQ2FsbC5hcHBseVBhdGNoLmhhc0RpZmYpIHtcbiAgICAgICAgICAgICAgICAgICAgY29udHJvbGxlci5lbnF1ZXVlKHtcbiAgICAgICAgICAgICAgICAgICAgICB0eXBlOiBcInRvb2wtaW5wdXQtZGVsdGFcIixcbiAgICAgICAgICAgICAgICAgICAgICBpZDogdG9vbENhbGwudG9vbENhbGxJZCxcbiAgICAgICAgICAgICAgICAgICAgICBkZWx0YTogZXNjYXBlSlNPTkRlbHRhKHZhbHVlLml0ZW0ub3BlcmF0aW9uLmRpZmYpXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgY29udHJvbGxlci5lbnF1ZXVlKHtcbiAgICAgICAgICAgICAgICAgICAgdHlwZTogXCJ0b29sLWlucHV0LWRlbHRhXCIsXG4gICAgICAgICAgICAgICAgICAgIGlkOiB0b29sQ2FsbC50b29sQ2FsbElkLFxuICAgICAgICAgICAgICAgICAgICBkZWx0YTogJ1wifX0nXG4gICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgIGNvbnRyb2xsZXIuZW5xdWV1ZSh7XG4gICAgICAgICAgICAgICAgICAgIHR5cGU6IFwidG9vbC1pbnB1dC1lbmRcIixcbiAgICAgICAgICAgICAgICAgICAgaWQ6IHRvb2xDYWxsLnRvb2xDYWxsSWRcbiAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgdG9vbENhbGwuYXBwbHlQYXRjaC5lbmRFbWl0dGVkID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKHRvb2xDYWxsICYmIHZhbHVlLml0ZW0uc3RhdHVzID09PSBcImNvbXBsZXRlZFwiKSB7XG4gICAgICAgICAgICAgICAgICBjb250cm9sbGVyLmVucXVldWUoe1xuICAgICAgICAgICAgICAgICAgICB0eXBlOiBcInRvb2wtY2FsbFwiLFxuICAgICAgICAgICAgICAgICAgICB0b29sQ2FsbElkOiB0b29sQ2FsbC50b29sQ2FsbElkLFxuICAgICAgICAgICAgICAgICAgICB0b29sTmFtZTogdG9vbE5hbWVNYXBwaW5nLnRvQ3VzdG9tVG9vbE5hbWUoXCJhcHBseV9wYXRjaFwiKSxcbiAgICAgICAgICAgICAgICAgICAgaW5wdXQ6IEpTT04uc3RyaW5naWZ5KHtcbiAgICAgICAgICAgICAgICAgICAgICBjYWxsSWQ6IHZhbHVlLml0ZW0uY2FsbF9pZCxcbiAgICAgICAgICAgICAgICAgICAgICBvcGVyYXRpb246IHZhbHVlLml0ZW0ub3BlcmF0aW9uXG4gICAgICAgICAgICAgICAgICAgIH0pLFxuICAgICAgICAgICAgICAgICAgICBwcm92aWRlck1ldGFkYXRhOiB7XG4gICAgICAgICAgICAgICAgICAgICAgW3Byb3ZpZGVyT3B0aW9uc05hbWVdOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpdGVtSWQ6IHZhbHVlLml0ZW0uaWRcbiAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBvbmdvaW5nVG9vbENhbGxzW3ZhbHVlLm91dHB1dF9pbmRleF0gPSB2b2lkIDA7XG4gICAgICAgICAgICAgIH0gZWxzZSBpZiAodmFsdWUuaXRlbS50eXBlID09PSBcIm1jcF9hcHByb3ZhbF9yZXF1ZXN0XCIpIHtcbiAgICAgICAgICAgICAgICBvbmdvaW5nVG9vbENhbGxzW3ZhbHVlLm91dHB1dF9pbmRleF0gPSB2b2lkIDA7XG4gICAgICAgICAgICAgICAgY29uc3QgZHVtbXlUb29sQ2FsbElkID0gKF9pID0gKF9oID0gKF9nID0gc2VsZi5jb25maWcpLmdlbmVyYXRlSWQpID09IG51bGwgPyB2b2lkIDAgOiBfaC5jYWxsKF9nKSkgIT0gbnVsbCA/IF9pIDogZ2VuZXJhdGVJZDIoKTtcbiAgICAgICAgICAgICAgICBjb25zdCBhcHByb3ZhbFJlcXVlc3RJZCA9IChfaiA9IHZhbHVlLml0ZW0uYXBwcm92YWxfcmVxdWVzdF9pZCkgIT0gbnVsbCA/IF9qIDogdmFsdWUuaXRlbS5pZDtcbiAgICAgICAgICAgICAgICBhcHByb3ZhbFJlcXVlc3RJZFRvRHVtbXlUb29sQ2FsbElkRnJvbVN0cmVhbS5zZXQoXG4gICAgICAgICAgICAgICAgICBhcHByb3ZhbFJlcXVlc3RJZCxcbiAgICAgICAgICAgICAgICAgIGR1bW15VG9vbENhbGxJZFxuICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgY29uc3QgdG9vbE5hbWUgPSBgbWNwLiR7dmFsdWUuaXRlbS5uYW1lfWA7XG4gICAgICAgICAgICAgICAgY29udHJvbGxlci5lbnF1ZXVlKHtcbiAgICAgICAgICAgICAgICAgIHR5cGU6IFwidG9vbC1jYWxsXCIsXG4gICAgICAgICAgICAgICAgICB0b29sQ2FsbElkOiBkdW1teVRvb2xDYWxsSWQsXG4gICAgICAgICAgICAgICAgICB0b29sTmFtZSxcbiAgICAgICAgICAgICAgICAgIGlucHV0OiB2YWx1ZS5pdGVtLmFyZ3VtZW50cyxcbiAgICAgICAgICAgICAgICAgIHByb3ZpZGVyRXhlY3V0ZWQ6IHRydWUsXG4gICAgICAgICAgICAgICAgICBkeW5hbWljOiB0cnVlXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgY29udHJvbGxlci5lbnF1ZXVlKHtcbiAgICAgICAgICAgICAgICAgIHR5cGU6IFwidG9vbC1hcHByb3ZhbC1yZXF1ZXN0XCIsXG4gICAgICAgICAgICAgICAgICBhcHByb3ZhbElkOiBhcHByb3ZhbFJlcXVlc3RJZCxcbiAgICAgICAgICAgICAgICAgIHRvb2xDYWxsSWQ6IGR1bW15VG9vbENhbGxJZFxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICB9IGVsc2UgaWYgKHZhbHVlLml0ZW0udHlwZSA9PT0gXCJsb2NhbF9zaGVsbF9jYWxsXCIpIHtcbiAgICAgICAgICAgICAgICBvbmdvaW5nVG9vbENhbGxzW3ZhbHVlLm91dHB1dF9pbmRleF0gPSB2b2lkIDA7XG4gICAgICAgICAgICAgICAgY29udHJvbGxlci5lbnF1ZXVlKHtcbiAgICAgICAgICAgICAgICAgIHR5cGU6IFwidG9vbC1jYWxsXCIsXG4gICAgICAgICAgICAgICAgICB0b29sQ2FsbElkOiB2YWx1ZS5pdGVtLmNhbGxfaWQsXG4gICAgICAgICAgICAgICAgICB0b29sTmFtZTogdG9vbE5hbWVNYXBwaW5nLnRvQ3VzdG9tVG9vbE5hbWUoXCJsb2NhbF9zaGVsbFwiKSxcbiAgICAgICAgICAgICAgICAgIGlucHV0OiBKU09OLnN0cmluZ2lmeSh7XG4gICAgICAgICAgICAgICAgICAgIGFjdGlvbjoge1xuICAgICAgICAgICAgICAgICAgICAgIHR5cGU6IFwiZXhlY1wiLFxuICAgICAgICAgICAgICAgICAgICAgIGNvbW1hbmQ6IHZhbHVlLml0ZW0uYWN0aW9uLmNvbW1hbmQsXG4gICAgICAgICAgICAgICAgICAgICAgdGltZW91dE1zOiB2YWx1ZS5pdGVtLmFjdGlvbi50aW1lb3V0X21zLFxuICAgICAgICAgICAgICAgICAgICAgIHVzZXI6IHZhbHVlLml0ZW0uYWN0aW9uLnVzZXIsXG4gICAgICAgICAgICAgICAgICAgICAgd29ya2luZ0RpcmVjdG9yeTogdmFsdWUuaXRlbS5hY3Rpb24ud29ya2luZ19kaXJlY3RvcnksXG4gICAgICAgICAgICAgICAgICAgICAgZW52OiB2YWx1ZS5pdGVtLmFjdGlvbi5lbnZcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgfSksXG4gICAgICAgICAgICAgICAgICBwcm92aWRlck1ldGFkYXRhOiB7XG4gICAgICAgICAgICAgICAgICAgIFtwcm92aWRlck9wdGlvbnNOYW1lXTogeyBpdGVtSWQ6IHZhbHVlLml0ZW0uaWQgfVxuICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICB9IGVsc2UgaWYgKHZhbHVlLml0ZW0udHlwZSA9PT0gXCJzaGVsbF9jYWxsXCIpIHtcbiAgICAgICAgICAgICAgICBvbmdvaW5nVG9vbENhbGxzW3ZhbHVlLm91dHB1dF9pbmRleF0gPSB2b2lkIDA7XG4gICAgICAgICAgICAgICAgY29udHJvbGxlci5lbnF1ZXVlKHtcbiAgICAgICAgICAgICAgICAgIHR5cGU6IFwidG9vbC1jYWxsXCIsXG4gICAgICAgICAgICAgICAgICB0b29sQ2FsbElkOiB2YWx1ZS5pdGVtLmNhbGxfaWQsXG4gICAgICAgICAgICAgICAgICB0b29sTmFtZTogdG9vbE5hbWVNYXBwaW5nLnRvQ3VzdG9tVG9vbE5hbWUoXCJzaGVsbFwiKSxcbiAgICAgICAgICAgICAgICAgIGlucHV0OiBKU09OLnN0cmluZ2lmeSh7XG4gICAgICAgICAgICAgICAgICAgIGFjdGlvbjoge1xuICAgICAgICAgICAgICAgICAgICAgIGNvbW1hbmRzOiB2YWx1ZS5pdGVtLmFjdGlvbi5jb21tYW5kc1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICB9KSxcbiAgICAgICAgICAgICAgICAgIHByb3ZpZGVyTWV0YWRhdGE6IHtcbiAgICAgICAgICAgICAgICAgICAgW3Byb3ZpZGVyT3B0aW9uc05hbWVdOiB7IGl0ZW1JZDogdmFsdWUuaXRlbS5pZCB9XG4gICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgIH0gZWxzZSBpZiAodmFsdWUuaXRlbS50eXBlID09PSBcInJlYXNvbmluZ1wiKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgYWN0aXZlUmVhc29uaW5nUGFydCA9IGFjdGl2ZVJlYXNvbmluZ1t2YWx1ZS5pdGVtLmlkXTtcbiAgICAgICAgICAgICAgICBjb25zdCBzdW1tYXJ5UGFydEluZGljZXMgPSBPYmplY3QuZW50cmllcyhcbiAgICAgICAgICAgICAgICAgIGFjdGl2ZVJlYXNvbmluZ1BhcnQuc3VtbWFyeVBhcnRzXG4gICAgICAgICAgICAgICAgKS5maWx0ZXIoXG4gICAgICAgICAgICAgICAgICAoW18sIHN0YXR1c10pID0+IHN0YXR1cyA9PT0gXCJhY3RpdmVcIiB8fCBzdGF0dXMgPT09IFwiY2FuLWNvbmNsdWRlXCJcbiAgICAgICAgICAgICAgICApLm1hcCgoW3N1bW1hcnlJbmRleF0pID0+IHN1bW1hcnlJbmRleCk7XG4gICAgICAgICAgICAgICAgZm9yIChjb25zdCBzdW1tYXJ5SW5kZXggb2Ygc3VtbWFyeVBhcnRJbmRpY2VzKSB7XG4gICAgICAgICAgICAgICAgICBjb250cm9sbGVyLmVucXVldWUoe1xuICAgICAgICAgICAgICAgICAgICB0eXBlOiBcInJlYXNvbmluZy1lbmRcIixcbiAgICAgICAgICAgICAgICAgICAgaWQ6IGAke3ZhbHVlLml0ZW0uaWR9OiR7c3VtbWFyeUluZGV4fWAsXG4gICAgICAgICAgICAgICAgICAgIHByb3ZpZGVyTWV0YWRhdGE6IHtcbiAgICAgICAgICAgICAgICAgICAgICBbcHJvdmlkZXJPcHRpb25zTmFtZV06IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGl0ZW1JZDogdmFsdWUuaXRlbS5pZCxcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlYXNvbmluZ0VuY3J5cHRlZENvbnRlbnQ6IChfayA9IHZhbHVlLml0ZW0uZW5jcnlwdGVkX2NvbnRlbnQpICE9IG51bGwgPyBfayA6IG51bGxcbiAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBkZWxldGUgYWN0aXZlUmVhc29uaW5nW3ZhbHVlLml0ZW0uaWRdO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9IGVsc2UgaWYgKGlzUmVzcG9uc2VGdW5jdGlvbkNhbGxBcmd1bWVudHNEZWx0YUNodW5rKHZhbHVlKSkge1xuICAgICAgICAgICAgICBjb25zdCB0b29sQ2FsbCA9IG9uZ29pbmdUb29sQ2FsbHNbdmFsdWUub3V0cHV0X2luZGV4XTtcbiAgICAgICAgICAgICAgaWYgKHRvb2xDYWxsICE9IG51bGwpIHtcbiAgICAgICAgICAgICAgICBjb250cm9sbGVyLmVucXVldWUoe1xuICAgICAgICAgICAgICAgICAgdHlwZTogXCJ0b29sLWlucHV0LWRlbHRhXCIsXG4gICAgICAgICAgICAgICAgICBpZDogdG9vbENhbGwudG9vbENhbGxJZCxcbiAgICAgICAgICAgICAgICAgIGRlbHRhOiB2YWx1ZS5kZWx0YVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9IGVsc2UgaWYgKGlzUmVzcG9uc2VBcHBseVBhdGNoQ2FsbE9wZXJhdGlvbkRpZmZEZWx0YUNodW5rKHZhbHVlKSkge1xuICAgICAgICAgICAgICBjb25zdCB0b29sQ2FsbCA9IG9uZ29pbmdUb29sQ2FsbHNbdmFsdWUub3V0cHV0X2luZGV4XTtcbiAgICAgICAgICAgICAgaWYgKHRvb2xDYWxsID09IG51bGwgPyB2b2lkIDAgOiB0b29sQ2FsbC5hcHBseVBhdGNoKSB7XG4gICAgICAgICAgICAgICAgY29udHJvbGxlci5lbnF1ZXVlKHtcbiAgICAgICAgICAgICAgICAgIHR5cGU6IFwidG9vbC1pbnB1dC1kZWx0YVwiLFxuICAgICAgICAgICAgICAgICAgaWQ6IHRvb2xDYWxsLnRvb2xDYWxsSWQsXG4gICAgICAgICAgICAgICAgICBkZWx0YTogZXNjYXBlSlNPTkRlbHRhKHZhbHVlLmRlbHRhKVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIHRvb2xDYWxsLmFwcGx5UGF0Y2guaGFzRGlmZiA9IHRydWU7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0gZWxzZSBpZiAoaXNSZXNwb25zZUFwcGx5UGF0Y2hDYWxsT3BlcmF0aW9uRGlmZkRvbmVDaHVuayh2YWx1ZSkpIHtcbiAgICAgICAgICAgICAgY29uc3QgdG9vbENhbGwgPSBvbmdvaW5nVG9vbENhbGxzW3ZhbHVlLm91dHB1dF9pbmRleF07XG4gICAgICAgICAgICAgIGlmICgodG9vbENhbGwgPT0gbnVsbCA/IHZvaWQgMCA6IHRvb2xDYWxsLmFwcGx5UGF0Y2gpICYmICF0b29sQ2FsbC5hcHBseVBhdGNoLmVuZEVtaXR0ZWQpIHtcbiAgICAgICAgICAgICAgICBpZiAoIXRvb2xDYWxsLmFwcGx5UGF0Y2guaGFzRGlmZikge1xuICAgICAgICAgICAgICAgICAgY29udHJvbGxlci5lbnF1ZXVlKHtcbiAgICAgICAgICAgICAgICAgICAgdHlwZTogXCJ0b29sLWlucHV0LWRlbHRhXCIsXG4gICAgICAgICAgICAgICAgICAgIGlkOiB0b29sQ2FsbC50b29sQ2FsbElkLFxuICAgICAgICAgICAgICAgICAgICBkZWx0YTogZXNjYXBlSlNPTkRlbHRhKHZhbHVlLmRpZmYpXG4gICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgIHRvb2xDYWxsLmFwcGx5UGF0Y2guaGFzRGlmZiA9IHRydWU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGNvbnRyb2xsZXIuZW5xdWV1ZSh7XG4gICAgICAgICAgICAgICAgICB0eXBlOiBcInRvb2wtaW5wdXQtZGVsdGFcIixcbiAgICAgICAgICAgICAgICAgIGlkOiB0b29sQ2FsbC50b29sQ2FsbElkLFxuICAgICAgICAgICAgICAgICAgZGVsdGE6ICdcIn19J1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIGNvbnRyb2xsZXIuZW5xdWV1ZSh7XG4gICAgICAgICAgICAgICAgICB0eXBlOiBcInRvb2wtaW5wdXQtZW5kXCIsXG4gICAgICAgICAgICAgICAgICBpZDogdG9vbENhbGwudG9vbENhbGxJZFxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIHRvb2xDYWxsLmFwcGx5UGF0Y2guZW5kRW1pdHRlZCA9IHRydWU7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0gZWxzZSBpZiAoaXNSZXNwb25zZUltYWdlR2VuZXJhdGlvbkNhbGxQYXJ0aWFsSW1hZ2VDaHVuayh2YWx1ZSkpIHtcbiAgICAgICAgICAgICAgY29udHJvbGxlci5lbnF1ZXVlKHtcbiAgICAgICAgICAgICAgICB0eXBlOiBcInRvb2wtcmVzdWx0XCIsXG4gICAgICAgICAgICAgICAgdG9vbENhbGxJZDogdmFsdWUuaXRlbV9pZCxcbiAgICAgICAgICAgICAgICB0b29sTmFtZTogdG9vbE5hbWVNYXBwaW5nLnRvQ3VzdG9tVG9vbE5hbWUoXCJpbWFnZV9nZW5lcmF0aW9uXCIpLFxuICAgICAgICAgICAgICAgIHJlc3VsdDoge1xuICAgICAgICAgICAgICAgICAgcmVzdWx0OiB2YWx1ZS5wYXJ0aWFsX2ltYWdlX2I2NFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgcHJlbGltaW5hcnk6IHRydWVcbiAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKGlzUmVzcG9uc2VDb2RlSW50ZXJwcmV0ZXJDYWxsQ29kZURlbHRhQ2h1bmsodmFsdWUpKSB7XG4gICAgICAgICAgICAgIGNvbnN0IHRvb2xDYWxsID0gb25nb2luZ1Rvb2xDYWxsc1t2YWx1ZS5vdXRwdXRfaW5kZXhdO1xuICAgICAgICAgICAgICBpZiAodG9vbENhbGwgIT0gbnVsbCkge1xuICAgICAgICAgICAgICAgIGNvbnRyb2xsZXIuZW5xdWV1ZSh7XG4gICAgICAgICAgICAgICAgICB0eXBlOiBcInRvb2wtaW5wdXQtZGVsdGFcIixcbiAgICAgICAgICAgICAgICAgIGlkOiB0b29sQ2FsbC50b29sQ2FsbElkLFxuICAgICAgICAgICAgICAgICAgZGVsdGE6IGVzY2FwZUpTT05EZWx0YSh2YWx1ZS5kZWx0YSlcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSBlbHNlIGlmIChpc1Jlc3BvbnNlQ29kZUludGVycHJldGVyQ2FsbENvZGVEb25lQ2h1bmsodmFsdWUpKSB7XG4gICAgICAgICAgICAgIGNvbnN0IHRvb2xDYWxsID0gb25nb2luZ1Rvb2xDYWxsc1t2YWx1ZS5vdXRwdXRfaW5kZXhdO1xuICAgICAgICAgICAgICBpZiAodG9vbENhbGwgIT0gbnVsbCkge1xuICAgICAgICAgICAgICAgIGNvbnRyb2xsZXIuZW5xdWV1ZSh7XG4gICAgICAgICAgICAgICAgICB0eXBlOiBcInRvb2wtaW5wdXQtZGVsdGFcIixcbiAgICAgICAgICAgICAgICAgIGlkOiB0b29sQ2FsbC50b29sQ2FsbElkLFxuICAgICAgICAgICAgICAgICAgZGVsdGE6ICdcIn0nXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgY29udHJvbGxlci5lbnF1ZXVlKHtcbiAgICAgICAgICAgICAgICAgIHR5cGU6IFwidG9vbC1pbnB1dC1lbmRcIixcbiAgICAgICAgICAgICAgICAgIGlkOiB0b29sQ2FsbC50b29sQ2FsbElkXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgY29udHJvbGxlci5lbnF1ZXVlKHtcbiAgICAgICAgICAgICAgICAgIHR5cGU6IFwidG9vbC1jYWxsXCIsXG4gICAgICAgICAgICAgICAgICB0b29sQ2FsbElkOiB0b29sQ2FsbC50b29sQ2FsbElkLFxuICAgICAgICAgICAgICAgICAgdG9vbE5hbWU6IHRvb2xOYW1lTWFwcGluZy50b0N1c3RvbVRvb2xOYW1lKFwiY29kZV9pbnRlcnByZXRlclwiKSxcbiAgICAgICAgICAgICAgICAgIGlucHV0OiBKU09OLnN0cmluZ2lmeSh7XG4gICAgICAgICAgICAgICAgICAgIGNvZGU6IHZhbHVlLmNvZGUsXG4gICAgICAgICAgICAgICAgICAgIGNvbnRhaW5lcklkOiB0b29sQ2FsbC5jb2RlSW50ZXJwcmV0ZXIuY29udGFpbmVySWRcbiAgICAgICAgICAgICAgICAgIH0pLFxuICAgICAgICAgICAgICAgICAgcHJvdmlkZXJFeGVjdXRlZDogdHJ1ZVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9IGVsc2UgaWYgKGlzUmVzcG9uc2VDcmVhdGVkQ2h1bmsodmFsdWUpKSB7XG4gICAgICAgICAgICAgIHJlc3BvbnNlSWQgPSB2YWx1ZS5yZXNwb25zZS5pZDtcbiAgICAgICAgICAgICAgY29udHJvbGxlci5lbnF1ZXVlKHtcbiAgICAgICAgICAgICAgICB0eXBlOiBcInJlc3BvbnNlLW1ldGFkYXRhXCIsXG4gICAgICAgICAgICAgICAgaWQ6IHZhbHVlLnJlc3BvbnNlLmlkLFxuICAgICAgICAgICAgICAgIHRpbWVzdGFtcDogbmV3IERhdGUodmFsdWUucmVzcG9uc2UuY3JlYXRlZF9hdCAqIDFlMyksXG4gICAgICAgICAgICAgICAgbW9kZWxJZDogdmFsdWUucmVzcG9uc2UubW9kZWxcbiAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKGlzVGV4dERlbHRhQ2h1bmsodmFsdWUpKSB7XG4gICAgICAgICAgICAgIGNvbnRyb2xsZXIuZW5xdWV1ZSh7XG4gICAgICAgICAgICAgICAgdHlwZTogXCJ0ZXh0LWRlbHRhXCIsXG4gICAgICAgICAgICAgICAgaWQ6IHZhbHVlLml0ZW1faWQsXG4gICAgICAgICAgICAgICAgZGVsdGE6IHZhbHVlLmRlbHRhXG4gICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICBpZiAoKChfbSA9IChfbCA9IG9wdGlvbnMucHJvdmlkZXJPcHRpb25zKSA9PSBudWxsID8gdm9pZCAwIDogX2xbcHJvdmlkZXJPcHRpb25zTmFtZV0pID09IG51bGwgPyB2b2lkIDAgOiBfbS5sb2dwcm9icykgJiYgdmFsdWUubG9ncHJvYnMpIHtcbiAgICAgICAgICAgICAgICBsb2dwcm9icy5wdXNoKHZhbHVlLmxvZ3Byb2JzKTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSBlbHNlIGlmICh2YWx1ZS50eXBlID09PSBcInJlc3BvbnNlLnJlYXNvbmluZ19zdW1tYXJ5X3BhcnQuYWRkZWRcIikge1xuICAgICAgICAgICAgICBpZiAodmFsdWUuc3VtbWFyeV9pbmRleCA+IDApIHtcbiAgICAgICAgICAgICAgICBjb25zdCBhY3RpdmVSZWFzb25pbmdQYXJ0ID0gYWN0aXZlUmVhc29uaW5nW3ZhbHVlLml0ZW1faWRdO1xuICAgICAgICAgICAgICAgIGFjdGl2ZVJlYXNvbmluZ1BhcnQuc3VtbWFyeVBhcnRzW3ZhbHVlLnN1bW1hcnlfaW5kZXhdID0gXCJhY3RpdmVcIjtcbiAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IHN1bW1hcnlJbmRleCBvZiBPYmplY3Qua2V5cyhcbiAgICAgICAgICAgICAgICAgIGFjdGl2ZVJlYXNvbmluZ1BhcnQuc3VtbWFyeVBhcnRzXG4gICAgICAgICAgICAgICAgKSkge1xuICAgICAgICAgICAgICAgICAgaWYgKGFjdGl2ZVJlYXNvbmluZ1BhcnQuc3VtbWFyeVBhcnRzW3N1bW1hcnlJbmRleF0gPT09IFwiY2FuLWNvbmNsdWRlXCIpIHtcbiAgICAgICAgICAgICAgICAgICAgY29udHJvbGxlci5lbnF1ZXVlKHtcbiAgICAgICAgICAgICAgICAgICAgICB0eXBlOiBcInJlYXNvbmluZy1lbmRcIixcbiAgICAgICAgICAgICAgICAgICAgICBpZDogYCR7dmFsdWUuaXRlbV9pZH06JHtzdW1tYXJ5SW5kZXh9YCxcbiAgICAgICAgICAgICAgICAgICAgICBwcm92aWRlck1ldGFkYXRhOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBbcHJvdmlkZXJPcHRpb25zTmFtZV06IHsgaXRlbUlkOiB2YWx1ZS5pdGVtX2lkIH1cbiAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICBhY3RpdmVSZWFzb25pbmdQYXJ0LnN1bW1hcnlQYXJ0c1tzdW1tYXJ5SW5kZXhdID0gXCJjb25jbHVkZWRcIjtcbiAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgY29udHJvbGxlci5lbnF1ZXVlKHtcbiAgICAgICAgICAgICAgICAgIHR5cGU6IFwicmVhc29uaW5nLXN0YXJ0XCIsXG4gICAgICAgICAgICAgICAgICBpZDogYCR7dmFsdWUuaXRlbV9pZH06JHt2YWx1ZS5zdW1tYXJ5X2luZGV4fWAsXG4gICAgICAgICAgICAgICAgICBwcm92aWRlck1ldGFkYXRhOiB7XG4gICAgICAgICAgICAgICAgICAgIFtwcm92aWRlck9wdGlvbnNOYW1lXToge1xuICAgICAgICAgICAgICAgICAgICAgIGl0ZW1JZDogdmFsdWUuaXRlbV9pZCxcbiAgICAgICAgICAgICAgICAgICAgICByZWFzb25pbmdFbmNyeXB0ZWRDb250ZW50OiAoX28gPSAoX24gPSBhY3RpdmVSZWFzb25pbmdbdmFsdWUuaXRlbV9pZF0pID09IG51bGwgPyB2b2lkIDAgOiBfbi5lbmNyeXB0ZWRDb250ZW50KSAhPSBudWxsID8gX28gOiBudWxsXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSBlbHNlIGlmICh2YWx1ZS50eXBlID09PSBcInJlc3BvbnNlLnJlYXNvbmluZ19zdW1tYXJ5X3RleHQuZGVsdGFcIikge1xuICAgICAgICAgICAgICBjb250cm9sbGVyLmVucXVldWUoe1xuICAgICAgICAgICAgICAgIHR5cGU6IFwicmVhc29uaW5nLWRlbHRhXCIsXG4gICAgICAgICAgICAgICAgaWQ6IGAke3ZhbHVlLml0ZW1faWR9OiR7dmFsdWUuc3VtbWFyeV9pbmRleH1gLFxuICAgICAgICAgICAgICAgIGRlbHRhOiB2YWx1ZS5kZWx0YSxcbiAgICAgICAgICAgICAgICBwcm92aWRlck1ldGFkYXRhOiB7XG4gICAgICAgICAgICAgICAgICBbcHJvdmlkZXJPcHRpb25zTmFtZV06IHtcbiAgICAgICAgICAgICAgICAgICAgaXRlbUlkOiB2YWx1ZS5pdGVtX2lkXG4gICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAodmFsdWUudHlwZSA9PT0gXCJyZXNwb25zZS5yZWFzb25pbmdfc3VtbWFyeV9wYXJ0LmRvbmVcIikge1xuICAgICAgICAgICAgICBpZiAoc3RvcmUpIHtcbiAgICAgICAgICAgICAgICBjb250cm9sbGVyLmVucXVldWUoe1xuICAgICAgICAgICAgICAgICAgdHlwZTogXCJyZWFzb25pbmctZW5kXCIsXG4gICAgICAgICAgICAgICAgICBpZDogYCR7dmFsdWUuaXRlbV9pZH06JHt2YWx1ZS5zdW1tYXJ5X2luZGV4fWAsXG4gICAgICAgICAgICAgICAgICBwcm92aWRlck1ldGFkYXRhOiB7XG4gICAgICAgICAgICAgICAgICAgIFtwcm92aWRlck9wdGlvbnNOYW1lXTogeyBpdGVtSWQ6IHZhbHVlLml0ZW1faWQgfVxuICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIGFjdGl2ZVJlYXNvbmluZ1t2YWx1ZS5pdGVtX2lkXS5zdW1tYXJ5UGFydHNbdmFsdWUuc3VtbWFyeV9pbmRleF0gPSBcImNvbmNsdWRlZFwiO1xuICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIGFjdGl2ZVJlYXNvbmluZ1t2YWx1ZS5pdGVtX2lkXS5zdW1tYXJ5UGFydHNbdmFsdWUuc3VtbWFyeV9pbmRleF0gPSBcImNhbi1jb25jbHVkZVwiO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9IGVsc2UgaWYgKGlzUmVzcG9uc2VGaW5pc2hlZENodW5rKHZhbHVlKSkge1xuICAgICAgICAgICAgICBmaW5pc2hSZWFzb24gPSB7XG4gICAgICAgICAgICAgICAgdW5pZmllZDogbWFwT3BlbkFJUmVzcG9uc2VGaW5pc2hSZWFzb24oe1xuICAgICAgICAgICAgICAgICAgZmluaXNoUmVhc29uOiAoX3AgPSB2YWx1ZS5yZXNwb25zZS5pbmNvbXBsZXRlX2RldGFpbHMpID09IG51bGwgPyB2b2lkIDAgOiBfcC5yZWFzb24sXG4gICAgICAgICAgICAgICAgICBoYXNGdW5jdGlvbkNhbGxcbiAgICAgICAgICAgICAgICB9KSxcbiAgICAgICAgICAgICAgICByYXc6IChfciA9IChfcSA9IHZhbHVlLnJlc3BvbnNlLmluY29tcGxldGVfZGV0YWlscykgPT0gbnVsbCA/IHZvaWQgMCA6IF9xLnJlYXNvbikgIT0gbnVsbCA/IF9yIDogdm9pZCAwXG4gICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgIHVzYWdlID0gdmFsdWUucmVzcG9uc2UudXNhZ2U7XG4gICAgICAgICAgICAgIGlmICh0eXBlb2YgdmFsdWUucmVzcG9uc2Uuc2VydmljZV90aWVyID09PSBcInN0cmluZ1wiKSB7XG4gICAgICAgICAgICAgICAgc2VydmljZVRpZXIgPSB2YWx1ZS5yZXNwb25zZS5zZXJ2aWNlX3RpZXI7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0gZWxzZSBpZiAoaXNSZXNwb25zZUFubm90YXRpb25BZGRlZENodW5rKHZhbHVlKSkge1xuICAgICAgICAgICAgICBvbmdvaW5nQW5ub3RhdGlvbnMucHVzaCh2YWx1ZS5hbm5vdGF0aW9uKTtcbiAgICAgICAgICAgICAgaWYgKHZhbHVlLmFubm90YXRpb24udHlwZSA9PT0gXCJ1cmxfY2l0YXRpb25cIikge1xuICAgICAgICAgICAgICAgIGNvbnRyb2xsZXIuZW5xdWV1ZSh7XG4gICAgICAgICAgICAgICAgICB0eXBlOiBcInNvdXJjZVwiLFxuICAgICAgICAgICAgICAgICAgc291cmNlVHlwZTogXCJ1cmxcIixcbiAgICAgICAgICAgICAgICAgIGlkOiAoX3UgPSAoX3QgPSAoX3MgPSBzZWxmLmNvbmZpZykuZ2VuZXJhdGVJZCkgPT0gbnVsbCA/IHZvaWQgMCA6IF90LmNhbGwoX3MpKSAhPSBudWxsID8gX3UgOiBnZW5lcmF0ZUlkMigpLFxuICAgICAgICAgICAgICAgICAgdXJsOiB2YWx1ZS5hbm5vdGF0aW9uLnVybCxcbiAgICAgICAgICAgICAgICAgIHRpdGxlOiB2YWx1ZS5hbm5vdGF0aW9uLnRpdGxlXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgIH0gZWxzZSBpZiAodmFsdWUuYW5ub3RhdGlvbi50eXBlID09PSBcImZpbGVfY2l0YXRpb25cIikge1xuICAgICAgICAgICAgICAgIGNvbnRyb2xsZXIuZW5xdWV1ZSh7XG4gICAgICAgICAgICAgICAgICB0eXBlOiBcInNvdXJjZVwiLFxuICAgICAgICAgICAgICAgICAgc291cmNlVHlwZTogXCJkb2N1bWVudFwiLFxuICAgICAgICAgICAgICAgICAgaWQ6IChfeCA9IChfdyA9IChfdiA9IHNlbGYuY29uZmlnKS5nZW5lcmF0ZUlkKSA9PSBudWxsID8gdm9pZCAwIDogX3cuY2FsbChfdikpICE9IG51bGwgPyBfeCA6IGdlbmVyYXRlSWQyKCksXG4gICAgICAgICAgICAgICAgICBtZWRpYVR5cGU6IFwidGV4dC9wbGFpblwiLFxuICAgICAgICAgICAgICAgICAgdGl0bGU6IChfeiA9IChfeSA9IHZhbHVlLmFubm90YXRpb24ucXVvdGUpICE9IG51bGwgPyBfeSA6IHZhbHVlLmFubm90YXRpb24uZmlsZW5hbWUpICE9IG51bGwgPyBfeiA6IFwiRG9jdW1lbnRcIixcbiAgICAgICAgICAgICAgICAgIGZpbGVuYW1lOiAoX0EgPSB2YWx1ZS5hbm5vdGF0aW9uLmZpbGVuYW1lKSAhPSBudWxsID8gX0EgOiB2YWx1ZS5hbm5vdGF0aW9uLmZpbGVfaWQsXG4gICAgICAgICAgICAgICAgICAuLi52YWx1ZS5hbm5vdGF0aW9uLmZpbGVfaWQgPyB7XG4gICAgICAgICAgICAgICAgICAgIHByb3ZpZGVyTWV0YWRhdGE6IHtcbiAgICAgICAgICAgICAgICAgICAgICBbcHJvdmlkZXJPcHRpb25zTmFtZV06IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGZpbGVJZDogdmFsdWUuYW5ub3RhdGlvbi5maWxlX2lkXG4gICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICB9IDoge31cbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgfSBlbHNlIGlmICh2YWx1ZS5hbm5vdGF0aW9uLnR5cGUgPT09IFwiY29udGFpbmVyX2ZpbGVfY2l0YXRpb25cIikge1xuICAgICAgICAgICAgICAgIGNvbnRyb2xsZXIuZW5xdWV1ZSh7XG4gICAgICAgICAgICAgICAgICB0eXBlOiBcInNvdXJjZVwiLFxuICAgICAgICAgICAgICAgICAgc291cmNlVHlwZTogXCJkb2N1bWVudFwiLFxuICAgICAgICAgICAgICAgICAgaWQ6IChfRCA9IChfQyA9IChfQiA9IHNlbGYuY29uZmlnKS5nZW5lcmF0ZUlkKSA9PSBudWxsID8gdm9pZCAwIDogX0MuY2FsbChfQikpICE9IG51bGwgPyBfRCA6IGdlbmVyYXRlSWQyKCksXG4gICAgICAgICAgICAgICAgICBtZWRpYVR5cGU6IFwidGV4dC9wbGFpblwiLFxuICAgICAgICAgICAgICAgICAgdGl0bGU6IChfRiA9IChfRSA9IHZhbHVlLmFubm90YXRpb24uZmlsZW5hbWUpICE9IG51bGwgPyBfRSA6IHZhbHVlLmFubm90YXRpb24uZmlsZV9pZCkgIT0gbnVsbCA/IF9GIDogXCJEb2N1bWVudFwiLFxuICAgICAgICAgICAgICAgICAgZmlsZW5hbWU6IChfRyA9IHZhbHVlLmFubm90YXRpb24uZmlsZW5hbWUpICE9IG51bGwgPyBfRyA6IHZhbHVlLmFubm90YXRpb24uZmlsZV9pZCxcbiAgICAgICAgICAgICAgICAgIHByb3ZpZGVyTWV0YWRhdGE6IHtcbiAgICAgICAgICAgICAgICAgICAgW3Byb3ZpZGVyT3B0aW9uc05hbWVdOiB7XG4gICAgICAgICAgICAgICAgICAgICAgZmlsZUlkOiB2YWx1ZS5hbm5vdGF0aW9uLmZpbGVfaWQsXG4gICAgICAgICAgICAgICAgICAgICAgY29udGFpbmVySWQ6IHZhbHVlLmFubm90YXRpb24uY29udGFpbmVyX2lkLFxuICAgICAgICAgICAgICAgICAgICAgIC4uLnZhbHVlLmFubm90YXRpb24uaW5kZXggIT0gbnVsbCA/IHsgaW5kZXg6IHZhbHVlLmFubm90YXRpb24uaW5kZXggfSA6IHt9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgfSBlbHNlIGlmICh2YWx1ZS5hbm5vdGF0aW9uLnR5cGUgPT09IFwiZmlsZV9wYXRoXCIpIHtcbiAgICAgICAgICAgICAgICBjb250cm9sbGVyLmVucXVldWUoe1xuICAgICAgICAgICAgICAgICAgdHlwZTogXCJzb3VyY2VcIixcbiAgICAgICAgICAgICAgICAgIHNvdXJjZVR5cGU6IFwiZG9jdW1lbnRcIixcbiAgICAgICAgICAgICAgICAgIGlkOiAoX0ogPSAoX0kgPSAoX0ggPSBzZWxmLmNvbmZpZykuZ2VuZXJhdGVJZCkgPT0gbnVsbCA/IHZvaWQgMCA6IF9JLmNhbGwoX0gpKSAhPSBudWxsID8gX0ogOiBnZW5lcmF0ZUlkMigpLFxuICAgICAgICAgICAgICAgICAgbWVkaWFUeXBlOiBcImFwcGxpY2F0aW9uL29jdGV0LXN0cmVhbVwiLFxuICAgICAgICAgICAgICAgICAgdGl0bGU6IHZhbHVlLmFubm90YXRpb24uZmlsZV9pZCxcbiAgICAgICAgICAgICAgICAgIGZpbGVuYW1lOiB2YWx1ZS5hbm5vdGF0aW9uLmZpbGVfaWQsXG4gICAgICAgICAgICAgICAgICBwcm92aWRlck1ldGFkYXRhOiB7XG4gICAgICAgICAgICAgICAgICAgIFtwcm92aWRlck9wdGlvbnNOYW1lXToge1xuICAgICAgICAgICAgICAgICAgICAgIGZpbGVJZDogdmFsdWUuYW5ub3RhdGlvbi5maWxlX2lkLFxuICAgICAgICAgICAgICAgICAgICAgIC4uLnZhbHVlLmFubm90YXRpb24uaW5kZXggIT0gbnVsbCA/IHsgaW5kZXg6IHZhbHVlLmFubm90YXRpb24uaW5kZXggfSA6IHt9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSBlbHNlIGlmIChpc0Vycm9yQ2h1bmsodmFsdWUpKSB7XG4gICAgICAgICAgICAgIGNvbnRyb2xsZXIuZW5xdWV1ZSh7IHR5cGU6IFwiZXJyb3JcIiwgZXJyb3I6IHZhbHVlIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH0sXG4gICAgICAgICAgZmx1c2goY29udHJvbGxlcikge1xuICAgICAgICAgICAgY29uc3QgcHJvdmlkZXJNZXRhZGF0YSA9IHtcbiAgICAgICAgICAgICAgW3Byb3ZpZGVyT3B0aW9uc05hbWVdOiB7XG4gICAgICAgICAgICAgICAgcmVzcG9uc2VJZFxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgaWYgKGxvZ3Byb2JzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgICAgcHJvdmlkZXJNZXRhZGF0YVtwcm92aWRlck9wdGlvbnNOYW1lXS5sb2dwcm9icyA9IGxvZ3Byb2JzO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHNlcnZpY2VUaWVyICE9PSB2b2lkIDApIHtcbiAgICAgICAgICAgICAgcHJvdmlkZXJNZXRhZGF0YVtwcm92aWRlck9wdGlvbnNOYW1lXS5zZXJ2aWNlVGllciA9IHNlcnZpY2VUaWVyO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29udHJvbGxlci5lbnF1ZXVlKHtcbiAgICAgICAgICAgICAgdHlwZTogXCJmaW5pc2hcIixcbiAgICAgICAgICAgICAgZmluaXNoUmVhc29uLFxuICAgICAgICAgICAgICB1c2FnZTogY29udmVydE9wZW5BSVJlc3BvbnNlc1VzYWdlKHVzYWdlKSxcbiAgICAgICAgICAgICAgcHJvdmlkZXJNZXRhZGF0YVxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgfVxuICAgICAgICB9KVxuICAgICAgKSxcbiAgICAgIHJlcXVlc3Q6IHsgYm9keSB9LFxuICAgICAgcmVzcG9uc2U6IHsgaGVhZGVyczogcmVzcG9uc2VIZWFkZXJzIH1cbiAgICB9O1xuICB9XG59O1xuZnVuY3Rpb24gaXNUZXh0RGVsdGFDaHVuayhjaHVuaykge1xuICByZXR1cm4gY2h1bmsudHlwZSA9PT0gXCJyZXNwb25zZS5vdXRwdXRfdGV4dC5kZWx0YVwiO1xufVxuZnVuY3Rpb24gaXNSZXNwb25zZU91dHB1dEl0ZW1Eb25lQ2h1bmsoY2h1bmspIHtcbiAgcmV0dXJuIGNodW5rLnR5cGUgPT09IFwicmVzcG9uc2Uub3V0cHV0X2l0ZW0uZG9uZVwiO1xufVxuZnVuY3Rpb24gaXNSZXNwb25zZUZpbmlzaGVkQ2h1bmsoY2h1bmspIHtcbiAgcmV0dXJuIGNodW5rLnR5cGUgPT09IFwicmVzcG9uc2UuY29tcGxldGVkXCIgfHwgY2h1bmsudHlwZSA9PT0gXCJyZXNwb25zZS5pbmNvbXBsZXRlXCI7XG59XG5mdW5jdGlvbiBpc1Jlc3BvbnNlQ3JlYXRlZENodW5rKGNodW5rKSB7XG4gIHJldHVybiBjaHVuay50eXBlID09PSBcInJlc3BvbnNlLmNyZWF0ZWRcIjtcbn1cbmZ1bmN0aW9uIGlzUmVzcG9uc2VGdW5jdGlvbkNhbGxBcmd1bWVudHNEZWx0YUNodW5rKGNodW5rKSB7XG4gIHJldHVybiBjaHVuay50eXBlID09PSBcInJlc3BvbnNlLmZ1bmN0aW9uX2NhbGxfYXJndW1lbnRzLmRlbHRhXCI7XG59XG5mdW5jdGlvbiBpc1Jlc3BvbnNlSW1hZ2VHZW5lcmF0aW9uQ2FsbFBhcnRpYWxJbWFnZUNodW5rKGNodW5rKSB7XG4gIHJldHVybiBjaHVuay50eXBlID09PSBcInJlc3BvbnNlLmltYWdlX2dlbmVyYXRpb25fY2FsbC5wYXJ0aWFsX2ltYWdlXCI7XG59XG5mdW5jdGlvbiBpc1Jlc3BvbnNlQ29kZUludGVycHJldGVyQ2FsbENvZGVEZWx0YUNodW5rKGNodW5rKSB7XG4gIHJldHVybiBjaHVuay50eXBlID09PSBcInJlc3BvbnNlLmNvZGVfaW50ZXJwcmV0ZXJfY2FsbF9jb2RlLmRlbHRhXCI7XG59XG5mdW5jdGlvbiBpc1Jlc3BvbnNlQ29kZUludGVycHJldGVyQ2FsbENvZGVEb25lQ2h1bmsoY2h1bmspIHtcbiAgcmV0dXJuIGNodW5rLnR5cGUgPT09IFwicmVzcG9uc2UuY29kZV9pbnRlcnByZXRlcl9jYWxsX2NvZGUuZG9uZVwiO1xufVxuZnVuY3Rpb24gaXNSZXNwb25zZUFwcGx5UGF0Y2hDYWxsT3BlcmF0aW9uRGlmZkRlbHRhQ2h1bmsoY2h1bmspIHtcbiAgcmV0dXJuIGNodW5rLnR5cGUgPT09IFwicmVzcG9uc2UuYXBwbHlfcGF0Y2hfY2FsbF9vcGVyYXRpb25fZGlmZi5kZWx0YVwiO1xufVxuZnVuY3Rpb24gaXNSZXNwb25zZUFwcGx5UGF0Y2hDYWxsT3BlcmF0aW9uRGlmZkRvbmVDaHVuayhjaHVuaykge1xuICByZXR1cm4gY2h1bmsudHlwZSA9PT0gXCJyZXNwb25zZS5hcHBseV9wYXRjaF9jYWxsX29wZXJhdGlvbl9kaWZmLmRvbmVcIjtcbn1cbmZ1bmN0aW9uIGlzUmVzcG9uc2VPdXRwdXRJdGVtQWRkZWRDaHVuayhjaHVuaykge1xuICByZXR1cm4gY2h1bmsudHlwZSA9PT0gXCJyZXNwb25zZS5vdXRwdXRfaXRlbS5hZGRlZFwiO1xufVxuZnVuY3Rpb24gaXNSZXNwb25zZUFubm90YXRpb25BZGRlZENodW5rKGNodW5rKSB7XG4gIHJldHVybiBjaHVuay50eXBlID09PSBcInJlc3BvbnNlLm91dHB1dF90ZXh0LmFubm90YXRpb24uYWRkZWRcIjtcbn1cbmZ1bmN0aW9uIGlzRXJyb3JDaHVuayhjaHVuaykge1xuICByZXR1cm4gY2h1bmsudHlwZSA9PT0gXCJlcnJvclwiO1xufVxuZnVuY3Rpb24gbWFwV2ViU2VhcmNoT3V0cHV0KGFjdGlvbikge1xuICB2YXIgX2E7XG4gIHN3aXRjaCAoYWN0aW9uLnR5cGUpIHtcbiAgICBjYXNlIFwic2VhcmNoXCI6XG4gICAgICByZXR1cm4ge1xuICAgICAgICBhY3Rpb246IHsgdHlwZTogXCJzZWFyY2hcIiwgcXVlcnk6IChfYSA9IGFjdGlvbi5xdWVyeSkgIT0gbnVsbCA/IF9hIDogdm9pZCAwIH0sXG4gICAgICAgIC8vIGluY2x1ZGUgc291cmNlcyB3aGVuIHByb3ZpZGVkIGJ5IHRoZSBSZXNwb25zZXMgQVBJIChiZWhpbmQgaW5jbHVkZSBmbGFnKVxuICAgICAgICAuLi5hY3Rpb24uc291cmNlcyAhPSBudWxsICYmIHsgc291cmNlczogYWN0aW9uLnNvdXJjZXMgfVxuICAgICAgfTtcbiAgICBjYXNlIFwib3Blbl9wYWdlXCI6XG4gICAgICByZXR1cm4geyBhY3Rpb246IHsgdHlwZTogXCJvcGVuUGFnZVwiLCB1cmw6IGFjdGlvbi51cmwgfSB9O1xuICAgIGNhc2UgXCJmaW5kX2luX3BhZ2VcIjpcbiAgICAgIHJldHVybiB7XG4gICAgICAgIGFjdGlvbjoge1xuICAgICAgICAgIHR5cGU6IFwiZmluZEluUGFnZVwiLFxuICAgICAgICAgIHVybDogYWN0aW9uLnVybCxcbiAgICAgICAgICBwYXR0ZXJuOiBhY3Rpb24ucGF0dGVyblxuICAgICAgICB9XG4gICAgICB9O1xuICB9XG59XG5mdW5jdGlvbiBlc2NhcGVKU09ORGVsdGEoZGVsdGEpIHtcbiAgcmV0dXJuIEpTT04uc3RyaW5naWZ5KGRlbHRhKS5zbGljZSgxLCAtMSk7XG59XG5cbi8vIHNyYy9zcGVlY2gvb3BlbmFpLXNwZWVjaC1tb2RlbC50c1xuaW1wb3J0IHtcbiAgY29tYmluZUhlYWRlcnMgYXMgY29tYmluZUhlYWRlcnM2LFxuICBjcmVhdGVCaW5hcnlSZXNwb25zZUhhbmRsZXIsXG4gIHBhcnNlUHJvdmlkZXJPcHRpb25zIGFzIHBhcnNlUHJvdmlkZXJPcHRpb25zNixcbiAgcG9zdEpzb25Ub0FwaSBhcyBwb3N0SnNvblRvQXBpNlxufSBmcm9tIFwiQGFpLXNkay9wcm92aWRlci11dGlsc1wiO1xuXG4vLyBzcmMvc3BlZWNoL29wZW5haS1zcGVlY2gtb3B0aW9ucy50c1xuaW1wb3J0IHsgbGF6eVNjaGVtYSBhcyBsYXp5U2NoZW1hMTksIHpvZFNjaGVtYSBhcyB6b2RTY2hlbWExOSB9IGZyb20gXCJAYWktc2RrL3Byb3ZpZGVyLXV0aWxzXCI7XG5pbXBvcnQgeyB6IGFzIHoyMSB9IGZyb20gXCJ6b2QvdjRcIjtcbnZhciBvcGVuYWlTcGVlY2hQcm92aWRlck9wdGlvbnNTY2hlbWEgPSBsYXp5U2NoZW1hMTkoXG4gICgpID0+IHpvZFNjaGVtYTE5KFxuICAgIHoyMS5vYmplY3Qoe1xuICAgICAgaW5zdHJ1Y3Rpb25zOiB6MjEuc3RyaW5nKCkubnVsbGlzaCgpLFxuICAgICAgc3BlZWQ6IHoyMS5udW1iZXIoKS5taW4oMC4yNSkubWF4KDQpLmRlZmF1bHQoMSkubnVsbGlzaCgpXG4gICAgfSlcbiAgKVxuKTtcblxuLy8gc3JjL3NwZWVjaC9vcGVuYWktc3BlZWNoLW1vZGVsLnRzXG52YXIgT3BlbkFJU3BlZWNoTW9kZWwgPSBjbGFzcyB7XG4gIGNvbnN0cnVjdG9yKG1vZGVsSWQsIGNvbmZpZykge1xuICAgIHRoaXMubW9kZWxJZCA9IG1vZGVsSWQ7XG4gICAgdGhpcy5jb25maWcgPSBjb25maWc7XG4gICAgdGhpcy5zcGVjaWZpY2F0aW9uVmVyc2lvbiA9IFwidjNcIjtcbiAgfVxuICBnZXQgcHJvdmlkZXIoKSB7XG4gICAgcmV0dXJuIHRoaXMuY29uZmlnLnByb3ZpZGVyO1xuICB9XG4gIGFzeW5jIGdldEFyZ3Moe1xuICAgIHRleHQsXG4gICAgdm9pY2UgPSBcImFsbG95XCIsXG4gICAgb3V0cHV0Rm9ybWF0ID0gXCJtcDNcIixcbiAgICBzcGVlZCxcbiAgICBpbnN0cnVjdGlvbnMsXG4gICAgbGFuZ3VhZ2UsXG4gICAgcHJvdmlkZXJPcHRpb25zXG4gIH0pIHtcbiAgICBjb25zdCB3YXJuaW5ncyA9IFtdO1xuICAgIGNvbnN0IG9wZW5BSU9wdGlvbnMgPSBhd2FpdCBwYXJzZVByb3ZpZGVyT3B0aW9uczYoe1xuICAgICAgcHJvdmlkZXI6IFwib3BlbmFpXCIsXG4gICAgICBwcm92aWRlck9wdGlvbnMsXG4gICAgICBzY2hlbWE6IG9wZW5haVNwZWVjaFByb3ZpZGVyT3B0aW9uc1NjaGVtYVxuICAgIH0pO1xuICAgIGNvbnN0IHJlcXVlc3RCb2R5ID0ge1xuICAgICAgbW9kZWw6IHRoaXMubW9kZWxJZCxcbiAgICAgIGlucHV0OiB0ZXh0LFxuICAgICAgdm9pY2UsXG4gICAgICByZXNwb25zZV9mb3JtYXQ6IFwibXAzXCIsXG4gICAgICBzcGVlZCxcbiAgICAgIGluc3RydWN0aW9uc1xuICAgIH07XG4gICAgaWYgKG91dHB1dEZvcm1hdCkge1xuICAgICAgaWYgKFtcIm1wM1wiLCBcIm9wdXNcIiwgXCJhYWNcIiwgXCJmbGFjXCIsIFwid2F2XCIsIFwicGNtXCJdLmluY2x1ZGVzKG91dHB1dEZvcm1hdCkpIHtcbiAgICAgICAgcmVxdWVzdEJvZHkucmVzcG9uc2VfZm9ybWF0ID0gb3V0cHV0Rm9ybWF0O1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgd2FybmluZ3MucHVzaCh7XG4gICAgICAgICAgdHlwZTogXCJ1bnN1cHBvcnRlZFwiLFxuICAgICAgICAgIGZlYXR1cmU6IFwib3V0cHV0Rm9ybWF0XCIsXG4gICAgICAgICAgZGV0YWlsczogYFVuc3VwcG9ydGVkIG91dHB1dCBmb3JtYXQ6ICR7b3V0cHV0Rm9ybWF0fS4gVXNpbmcgbXAzIGluc3RlYWQuYFxuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICB9XG4gICAgaWYgKG9wZW5BSU9wdGlvbnMpIHtcbiAgICAgIGNvbnN0IHNwZWVjaE1vZGVsT3B0aW9ucyA9IHt9O1xuICAgICAgZm9yIChjb25zdCBrZXkgaW4gc3BlZWNoTW9kZWxPcHRpb25zKSB7XG4gICAgICAgIGNvbnN0IHZhbHVlID0gc3BlZWNoTW9kZWxPcHRpb25zW2tleV07XG4gICAgICAgIGlmICh2YWx1ZSAhPT0gdm9pZCAwKSB7XG4gICAgICAgICAgcmVxdWVzdEJvZHlba2V5XSA9IHZhbHVlO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICAgIGlmIChsYW5ndWFnZSkge1xuICAgICAgd2FybmluZ3MucHVzaCh7XG4gICAgICAgIHR5cGU6IFwidW5zdXBwb3J0ZWRcIixcbiAgICAgICAgZmVhdHVyZTogXCJsYW5ndWFnZVwiLFxuICAgICAgICBkZXRhaWxzOiBgT3BlbkFJIHNwZWVjaCBtb2RlbHMgZG8gbm90IHN1cHBvcnQgbGFuZ3VhZ2Ugc2VsZWN0aW9uLiBMYW5ndWFnZSBwYXJhbWV0ZXIgXCIke2xhbmd1YWdlfVwiIHdhcyBpZ25vcmVkLmBcbiAgICAgIH0pO1xuICAgIH1cbiAgICByZXR1cm4ge1xuICAgICAgcmVxdWVzdEJvZHksXG4gICAgICB3YXJuaW5nc1xuICAgIH07XG4gIH1cbiAgYXN5bmMgZG9HZW5lcmF0ZShvcHRpb25zKSB7XG4gICAgdmFyIF9hLCBfYiwgX2M7XG4gICAgY29uc3QgY3VycmVudERhdGUgPSAoX2MgPSAoX2IgPSAoX2EgPSB0aGlzLmNvbmZpZy5faW50ZXJuYWwpID09IG51bGwgPyB2b2lkIDAgOiBfYS5jdXJyZW50RGF0ZSkgPT0gbnVsbCA/IHZvaWQgMCA6IF9iLmNhbGwoX2EpKSAhPSBudWxsID8gX2MgOiAvKiBAX19QVVJFX18gKi8gbmV3IERhdGUoKTtcbiAgICBjb25zdCB7IHJlcXVlc3RCb2R5LCB3YXJuaW5ncyB9ID0gYXdhaXQgdGhpcy5nZXRBcmdzKG9wdGlvbnMpO1xuICAgIGNvbnN0IHtcbiAgICAgIHZhbHVlOiBhdWRpbyxcbiAgICAgIHJlc3BvbnNlSGVhZGVycyxcbiAgICAgIHJhd1ZhbHVlOiByYXdSZXNwb25zZVxuICAgIH0gPSBhd2FpdCBwb3N0SnNvblRvQXBpNih7XG4gICAgICB1cmw6IHRoaXMuY29uZmlnLnVybCh7XG4gICAgICAgIHBhdGg6IFwiL2F1ZGlvL3NwZWVjaFwiLFxuICAgICAgICBtb2RlbElkOiB0aGlzLm1vZGVsSWRcbiAgICAgIH0pLFxuICAgICAgaGVhZGVyczogY29tYmluZUhlYWRlcnM2KHRoaXMuY29uZmlnLmhlYWRlcnMoKSwgb3B0aW9ucy5oZWFkZXJzKSxcbiAgICAgIGJvZHk6IHJlcXVlc3RCb2R5LFxuICAgICAgZmFpbGVkUmVzcG9uc2VIYW5kbGVyOiBvcGVuYWlGYWlsZWRSZXNwb25zZUhhbmRsZXIsXG4gICAgICBzdWNjZXNzZnVsUmVzcG9uc2VIYW5kbGVyOiBjcmVhdGVCaW5hcnlSZXNwb25zZUhhbmRsZXIoKSxcbiAgICAgIGFib3J0U2lnbmFsOiBvcHRpb25zLmFib3J0U2lnbmFsLFxuICAgICAgZmV0Y2g6IHRoaXMuY29uZmlnLmZldGNoXG4gICAgfSk7XG4gICAgcmV0dXJuIHtcbiAgICAgIGF1ZGlvLFxuICAgICAgd2FybmluZ3MsXG4gICAgICByZXF1ZXN0OiB7XG4gICAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHJlcXVlc3RCb2R5KVxuICAgICAgfSxcbiAgICAgIHJlc3BvbnNlOiB7XG4gICAgICAgIHRpbWVzdGFtcDogY3VycmVudERhdGUsXG4gICAgICAgIG1vZGVsSWQ6IHRoaXMubW9kZWxJZCxcbiAgICAgICAgaGVhZGVyczogcmVzcG9uc2VIZWFkZXJzLFxuICAgICAgICBib2R5OiByYXdSZXNwb25zZVxuICAgICAgfVxuICAgIH07XG4gIH1cbn07XG5cbi8vIHNyYy90cmFuc2NyaXB0aW9uL29wZW5haS10cmFuc2NyaXB0aW9uLW1vZGVsLnRzXG5pbXBvcnQge1xuICBjb21iaW5lSGVhZGVycyBhcyBjb21iaW5lSGVhZGVyczcsXG4gIGNvbnZlcnRCYXNlNjRUb1VpbnQ4QXJyYXkgYXMgY29udmVydEJhc2U2NFRvVWludDhBcnJheTIsXG4gIGNyZWF0ZUpzb25SZXNwb25zZUhhbmRsZXIgYXMgY3JlYXRlSnNvblJlc3BvbnNlSGFuZGxlcjYsXG4gIG1lZGlhVHlwZVRvRXh0ZW5zaW9uLFxuICBwYXJzZVByb3ZpZGVyT3B0aW9ucyBhcyBwYXJzZVByb3ZpZGVyT3B0aW9uczcsXG4gIHBvc3RGb3JtRGF0YVRvQXBpIGFzIHBvc3RGb3JtRGF0YVRvQXBpMlxufSBmcm9tIFwiQGFpLXNkay9wcm92aWRlci11dGlsc1wiO1xuXG4vLyBzcmMvdHJhbnNjcmlwdGlvbi9vcGVuYWktdHJhbnNjcmlwdGlvbi1hcGkudHNcbmltcG9ydCB7IGxhenlTY2hlbWEgYXMgbGF6eVNjaGVtYTIwLCB6b2RTY2hlbWEgYXMgem9kU2NoZW1hMjAgfSBmcm9tIFwiQGFpLXNkay9wcm92aWRlci11dGlsc1wiO1xuaW1wb3J0IHsgeiBhcyB6MjIgfSBmcm9tIFwiem9kL3Y0XCI7XG52YXIgb3BlbmFpVHJhbnNjcmlwdGlvblJlc3BvbnNlU2NoZW1hID0gbGF6eVNjaGVtYTIwKFxuICAoKSA9PiB6b2RTY2hlbWEyMChcbiAgICB6MjIub2JqZWN0KHtcbiAgICAgIHRleHQ6IHoyMi5zdHJpbmcoKSxcbiAgICAgIGxhbmd1YWdlOiB6MjIuc3RyaW5nKCkubnVsbGlzaCgpLFxuICAgICAgZHVyYXRpb246IHoyMi5udW1iZXIoKS5udWxsaXNoKCksXG4gICAgICB3b3JkczogejIyLmFycmF5KFxuICAgICAgICB6MjIub2JqZWN0KHtcbiAgICAgICAgICB3b3JkOiB6MjIuc3RyaW5nKCksXG4gICAgICAgICAgc3RhcnQ6IHoyMi5udW1iZXIoKSxcbiAgICAgICAgICBlbmQ6IHoyMi5udW1iZXIoKVxuICAgICAgICB9KVxuICAgICAgKS5udWxsaXNoKCksXG4gICAgICBzZWdtZW50czogejIyLmFycmF5KFxuICAgICAgICB6MjIub2JqZWN0KHtcbiAgICAgICAgICBpZDogejIyLm51bWJlcigpLFxuICAgICAgICAgIHNlZWs6IHoyMi5udW1iZXIoKSxcbiAgICAgICAgICBzdGFydDogejIyLm51bWJlcigpLFxuICAgICAgICAgIGVuZDogejIyLm51bWJlcigpLFxuICAgICAgICAgIHRleHQ6IHoyMi5zdHJpbmcoKSxcbiAgICAgICAgICB0b2tlbnM6IHoyMi5hcnJheSh6MjIubnVtYmVyKCkpLFxuICAgICAgICAgIHRlbXBlcmF0dXJlOiB6MjIubnVtYmVyKCksXG4gICAgICAgICAgYXZnX2xvZ3Byb2I6IHoyMi5udW1iZXIoKSxcbiAgICAgICAgICBjb21wcmVzc2lvbl9yYXRpbzogejIyLm51bWJlcigpLFxuICAgICAgICAgIG5vX3NwZWVjaF9wcm9iOiB6MjIubnVtYmVyKClcbiAgICAgICAgfSlcbiAgICAgICkubnVsbGlzaCgpXG4gICAgfSlcbiAgKVxuKTtcblxuLy8gc3JjL3RyYW5zY3JpcHRpb24vb3BlbmFpLXRyYW5zY3JpcHRpb24tb3B0aW9ucy50c1xuaW1wb3J0IHsgbGF6eVNjaGVtYSBhcyBsYXp5U2NoZW1hMjEsIHpvZFNjaGVtYSBhcyB6b2RTY2hlbWEyMSB9IGZyb20gXCJAYWktc2RrL3Byb3ZpZGVyLXV0aWxzXCI7XG5pbXBvcnQgeyB6IGFzIHoyMyB9IGZyb20gXCJ6b2QvdjRcIjtcbnZhciBvcGVuQUlUcmFuc2NyaXB0aW9uUHJvdmlkZXJPcHRpb25zID0gbGF6eVNjaGVtYTIxKFxuICAoKSA9PiB6b2RTY2hlbWEyMShcbiAgICB6MjMub2JqZWN0KHtcbiAgICAgIC8qKlxuICAgICAgICogQWRkaXRpb25hbCBpbmZvcm1hdGlvbiB0byBpbmNsdWRlIGluIHRoZSB0cmFuc2NyaXB0aW9uIHJlc3BvbnNlLlxuICAgICAgICovXG4gICAgICBpbmNsdWRlOiB6MjMuYXJyYXkoejIzLnN0cmluZygpKS5vcHRpb25hbCgpLFxuICAgICAgLyoqXG4gICAgICAgKiBUaGUgbGFuZ3VhZ2Ugb2YgdGhlIGlucHV0IGF1ZGlvIGluIElTTy02MzktMSBmb3JtYXQuXG4gICAgICAgKi9cbiAgICAgIGxhbmd1YWdlOiB6MjMuc3RyaW5nKCkub3B0aW9uYWwoKSxcbiAgICAgIC8qKlxuICAgICAgICogQW4gb3B0aW9uYWwgdGV4dCB0byBndWlkZSB0aGUgbW9kZWwncyBzdHlsZSBvciBjb250aW51ZSBhIHByZXZpb3VzIGF1ZGlvIHNlZ21lbnQuXG4gICAgICAgKi9cbiAgICAgIHByb21wdDogejIzLnN0cmluZygpLm9wdGlvbmFsKCksXG4gICAgICAvKipcbiAgICAgICAqIFRoZSBzYW1wbGluZyB0ZW1wZXJhdHVyZSwgYmV0d2VlbiAwIGFuZCAxLlxuICAgICAgICogQGRlZmF1bHQgMFxuICAgICAgICovXG4gICAgICB0ZW1wZXJhdHVyZTogejIzLm51bWJlcigpLm1pbigwKS5tYXgoMSkuZGVmYXVsdCgwKS5vcHRpb25hbCgpLFxuICAgICAgLyoqXG4gICAgICAgKiBUaGUgdGltZXN0YW1wIGdyYW51bGFyaXRpZXMgdG8gcG9wdWxhdGUgZm9yIHRoaXMgdHJhbnNjcmlwdGlvbi5cbiAgICAgICAqIEBkZWZhdWx0IFsnc2VnbWVudCddXG4gICAgICAgKi9cbiAgICAgIHRpbWVzdGFtcEdyYW51bGFyaXRpZXM6IHoyMy5hcnJheSh6MjMuZW51bShbXCJ3b3JkXCIsIFwic2VnbWVudFwiXSkpLmRlZmF1bHQoW1wic2VnbWVudFwiXSkub3B0aW9uYWwoKVxuICAgIH0pXG4gIClcbik7XG5cbi8vIHNyYy90cmFuc2NyaXB0aW9uL29wZW5haS10cmFuc2NyaXB0aW9uLW1vZGVsLnRzXG52YXIgbGFuZ3VhZ2VNYXAgPSB7XG4gIGFmcmlrYWFuczogXCJhZlwiLFxuICBhcmFiaWM6IFwiYXJcIixcbiAgYXJtZW5pYW46IFwiaHlcIixcbiAgYXplcmJhaWphbmk6IFwiYXpcIixcbiAgYmVsYXJ1c2lhbjogXCJiZVwiLFxuICBib3NuaWFuOiBcImJzXCIsXG4gIGJ1bGdhcmlhbjogXCJiZ1wiLFxuICBjYXRhbGFuOiBcImNhXCIsXG4gIGNoaW5lc2U6IFwiemhcIixcbiAgY3JvYXRpYW46IFwiaHJcIixcbiAgY3plY2g6IFwiY3NcIixcbiAgZGFuaXNoOiBcImRhXCIsXG4gIGR1dGNoOiBcIm5sXCIsXG4gIGVuZ2xpc2g6IFwiZW5cIixcbiAgZXN0b25pYW46IFwiZXRcIixcbiAgZmlubmlzaDogXCJmaVwiLFxuICBmcmVuY2g6IFwiZnJcIixcbiAgZ2FsaWNpYW46IFwiZ2xcIixcbiAgZ2VybWFuOiBcImRlXCIsXG4gIGdyZWVrOiBcImVsXCIsXG4gIGhlYnJldzogXCJoZVwiLFxuICBoaW5kaTogXCJoaVwiLFxuICBodW5nYXJpYW46IFwiaHVcIixcbiAgaWNlbGFuZGljOiBcImlzXCIsXG4gIGluZG9uZXNpYW46IFwiaWRcIixcbiAgaXRhbGlhbjogXCJpdFwiLFxuICBqYXBhbmVzZTogXCJqYVwiLFxuICBrYW5uYWRhOiBcImtuXCIsXG4gIGthemFraDogXCJra1wiLFxuICBrb3JlYW46IFwia29cIixcbiAgbGF0dmlhbjogXCJsdlwiLFxuICBsaXRodWFuaWFuOiBcImx0XCIsXG4gIG1hY2Vkb25pYW46IFwibWtcIixcbiAgbWFsYXk6IFwibXNcIixcbiAgbWFyYXRoaTogXCJtclwiLFxuICBtYW9yaTogXCJtaVwiLFxuICBuZXBhbGk6IFwibmVcIixcbiAgbm9yd2VnaWFuOiBcIm5vXCIsXG4gIHBlcnNpYW46IFwiZmFcIixcbiAgcG9saXNoOiBcInBsXCIsXG4gIHBvcnR1Z3Vlc2U6IFwicHRcIixcbiAgcm9tYW5pYW46IFwicm9cIixcbiAgcnVzc2lhbjogXCJydVwiLFxuICBzZXJiaWFuOiBcInNyXCIsXG4gIHNsb3ZhazogXCJza1wiLFxuICBzbG92ZW5pYW46IFwic2xcIixcbiAgc3BhbmlzaDogXCJlc1wiLFxuICBzd2FoaWxpOiBcInN3XCIsXG4gIHN3ZWRpc2g6IFwic3ZcIixcbiAgdGFnYWxvZzogXCJ0bFwiLFxuICB0YW1pbDogXCJ0YVwiLFxuICB0aGFpOiBcInRoXCIsXG4gIHR1cmtpc2g6IFwidHJcIixcbiAgdWtyYWluaWFuOiBcInVrXCIsXG4gIHVyZHU6IFwidXJcIixcbiAgdmlldG5hbWVzZTogXCJ2aVwiLFxuICB3ZWxzaDogXCJjeVwiXG59O1xudmFyIE9wZW5BSVRyYW5zY3JpcHRpb25Nb2RlbCA9IGNsYXNzIHtcbiAgY29uc3RydWN0b3IobW9kZWxJZCwgY29uZmlnKSB7XG4gICAgdGhpcy5tb2RlbElkID0gbW9kZWxJZDtcbiAgICB0aGlzLmNvbmZpZyA9IGNvbmZpZztcbiAgICB0aGlzLnNwZWNpZmljYXRpb25WZXJzaW9uID0gXCJ2M1wiO1xuICB9XG4gIGdldCBwcm92aWRlcigpIHtcbiAgICByZXR1cm4gdGhpcy5jb25maWcucHJvdmlkZXI7XG4gIH1cbiAgYXN5bmMgZ2V0QXJncyh7XG4gICAgYXVkaW8sXG4gICAgbWVkaWFUeXBlLFxuICAgIHByb3ZpZGVyT3B0aW9uc1xuICB9KSB7XG4gICAgY29uc3Qgd2FybmluZ3MgPSBbXTtcbiAgICBjb25zdCBvcGVuQUlPcHRpb25zID0gYXdhaXQgcGFyc2VQcm92aWRlck9wdGlvbnM3KHtcbiAgICAgIHByb3ZpZGVyOiBcIm9wZW5haVwiLFxuICAgICAgcHJvdmlkZXJPcHRpb25zLFxuICAgICAgc2NoZW1hOiBvcGVuQUlUcmFuc2NyaXB0aW9uUHJvdmlkZXJPcHRpb25zXG4gICAgfSk7XG4gICAgY29uc3QgZm9ybURhdGEgPSBuZXcgRm9ybURhdGEoKTtcbiAgICBjb25zdCBibG9iID0gYXVkaW8gaW5zdGFuY2VvZiBVaW50OEFycmF5ID8gbmV3IEJsb2IoW2F1ZGlvXSkgOiBuZXcgQmxvYihbY29udmVydEJhc2U2NFRvVWludDhBcnJheTIoYXVkaW8pXSk7XG4gICAgZm9ybURhdGEuYXBwZW5kKFwibW9kZWxcIiwgdGhpcy5tb2RlbElkKTtcbiAgICBjb25zdCBmaWxlRXh0ZW5zaW9uID0gbWVkaWFUeXBlVG9FeHRlbnNpb24obWVkaWFUeXBlKTtcbiAgICBmb3JtRGF0YS5hcHBlbmQoXG4gICAgICBcImZpbGVcIixcbiAgICAgIG5ldyBGaWxlKFtibG9iXSwgXCJhdWRpb1wiLCB7IHR5cGU6IG1lZGlhVHlwZSB9KSxcbiAgICAgIGBhdWRpby4ke2ZpbGVFeHRlbnNpb259YFxuICAgICk7XG4gICAgaWYgKG9wZW5BSU9wdGlvbnMpIHtcbiAgICAgIGNvbnN0IHRyYW5zY3JpcHRpb25Nb2RlbE9wdGlvbnMgPSB7XG4gICAgICAgIGluY2x1ZGU6IG9wZW5BSU9wdGlvbnMuaW5jbHVkZSxcbiAgICAgICAgbGFuZ3VhZ2U6IG9wZW5BSU9wdGlvbnMubGFuZ3VhZ2UsXG4gICAgICAgIHByb21wdDogb3BlbkFJT3B0aW9ucy5wcm9tcHQsXG4gICAgICAgIC8vIGh0dHBzOi8vcGxhdGZvcm0ub3BlbmFpLmNvbS9kb2NzL2FwaS1yZWZlcmVuY2UvYXVkaW8vY3JlYXRlVHJhbnNjcmlwdGlvbiNhdWRpb19jcmVhdGV0cmFuc2NyaXB0aW9uLXJlc3BvbnNlX2Zvcm1hdFxuICAgICAgICAvLyBwcmVmZXIgdmVyYm9zZV9qc29uIHRvIGdldCBzZWdtZW50cyBmb3IgbW9kZWxzIHRoYXQgc3VwcG9ydCBpdFxuICAgICAgICByZXNwb25zZV9mb3JtYXQ6IFtcbiAgICAgICAgICBcImdwdC00by10cmFuc2NyaWJlXCIsXG4gICAgICAgICAgXCJncHQtNG8tbWluaS10cmFuc2NyaWJlXCJcbiAgICAgICAgXS5pbmNsdWRlcyh0aGlzLm1vZGVsSWQpID8gXCJqc29uXCIgOiBcInZlcmJvc2VfanNvblwiLFxuICAgICAgICB0ZW1wZXJhdHVyZTogb3BlbkFJT3B0aW9ucy50ZW1wZXJhdHVyZSxcbiAgICAgICAgdGltZXN0YW1wX2dyYW51bGFyaXRpZXM6IG9wZW5BSU9wdGlvbnMudGltZXN0YW1wR3JhbnVsYXJpdGllc1xuICAgICAgfTtcbiAgICAgIGZvciAoY29uc3QgW2tleSwgdmFsdWVdIG9mIE9iamVjdC5lbnRyaWVzKHRyYW5zY3JpcHRpb25Nb2RlbE9wdGlvbnMpKSB7XG4gICAgICAgIGlmICh2YWx1ZSAhPSBudWxsKSB7XG4gICAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkodmFsdWUpKSB7XG4gICAgICAgICAgICBmb3IgKGNvbnN0IGl0ZW0gb2YgdmFsdWUpIHtcbiAgICAgICAgICAgICAgZm9ybURhdGEuYXBwZW5kKGAke2tleX1bXWAsIFN0cmluZyhpdGVtKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGZvcm1EYXRhLmFwcGVuZChrZXksIFN0cmluZyh2YWx1ZSkpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4ge1xuICAgICAgZm9ybURhdGEsXG4gICAgICB3YXJuaW5nc1xuICAgIH07XG4gIH1cbiAgYXN5bmMgZG9HZW5lcmF0ZShvcHRpb25zKSB7XG4gICAgdmFyIF9hLCBfYiwgX2MsIF9kLCBfZSwgX2YsIF9nLCBfaDtcbiAgICBjb25zdCBjdXJyZW50RGF0ZSA9IChfYyA9IChfYiA9IChfYSA9IHRoaXMuY29uZmlnLl9pbnRlcm5hbCkgPT0gbnVsbCA/IHZvaWQgMCA6IF9hLmN1cnJlbnREYXRlKSA9PSBudWxsID8gdm9pZCAwIDogX2IuY2FsbChfYSkpICE9IG51bGwgPyBfYyA6IC8qIEBfX1BVUkVfXyAqLyBuZXcgRGF0ZSgpO1xuICAgIGNvbnN0IHsgZm9ybURhdGEsIHdhcm5pbmdzIH0gPSBhd2FpdCB0aGlzLmdldEFyZ3Mob3B0aW9ucyk7XG4gICAgY29uc3Qge1xuICAgICAgdmFsdWU6IHJlc3BvbnNlLFxuICAgICAgcmVzcG9uc2VIZWFkZXJzLFxuICAgICAgcmF3VmFsdWU6IHJhd1Jlc3BvbnNlXG4gICAgfSA9IGF3YWl0IHBvc3RGb3JtRGF0YVRvQXBpMih7XG4gICAgICB1cmw6IHRoaXMuY29uZmlnLnVybCh7XG4gICAgICAgIHBhdGg6IFwiL2F1ZGlvL3RyYW5zY3JpcHRpb25zXCIsXG4gICAgICAgIG1vZGVsSWQ6IHRoaXMubW9kZWxJZFxuICAgICAgfSksXG4gICAgICBoZWFkZXJzOiBjb21iaW5lSGVhZGVyczcodGhpcy5jb25maWcuaGVhZGVycygpLCBvcHRpb25zLmhlYWRlcnMpLFxuICAgICAgZm9ybURhdGEsXG4gICAgICBmYWlsZWRSZXNwb25zZUhhbmRsZXI6IG9wZW5haUZhaWxlZFJlc3BvbnNlSGFuZGxlcixcbiAgICAgIHN1Y2Nlc3NmdWxSZXNwb25zZUhhbmRsZXI6IGNyZWF0ZUpzb25SZXNwb25zZUhhbmRsZXI2KFxuICAgICAgICBvcGVuYWlUcmFuc2NyaXB0aW9uUmVzcG9uc2VTY2hlbWFcbiAgICAgICksXG4gICAgICBhYm9ydFNpZ25hbDogb3B0aW9ucy5hYm9ydFNpZ25hbCxcbiAgICAgIGZldGNoOiB0aGlzLmNvbmZpZy5mZXRjaFxuICAgIH0pO1xuICAgIGNvbnN0IGxhbmd1YWdlID0gcmVzcG9uc2UubGFuZ3VhZ2UgIT0gbnVsbCAmJiByZXNwb25zZS5sYW5ndWFnZSBpbiBsYW5ndWFnZU1hcCA/IGxhbmd1YWdlTWFwW3Jlc3BvbnNlLmxhbmd1YWdlXSA6IHZvaWQgMDtcbiAgICByZXR1cm4ge1xuICAgICAgdGV4dDogcmVzcG9uc2UudGV4dCxcbiAgICAgIHNlZ21lbnRzOiAoX2cgPSAoX2YgPSAoX2QgPSByZXNwb25zZS5zZWdtZW50cykgPT0gbnVsbCA/IHZvaWQgMCA6IF9kLm1hcCgoc2VnbWVudCkgPT4gKHtcbiAgICAgICAgdGV4dDogc2VnbWVudC50ZXh0LFxuICAgICAgICBzdGFydFNlY29uZDogc2VnbWVudC5zdGFydCxcbiAgICAgICAgZW5kU2Vjb25kOiBzZWdtZW50LmVuZFxuICAgICAgfSkpKSAhPSBudWxsID8gX2YgOiAoX2UgPSByZXNwb25zZS53b3JkcykgPT0gbnVsbCA/IHZvaWQgMCA6IF9lLm1hcCgod29yZCkgPT4gKHtcbiAgICAgICAgdGV4dDogd29yZC53b3JkLFxuICAgICAgICBzdGFydFNlY29uZDogd29yZC5zdGFydCxcbiAgICAgICAgZW5kU2Vjb25kOiB3b3JkLmVuZFxuICAgICAgfSkpKSAhPSBudWxsID8gX2cgOiBbXSxcbiAgICAgIGxhbmd1YWdlLFxuICAgICAgZHVyYXRpb25JblNlY29uZHM6IChfaCA9IHJlc3BvbnNlLmR1cmF0aW9uKSAhPSBudWxsID8gX2ggOiB2b2lkIDAsXG4gICAgICB3YXJuaW5ncyxcbiAgICAgIHJlc3BvbnNlOiB7XG4gICAgICAgIHRpbWVzdGFtcDogY3VycmVudERhdGUsXG4gICAgICAgIG1vZGVsSWQ6IHRoaXMubW9kZWxJZCxcbiAgICAgICAgaGVhZGVyczogcmVzcG9uc2VIZWFkZXJzLFxuICAgICAgICBib2R5OiByYXdSZXNwb25zZVxuICAgICAgfVxuICAgIH07XG4gIH1cbn07XG5cbi8vIHNyYy92ZXJzaW9uLnRzXG52YXIgVkVSU0lPTiA9IHRydWUgPyBcIjMuMC43XCIgOiBcIjAuMC4wLXRlc3RcIjtcblxuLy8gc3JjL29wZW5haS1wcm92aWRlci50c1xuZnVuY3Rpb24gY3JlYXRlT3BlbkFJKG9wdGlvbnMgPSB7fSkge1xuICB2YXIgX2EsIF9iO1xuICBjb25zdCBiYXNlVVJMID0gKF9hID0gd2l0aG91dFRyYWlsaW5nU2xhc2goXG4gICAgbG9hZE9wdGlvbmFsU2V0dGluZyh7XG4gICAgICBzZXR0aW5nVmFsdWU6IG9wdGlvbnMuYmFzZVVSTCxcbiAgICAgIGVudmlyb25tZW50VmFyaWFibGVOYW1lOiBcIk9QRU5BSV9CQVNFX1VSTFwiXG4gICAgfSlcbiAgKSkgIT0gbnVsbCA/IF9hIDogXCJodHRwczovL2FwaS5vcGVuYWkuY29tL3YxXCI7XG4gIGNvbnN0IHByb3ZpZGVyTmFtZSA9IChfYiA9IG9wdGlvbnMubmFtZSkgIT0gbnVsbCA/IF9iIDogXCJvcGVuYWlcIjtcbiAgY29uc3QgZ2V0SGVhZGVycyA9ICgpID0+IHdpdGhVc2VyQWdlbnRTdWZmaXgoXG4gICAge1xuICAgICAgQXV0aG9yaXphdGlvbjogYEJlYXJlciAke2xvYWRBcGlLZXkoe1xuICAgICAgICBhcGlLZXk6IG9wdGlvbnMuYXBpS2V5LFxuICAgICAgICBlbnZpcm9ubWVudFZhcmlhYmxlTmFtZTogXCJPUEVOQUlfQVBJX0tFWVwiLFxuICAgICAgICBkZXNjcmlwdGlvbjogXCJPcGVuQUlcIlxuICAgICAgfSl9YCxcbiAgICAgIFwiT3BlbkFJLU9yZ2FuaXphdGlvblwiOiBvcHRpb25zLm9yZ2FuaXphdGlvbixcbiAgICAgIFwiT3BlbkFJLVByb2plY3RcIjogb3B0aW9ucy5wcm9qZWN0LFxuICAgICAgLi4ub3B0aW9ucy5oZWFkZXJzXG4gICAgfSxcbiAgICBgYWktc2RrL29wZW5haS8ke1ZFUlNJT059YFxuICApO1xuICBjb25zdCBjcmVhdGVDaGF0TW9kZWwgPSAobW9kZWxJZCkgPT4gbmV3IE9wZW5BSUNoYXRMYW5ndWFnZU1vZGVsKG1vZGVsSWQsIHtcbiAgICBwcm92aWRlcjogYCR7cHJvdmlkZXJOYW1lfS5jaGF0YCxcbiAgICB1cmw6ICh7IHBhdGggfSkgPT4gYCR7YmFzZVVSTH0ke3BhdGh9YCxcbiAgICBoZWFkZXJzOiBnZXRIZWFkZXJzLFxuICAgIGZldGNoOiBvcHRpb25zLmZldGNoXG4gIH0pO1xuICBjb25zdCBjcmVhdGVDb21wbGV0aW9uTW9kZWwgPSAobW9kZWxJZCkgPT4gbmV3IE9wZW5BSUNvbXBsZXRpb25MYW5ndWFnZU1vZGVsKG1vZGVsSWQsIHtcbiAgICBwcm92aWRlcjogYCR7cHJvdmlkZXJOYW1lfS5jb21wbGV0aW9uYCxcbiAgICB1cmw6ICh7IHBhdGggfSkgPT4gYCR7YmFzZVVSTH0ke3BhdGh9YCxcbiAgICBoZWFkZXJzOiBnZXRIZWFkZXJzLFxuICAgIGZldGNoOiBvcHRpb25zLmZldGNoXG4gIH0pO1xuICBjb25zdCBjcmVhdGVFbWJlZGRpbmdNb2RlbCA9IChtb2RlbElkKSA9PiBuZXcgT3BlbkFJRW1iZWRkaW5nTW9kZWwobW9kZWxJZCwge1xuICAgIHByb3ZpZGVyOiBgJHtwcm92aWRlck5hbWV9LmVtYmVkZGluZ2AsXG4gICAgdXJsOiAoeyBwYXRoIH0pID0+IGAke2Jhc2VVUkx9JHtwYXRofWAsXG4gICAgaGVhZGVyczogZ2V0SGVhZGVycyxcbiAgICBmZXRjaDogb3B0aW9ucy5mZXRjaFxuICB9KTtcbiAgY29uc3QgY3JlYXRlSW1hZ2VNb2RlbCA9IChtb2RlbElkKSA9PiBuZXcgT3BlbkFJSW1hZ2VNb2RlbChtb2RlbElkLCB7XG4gICAgcHJvdmlkZXI6IGAke3Byb3ZpZGVyTmFtZX0uaW1hZ2VgLFxuICAgIHVybDogKHsgcGF0aCB9KSA9PiBgJHtiYXNlVVJMfSR7cGF0aH1gLFxuICAgIGhlYWRlcnM6IGdldEhlYWRlcnMsXG4gICAgZmV0Y2g6IG9wdGlvbnMuZmV0Y2hcbiAgfSk7XG4gIGNvbnN0IGNyZWF0ZVRyYW5zY3JpcHRpb25Nb2RlbCA9IChtb2RlbElkKSA9PiBuZXcgT3BlbkFJVHJhbnNjcmlwdGlvbk1vZGVsKG1vZGVsSWQsIHtcbiAgICBwcm92aWRlcjogYCR7cHJvdmlkZXJOYW1lfS50cmFuc2NyaXB0aW9uYCxcbiAgICB1cmw6ICh7IHBhdGggfSkgPT4gYCR7YmFzZVVSTH0ke3BhdGh9YCxcbiAgICBoZWFkZXJzOiBnZXRIZWFkZXJzLFxuICAgIGZldGNoOiBvcHRpb25zLmZldGNoXG4gIH0pO1xuICBjb25zdCBjcmVhdGVTcGVlY2hNb2RlbCA9IChtb2RlbElkKSA9PiBuZXcgT3BlbkFJU3BlZWNoTW9kZWwobW9kZWxJZCwge1xuICAgIHByb3ZpZGVyOiBgJHtwcm92aWRlck5hbWV9LnNwZWVjaGAsXG4gICAgdXJsOiAoeyBwYXRoIH0pID0+IGAke2Jhc2VVUkx9JHtwYXRofWAsXG4gICAgaGVhZGVyczogZ2V0SGVhZGVycyxcbiAgICBmZXRjaDogb3B0aW9ucy5mZXRjaFxuICB9KTtcbiAgY29uc3QgY3JlYXRlTGFuZ3VhZ2VNb2RlbCA9IChtb2RlbElkKSA9PiB7XG4gICAgaWYgKG5ldy50YXJnZXQpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihcbiAgICAgICAgXCJUaGUgT3BlbkFJIG1vZGVsIGZ1bmN0aW9uIGNhbm5vdCBiZSBjYWxsZWQgd2l0aCB0aGUgbmV3IGtleXdvcmQuXCJcbiAgICAgICk7XG4gICAgfVxuICAgIHJldHVybiBjcmVhdGVSZXNwb25zZXNNb2RlbChtb2RlbElkKTtcbiAgfTtcbiAgY29uc3QgY3JlYXRlUmVzcG9uc2VzTW9kZWwgPSAobW9kZWxJZCkgPT4ge1xuICAgIHJldHVybiBuZXcgT3BlbkFJUmVzcG9uc2VzTGFuZ3VhZ2VNb2RlbChtb2RlbElkLCB7XG4gICAgICBwcm92aWRlcjogYCR7cHJvdmlkZXJOYW1lfS5yZXNwb25zZXNgLFxuICAgICAgdXJsOiAoeyBwYXRoIH0pID0+IGAke2Jhc2VVUkx9JHtwYXRofWAsXG4gICAgICBoZWFkZXJzOiBnZXRIZWFkZXJzLFxuICAgICAgZmV0Y2g6IG9wdGlvbnMuZmV0Y2gsXG4gICAgICBmaWxlSWRQcmVmaXhlczogW1wiZmlsZS1cIl1cbiAgICB9KTtcbiAgfTtcbiAgY29uc3QgcHJvdmlkZXIgPSBmdW5jdGlvbihtb2RlbElkKSB7XG4gICAgcmV0dXJuIGNyZWF0ZUxhbmd1YWdlTW9kZWwobW9kZWxJZCk7XG4gIH07XG4gIHByb3ZpZGVyLnNwZWNpZmljYXRpb25WZXJzaW9uID0gXCJ2M1wiO1xuICBwcm92aWRlci5sYW5ndWFnZU1vZGVsID0gY3JlYXRlTGFuZ3VhZ2VNb2RlbDtcbiAgcHJvdmlkZXIuY2hhdCA9IGNyZWF0ZUNoYXRNb2RlbDtcbiAgcHJvdmlkZXIuY29tcGxldGlvbiA9IGNyZWF0ZUNvbXBsZXRpb25Nb2RlbDtcbiAgcHJvdmlkZXIucmVzcG9uc2VzID0gY3JlYXRlUmVzcG9uc2VzTW9kZWw7XG4gIHByb3ZpZGVyLmVtYmVkZGluZyA9IGNyZWF0ZUVtYmVkZGluZ01vZGVsO1xuICBwcm92aWRlci5lbWJlZGRpbmdNb2RlbCA9IGNyZWF0ZUVtYmVkZGluZ01vZGVsO1xuICBwcm92aWRlci50ZXh0RW1iZWRkaW5nID0gY3JlYXRlRW1iZWRkaW5nTW9kZWw7XG4gIHByb3ZpZGVyLnRleHRFbWJlZGRpbmdNb2RlbCA9IGNyZWF0ZUVtYmVkZGluZ01vZGVsO1xuICBwcm92aWRlci5pbWFnZSA9IGNyZWF0ZUltYWdlTW9kZWw7XG4gIHByb3ZpZGVyLmltYWdlTW9kZWwgPSBjcmVhdGVJbWFnZU1vZGVsO1xuICBwcm92aWRlci50cmFuc2NyaXB0aW9uID0gY3JlYXRlVHJhbnNjcmlwdGlvbk1vZGVsO1xuICBwcm92aWRlci50cmFuc2NyaXB0aW9uTW9kZWwgPSBjcmVhdGVUcmFuc2NyaXB0aW9uTW9kZWw7XG4gIHByb3ZpZGVyLnNwZWVjaCA9IGNyZWF0ZVNwZWVjaE1vZGVsO1xuICBwcm92aWRlci5zcGVlY2hNb2RlbCA9IGNyZWF0ZVNwZWVjaE1vZGVsO1xuICBwcm92aWRlci50b29scyA9IG9wZW5haVRvb2xzO1xuICByZXR1cm4gcHJvdmlkZXI7XG59XG52YXIgb3BlbmFpID0gY3JlYXRlT3BlbkFJKCk7XG5leHBvcnQge1xuICBWRVJTSU9OLFxuICBjcmVhdGVPcGVuQUksXG4gIG9wZW5haVxufTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWluZGV4Lm1qcy5tYXAiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@ai-sdk/openai/dist/index.mjs\n");

/***/ }),

/***/ "(rsc)/./node_modules/@ai-sdk/provider-utils/dist/index.mjs":
/*!************************************************************!*\
  !*** ./node_modules/@ai-sdk/provider-utils/dist/index.mjs ***!
  \************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   DelayedPromise: () => (/* binding */ DelayedPromise),\n/* harmony export */   DownloadError: () => (/* binding */ DownloadError),\n/* harmony export */   EventSourceParserStream: () => (/* reexport safe */ eventsource_parser_stream__WEBPACK_IMPORTED_MODULE_3__.EventSourceParserStream),\n/* harmony export */   VERSION: () => (/* binding */ VERSION),\n/* harmony export */   asSchema: () => (/* binding */ asSchema),\n/* harmony export */   combineHeaders: () => (/* binding */ combineHeaders),\n/* harmony export */   convertAsyncIteratorToReadableStream: () => (/* binding */ convertAsyncIteratorToReadableStream),\n/* harmony export */   convertBase64ToUint8Array: () => (/* binding */ convertBase64ToUint8Array),\n/* harmony export */   convertImageModelFileToDataUri: () => (/* binding */ convertImageModelFileToDataUri),\n/* harmony export */   convertToBase64: () => (/* binding */ convertToBase64),\n/* harmony export */   convertToFormData: () => (/* binding */ convertToFormData),\n/* harmony export */   convertUint8ArrayToBase64: () => (/* binding */ convertUint8ArrayToBase64),\n/* harmony export */   createBinaryResponseHandler: () => (/* binding */ createBinaryResponseHandler),\n/* harmony export */   createEventSourceResponseHandler: () => (/* binding */ createEventSourceResponseHandler),\n/* harmony export */   createIdGenerator: () => (/* binding */ createIdGenerator),\n/* harmony export */   createJsonErrorResponseHandler: () => (/* binding */ createJsonErrorResponseHandler),\n/* harmony export */   createJsonResponseHandler: () => (/* binding */ createJsonResponseHandler),\n/* harmony export */   createProviderToolFactory: () => (/* binding */ createProviderToolFactory),\n/* harmony export */   createProviderToolFactoryWithOutputSchema: () => (/* binding */ createProviderToolFactoryWithOutputSchema),\n/* harmony export */   createStatusCodeErrorResponseHandler: () => (/* binding */ createStatusCodeErrorResponseHandler),\n/* harmony export */   createToolNameMapping: () => (/* binding */ createToolNameMapping),\n/* harmony export */   delay: () => (/* binding */ delay),\n/* harmony export */   downloadBlob: () => (/* binding */ downloadBlob),\n/* harmony export */   dynamicTool: () => (/* binding */ dynamicTool),\n/* harmony export */   executeTool: () => (/* binding */ executeTool),\n/* harmony export */   extractResponseHeaders: () => (/* binding */ extractResponseHeaders),\n/* harmony export */   generateId: () => (/* binding */ generateId),\n/* harmony export */   getErrorMessage: () => (/* binding */ getErrorMessage),\n/* harmony export */   getFromApi: () => (/* binding */ getFromApi),\n/* harmony export */   getRuntimeEnvironmentUserAgent: () => (/* binding */ getRuntimeEnvironmentUserAgent),\n/* harmony export */   injectJsonInstructionIntoMessages: () => (/* binding */ injectJsonInstructionIntoMessages),\n/* harmony export */   isAbortError: () => (/* binding */ isAbortError),\n/* harmony export */   isNonNullable: () => (/* binding */ isNonNullable),\n/* harmony export */   isParsableJson: () => (/* binding */ isParsableJson),\n/* harmony export */   isUrlSupported: () => (/* binding */ isUrlSupported),\n/* harmony export */   jsonSchema: () => (/* binding */ jsonSchema),\n/* harmony export */   lazySchema: () => (/* binding */ lazySchema),\n/* harmony export */   loadApiKey: () => (/* binding */ loadApiKey),\n/* harmony export */   loadOptionalSetting: () => (/* binding */ loadOptionalSetting),\n/* harmony export */   loadSetting: () => (/* binding */ loadSetting),\n/* harmony export */   mediaTypeToExtension: () => (/* binding */ mediaTypeToExtension),\n/* harmony export */   normalizeHeaders: () => (/* binding */ normalizeHeaders),\n/* harmony export */   parseJSON: () => (/* binding */ parseJSON),\n/* harmony export */   parseJsonEventStream: () => (/* binding */ parseJsonEventStream),\n/* harmony export */   parseProviderOptions: () => (/* binding */ parseProviderOptions),\n/* harmony export */   postFormDataToApi: () => (/* binding */ postFormDataToApi),\n/* harmony export */   postJsonToApi: () => (/* binding */ postJsonToApi),\n/* harmony export */   postToApi: () => (/* binding */ postToApi),\n/* harmony export */   removeUndefinedEntries: () => (/* binding */ removeUndefinedEntries),\n/* harmony export */   resolve: () => (/* binding */ resolve),\n/* harmony export */   safeParseJSON: () => (/* binding */ safeParseJSON),\n/* harmony export */   safeValidateTypes: () => (/* binding */ safeValidateTypes),\n/* harmony export */   tool: () => (/* binding */ tool),\n/* harmony export */   validateTypes: () => (/* binding */ validateTypes),\n/* harmony export */   withUserAgentSuffix: () => (/* binding */ withUserAgentSuffix),\n/* harmony export */   withoutTrailingSlash: () => (/* binding */ withoutTrailingSlash),\n/* harmony export */   zodSchema: () => (/* binding */ zodSchema)\n/* harmony export */ });\n/* harmony import */ var _ai_sdk_provider__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @ai-sdk/provider */ \"(rsc)/./node_modules/@ai-sdk/provider/dist/index.mjs\");\n/* harmony import */ var zod_v4__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! zod/v4 */ \"(rsc)/./node_modules/zod/v4/index.js\");\n/* harmony import */ var zod_v3__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! zod/v3 */ \"(rsc)/./node_modules/zod/v3/index.js\");\n/* harmony import */ var eventsource_parser_stream__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! eventsource-parser/stream */ \"(rsc)/./node_modules/eventsource-parser/dist/stream.js\");\n// src/combine-headers.ts\nfunction combineHeaders(...headers) {\n  return headers.reduce(\n    (combinedHeaders, currentHeaders) => ({\n      ...combinedHeaders,\n      ...currentHeaders != null ? currentHeaders : {}\n    }),\n    {}\n  );\n}\n\n// src/convert-async-iterator-to-readable-stream.ts\nfunction convertAsyncIteratorToReadableStream(iterator) {\n  let cancelled = false;\n  return new ReadableStream({\n    /**\n     * Called when the consumer wants to pull more data from the stream.\n     *\n     * @param {ReadableStreamDefaultController<T>} controller - The controller to enqueue data into the stream.\n     * @returns {Promise<void>}\n     */\n    async pull(controller) {\n      if (cancelled) return;\n      try {\n        const { value, done } = await iterator.next();\n        if (done) {\n          controller.close();\n        } else {\n          controller.enqueue(value);\n        }\n      } catch (error) {\n        controller.error(error);\n      }\n    },\n    /**\n     * Called when the consumer cancels the stream.\n     */\n    async cancel(reason) {\n      cancelled = true;\n      if (iterator.return) {\n        try {\n          await iterator.return(reason);\n        } catch (e) {\n        }\n      }\n    }\n  });\n}\n\n// src/create-tool-name-mapping.ts\nfunction createToolNameMapping({\n  tools = [],\n  providerToolNames\n}) {\n  const customToolNameToProviderToolName = {};\n  const providerToolNameToCustomToolName = {};\n  for (const tool2 of tools) {\n    if (tool2.type === \"provider\" && tool2.id in providerToolNames) {\n      const providerToolName = providerToolNames[tool2.id];\n      customToolNameToProviderToolName[tool2.name] = providerToolName;\n      providerToolNameToCustomToolName[providerToolName] = tool2.name;\n    }\n  }\n  return {\n    toProviderToolName: (customToolName) => {\n      var _a2;\n      return (_a2 = customToolNameToProviderToolName[customToolName]) != null ? _a2 : customToolName;\n    },\n    toCustomToolName: (providerToolName) => {\n      var _a2;\n      return (_a2 = providerToolNameToCustomToolName[providerToolName]) != null ? _a2 : providerToolName;\n    }\n  };\n}\n\n// src/delay.ts\nasync function delay(delayInMs, options) {\n  if (delayInMs == null) {\n    return Promise.resolve();\n  }\n  const signal = options == null ? void 0 : options.abortSignal;\n  return new Promise((resolve2, reject) => {\n    if (signal == null ? void 0 : signal.aborted) {\n      reject(createAbortError());\n      return;\n    }\n    const timeoutId = setTimeout(() => {\n      cleanup();\n      resolve2();\n    }, delayInMs);\n    const cleanup = () => {\n      clearTimeout(timeoutId);\n      signal == null ? void 0 : signal.removeEventListener(\"abort\", onAbort);\n    };\n    const onAbort = () => {\n      cleanup();\n      reject(createAbortError());\n    };\n    signal == null ? void 0 : signal.addEventListener(\"abort\", onAbort);\n  });\n}\nfunction createAbortError() {\n  return new DOMException(\"Delay was aborted\", \"AbortError\");\n}\n\n// src/delayed-promise.ts\nvar DelayedPromise = class {\n  constructor() {\n    this.status = { type: \"pending\" };\n    this._resolve = void 0;\n    this._reject = void 0;\n  }\n  get promise() {\n    if (this._promise) {\n      return this._promise;\n    }\n    this._promise = new Promise((resolve2, reject) => {\n      if (this.status.type === \"resolved\") {\n        resolve2(this.status.value);\n      } else if (this.status.type === \"rejected\") {\n        reject(this.status.error);\n      }\n      this._resolve = resolve2;\n      this._reject = reject;\n    });\n    return this._promise;\n  }\n  resolve(value) {\n    var _a2;\n    this.status = { type: \"resolved\", value };\n    if (this._promise) {\n      (_a2 = this._resolve) == null ? void 0 : _a2.call(this, value);\n    }\n  }\n  reject(error) {\n    var _a2;\n    this.status = { type: \"rejected\", error };\n    if (this._promise) {\n      (_a2 = this._reject) == null ? void 0 : _a2.call(this, error);\n    }\n  }\n  isResolved() {\n    return this.status.type === \"resolved\";\n  }\n  isRejected() {\n    return this.status.type === \"rejected\";\n  }\n  isPending() {\n    return this.status.type === \"pending\";\n  }\n};\n\n// src/extract-response-headers.ts\nfunction extractResponseHeaders(response) {\n  return Object.fromEntries([...response.headers]);\n}\n\n// src/uint8-utils.ts\nvar { btoa, atob } = globalThis;\nfunction convertBase64ToUint8Array(base64String) {\n  const base64Url = base64String.replace(/-/g, \"+\").replace(/_/g, \"/\");\n  const latin1string = atob(base64Url);\n  return Uint8Array.from(latin1string, (byte) => byte.codePointAt(0));\n}\nfunction convertUint8ArrayToBase64(array) {\n  let latin1string = \"\";\n  for (let i = 0; i < array.length; i++) {\n    latin1string += String.fromCodePoint(array[i]);\n  }\n  return btoa(latin1string);\n}\nfunction convertToBase64(value) {\n  return value instanceof Uint8Array ? convertUint8ArrayToBase64(value) : value;\n}\n\n// src/convert-image-model-file-to-data-uri.ts\nfunction convertImageModelFileToDataUri(file) {\n  if (file.type === \"url\") return file.url;\n  return `data:${file.mediaType};base64,${typeof file.data === \"string\" ? file.data : convertUint8ArrayToBase64(file.data)}`;\n}\n\n// src/convert-to-form-data.ts\nfunction convertToFormData(input, options = {}) {\n  const { useArrayBrackets = true } = options;\n  const formData = new FormData();\n  for (const [key, value] of Object.entries(input)) {\n    if (value == null) {\n      continue;\n    }\n    if (Array.isArray(value)) {\n      if (value.length === 1) {\n        formData.append(key, value[0]);\n        continue;\n      }\n      const arrayKey = useArrayBrackets ? `${key}[]` : key;\n      for (const item of value) {\n        formData.append(arrayKey, item);\n      }\n      continue;\n    }\n    formData.append(key, value);\n  }\n  return formData;\n}\n\n// src/download-error.ts\n\nvar name = \"AI_DownloadError\";\nvar marker = `vercel.ai.error.${name}`;\nvar symbol = Symbol.for(marker);\nvar _a, _b;\nvar DownloadError = class extends (_b = _ai_sdk_provider__WEBPACK_IMPORTED_MODULE_0__.AISDKError, _a = symbol, _b) {\n  constructor({\n    url,\n    statusCode,\n    statusText,\n    cause,\n    message = cause == null ? `Failed to download ${url}: ${statusCode} ${statusText}` : `Failed to download ${url}: ${cause}`\n  }) {\n    super({ name, message, cause });\n    this[_a] = true;\n    this.url = url;\n    this.statusCode = statusCode;\n    this.statusText = statusText;\n  }\n  static isInstance(error) {\n    return _ai_sdk_provider__WEBPACK_IMPORTED_MODULE_0__.AISDKError.hasMarker(error, marker);\n  }\n};\n\n// src/download-blob.ts\nasync function downloadBlob(url) {\n  try {\n    const response = await fetch(url);\n    if (!response.ok) {\n      throw new DownloadError({\n        url,\n        statusCode: response.status,\n        statusText: response.statusText\n      });\n    }\n    return await response.blob();\n  } catch (error) {\n    if (DownloadError.isInstance(error)) {\n      throw error;\n    }\n    throw new DownloadError({ url, cause: error });\n  }\n}\n\n// src/generate-id.ts\n\nvar createIdGenerator = ({\n  prefix,\n  size = 16,\n  alphabet = \"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz\",\n  separator = \"-\"\n} = {}) => {\n  const generator = () => {\n    const alphabetLength = alphabet.length;\n    const chars = new Array(size);\n    for (let i = 0; i < size; i++) {\n      chars[i] = alphabet[Math.random() * alphabetLength | 0];\n    }\n    return chars.join(\"\");\n  };\n  if (prefix == null) {\n    return generator;\n  }\n  if (alphabet.includes(separator)) {\n    throw new _ai_sdk_provider__WEBPACK_IMPORTED_MODULE_0__.InvalidArgumentError({\n      argument: \"separator\",\n      message: `The separator \"${separator}\" must not be part of the alphabet \"${alphabet}\".`\n    });\n  }\n  return () => `${prefix}${separator}${generator()}`;\n};\nvar generateId = createIdGenerator();\n\n// src/get-error-message.ts\nfunction getErrorMessage(error) {\n  if (error == null) {\n    return \"unknown error\";\n  }\n  if (typeof error === \"string\") {\n    return error;\n  }\n  if (error instanceof Error) {\n    return error.message;\n  }\n  return JSON.stringify(error);\n}\n\n// src/get-from-api.ts\n\n\n// src/handle-fetch-error.ts\n\n\n// src/is-abort-error.ts\nfunction isAbortError(error) {\n  return (error instanceof Error || error instanceof DOMException) && (error.name === \"AbortError\" || error.name === \"ResponseAborted\" || // Next.js\n  error.name === \"TimeoutError\");\n}\n\n// src/handle-fetch-error.ts\nvar FETCH_FAILED_ERROR_MESSAGES = [\"fetch failed\", \"failed to fetch\"];\nfunction handleFetchError({\n  error,\n  url,\n  requestBodyValues\n}) {\n  if (isAbortError(error)) {\n    return error;\n  }\n  if (error instanceof TypeError && FETCH_FAILED_ERROR_MESSAGES.includes(error.message.toLowerCase())) {\n    const cause = error.cause;\n    if (cause != null) {\n      return new _ai_sdk_provider__WEBPACK_IMPORTED_MODULE_0__.APICallError({\n        message: `Cannot connect to API: ${cause.message}`,\n        cause,\n        url,\n        requestBodyValues,\n        isRetryable: true\n        // retry when network error\n      });\n    }\n  }\n  return error;\n}\n\n// src/get-runtime-environment-user-agent.ts\nfunction getRuntimeEnvironmentUserAgent(globalThisAny = globalThis) {\n  var _a2, _b2, _c;\n  if (globalThisAny.window) {\n    return `runtime/browser`;\n  }\n  if ((_a2 = globalThisAny.navigator) == null ? void 0 : _a2.userAgent) {\n    return `runtime/${globalThisAny.navigator.userAgent.toLowerCase()}`;\n  }\n  if ((_c = (_b2 = globalThisAny.process) == null ? void 0 : _b2.versions) == null ? void 0 : _c.node) {\n    return `runtime/node.js/${globalThisAny.process.version.substring(0)}`;\n  }\n  if (globalThisAny.EdgeRuntime) {\n    return `runtime/vercel-edge`;\n  }\n  return \"runtime/unknown\";\n}\n\n// src/normalize-headers.ts\nfunction normalizeHeaders(headers) {\n  if (headers == null) {\n    return {};\n  }\n  const normalized = {};\n  if (headers instanceof Headers) {\n    headers.forEach((value, key) => {\n      normalized[key.toLowerCase()] = value;\n    });\n  } else {\n    if (!Array.isArray(headers)) {\n      headers = Object.entries(headers);\n    }\n    for (const [key, value] of headers) {\n      if (value != null) {\n        normalized[key.toLowerCase()] = value;\n      }\n    }\n  }\n  return normalized;\n}\n\n// src/with-user-agent-suffix.ts\nfunction withUserAgentSuffix(headers, ...userAgentSuffixParts) {\n  const normalizedHeaders = new Headers(normalizeHeaders(headers));\n  const currentUserAgentHeader = normalizedHeaders.get(\"user-agent\") || \"\";\n  normalizedHeaders.set(\n    \"user-agent\",\n    [currentUserAgentHeader, ...userAgentSuffixParts].filter(Boolean).join(\" \")\n  );\n  return Object.fromEntries(normalizedHeaders.entries());\n}\n\n// src/version.ts\nvar VERSION =  true ? \"4.0.4\" : 0;\n\n// src/get-from-api.ts\nvar getOriginalFetch = () => globalThis.fetch;\nvar getFromApi = async ({\n  url,\n  headers = {},\n  successfulResponseHandler,\n  failedResponseHandler,\n  abortSignal,\n  fetch: fetch2 = getOriginalFetch()\n}) => {\n  try {\n    const response = await fetch2(url, {\n      method: \"GET\",\n      headers: withUserAgentSuffix(\n        headers,\n        `ai-sdk/provider-utils/${VERSION}`,\n        getRuntimeEnvironmentUserAgent()\n      ),\n      signal: abortSignal\n    });\n    const responseHeaders = extractResponseHeaders(response);\n    if (!response.ok) {\n      let errorInformation;\n      try {\n        errorInformation = await failedResponseHandler({\n          response,\n          url,\n          requestBodyValues: {}\n        });\n      } catch (error) {\n        if (isAbortError(error) || _ai_sdk_provider__WEBPACK_IMPORTED_MODULE_0__.APICallError.isInstance(error)) {\n          throw error;\n        }\n        throw new _ai_sdk_provider__WEBPACK_IMPORTED_MODULE_0__.APICallError({\n          message: \"Failed to process error response\",\n          cause: error,\n          statusCode: response.status,\n          url,\n          responseHeaders,\n          requestBodyValues: {}\n        });\n      }\n      throw errorInformation.value;\n    }\n    try {\n      return await successfulResponseHandler({\n        response,\n        url,\n        requestBodyValues: {}\n      });\n    } catch (error) {\n      if (error instanceof Error) {\n        if (isAbortError(error) || _ai_sdk_provider__WEBPACK_IMPORTED_MODULE_0__.APICallError.isInstance(error)) {\n          throw error;\n        }\n      }\n      throw new _ai_sdk_provider__WEBPACK_IMPORTED_MODULE_0__.APICallError({\n        message: \"Failed to process successful response\",\n        cause: error,\n        statusCode: response.status,\n        url,\n        responseHeaders,\n        requestBodyValues: {}\n      });\n    }\n  } catch (error) {\n    throw handleFetchError({ error, url, requestBodyValues: {} });\n  }\n};\n\n// src/inject-json-instruction.ts\nvar DEFAULT_SCHEMA_PREFIX = \"JSON schema:\";\nvar DEFAULT_SCHEMA_SUFFIX = \"You MUST answer with a JSON object that matches the JSON schema above.\";\nvar DEFAULT_GENERIC_SUFFIX = \"You MUST answer with JSON.\";\nfunction injectJsonInstruction({\n  prompt,\n  schema,\n  schemaPrefix = schema != null ? DEFAULT_SCHEMA_PREFIX : void 0,\n  schemaSuffix = schema != null ? DEFAULT_SCHEMA_SUFFIX : DEFAULT_GENERIC_SUFFIX\n}) {\n  return [\n    prompt != null && prompt.length > 0 ? prompt : void 0,\n    prompt != null && prompt.length > 0 ? \"\" : void 0,\n    // add a newline if prompt is not null\n    schemaPrefix,\n    schema != null ? JSON.stringify(schema) : void 0,\n    schemaSuffix\n  ].filter((line) => line != null).join(\"\\n\");\n}\nfunction injectJsonInstructionIntoMessages({\n  messages,\n  schema,\n  schemaPrefix,\n  schemaSuffix\n}) {\n  var _a2, _b2;\n  const systemMessage = ((_a2 = messages[0]) == null ? void 0 : _a2.role) === \"system\" ? { ...messages[0] } : { role: \"system\", content: \"\" };\n  systemMessage.content = injectJsonInstruction({\n    prompt: systemMessage.content,\n    schema,\n    schemaPrefix,\n    schemaSuffix\n  });\n  return [\n    systemMessage,\n    ...((_b2 = messages[0]) == null ? void 0 : _b2.role) === \"system\" ? messages.slice(1) : messages\n  ];\n}\n\n// src/is-non-nullable.ts\nfunction isNonNullable(value) {\n  return value != null;\n}\n\n// src/is-url-supported.ts\nfunction isUrlSupported({\n  mediaType,\n  url,\n  supportedUrls\n}) {\n  url = url.toLowerCase();\n  mediaType = mediaType.toLowerCase();\n  return Object.entries(supportedUrls).map(([key, value]) => {\n    const mediaType2 = key.toLowerCase();\n    return mediaType2 === \"*\" || mediaType2 === \"*/*\" ? { mediaTypePrefix: \"\", regexes: value } : { mediaTypePrefix: mediaType2.replace(/\\*/, \"\"), regexes: value };\n  }).filter(({ mediaTypePrefix }) => mediaType.startsWith(mediaTypePrefix)).flatMap(({ regexes }) => regexes).some((pattern) => pattern.test(url));\n}\n\n// src/load-api-key.ts\n\nfunction loadApiKey({\n  apiKey,\n  environmentVariableName,\n  apiKeyParameterName = \"apiKey\",\n  description\n}) {\n  if (typeof apiKey === \"string\") {\n    return apiKey;\n  }\n  if (apiKey != null) {\n    throw new _ai_sdk_provider__WEBPACK_IMPORTED_MODULE_0__.LoadAPIKeyError({\n      message: `${description} API key must be a string.`\n    });\n  }\n  if (typeof process === \"undefined\") {\n    throw new _ai_sdk_provider__WEBPACK_IMPORTED_MODULE_0__.LoadAPIKeyError({\n      message: `${description} API key is missing. Pass it using the '${apiKeyParameterName}' parameter. Environment variables is not supported in this environment.`\n    });\n  }\n  apiKey = process.env[environmentVariableName];\n  if (apiKey == null) {\n    throw new _ai_sdk_provider__WEBPACK_IMPORTED_MODULE_0__.LoadAPIKeyError({\n      message: `${description} API key is missing. Pass it using the '${apiKeyParameterName}' parameter or the ${environmentVariableName} environment variable.`\n    });\n  }\n  if (typeof apiKey !== \"string\") {\n    throw new _ai_sdk_provider__WEBPACK_IMPORTED_MODULE_0__.LoadAPIKeyError({\n      message: `${description} API key must be a string. The value of the ${environmentVariableName} environment variable is not a string.`\n    });\n  }\n  return apiKey;\n}\n\n// src/load-optional-setting.ts\nfunction loadOptionalSetting({\n  settingValue,\n  environmentVariableName\n}) {\n  if (typeof settingValue === \"string\") {\n    return settingValue;\n  }\n  if (settingValue != null || typeof process === \"undefined\") {\n    return void 0;\n  }\n  settingValue = process.env[environmentVariableName];\n  if (settingValue == null || typeof settingValue !== \"string\") {\n    return void 0;\n  }\n  return settingValue;\n}\n\n// src/load-setting.ts\n\nfunction loadSetting({\n  settingValue,\n  environmentVariableName,\n  settingName,\n  description\n}) {\n  if (typeof settingValue === \"string\") {\n    return settingValue;\n  }\n  if (settingValue != null) {\n    throw new _ai_sdk_provider__WEBPACK_IMPORTED_MODULE_0__.LoadSettingError({\n      message: `${description} setting must be a string.`\n    });\n  }\n  if (typeof process === \"undefined\") {\n    throw new _ai_sdk_provider__WEBPACK_IMPORTED_MODULE_0__.LoadSettingError({\n      message: `${description} setting is missing. Pass it using the '${settingName}' parameter. Environment variables is not supported in this environment.`\n    });\n  }\n  settingValue = process.env[environmentVariableName];\n  if (settingValue == null) {\n    throw new _ai_sdk_provider__WEBPACK_IMPORTED_MODULE_0__.LoadSettingError({\n      message: `${description} setting is missing. Pass it using the '${settingName}' parameter or the ${environmentVariableName} environment variable.`\n    });\n  }\n  if (typeof settingValue !== \"string\") {\n    throw new _ai_sdk_provider__WEBPACK_IMPORTED_MODULE_0__.LoadSettingError({\n      message: `${description} setting must be a string. The value of the ${environmentVariableName} environment variable is not a string.`\n    });\n  }\n  return settingValue;\n}\n\n// src/media-type-to-extension.ts\nfunction mediaTypeToExtension(mediaType) {\n  var _a2;\n  const [_type, subtype = \"\"] = mediaType.toLowerCase().split(\"/\");\n  return (_a2 = {\n    mpeg: \"mp3\",\n    \"x-wav\": \"wav\",\n    opus: \"ogg\",\n    mp4: \"m4a\",\n    \"x-m4a\": \"m4a\"\n  }[subtype]) != null ? _a2 : subtype;\n}\n\n// src/parse-json.ts\n\n\n// src/secure-json-parse.ts\nvar suspectProtoRx = /\"__proto__\"\\s*:/;\nvar suspectConstructorRx = /\"constructor\"\\s*:/;\nfunction _parse(text) {\n  const obj = JSON.parse(text);\n  if (obj === null || typeof obj !== \"object\") {\n    return obj;\n  }\n  if (suspectProtoRx.test(text) === false && suspectConstructorRx.test(text) === false) {\n    return obj;\n  }\n  return filter(obj);\n}\nfunction filter(obj) {\n  let next = [obj];\n  while (next.length) {\n    const nodes = next;\n    next = [];\n    for (const node of nodes) {\n      if (Object.prototype.hasOwnProperty.call(node, \"__proto__\")) {\n        throw new SyntaxError(\"Object contains forbidden prototype property\");\n      }\n      if (Object.prototype.hasOwnProperty.call(node, \"constructor\") && Object.prototype.hasOwnProperty.call(node.constructor, \"prototype\")) {\n        throw new SyntaxError(\"Object contains forbidden prototype property\");\n      }\n      for (const key in node) {\n        const value = node[key];\n        if (value && typeof value === \"object\") {\n          next.push(value);\n        }\n      }\n    }\n  }\n  return obj;\n}\nfunction secureJsonParse(text) {\n  const { stackTraceLimit } = Error;\n  try {\n    Error.stackTraceLimit = 0;\n  } catch (e) {\n    return _parse(text);\n  }\n  try {\n    return _parse(text);\n  } finally {\n    Error.stackTraceLimit = stackTraceLimit;\n  }\n}\n\n// src/validate-types.ts\n\n\n// src/schema.ts\n\n\n\n// src/add-additional-properties-to-json-schema.ts\nfunction addAdditionalPropertiesToJsonSchema(jsonSchema2) {\n  if (jsonSchema2.type === \"object\" || Array.isArray(jsonSchema2.type) && jsonSchema2.type.includes(\"object\")) {\n    jsonSchema2.additionalProperties = false;\n    const { properties } = jsonSchema2;\n    if (properties != null) {\n      for (const key of Object.keys(properties)) {\n        properties[key] = visit(properties[key]);\n      }\n    }\n  }\n  if (jsonSchema2.items != null) {\n    jsonSchema2.items = Array.isArray(jsonSchema2.items) ? jsonSchema2.items.map(visit) : visit(jsonSchema2.items);\n  }\n  if (jsonSchema2.anyOf != null) {\n    jsonSchema2.anyOf = jsonSchema2.anyOf.map(visit);\n  }\n  if (jsonSchema2.allOf != null) {\n    jsonSchema2.allOf = jsonSchema2.allOf.map(visit);\n  }\n  if (jsonSchema2.oneOf != null) {\n    jsonSchema2.oneOf = jsonSchema2.oneOf.map(visit);\n  }\n  const { definitions } = jsonSchema2;\n  if (definitions != null) {\n    for (const key of Object.keys(definitions)) {\n      definitions[key] = visit(definitions[key]);\n    }\n  }\n  return jsonSchema2;\n}\nfunction visit(def) {\n  if (typeof def === \"boolean\") return def;\n  return addAdditionalPropertiesToJsonSchema(def);\n}\n\n// src/to-json-schema/zod3-to-json-schema/options.ts\nvar ignoreOverride = Symbol(\n  \"Let zodToJsonSchema decide on which parser to use\"\n);\nvar defaultOptions = {\n  name: void 0,\n  $refStrategy: \"root\",\n  basePath: [\"#\"],\n  effectStrategy: \"input\",\n  pipeStrategy: \"all\",\n  dateStrategy: \"format:date-time\",\n  mapStrategy: \"entries\",\n  removeAdditionalStrategy: \"passthrough\",\n  allowedAdditionalProperties: true,\n  rejectedAdditionalProperties: false,\n  definitionPath: \"definitions\",\n  strictUnions: false,\n  definitions: {},\n  errorMessages: false,\n  patternStrategy: \"escape\",\n  applyRegexFlags: false,\n  emailStrategy: \"format:email\",\n  base64Strategy: \"contentEncoding:base64\",\n  nameStrategy: \"ref\"\n};\nvar getDefaultOptions = (options) => typeof options === \"string\" ? {\n  ...defaultOptions,\n  name: options\n} : {\n  ...defaultOptions,\n  ...options\n};\n\n// src/to-json-schema/zod3-to-json-schema/select-parser.ts\n\n\n// src/to-json-schema/zod3-to-json-schema/parsers/any.ts\nfunction parseAnyDef() {\n  return {};\n}\n\n// src/to-json-schema/zod3-to-json-schema/parsers/array.ts\n\nfunction parseArrayDef(def, refs) {\n  var _a2, _b2, _c;\n  const res = {\n    type: \"array\"\n  };\n  if (((_a2 = def.type) == null ? void 0 : _a2._def) && ((_c = (_b2 = def.type) == null ? void 0 : _b2._def) == null ? void 0 : _c.typeName) !== zod_v3__WEBPACK_IMPORTED_MODULE_2__.ZodFirstPartyTypeKind.ZodAny) {\n    res.items = parseDef(def.type._def, {\n      ...refs,\n      currentPath: [...refs.currentPath, \"items\"]\n    });\n  }\n  if (def.minLength) {\n    res.minItems = def.minLength.value;\n  }\n  if (def.maxLength) {\n    res.maxItems = def.maxLength.value;\n  }\n  if (def.exactLength) {\n    res.minItems = def.exactLength.value;\n    res.maxItems = def.exactLength.value;\n  }\n  return res;\n}\n\n// src/to-json-schema/zod3-to-json-schema/parsers/bigint.ts\nfunction parseBigintDef(def) {\n  const res = {\n    type: \"integer\",\n    format: \"int64\"\n  };\n  if (!def.checks) return res;\n  for (const check of def.checks) {\n    switch (check.kind) {\n      case \"min\":\n        if (check.inclusive) {\n          res.minimum = check.value;\n        } else {\n          res.exclusiveMinimum = check.value;\n        }\n        break;\n      case \"max\":\n        if (check.inclusive) {\n          res.maximum = check.value;\n        } else {\n          res.exclusiveMaximum = check.value;\n        }\n        break;\n      case \"multipleOf\":\n        res.multipleOf = check.value;\n        break;\n    }\n  }\n  return res;\n}\n\n// src/to-json-schema/zod3-to-json-schema/parsers/boolean.ts\nfunction parseBooleanDef() {\n  return { type: \"boolean\" };\n}\n\n// src/to-json-schema/zod3-to-json-schema/parsers/branded.ts\nfunction parseBrandedDef(_def, refs) {\n  return parseDef(_def.type._def, refs);\n}\n\n// src/to-json-schema/zod3-to-json-schema/parsers/catch.ts\nvar parseCatchDef = (def, refs) => {\n  return parseDef(def.innerType._def, refs);\n};\n\n// src/to-json-schema/zod3-to-json-schema/parsers/date.ts\nfunction parseDateDef(def, refs, overrideDateStrategy) {\n  const strategy = overrideDateStrategy != null ? overrideDateStrategy : refs.dateStrategy;\n  if (Array.isArray(strategy)) {\n    return {\n      anyOf: strategy.map((item, i) => parseDateDef(def, refs, item))\n    };\n  }\n  switch (strategy) {\n    case \"string\":\n    case \"format:date-time\":\n      return {\n        type: \"string\",\n        format: \"date-time\"\n      };\n    case \"format:date\":\n      return {\n        type: \"string\",\n        format: \"date\"\n      };\n    case \"integer\":\n      return integerDateParser(def);\n  }\n}\nvar integerDateParser = (def) => {\n  const res = {\n    type: \"integer\",\n    format: \"unix-time\"\n  };\n  for (const check of def.checks) {\n    switch (check.kind) {\n      case \"min\":\n        res.minimum = check.value;\n        break;\n      case \"max\":\n        res.maximum = check.value;\n        break;\n    }\n  }\n  return res;\n};\n\n// src/to-json-schema/zod3-to-json-schema/parsers/default.ts\nfunction parseDefaultDef(_def, refs) {\n  return {\n    ...parseDef(_def.innerType._def, refs),\n    default: _def.defaultValue()\n  };\n}\n\n// src/to-json-schema/zod3-to-json-schema/parsers/effects.ts\nfunction parseEffectsDef(_def, refs) {\n  return refs.effectStrategy === \"input\" ? parseDef(_def.schema._def, refs) : parseAnyDef();\n}\n\n// src/to-json-schema/zod3-to-json-schema/parsers/enum.ts\nfunction parseEnumDef(def) {\n  return {\n    type: \"string\",\n    enum: Array.from(def.values)\n  };\n}\n\n// src/to-json-schema/zod3-to-json-schema/parsers/intersection.ts\nvar isJsonSchema7AllOfType = (type) => {\n  if (\"type\" in type && type.type === \"string\") return false;\n  return \"allOf\" in type;\n};\nfunction parseIntersectionDef(def, refs) {\n  const allOf = [\n    parseDef(def.left._def, {\n      ...refs,\n      currentPath: [...refs.currentPath, \"allOf\", \"0\"]\n    }),\n    parseDef(def.right._def, {\n      ...refs,\n      currentPath: [...refs.currentPath, \"allOf\", \"1\"]\n    })\n  ].filter((x) => !!x);\n  const mergedAllOf = [];\n  allOf.forEach((schema) => {\n    if (isJsonSchema7AllOfType(schema)) {\n      mergedAllOf.push(...schema.allOf);\n    } else {\n      let nestedSchema = schema;\n      if (\"additionalProperties\" in schema && schema.additionalProperties === false) {\n        const { additionalProperties, ...rest } = schema;\n        nestedSchema = rest;\n      }\n      mergedAllOf.push(nestedSchema);\n    }\n  });\n  return mergedAllOf.length ? { allOf: mergedAllOf } : void 0;\n}\n\n// src/to-json-schema/zod3-to-json-schema/parsers/literal.ts\nfunction parseLiteralDef(def) {\n  const parsedType = typeof def.value;\n  if (parsedType !== \"bigint\" && parsedType !== \"number\" && parsedType !== \"boolean\" && parsedType !== \"string\") {\n    return {\n      type: Array.isArray(def.value) ? \"array\" : \"object\"\n    };\n  }\n  return {\n    type: parsedType === \"bigint\" ? \"integer\" : parsedType,\n    const: def.value\n  };\n}\n\n// src/to-json-schema/zod3-to-json-schema/parsers/record.ts\n\n\n// src/to-json-schema/zod3-to-json-schema/parsers/string.ts\nvar emojiRegex = void 0;\nvar zodPatterns = {\n  /**\n   * `c` was changed to `[cC]` to replicate /i flag\n   */\n  cuid: /^[cC][^\\s-]{8,}$/,\n  cuid2: /^[0-9a-z]+$/,\n  ulid: /^[0-9A-HJKMNP-TV-Z]{26}$/,\n  /**\n   * `a-z` was added to replicate /i flag\n   */\n  email: /^(?!\\.)(?!.*\\.\\.)([a-zA-Z0-9_'+\\-\\.]*)[a-zA-Z0-9_+-]@([a-zA-Z0-9][a-zA-Z0-9\\-]*\\.)+[a-zA-Z]{2,}$/,\n  /**\n   * Constructed a valid Unicode RegExp\n   *\n   * Lazily instantiate since this type of regex isn't supported\n   * in all envs (e.g. React Native).\n   *\n   * See:\n   * https://github.com/colinhacks/zod/issues/2433\n   * Fix in Zod:\n   * https://github.com/colinhacks/zod/commit/9340fd51e48576a75adc919bff65dbc4a5d4c99b\n   */\n  emoji: () => {\n    if (emojiRegex === void 0) {\n      emojiRegex = RegExp(\n        \"^(\\\\p{Extended_Pictographic}|\\\\p{Emoji_Component})+$\",\n        \"u\"\n      );\n    }\n    return emojiRegex;\n  },\n  /**\n   * Unused\n   */\n  uuid: /^[0-9a-fA-F]{8}\\b-[0-9a-fA-F]{4}\\b-[0-9a-fA-F]{4}\\b-[0-9a-fA-F]{4}\\b-[0-9a-fA-F]{12}$/,\n  /**\n   * Unused\n   */\n  ipv4: /^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,\n  ipv4Cidr: /^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\\/(3[0-2]|[12]?[0-9])$/,\n  /**\n   * Unused\n   */\n  ipv6: /^(([a-f0-9]{1,4}:){7}|::([a-f0-9]{1,4}:){0,6}|([a-f0-9]{1,4}:){1}:([a-f0-9]{1,4}:){0,5}|([a-f0-9]{1,4}:){2}:([a-f0-9]{1,4}:){0,4}|([a-f0-9]{1,4}:){3}:([a-f0-9]{1,4}:){0,3}|([a-f0-9]{1,4}:){4}:([a-f0-9]{1,4}:){0,2}|([a-f0-9]{1,4}:){5}:([a-f0-9]{1,4}:){0,1})([a-f0-9]{1,4}|(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2})))$/,\n  ipv6Cidr: /^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,\n  base64: /^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,\n  base64url: /^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,\n  nanoid: /^[a-zA-Z0-9_-]{21}$/,\n  jwt: /^[A-Za-z0-9-_]+\\.[A-Za-z0-9-_]+\\.[A-Za-z0-9-_]*$/\n};\nfunction parseStringDef(def, refs) {\n  const res = {\n    type: \"string\"\n  };\n  if (def.checks) {\n    for (const check of def.checks) {\n      switch (check.kind) {\n        case \"min\":\n          res.minLength = typeof res.minLength === \"number\" ? Math.max(res.minLength, check.value) : check.value;\n          break;\n        case \"max\":\n          res.maxLength = typeof res.maxLength === \"number\" ? Math.min(res.maxLength, check.value) : check.value;\n          break;\n        case \"email\":\n          switch (refs.emailStrategy) {\n            case \"format:email\":\n              addFormat(res, \"email\", check.message, refs);\n              break;\n            case \"format:idn-email\":\n              addFormat(res, \"idn-email\", check.message, refs);\n              break;\n            case \"pattern:zod\":\n              addPattern(res, zodPatterns.email, check.message, refs);\n              break;\n          }\n          break;\n        case \"url\":\n          addFormat(res, \"uri\", check.message, refs);\n          break;\n        case \"uuid\":\n          addFormat(res, \"uuid\", check.message, refs);\n          break;\n        case \"regex\":\n          addPattern(res, check.regex, check.message, refs);\n          break;\n        case \"cuid\":\n          addPattern(res, zodPatterns.cuid, check.message, refs);\n          break;\n        case \"cuid2\":\n          addPattern(res, zodPatterns.cuid2, check.message, refs);\n          break;\n        case \"startsWith\":\n          addPattern(\n            res,\n            RegExp(`^${escapeLiteralCheckValue(check.value, refs)}`),\n            check.message,\n            refs\n          );\n          break;\n        case \"endsWith\":\n          addPattern(\n            res,\n            RegExp(`${escapeLiteralCheckValue(check.value, refs)}$`),\n            check.message,\n            refs\n          );\n          break;\n        case \"datetime\":\n          addFormat(res, \"date-time\", check.message, refs);\n          break;\n        case \"date\":\n          addFormat(res, \"date\", check.message, refs);\n          break;\n        case \"time\":\n          addFormat(res, \"time\", check.message, refs);\n          break;\n        case \"duration\":\n          addFormat(res, \"duration\", check.message, refs);\n          break;\n        case \"length\":\n          res.minLength = typeof res.minLength === \"number\" ? Math.max(res.minLength, check.value) : check.value;\n          res.maxLength = typeof res.maxLength === \"number\" ? Math.min(res.maxLength, check.value) : check.value;\n          break;\n        case \"includes\": {\n          addPattern(\n            res,\n            RegExp(escapeLiteralCheckValue(check.value, refs)),\n            check.message,\n            refs\n          );\n          break;\n        }\n        case \"ip\": {\n          if (check.version !== \"v6\") {\n            addFormat(res, \"ipv4\", check.message, refs);\n          }\n          if (check.version !== \"v4\") {\n            addFormat(res, \"ipv6\", check.message, refs);\n          }\n          break;\n        }\n        case \"base64url\":\n          addPattern(res, zodPatterns.base64url, check.message, refs);\n          break;\n        case \"jwt\":\n          addPattern(res, zodPatterns.jwt, check.message, refs);\n          break;\n        case \"cidr\": {\n          if (check.version !== \"v6\") {\n            addPattern(res, zodPatterns.ipv4Cidr, check.message, refs);\n          }\n          if (check.version !== \"v4\") {\n            addPattern(res, zodPatterns.ipv6Cidr, check.message, refs);\n          }\n          break;\n        }\n        case \"emoji\":\n          addPattern(res, zodPatterns.emoji(), check.message, refs);\n          break;\n        case \"ulid\": {\n          addPattern(res, zodPatterns.ulid, check.message, refs);\n          break;\n        }\n        case \"base64\": {\n          switch (refs.base64Strategy) {\n            case \"format:binary\": {\n              addFormat(res, \"binary\", check.message, refs);\n              break;\n            }\n            case \"contentEncoding:base64\": {\n              res.contentEncoding = \"base64\";\n              break;\n            }\n            case \"pattern:zod\": {\n              addPattern(res, zodPatterns.base64, check.message, refs);\n              break;\n            }\n          }\n          break;\n        }\n        case \"nanoid\": {\n          addPattern(res, zodPatterns.nanoid, check.message, refs);\n        }\n        case \"toLowerCase\":\n        case \"toUpperCase\":\n        case \"trim\":\n          break;\n        default:\n          /* @__PURE__ */ ((_) => {\n          })(check);\n      }\n    }\n  }\n  return res;\n}\nfunction escapeLiteralCheckValue(literal, refs) {\n  return refs.patternStrategy === \"escape\" ? escapeNonAlphaNumeric(literal) : literal;\n}\nvar ALPHA_NUMERIC = new Set(\n  \"ABCDEFGHIJKLMNOPQRSTUVXYZabcdefghijklmnopqrstuvxyz0123456789\"\n);\nfunction escapeNonAlphaNumeric(source) {\n  let result = \"\";\n  for (let i = 0; i < source.length; i++) {\n    if (!ALPHA_NUMERIC.has(source[i])) {\n      result += \"\\\\\";\n    }\n    result += source[i];\n  }\n  return result;\n}\nfunction addFormat(schema, value, message, refs) {\n  var _a2;\n  if (schema.format || ((_a2 = schema.anyOf) == null ? void 0 : _a2.some((x) => x.format))) {\n    if (!schema.anyOf) {\n      schema.anyOf = [];\n    }\n    if (schema.format) {\n      schema.anyOf.push({\n        format: schema.format\n      });\n      delete schema.format;\n    }\n    schema.anyOf.push({\n      format: value,\n      ...message && refs.errorMessages && { errorMessage: { format: message } }\n    });\n  } else {\n    schema.format = value;\n  }\n}\nfunction addPattern(schema, regex, message, refs) {\n  var _a2;\n  if (schema.pattern || ((_a2 = schema.allOf) == null ? void 0 : _a2.some((x) => x.pattern))) {\n    if (!schema.allOf) {\n      schema.allOf = [];\n    }\n    if (schema.pattern) {\n      schema.allOf.push({\n        pattern: schema.pattern\n      });\n      delete schema.pattern;\n    }\n    schema.allOf.push({\n      pattern: stringifyRegExpWithFlags(regex, refs),\n      ...message && refs.errorMessages && { errorMessage: { pattern: message } }\n    });\n  } else {\n    schema.pattern = stringifyRegExpWithFlags(regex, refs);\n  }\n}\nfunction stringifyRegExpWithFlags(regex, refs) {\n  var _a2;\n  if (!refs.applyRegexFlags || !regex.flags) {\n    return regex.source;\n  }\n  const flags = {\n    i: regex.flags.includes(\"i\"),\n    // Case-insensitive\n    m: regex.flags.includes(\"m\"),\n    // `^` and `$` matches adjacent to newline characters\n    s: regex.flags.includes(\"s\")\n    // `.` matches newlines\n  };\n  const source = flags.i ? regex.source.toLowerCase() : regex.source;\n  let pattern = \"\";\n  let isEscaped = false;\n  let inCharGroup = false;\n  let inCharRange = false;\n  for (let i = 0; i < source.length; i++) {\n    if (isEscaped) {\n      pattern += source[i];\n      isEscaped = false;\n      continue;\n    }\n    if (flags.i) {\n      if (inCharGroup) {\n        if (source[i].match(/[a-z]/)) {\n          if (inCharRange) {\n            pattern += source[i];\n            pattern += `${source[i - 2]}-${source[i]}`.toUpperCase();\n            inCharRange = false;\n          } else if (source[i + 1] === \"-\" && ((_a2 = source[i + 2]) == null ? void 0 : _a2.match(/[a-z]/))) {\n            pattern += source[i];\n            inCharRange = true;\n          } else {\n            pattern += `${source[i]}${source[i].toUpperCase()}`;\n          }\n          continue;\n        }\n      } else if (source[i].match(/[a-z]/)) {\n        pattern += `[${source[i]}${source[i].toUpperCase()}]`;\n        continue;\n      }\n    }\n    if (flags.m) {\n      if (source[i] === \"^\") {\n        pattern += `(^|(?<=[\\r\n]))`;\n        continue;\n      } else if (source[i] === \"$\") {\n        pattern += `($|(?=[\\r\n]))`;\n        continue;\n      }\n    }\n    if (flags.s && source[i] === \".\") {\n      pattern += inCharGroup ? `${source[i]}\\r\n` : `[${source[i]}\\r\n]`;\n      continue;\n    }\n    pattern += source[i];\n    if (source[i] === \"\\\\\") {\n      isEscaped = true;\n    } else if (inCharGroup && source[i] === \"]\") {\n      inCharGroup = false;\n    } else if (!inCharGroup && source[i] === \"[\") {\n      inCharGroup = true;\n    }\n  }\n  try {\n    new RegExp(pattern);\n  } catch (e) {\n    console.warn(\n      `Could not convert regex pattern at ${refs.currentPath.join(\n        \"/\"\n      )} to a flag-independent form! Falling back to the flag-ignorant source`\n    );\n    return regex.source;\n  }\n  return pattern;\n}\n\n// src/to-json-schema/zod3-to-json-schema/parsers/record.ts\nfunction parseRecordDef(def, refs) {\n  var _a2, _b2, _c, _d, _e, _f;\n  const schema = {\n    type: \"object\",\n    additionalProperties: (_a2 = parseDef(def.valueType._def, {\n      ...refs,\n      currentPath: [...refs.currentPath, \"additionalProperties\"]\n    })) != null ? _a2 : refs.allowedAdditionalProperties\n  };\n  if (((_b2 = def.keyType) == null ? void 0 : _b2._def.typeName) === zod_v3__WEBPACK_IMPORTED_MODULE_2__.ZodFirstPartyTypeKind.ZodString && ((_c = def.keyType._def.checks) == null ? void 0 : _c.length)) {\n    const { type, ...keyType } = parseStringDef(def.keyType._def, refs);\n    return {\n      ...schema,\n      propertyNames: keyType\n    };\n  } else if (((_d = def.keyType) == null ? void 0 : _d._def.typeName) === zod_v3__WEBPACK_IMPORTED_MODULE_2__.ZodFirstPartyTypeKind.ZodEnum) {\n    return {\n      ...schema,\n      propertyNames: {\n        enum: def.keyType._def.values\n      }\n    };\n  } else if (((_e = def.keyType) == null ? void 0 : _e._def.typeName) === zod_v3__WEBPACK_IMPORTED_MODULE_2__.ZodFirstPartyTypeKind.ZodBranded && def.keyType._def.type._def.typeName === zod_v3__WEBPACK_IMPORTED_MODULE_2__.ZodFirstPartyTypeKind.ZodString && ((_f = def.keyType._def.type._def.checks) == null ? void 0 : _f.length)) {\n    const { type, ...keyType } = parseBrandedDef(\n      def.keyType._def,\n      refs\n    );\n    return {\n      ...schema,\n      propertyNames: keyType\n    };\n  }\n  return schema;\n}\n\n// src/to-json-schema/zod3-to-json-schema/parsers/map.ts\nfunction parseMapDef(def, refs) {\n  if (refs.mapStrategy === \"record\") {\n    return parseRecordDef(def, refs);\n  }\n  const keys = parseDef(def.keyType._def, {\n    ...refs,\n    currentPath: [...refs.currentPath, \"items\", \"items\", \"0\"]\n  }) || parseAnyDef();\n  const values = parseDef(def.valueType._def, {\n    ...refs,\n    currentPath: [...refs.currentPath, \"items\", \"items\", \"1\"]\n  }) || parseAnyDef();\n  return {\n    type: \"array\",\n    maxItems: 125,\n    items: {\n      type: \"array\",\n      items: [keys, values],\n      minItems: 2,\n      maxItems: 2\n    }\n  };\n}\n\n// src/to-json-schema/zod3-to-json-schema/parsers/native-enum.ts\nfunction parseNativeEnumDef(def) {\n  const object = def.values;\n  const actualKeys = Object.keys(def.values).filter((key) => {\n    return typeof object[object[key]] !== \"number\";\n  });\n  const actualValues = actualKeys.map((key) => object[key]);\n  const parsedTypes = Array.from(\n    new Set(actualValues.map((values) => typeof values))\n  );\n  return {\n    type: parsedTypes.length === 1 ? parsedTypes[0] === \"string\" ? \"string\" : \"number\" : [\"string\", \"number\"],\n    enum: actualValues\n  };\n}\n\n// src/to-json-schema/zod3-to-json-schema/parsers/never.ts\nfunction parseNeverDef() {\n  return { not: parseAnyDef() };\n}\n\n// src/to-json-schema/zod3-to-json-schema/parsers/null.ts\nfunction parseNullDef() {\n  return {\n    type: \"null\"\n  };\n}\n\n// src/to-json-schema/zod3-to-json-schema/parsers/union.ts\nvar primitiveMappings = {\n  ZodString: \"string\",\n  ZodNumber: \"number\",\n  ZodBigInt: \"integer\",\n  ZodBoolean: \"boolean\",\n  ZodNull: \"null\"\n};\nfunction parseUnionDef(def, refs) {\n  const options = def.options instanceof Map ? Array.from(def.options.values()) : def.options;\n  if (options.every(\n    (x) => x._def.typeName in primitiveMappings && (!x._def.checks || !x._def.checks.length)\n  )) {\n    const types = options.reduce((types2, x) => {\n      const type = primitiveMappings[x._def.typeName];\n      return type && !types2.includes(type) ? [...types2, type] : types2;\n    }, []);\n    return {\n      type: types.length > 1 ? types : types[0]\n    };\n  } else if (options.every((x) => x._def.typeName === \"ZodLiteral\" && !x.description)) {\n    const types = options.reduce(\n      (acc, x) => {\n        const type = typeof x._def.value;\n        switch (type) {\n          case \"string\":\n          case \"number\":\n          case \"boolean\":\n            return [...acc, type];\n          case \"bigint\":\n            return [...acc, \"integer\"];\n          case \"object\":\n            if (x._def.value === null) return [...acc, \"null\"];\n          case \"symbol\":\n          case \"undefined\":\n          case \"function\":\n          default:\n            return acc;\n        }\n      },\n      []\n    );\n    if (types.length === options.length) {\n      const uniqueTypes = types.filter((x, i, a) => a.indexOf(x) === i);\n      return {\n        type: uniqueTypes.length > 1 ? uniqueTypes : uniqueTypes[0],\n        enum: options.reduce(\n          (acc, x) => {\n            return acc.includes(x._def.value) ? acc : [...acc, x._def.value];\n          },\n          []\n        )\n      };\n    }\n  } else if (options.every((x) => x._def.typeName === \"ZodEnum\")) {\n    return {\n      type: \"string\",\n      enum: options.reduce(\n        (acc, x) => [\n          ...acc,\n          ...x._def.values.filter((x2) => !acc.includes(x2))\n        ],\n        []\n      )\n    };\n  }\n  return asAnyOf(def, refs);\n}\nvar asAnyOf = (def, refs) => {\n  const anyOf = (def.options instanceof Map ? Array.from(def.options.values()) : def.options).map(\n    (x, i) => parseDef(x._def, {\n      ...refs,\n      currentPath: [...refs.currentPath, \"anyOf\", `${i}`]\n    })\n  ).filter(\n    (x) => !!x && (!refs.strictUnions || typeof x === \"object\" && Object.keys(x).length > 0)\n  );\n  return anyOf.length ? { anyOf } : void 0;\n};\n\n// src/to-json-schema/zod3-to-json-schema/parsers/nullable.ts\nfunction parseNullableDef(def, refs) {\n  if ([\"ZodString\", \"ZodNumber\", \"ZodBigInt\", \"ZodBoolean\", \"ZodNull\"].includes(\n    def.innerType._def.typeName\n  ) && (!def.innerType._def.checks || !def.innerType._def.checks.length)) {\n    return {\n      type: [\n        primitiveMappings[def.innerType._def.typeName],\n        \"null\"\n      ]\n    };\n  }\n  const base = parseDef(def.innerType._def, {\n    ...refs,\n    currentPath: [...refs.currentPath, \"anyOf\", \"0\"]\n  });\n  return base && { anyOf: [base, { type: \"null\" }] };\n}\n\n// src/to-json-schema/zod3-to-json-schema/parsers/number.ts\nfunction parseNumberDef(def) {\n  const res = {\n    type: \"number\"\n  };\n  if (!def.checks) return res;\n  for (const check of def.checks) {\n    switch (check.kind) {\n      case \"int\":\n        res.type = \"integer\";\n        break;\n      case \"min\":\n        if (check.inclusive) {\n          res.minimum = check.value;\n        } else {\n          res.exclusiveMinimum = check.value;\n        }\n        break;\n      case \"max\":\n        if (check.inclusive) {\n          res.maximum = check.value;\n        } else {\n          res.exclusiveMaximum = check.value;\n        }\n        break;\n      case \"multipleOf\":\n        res.multipleOf = check.value;\n        break;\n    }\n  }\n  return res;\n}\n\n// src/to-json-schema/zod3-to-json-schema/parsers/object.ts\nfunction parseObjectDef(def, refs) {\n  const result = {\n    type: \"object\",\n    properties: {}\n  };\n  const required = [];\n  const shape = def.shape();\n  for (const propName in shape) {\n    let propDef = shape[propName];\n    if (propDef === void 0 || propDef._def === void 0) {\n      continue;\n    }\n    const propOptional = safeIsOptional(propDef);\n    const parsedDef = parseDef(propDef._def, {\n      ...refs,\n      currentPath: [...refs.currentPath, \"properties\", propName],\n      propertyPath: [...refs.currentPath, \"properties\", propName]\n    });\n    if (parsedDef === void 0) {\n      continue;\n    }\n    result.properties[propName] = parsedDef;\n    if (!propOptional) {\n      required.push(propName);\n    }\n  }\n  if (required.length) {\n    result.required = required;\n  }\n  const additionalProperties = decideAdditionalProperties(def, refs);\n  if (additionalProperties !== void 0) {\n    result.additionalProperties = additionalProperties;\n  }\n  return result;\n}\nfunction decideAdditionalProperties(def, refs) {\n  if (def.catchall._def.typeName !== \"ZodNever\") {\n    return parseDef(def.catchall._def, {\n      ...refs,\n      currentPath: [...refs.currentPath, \"additionalProperties\"]\n    });\n  }\n  switch (def.unknownKeys) {\n    case \"passthrough\":\n      return refs.allowedAdditionalProperties;\n    case \"strict\":\n      return refs.rejectedAdditionalProperties;\n    case \"strip\":\n      return refs.removeAdditionalStrategy === \"strict\" ? refs.allowedAdditionalProperties : refs.rejectedAdditionalProperties;\n  }\n}\nfunction safeIsOptional(schema) {\n  try {\n    return schema.isOptional();\n  } catch (e) {\n    return true;\n  }\n}\n\n// src/to-json-schema/zod3-to-json-schema/parsers/optional.ts\nvar parseOptionalDef = (def, refs) => {\n  var _a2;\n  if (refs.currentPath.toString() === ((_a2 = refs.propertyPath) == null ? void 0 : _a2.toString())) {\n    return parseDef(def.innerType._def, refs);\n  }\n  const innerSchema = parseDef(def.innerType._def, {\n    ...refs,\n    currentPath: [...refs.currentPath, \"anyOf\", \"1\"]\n  });\n  return innerSchema ? { anyOf: [{ not: parseAnyDef() }, innerSchema] } : parseAnyDef();\n};\n\n// src/to-json-schema/zod3-to-json-schema/parsers/pipeline.ts\nvar parsePipelineDef = (def, refs) => {\n  if (refs.pipeStrategy === \"input\") {\n    return parseDef(def.in._def, refs);\n  } else if (refs.pipeStrategy === \"output\") {\n    return parseDef(def.out._def, refs);\n  }\n  const a = parseDef(def.in._def, {\n    ...refs,\n    currentPath: [...refs.currentPath, \"allOf\", \"0\"]\n  });\n  const b = parseDef(def.out._def, {\n    ...refs,\n    currentPath: [...refs.currentPath, \"allOf\", a ? \"1\" : \"0\"]\n  });\n  return {\n    allOf: [a, b].filter((x) => x !== void 0)\n  };\n};\n\n// src/to-json-schema/zod3-to-json-schema/parsers/promise.ts\nfunction parsePromiseDef(def, refs) {\n  return parseDef(def.type._def, refs);\n}\n\n// src/to-json-schema/zod3-to-json-schema/parsers/set.ts\nfunction parseSetDef(def, refs) {\n  const items = parseDef(def.valueType._def, {\n    ...refs,\n    currentPath: [...refs.currentPath, \"items\"]\n  });\n  const schema = {\n    type: \"array\",\n    uniqueItems: true,\n    items\n  };\n  if (def.minSize) {\n    schema.minItems = def.minSize.value;\n  }\n  if (def.maxSize) {\n    schema.maxItems = def.maxSize.value;\n  }\n  return schema;\n}\n\n// src/to-json-schema/zod3-to-json-schema/parsers/tuple.ts\nfunction parseTupleDef(def, refs) {\n  if (def.rest) {\n    return {\n      type: \"array\",\n      minItems: def.items.length,\n      items: def.items.map(\n        (x, i) => parseDef(x._def, {\n          ...refs,\n          currentPath: [...refs.currentPath, \"items\", `${i}`]\n        })\n      ).reduce(\n        (acc, x) => x === void 0 ? acc : [...acc, x],\n        []\n      ),\n      additionalItems: parseDef(def.rest._def, {\n        ...refs,\n        currentPath: [...refs.currentPath, \"additionalItems\"]\n      })\n    };\n  } else {\n    return {\n      type: \"array\",\n      minItems: def.items.length,\n      maxItems: def.items.length,\n      items: def.items.map(\n        (x, i) => parseDef(x._def, {\n          ...refs,\n          currentPath: [...refs.currentPath, \"items\", `${i}`]\n        })\n      ).reduce(\n        (acc, x) => x === void 0 ? acc : [...acc, x],\n        []\n      )\n    };\n  }\n}\n\n// src/to-json-schema/zod3-to-json-schema/parsers/undefined.ts\nfunction parseUndefinedDef() {\n  return {\n    not: parseAnyDef()\n  };\n}\n\n// src/to-json-schema/zod3-to-json-schema/parsers/unknown.ts\nfunction parseUnknownDef() {\n  return parseAnyDef();\n}\n\n// src/to-json-schema/zod3-to-json-schema/parsers/readonly.ts\nvar parseReadonlyDef = (def, refs) => {\n  return parseDef(def.innerType._def, refs);\n};\n\n// src/to-json-schema/zod3-to-json-schema/select-parser.ts\nvar selectParser = (def, typeName, refs) => {\n  switch (typeName) {\n    case zod_v3__WEBPACK_IMPORTED_MODULE_2__.ZodFirstPartyTypeKind.ZodString:\n      return parseStringDef(def, refs);\n    case zod_v3__WEBPACK_IMPORTED_MODULE_2__.ZodFirstPartyTypeKind.ZodNumber:\n      return parseNumberDef(def);\n    case zod_v3__WEBPACK_IMPORTED_MODULE_2__.ZodFirstPartyTypeKind.ZodObject:\n      return parseObjectDef(def, refs);\n    case zod_v3__WEBPACK_IMPORTED_MODULE_2__.ZodFirstPartyTypeKind.ZodBigInt:\n      return parseBigintDef(def);\n    case zod_v3__WEBPACK_IMPORTED_MODULE_2__.ZodFirstPartyTypeKind.ZodBoolean:\n      return parseBooleanDef();\n    case zod_v3__WEBPACK_IMPORTED_MODULE_2__.ZodFirstPartyTypeKind.ZodDate:\n      return parseDateDef(def, refs);\n    case zod_v3__WEBPACK_IMPORTED_MODULE_2__.ZodFirstPartyTypeKind.ZodUndefined:\n      return parseUndefinedDef();\n    case zod_v3__WEBPACK_IMPORTED_MODULE_2__.ZodFirstPartyTypeKind.ZodNull:\n      return parseNullDef();\n    case zod_v3__WEBPACK_IMPORTED_MODULE_2__.ZodFirstPartyTypeKind.ZodArray:\n      return parseArrayDef(def, refs);\n    case zod_v3__WEBPACK_IMPORTED_MODULE_2__.ZodFirstPartyTypeKind.ZodUnion:\n    case zod_v3__WEBPACK_IMPORTED_MODULE_2__.ZodFirstPartyTypeKind.ZodDiscriminatedUnion:\n      return parseUnionDef(def, refs);\n    case zod_v3__WEBPACK_IMPORTED_MODULE_2__.ZodFirstPartyTypeKind.ZodIntersection:\n      return parseIntersectionDef(def, refs);\n    case zod_v3__WEBPACK_IMPORTED_MODULE_2__.ZodFirstPartyTypeKind.ZodTuple:\n      return parseTupleDef(def, refs);\n    case zod_v3__WEBPACK_IMPORTED_MODULE_2__.ZodFirstPartyTypeKind.ZodRecord:\n      return parseRecordDef(def, refs);\n    case zod_v3__WEBPACK_IMPORTED_MODULE_2__.ZodFirstPartyTypeKind.ZodLiteral:\n      return parseLiteralDef(def);\n    case zod_v3__WEBPACK_IMPORTED_MODULE_2__.ZodFirstPartyTypeKind.ZodEnum:\n      return parseEnumDef(def);\n    case zod_v3__WEBPACK_IMPORTED_MODULE_2__.ZodFirstPartyTypeKind.ZodNativeEnum:\n      return parseNativeEnumDef(def);\n    case zod_v3__WEBPACK_IMPORTED_MODULE_2__.ZodFirstPartyTypeKind.ZodNullable:\n      return parseNullableDef(def, refs);\n    case zod_v3__WEBPACK_IMPORTED_MODULE_2__.ZodFirstPartyTypeKind.ZodOptional:\n      return parseOptionalDef(def, refs);\n    case zod_v3__WEBPACK_IMPORTED_MODULE_2__.ZodFirstPartyTypeKind.ZodMap:\n      return parseMapDef(def, refs);\n    case zod_v3__WEBPACK_IMPORTED_MODULE_2__.ZodFirstPartyTypeKind.ZodSet:\n      return parseSetDef(def, refs);\n    case zod_v3__WEBPACK_IMPORTED_MODULE_2__.ZodFirstPartyTypeKind.ZodLazy:\n      return () => def.getter()._def;\n    case zod_v3__WEBPACK_IMPORTED_MODULE_2__.ZodFirstPartyTypeKind.ZodPromise:\n      return parsePromiseDef(def, refs);\n    case zod_v3__WEBPACK_IMPORTED_MODULE_2__.ZodFirstPartyTypeKind.ZodNaN:\n    case zod_v3__WEBPACK_IMPORTED_MODULE_2__.ZodFirstPartyTypeKind.ZodNever:\n      return parseNeverDef();\n    case zod_v3__WEBPACK_IMPORTED_MODULE_2__.ZodFirstPartyTypeKind.ZodEffects:\n      return parseEffectsDef(def, refs);\n    case zod_v3__WEBPACK_IMPORTED_MODULE_2__.ZodFirstPartyTypeKind.ZodAny:\n      return parseAnyDef();\n    case zod_v3__WEBPACK_IMPORTED_MODULE_2__.ZodFirstPartyTypeKind.ZodUnknown:\n      return parseUnknownDef();\n    case zod_v3__WEBPACK_IMPORTED_MODULE_2__.ZodFirstPartyTypeKind.ZodDefault:\n      return parseDefaultDef(def, refs);\n    case zod_v3__WEBPACK_IMPORTED_MODULE_2__.ZodFirstPartyTypeKind.ZodBranded:\n      return parseBrandedDef(def, refs);\n    case zod_v3__WEBPACK_IMPORTED_MODULE_2__.ZodFirstPartyTypeKind.ZodReadonly:\n      return parseReadonlyDef(def, refs);\n    case zod_v3__WEBPACK_IMPORTED_MODULE_2__.ZodFirstPartyTypeKind.ZodCatch:\n      return parseCatchDef(def, refs);\n    case zod_v3__WEBPACK_IMPORTED_MODULE_2__.ZodFirstPartyTypeKind.ZodPipeline:\n      return parsePipelineDef(def, refs);\n    case zod_v3__WEBPACK_IMPORTED_MODULE_2__.ZodFirstPartyTypeKind.ZodFunction:\n    case zod_v3__WEBPACK_IMPORTED_MODULE_2__.ZodFirstPartyTypeKind.ZodVoid:\n    case zod_v3__WEBPACK_IMPORTED_MODULE_2__.ZodFirstPartyTypeKind.ZodSymbol:\n      return void 0;\n    default:\n      return /* @__PURE__ */ ((_) => void 0)(typeName);\n  }\n};\n\n// src/to-json-schema/zod3-to-json-schema/get-relative-path.ts\nvar getRelativePath = (pathA, pathB) => {\n  let i = 0;\n  for (; i < pathA.length && i < pathB.length; i++) {\n    if (pathA[i] !== pathB[i]) break;\n  }\n  return [(pathA.length - i).toString(), ...pathB.slice(i)].join(\"/\");\n};\n\n// src/to-json-schema/zod3-to-json-schema/parse-def.ts\nfunction parseDef(def, refs, forceResolution = false) {\n  var _a2;\n  const seenItem = refs.seen.get(def);\n  if (refs.override) {\n    const overrideResult = (_a2 = refs.override) == null ? void 0 : _a2.call(\n      refs,\n      def,\n      refs,\n      seenItem,\n      forceResolution\n    );\n    if (overrideResult !== ignoreOverride) {\n      return overrideResult;\n    }\n  }\n  if (seenItem && !forceResolution) {\n    const seenSchema = get$ref(seenItem, refs);\n    if (seenSchema !== void 0) {\n      return seenSchema;\n    }\n  }\n  const newItem = { def, path: refs.currentPath, jsonSchema: void 0 };\n  refs.seen.set(def, newItem);\n  const jsonSchemaOrGetter = selectParser(def, def.typeName, refs);\n  const jsonSchema2 = typeof jsonSchemaOrGetter === \"function\" ? parseDef(jsonSchemaOrGetter(), refs) : jsonSchemaOrGetter;\n  if (jsonSchema2) {\n    addMeta(def, refs, jsonSchema2);\n  }\n  if (refs.postProcess) {\n    const postProcessResult = refs.postProcess(jsonSchema2, def, refs);\n    newItem.jsonSchema = jsonSchema2;\n    return postProcessResult;\n  }\n  newItem.jsonSchema = jsonSchema2;\n  return jsonSchema2;\n}\nvar get$ref = (item, refs) => {\n  switch (refs.$refStrategy) {\n    case \"root\":\n      return { $ref: item.path.join(\"/\") };\n    case \"relative\":\n      return { $ref: getRelativePath(refs.currentPath, item.path) };\n    case \"none\":\n    case \"seen\": {\n      if (item.path.length < refs.currentPath.length && item.path.every((value, index) => refs.currentPath[index] === value)) {\n        console.warn(\n          `Recursive reference detected at ${refs.currentPath.join(\n            \"/\"\n          )}! Defaulting to any`\n        );\n        return parseAnyDef();\n      }\n      return refs.$refStrategy === \"seen\" ? parseAnyDef() : void 0;\n    }\n  }\n};\nvar addMeta = (def, refs, jsonSchema2) => {\n  if (def.description) {\n    jsonSchema2.description = def.description;\n  }\n  return jsonSchema2;\n};\n\n// src/to-json-schema/zod3-to-json-schema/refs.ts\nvar getRefs = (options) => {\n  const _options = getDefaultOptions(options);\n  const currentPath = _options.name !== void 0 ? [..._options.basePath, _options.definitionPath, _options.name] : _options.basePath;\n  return {\n    ..._options,\n    currentPath,\n    propertyPath: void 0,\n    seen: new Map(\n      Object.entries(_options.definitions).map(([name2, def]) => [\n        def._def,\n        {\n          def: def._def,\n          path: [..._options.basePath, _options.definitionPath, name2],\n          // Resolution of references will be forced even though seen, so it's ok that the schema is undefined here for now.\n          jsonSchema: void 0\n        }\n      ])\n    )\n  };\n};\n\n// src/to-json-schema/zod3-to-json-schema/zod3-to-json-schema.ts\nvar zod3ToJsonSchema = (schema, options) => {\n  var _a2;\n  const refs = getRefs(options);\n  let definitions = typeof options === \"object\" && options.definitions ? Object.entries(options.definitions).reduce(\n    (acc, [name3, schema2]) => {\n      var _a3;\n      return {\n        ...acc,\n        [name3]: (_a3 = parseDef(\n          schema2._def,\n          {\n            ...refs,\n            currentPath: [...refs.basePath, refs.definitionPath, name3]\n          },\n          true\n        )) != null ? _a3 : parseAnyDef()\n      };\n    },\n    {}\n  ) : void 0;\n  const name2 = typeof options === \"string\" ? options : (options == null ? void 0 : options.nameStrategy) === \"title\" ? void 0 : options == null ? void 0 : options.name;\n  const main = (_a2 = parseDef(\n    schema._def,\n    name2 === void 0 ? refs : {\n      ...refs,\n      currentPath: [...refs.basePath, refs.definitionPath, name2]\n    },\n    false\n  )) != null ? _a2 : parseAnyDef();\n  const title = typeof options === \"object\" && options.name !== void 0 && options.nameStrategy === \"title\" ? options.name : void 0;\n  if (title !== void 0) {\n    main.title = title;\n  }\n  const combined = name2 === void 0 ? definitions ? {\n    ...main,\n    [refs.definitionPath]: definitions\n  } : main : {\n    $ref: [\n      ...refs.$refStrategy === \"relative\" ? [] : refs.basePath,\n      refs.definitionPath,\n      name2\n    ].join(\"/\"),\n    [refs.definitionPath]: {\n      ...definitions,\n      [name2]: main\n    }\n  };\n  combined.$schema = \"http://json-schema.org/draft-07/schema#\";\n  return combined;\n};\n\n// src/schema.ts\nvar schemaSymbol = Symbol.for(\"vercel.ai.schema\");\nfunction lazySchema(createSchema) {\n  let schema;\n  return () => {\n    if (schema == null) {\n      schema = createSchema();\n    }\n    return schema;\n  };\n}\nfunction jsonSchema(jsonSchema2, {\n  validate\n} = {}) {\n  return {\n    [schemaSymbol]: true,\n    _type: void 0,\n    // should never be used directly\n    get jsonSchema() {\n      if (typeof jsonSchema2 === \"function\") {\n        jsonSchema2 = jsonSchema2();\n      }\n      return jsonSchema2;\n    },\n    validate\n  };\n}\nfunction isSchema(value) {\n  return typeof value === \"object\" && value !== null && schemaSymbol in value && value[schemaSymbol] === true && \"jsonSchema\" in value && \"validate\" in value;\n}\nfunction asSchema(schema) {\n  return schema == null ? jsonSchema({ properties: {}, additionalProperties: false }) : isSchema(schema) ? schema : \"~standard\" in schema ? schema[\"~standard\"].vendor === \"zod\" ? zodSchema(schema) : standardSchema(schema) : schema();\n}\nfunction standardSchema(standardSchema2) {\n  return jsonSchema(\n    () => standardSchema2[\"~standard\"].jsonSchema.input({\n      target: \"draft-07\"\n    }),\n    {\n      validate: async (value) => {\n        const result = await standardSchema2[\"~standard\"].validate(value);\n        return \"value\" in result ? { success: true, value: result.value } : {\n          success: false,\n          error: new _ai_sdk_provider__WEBPACK_IMPORTED_MODULE_0__.TypeValidationError({\n            value,\n            cause: result.issues\n          })\n        };\n      }\n    }\n  );\n}\nfunction zod3Schema(zodSchema2, options) {\n  var _a2;\n  const useReferences = (_a2 = options == null ? void 0 : options.useReferences) != null ? _a2 : false;\n  return jsonSchema(\n    // defer json schema creation to avoid unnecessary computation when only validation is needed\n    () => zod3ToJsonSchema(zodSchema2, {\n      $refStrategy: useReferences ? \"root\" : \"none\"\n    }),\n    {\n      validate: async (value) => {\n        const result = await zodSchema2.safeParseAsync(value);\n        return result.success ? { success: true, value: result.data } : { success: false, error: result.error };\n      }\n    }\n  );\n}\nfunction zod4Schema(zodSchema2, options) {\n  var _a2;\n  const useReferences = (_a2 = options == null ? void 0 : options.useReferences) != null ? _a2 : false;\n  return jsonSchema(\n    // defer json schema creation to avoid unnecessary computation when only validation is needed\n    () => addAdditionalPropertiesToJsonSchema(\n      zod_v4__WEBPACK_IMPORTED_MODULE_1__.toJSONSchema(zodSchema2, {\n        target: \"draft-7\",\n        io: \"input\",\n        reused: useReferences ? \"ref\" : \"inline\"\n      })\n    ),\n    {\n      validate: async (value) => {\n        const result = await zod_v4__WEBPACK_IMPORTED_MODULE_1__.safeParseAsync(zodSchema2, value);\n        return result.success ? { success: true, value: result.data } : { success: false, error: result.error };\n      }\n    }\n  );\n}\nfunction isZod4Schema(zodSchema2) {\n  return \"_zod\" in zodSchema2;\n}\nfunction zodSchema(zodSchema2, options) {\n  if (isZod4Schema(zodSchema2)) {\n    return zod4Schema(zodSchema2, options);\n  } else {\n    return zod3Schema(zodSchema2, options);\n  }\n}\n\n// src/validate-types.ts\nasync function validateTypes({\n  value,\n  schema\n}) {\n  const result = await safeValidateTypes({ value, schema });\n  if (!result.success) {\n    throw _ai_sdk_provider__WEBPACK_IMPORTED_MODULE_0__.TypeValidationError.wrap({ value, cause: result.error });\n  }\n  return result.value;\n}\nasync function safeValidateTypes({\n  value,\n  schema\n}) {\n  const actualSchema = asSchema(schema);\n  try {\n    if (actualSchema.validate == null) {\n      return { success: true, value, rawValue: value };\n    }\n    const result = await actualSchema.validate(value);\n    if (result.success) {\n      return { success: true, value: result.value, rawValue: value };\n    }\n    return {\n      success: false,\n      error: _ai_sdk_provider__WEBPACK_IMPORTED_MODULE_0__.TypeValidationError.wrap({ value, cause: result.error }),\n      rawValue: value\n    };\n  } catch (error) {\n    return {\n      success: false,\n      error: _ai_sdk_provider__WEBPACK_IMPORTED_MODULE_0__.TypeValidationError.wrap({ value, cause: error }),\n      rawValue: value\n    };\n  }\n}\n\n// src/parse-json.ts\nasync function parseJSON({\n  text,\n  schema\n}) {\n  try {\n    const value = secureJsonParse(text);\n    if (schema == null) {\n      return value;\n    }\n    return validateTypes({ value, schema });\n  } catch (error) {\n    if (_ai_sdk_provider__WEBPACK_IMPORTED_MODULE_0__.JSONParseError.isInstance(error) || _ai_sdk_provider__WEBPACK_IMPORTED_MODULE_0__.TypeValidationError.isInstance(error)) {\n      throw error;\n    }\n    throw new _ai_sdk_provider__WEBPACK_IMPORTED_MODULE_0__.JSONParseError({ text, cause: error });\n  }\n}\nasync function safeParseJSON({\n  text,\n  schema\n}) {\n  try {\n    const value = secureJsonParse(text);\n    if (schema == null) {\n      return { success: true, value, rawValue: value };\n    }\n    return await safeValidateTypes({ value, schema });\n  } catch (error) {\n    return {\n      success: false,\n      error: _ai_sdk_provider__WEBPACK_IMPORTED_MODULE_0__.JSONParseError.isInstance(error) ? error : new _ai_sdk_provider__WEBPACK_IMPORTED_MODULE_0__.JSONParseError({ text, cause: error }),\n      rawValue: void 0\n    };\n  }\n}\nfunction isParsableJson(input) {\n  try {\n    secureJsonParse(input);\n    return true;\n  } catch (e) {\n    return false;\n  }\n}\n\n// src/parse-json-event-stream.ts\n\nfunction parseJsonEventStream({\n  stream,\n  schema\n}) {\n  return stream.pipeThrough(new TextDecoderStream()).pipeThrough(new eventsource_parser_stream__WEBPACK_IMPORTED_MODULE_3__.EventSourceParserStream()).pipeThrough(\n    new TransformStream({\n      async transform({ data }, controller) {\n        if (data === \"[DONE]\") {\n          return;\n        }\n        controller.enqueue(await safeParseJSON({ text: data, schema }));\n      }\n    })\n  );\n}\n\n// src/parse-provider-options.ts\n\nasync function parseProviderOptions({\n  provider,\n  providerOptions,\n  schema\n}) {\n  if ((providerOptions == null ? void 0 : providerOptions[provider]) == null) {\n    return void 0;\n  }\n  const parsedProviderOptions = await safeValidateTypes({\n    value: providerOptions[provider],\n    schema\n  });\n  if (!parsedProviderOptions.success) {\n    throw new _ai_sdk_provider__WEBPACK_IMPORTED_MODULE_0__.InvalidArgumentError({\n      argument: \"providerOptions\",\n      message: `invalid ${provider} provider options`,\n      cause: parsedProviderOptions.error\n    });\n  }\n  return parsedProviderOptions.value;\n}\n\n// src/post-to-api.ts\n\nvar getOriginalFetch2 = () => globalThis.fetch;\nvar postJsonToApi = async ({\n  url,\n  headers,\n  body,\n  failedResponseHandler,\n  successfulResponseHandler,\n  abortSignal,\n  fetch: fetch2\n}) => postToApi({\n  url,\n  headers: {\n    \"Content-Type\": \"application/json\",\n    ...headers\n  },\n  body: {\n    content: JSON.stringify(body),\n    values: body\n  },\n  failedResponseHandler,\n  successfulResponseHandler,\n  abortSignal,\n  fetch: fetch2\n});\nvar postFormDataToApi = async ({\n  url,\n  headers,\n  formData,\n  failedResponseHandler,\n  successfulResponseHandler,\n  abortSignal,\n  fetch: fetch2\n}) => postToApi({\n  url,\n  headers,\n  body: {\n    content: formData,\n    values: Object.fromEntries(formData.entries())\n  },\n  failedResponseHandler,\n  successfulResponseHandler,\n  abortSignal,\n  fetch: fetch2\n});\nvar postToApi = async ({\n  url,\n  headers = {},\n  body,\n  successfulResponseHandler,\n  failedResponseHandler,\n  abortSignal,\n  fetch: fetch2 = getOriginalFetch2()\n}) => {\n  try {\n    const response = await fetch2(url, {\n      method: \"POST\",\n      headers: withUserAgentSuffix(\n        headers,\n        `ai-sdk/provider-utils/${VERSION}`,\n        getRuntimeEnvironmentUserAgent()\n      ),\n      body: body.content,\n      signal: abortSignal\n    });\n    const responseHeaders = extractResponseHeaders(response);\n    if (!response.ok) {\n      let errorInformation;\n      try {\n        errorInformation = await failedResponseHandler({\n          response,\n          url,\n          requestBodyValues: body.values\n        });\n      } catch (error) {\n        if (isAbortError(error) || _ai_sdk_provider__WEBPACK_IMPORTED_MODULE_0__.APICallError.isInstance(error)) {\n          throw error;\n        }\n        throw new _ai_sdk_provider__WEBPACK_IMPORTED_MODULE_0__.APICallError({\n          message: \"Failed to process error response\",\n          cause: error,\n          statusCode: response.status,\n          url,\n          responseHeaders,\n          requestBodyValues: body.values\n        });\n      }\n      throw errorInformation.value;\n    }\n    try {\n      return await successfulResponseHandler({\n        response,\n        url,\n        requestBodyValues: body.values\n      });\n    } catch (error) {\n      if (error instanceof Error) {\n        if (isAbortError(error) || _ai_sdk_provider__WEBPACK_IMPORTED_MODULE_0__.APICallError.isInstance(error)) {\n          throw error;\n        }\n      }\n      throw new _ai_sdk_provider__WEBPACK_IMPORTED_MODULE_0__.APICallError({\n        message: \"Failed to process successful response\",\n        cause: error,\n        statusCode: response.status,\n        url,\n        responseHeaders,\n        requestBodyValues: body.values\n      });\n    }\n  } catch (error) {\n    throw handleFetchError({ error, url, requestBodyValues: body.values });\n  }\n};\n\n// src/types/tool.ts\nfunction tool(tool2) {\n  return tool2;\n}\nfunction dynamicTool(tool2) {\n  return { ...tool2, type: \"dynamic\" };\n}\n\n// src/provider-tool-factory.ts\nfunction createProviderToolFactory({\n  id,\n  inputSchema\n}) {\n  return ({\n    execute,\n    outputSchema,\n    needsApproval,\n    toModelOutput,\n    onInputStart,\n    onInputDelta,\n    onInputAvailable,\n    ...args\n  }) => tool({\n    type: \"provider\",\n    id,\n    args,\n    inputSchema,\n    outputSchema,\n    execute,\n    needsApproval,\n    toModelOutput,\n    onInputStart,\n    onInputDelta,\n    onInputAvailable\n  });\n}\nfunction createProviderToolFactoryWithOutputSchema({\n  id,\n  inputSchema,\n  outputSchema,\n  supportsDeferredResults\n}) {\n  return ({\n    execute,\n    needsApproval,\n    toModelOutput,\n    onInputStart,\n    onInputDelta,\n    onInputAvailable,\n    ...args\n  }) => tool({\n    type: \"provider\",\n    id,\n    args,\n    inputSchema,\n    outputSchema,\n    execute,\n    needsApproval,\n    toModelOutput,\n    onInputStart,\n    onInputDelta,\n    onInputAvailable,\n    supportsDeferredResults\n  });\n}\n\n// src/remove-undefined-entries.ts\nfunction removeUndefinedEntries(record) {\n  return Object.fromEntries(\n    Object.entries(record).filter(([_key, value]) => value != null)\n  );\n}\n\n// src/resolve.ts\nasync function resolve(value) {\n  if (typeof value === \"function\") {\n    value = value();\n  }\n  return Promise.resolve(value);\n}\n\n// src/response-handler.ts\n\nvar createJsonErrorResponseHandler = ({\n  errorSchema,\n  errorToMessage,\n  isRetryable\n}) => async ({ response, url, requestBodyValues }) => {\n  const responseBody = await response.text();\n  const responseHeaders = extractResponseHeaders(response);\n  if (responseBody.trim() === \"\") {\n    return {\n      responseHeaders,\n      value: new _ai_sdk_provider__WEBPACK_IMPORTED_MODULE_0__.APICallError({\n        message: response.statusText,\n        url,\n        requestBodyValues,\n        statusCode: response.status,\n        responseHeaders,\n        responseBody,\n        isRetryable: isRetryable == null ? void 0 : isRetryable(response)\n      })\n    };\n  }\n  try {\n    const parsedError = await parseJSON({\n      text: responseBody,\n      schema: errorSchema\n    });\n    return {\n      responseHeaders,\n      value: new _ai_sdk_provider__WEBPACK_IMPORTED_MODULE_0__.APICallError({\n        message: errorToMessage(parsedError),\n        url,\n        requestBodyValues,\n        statusCode: response.status,\n        responseHeaders,\n        responseBody,\n        data: parsedError,\n        isRetryable: isRetryable == null ? void 0 : isRetryable(response, parsedError)\n      })\n    };\n  } catch (parseError) {\n    return {\n      responseHeaders,\n      value: new _ai_sdk_provider__WEBPACK_IMPORTED_MODULE_0__.APICallError({\n        message: response.statusText,\n        url,\n        requestBodyValues,\n        statusCode: response.status,\n        responseHeaders,\n        responseBody,\n        isRetryable: isRetryable == null ? void 0 : isRetryable(response)\n      })\n    };\n  }\n};\nvar createEventSourceResponseHandler = (chunkSchema) => async ({ response }) => {\n  const responseHeaders = extractResponseHeaders(response);\n  if (response.body == null) {\n    throw new _ai_sdk_provider__WEBPACK_IMPORTED_MODULE_0__.EmptyResponseBodyError({});\n  }\n  return {\n    responseHeaders,\n    value: parseJsonEventStream({\n      stream: response.body,\n      schema: chunkSchema\n    })\n  };\n};\nvar createJsonResponseHandler = (responseSchema) => async ({ response, url, requestBodyValues }) => {\n  const responseBody = await response.text();\n  const parsedResult = await safeParseJSON({\n    text: responseBody,\n    schema: responseSchema\n  });\n  const responseHeaders = extractResponseHeaders(response);\n  if (!parsedResult.success) {\n    throw new _ai_sdk_provider__WEBPACK_IMPORTED_MODULE_0__.APICallError({\n      message: \"Invalid JSON response\",\n      cause: parsedResult.error,\n      statusCode: response.status,\n      responseHeaders,\n      responseBody,\n      url,\n      requestBodyValues\n    });\n  }\n  return {\n    responseHeaders,\n    value: parsedResult.value,\n    rawValue: parsedResult.rawValue\n  };\n};\nvar createBinaryResponseHandler = () => async ({ response, url, requestBodyValues }) => {\n  const responseHeaders = extractResponseHeaders(response);\n  if (!response.body) {\n    throw new _ai_sdk_provider__WEBPACK_IMPORTED_MODULE_0__.APICallError({\n      message: \"Response body is empty\",\n      url,\n      requestBodyValues,\n      statusCode: response.status,\n      responseHeaders,\n      responseBody: void 0\n    });\n  }\n  try {\n    const buffer = await response.arrayBuffer();\n    return {\n      responseHeaders,\n      value: new Uint8Array(buffer)\n    };\n  } catch (error) {\n    throw new _ai_sdk_provider__WEBPACK_IMPORTED_MODULE_0__.APICallError({\n      message: \"Failed to read response as array buffer\",\n      url,\n      requestBodyValues,\n      statusCode: response.status,\n      responseHeaders,\n      responseBody: void 0,\n      cause: error\n    });\n  }\n};\nvar createStatusCodeErrorResponseHandler = () => async ({ response, url, requestBodyValues }) => {\n  const responseHeaders = extractResponseHeaders(response);\n  const responseBody = await response.text();\n  return {\n    responseHeaders,\n    value: new _ai_sdk_provider__WEBPACK_IMPORTED_MODULE_0__.APICallError({\n      message: response.statusText,\n      url,\n      requestBodyValues,\n      statusCode: response.status,\n      responseHeaders,\n      responseBody\n    })\n  };\n};\n\n// src/without-trailing-slash.ts\nfunction withoutTrailingSlash(url) {\n  return url == null ? void 0 : url.replace(/\\/$/, \"\");\n}\n\n// src/is-async-iterable.ts\nfunction isAsyncIterable(obj) {\n  return obj != null && typeof obj[Symbol.asyncIterator] === \"function\";\n}\n\n// src/types/execute-tool.ts\nasync function* executeTool({\n  execute,\n  input,\n  options\n}) {\n  const result = execute(input, options);\n  if (isAsyncIterable(result)) {\n    let lastOutput;\n    for await (const output of result) {\n      lastOutput = output;\n      yield { type: \"preliminary\", output };\n    }\n    yield { type: \"final\", output: lastOutput };\n  } else {\n    yield { type: \"final\", output: await result };\n  }\n}\n\n// src/index.ts\n\n\n\n//# sourceMappingURL=index.mjs.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGFpLXNkay9wcm92aWRlci11dGlscy9kaXN0L2luZGV4Lm1qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGVBQWUsb0NBQW9DO0FBQ25ELGlCQUFpQjtBQUNqQjtBQUNBO0FBQ0E7QUFDQTtBQUNBLGdCQUFnQixjQUFjO0FBQzlCO0FBQ0E7QUFDQSxVQUFVO0FBQ1Y7QUFDQTtBQUNBLFFBQVE7QUFDUjtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxVQUFVO0FBQ1Y7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQztBQUNEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxvQkFBb0I7QUFDcEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxRQUFRO0FBQ1I7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQSxvQkFBb0I7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QTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHlEQUF5RCxFQUFFO0FBQzNELFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHlEQUF5RCxFQUFFO0FBQzNELFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsU0FBUyx5REFBc0I7QUFDL0I7QUFDQSxTQUFTLHlEQUFzQjtBQUMvQjtBQUNBLFNBQVMseURBQXNCO0FBQy9CO0FBQ0EsU0FBUyx5REFBc0I7QUFDL0I7QUFDQSxTQUFTLHlEQUFzQjtBQUMvQjtBQUNBLFNBQVMseURBQXNCO0FBQy9CO0FBQ0EsU0FBUyx5REFBc0I7QUFDL0I7QUFDQSxTQUFTLHlEQUFzQjtBQUMvQjtBQUNBLFNBQVMseURBQXNCO0FBQy9CO0FBQ0EsU0FBUyx5REFBc0I7QUFDL0IsU0FBUyx5REFBc0I7QUFDL0I7QUFDQSxTQUFTLHlEQUFzQjtBQUMvQjtBQUNBLFNBQVMseURBQXNCO0FBQy9CO0FBQ0EsU0FBUyx5REFBc0I7QUFDL0I7QUFDQSxTQUFTLHlEQUFzQjtBQUMvQjtBQUNBLFNBQVMseURBQXNCO0FBQy9CO0FBQ0EsU0FBUyx5REFBc0I7QUFDL0I7QUFDQSxTQUFTLHlEQUFzQjtBQUMvQjtBQUNBLFNBQVMseURBQXNCO0FBQy9CO0FBQ0EsU0FBUyx5REFBc0I7QUFDL0I7QUFDQSxTQUFTLHlEQUFzQjtBQUMvQjtBQUNBLFNBQVMseURBQXNCO0FBQy9CO0FBQ0EsU0FBUyx5REFBc0I7QUFDL0I7QUFDQSxTQUFTLHlEQUFzQjtB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RjtBQUNBO0FBQ0EsY0FBYywwREFBYTtBQUMzQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0osY0FBYywwREFBYTtBQUMzQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0EsMERBQTBELGtDQUFrQztBQUM1RjtBQUNBO0FBQ0E7QUFDQTtBQUNBLGVBQWUsMERBQWE7QUFDNUI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUM7QUFDRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsY0FBYztBQUNkO0FBQ0EsWUFBWTtBQUNaLElBQUk7QUFDSixZQUFZO0FBQ1o7QUFDQTs7QUFFQTtBQUNzQztBQUdIO0FBMkRqQztBQUNGIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vZXNnLWNpdHktYXBwLy4vbm9kZV9tb2R1bGVzL0BhaS1zZGsvcHJvdmlkZXItdXRpbHMvZGlzdC9pbmRleC5tanM/MzQ4NyJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBzcmMvY29tYmluZS1oZWFkZXJzLnRzXG5mdW5jdGlvbiBjb21iaW5lSGVhZGVycyguLi5oZWFkZXJzKSB7XG4gIHJldHVybiBoZWFkZXJzLnJlZHVjZShcbiAgICAoY29tYmluZWRIZWFkZXJzLCBjdXJyZW50SGVhZGVycykgPT4gKHtcbiAgICAgIC4uLmNvbWJpbmVkSGVhZGVycyxcbiAgICAgIC4uLmN1cnJlbnRIZWFkZXJzICE9IG51bGwgPyBjdXJyZW50SGVhZGVycyA6IHt9XG4gICAgfSksXG4gICAge31cbiAgKTtcbn1cblxuLy8gc3JjL2NvbnZlcnQtYXN5bmMtaXRlcmF0b3ItdG8tcmVhZGFibGUtc3RyZWFtLnRzXG5mdW5jdGlvbiBjb252ZXJ0QXN5bmNJdGVyYXRvclRvUmVhZGFibGVTdHJlYW0oaXRlcmF0b3IpIHtcbiAgbGV0IGNhbmNlbGxlZCA9IGZhbHNlO1xuICByZXR1cm4gbmV3IFJlYWRhYmxlU3RyZWFtKHtcbiAgICAvKipcbiAgICAgKiBDYWxsZWQgd2hlbiB0aGUgY29uc3VtZXIgd2FudHMgdG8gcHVsbCBtb3JlIGRhdGEgZnJvbSB0aGUgc3RyZWFtLlxuICAgICAqXG4gICAgICogQHBhcmFtIHtSZWFkYWJsZVN0cmVhbURlZmF1bHRDb250cm9sbGVyPFQ+fSBjb250cm9sbGVyIC0gVGhlIGNvbnRyb2xsZXIgdG8gZW5xdWV1ZSBkYXRhIGludG8gdGhlIHN0cmVhbS5cbiAgICAgKiBAcmV0dXJucyB7UHJvbWlzZTx2b2lkPn1cbiAgICAgKi9cbiAgICBhc3luYyBwdWxsKGNvbnRyb2xsZXIpIHtcbiAgICAgIGlmIChjYW5jZWxsZWQpIHJldHVybjtcbiAgICAgIHRyeSB7XG4gICAgICAgIGNvbnN0IHsgdmFsdWUsIGRvbmUgfSA9IGF3YWl0IGl0ZXJhdG9yLm5leHQoKTtcbiAgICAgICAgaWYgKGRvbmUpIHtcbiAgICAgICAgICBjb250cm9sbGVyLmNsb3NlKCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgY29udHJvbGxlci5lbnF1ZXVlKHZhbHVlKTtcbiAgICAgICAgfVxuICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgY29udHJvbGxlci5lcnJvcihlcnJvcik7XG4gICAgICB9XG4gICAgfSxcbiAgICAvKipcbiAgICAgKiBDYWxsZWQgd2hlbiB0aGUgY29uc3VtZXIgY2FuY2VscyB0aGUgc3RyZWFtLlxuICAgICAqL1xuICAgIGFzeW5jIGNhbmNlbChyZWFzb24pIHtcbiAgICAgIGNhbmNlbGxlZCA9IHRydWU7XG4gICAgICBpZiAoaXRlcmF0b3IucmV0dXJuKSB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgYXdhaXQgaXRlcmF0b3IucmV0dXJuKHJlYXNvbik7XG4gICAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfSk7XG59XG5cbi8vIHNyYy9jcmVhdGUtdG9vbC1uYW1lLW1hcHBpbmcudHNcbmZ1bmN0aW9uIGNyZWF0ZVRvb2xOYW1lTWFwcGluZyh7XG4gIHRvb2xzID0gW10sXG4gIHByb3ZpZGVyVG9vbE5hbWVzXG59KSB7XG4gIGNvbnN0IGN1c3RvbVRvb2xOYW1lVG9Qcm92aWRlclRvb2xOYW1lID0ge307XG4gIGNvbnN0IHByb3ZpZGVyVG9vbE5hbWVUb0N1c3RvbVRvb2xOYW1lID0ge307XG4gIGZvciAoY29uc3QgdG9vbDIgb2YgdG9vbHMpIHtcbiAgICBpZiAodG9vbDIudHlwZSA9PT0gXCJwcm92aWRlclwiICYmIHRvb2wyLmlkIGluIHByb3ZpZGVyVG9vbE5hbWVzKSB7XG4gICAgICBjb25zdCBwcm92aWRlclRvb2xOYW1lID0gcHJvdmlkZXJUb29sTmFtZXNbdG9vbDIuaWRdO1xuICAgICAgY3VzdG9tVG9vbE5hbWVUb1Byb3ZpZGVyVG9vbE5hbWVbdG9vbDIubmFtZV0gPSBwcm92aWRlclRvb2xOYW1lO1xuICAgICAgcHJvdmlkZXJUb29sTmFtZVRvQ3VzdG9tVG9vbE5hbWVbcHJvdmlkZXJUb29sTmFtZV0gPSB0b29sMi5uYW1lO1xuICAgIH1cbiAgfVxuICByZXR1cm4ge1xuICAgIHRvUHJvdmlkZXJUb29sTmFtZTogKGN1c3RvbVRvb2xOYW1lKSA9PiB7XG4gICAgICB2YXIgX2EyO1xuICAgICAgcmV0dXJuIChfYTIgPSBjdXN0b21Ub29sTmFtZVRvUHJvdmlkZXJUb29sTmFtZVtjdXN0b21Ub29sTmFtZV0pICE9IG51bGwgPyBfYTIgOiBjdXN0b21Ub29sTmFtZTtcbiAgICB9LFxuICAgIHRvQ3VzdG9tVG9vbE5hbWU6IChwcm92aWRlclRvb2xOYW1lKSA9PiB7XG4gICAgICB2YXIgX2EyO1xuICAgICAgcmV0dXJuIChfYTIgPSBwcm92aWRlclRvb2xOYW1lVG9DdXN0b21Ub29sTmFtZVtwcm92aWRlclRvb2xOYW1lXSkgIT0gbnVsbCA/IF9hMiA6IHByb3ZpZGVyVG9vbE5hbWU7XG4gICAgfVxuICB9O1xufVxuXG4vLyBzcmMvZGVsYXkudHNcbmFzeW5jIGZ1bmN0aW9uIGRlbGF5KGRlbGF5SW5Ncywgb3B0aW9ucykge1xuICBpZiAoZGVsYXlJbk1zID09IG51bGwpIHtcbiAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKCk7XG4gIH1cbiAgY29uc3Qgc2lnbmFsID0gb3B0aW9ucyA9PSBudWxsID8gdm9pZCAwIDogb3B0aW9ucy5hYm9ydFNpZ25hbDtcbiAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlMiwgcmVqZWN0KSA9PiB7XG4gICAgaWYgKHNpZ25hbCA9PSBudWxsID8gdm9pZCAwIDogc2lnbmFsLmFib3J0ZWQpIHtcbiAgICAgIHJlamVjdChjcmVhdGVBYm9ydEVycm9yKCkpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBjb25zdCB0aW1lb3V0SWQgPSBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgIGNsZWFudXAoKTtcbiAgICAgIHJlc29sdmUyKCk7XG4gICAgfSwgZGVsYXlJbk1zKTtcbiAgICBjb25zdCBjbGVhbnVwID0gKCkgPT4ge1xuICAgICAgY2xlYXJUaW1lb3V0KHRpbWVvdXRJZCk7XG4gICAgICBzaWduYWwgPT0gbnVsbCA/IHZvaWQgMCA6IHNpZ25hbC5yZW1vdmVFdmVudExpc3RlbmVyKFwiYWJvcnRcIiwgb25BYm9ydCk7XG4gICAgfTtcbiAgICBjb25zdCBvbkFib3J0ID0gKCkgPT4ge1xuICAgICAgY2xlYW51cCgpO1xuICAgICAgcmVqZWN0KGNyZWF0ZUFib3J0RXJyb3IoKSk7XG4gICAgfTtcbiAgICBzaWduYWwgPT0gbnVsbCA/IHZvaWQgMCA6IHNpZ25hbC5hZGRFdmVudExpc3RlbmVyKFwiYWJvcnRcIiwgb25BYm9ydCk7XG4gIH0pO1xufVxuZnVuY3Rpb24gY3JlYXRlQWJvcnRFcnJvcigpIHtcbiAgcmV0dXJuIG5ldyBET01FeGNlcHRpb24oXCJEZWxheSB3YXMgYWJvcnRlZFwiLCBcIkFib3J0RXJyb3JcIik7XG59XG5cbi8vIHNyYy9kZWxheWVkLXByb21pc2UudHNcbnZhciBEZWxheWVkUHJvbWlzZSA9IGNsYXNzIHtcbiAgY29uc3RydWN0b3IoKSB7XG4gICAgdGhpcy5zdGF0dXMgPSB7IHR5cGU6IFwicGVuZGluZ1wiIH07XG4gICAgdGhpcy5fcmVzb2x2ZSA9IHZvaWQgMDtcbiAgICB0aGlzLl9yZWplY3QgPSB2b2lkIDA7XG4gIH1cbiAgZ2V0IHByb21pc2UoKSB7XG4gICAgaWYgKHRoaXMuX3Byb21pc2UpIHtcbiAgICAgIHJldHVybiB0aGlzLl9wcm9taXNlO1xuICAgIH1cbiAgICB0aGlzLl9wcm9taXNlID0gbmV3IFByb21pc2UoKHJlc29sdmUyLCByZWplY3QpID0+IHtcbiAgICAgIGlmICh0aGlzLnN0YXR1cy50eXBlID09PSBcInJlc29sdmVkXCIpIHtcbiAgICAgICAgcmVzb2x2ZTIodGhpcy5zdGF0dXMudmFsdWUpO1xuICAgICAgfSBlbHNlIGlmICh0aGlzLnN0YXR1cy50eXBlID09PSBcInJlamVjdGVkXCIpIHtcbiAgICAgICAgcmVqZWN0KHRoaXMuc3RhdHVzLmVycm9yKTtcbiAgICAgIH1cbiAgICAgIHRoaXMuX3Jlc29sdmUgPSByZXNvbHZlMjtcbiAgICAgIHRoaXMuX3JlamVjdCA9IHJlamVjdDtcbiAgICB9KTtcbiAgICByZXR1cm4gdGhpcy5fcHJvbWlzZTtcbiAgfVxuICByZXNvbHZlKHZhbHVlKSB7XG4gICAgdmFyIF9hMjtcbiAgICB0aGlzLnN0YXR1cyA9IHsgdHlwZTogXCJyZXNvbHZlZFwiLCB2YWx1ZSB9O1xuICAgIGlmICh0aGlzLl9wcm9taXNlKSB7XG4gICAgICAoX2EyID0gdGhpcy5fcmVzb2x2ZSkgPT0gbnVsbCA/IHZvaWQgMCA6IF9hMi5jYWxsKHRoaXMsIHZhbHVlKTtcbiAgICB9XG4gIH1cbiAgcmVqZWN0KGVycm9yKSB7XG4gICAgdmFyIF9hMjtcbiAgICB0aGlzLnN0YXR1cyA9IHsgdHlwZTogXCJyZWplY3RlZFwiLCBlcnJvciB9O1xuICAgIGlmICh0aGlzLl9wcm9taXNlKSB7XG4gICAgICAoX2EyID0gdGhpcy5fcmVqZWN0KSA9PSBudWxsID8gdm9pZCAwIDogX2EyLmNhbGwodGhpcywgZXJyb3IpO1xuICAgIH1cbiAgfVxuICBpc1Jlc29sdmVkKCkge1xuICAgIHJldHVybiB0aGlzLnN0YXR1cy50eXBlID09PSBcInJlc29sdmVkXCI7XG4gIH1cbiAgaXNSZWplY3RlZCgpIHtcbiAgICByZXR1cm4gdGhpcy5zdGF0dXMudHlwZSA9PT0gXCJyZWplY3RlZFwiO1xuICB9XG4gIGlzUGVuZGluZygpIHtcbiAgICByZXR1cm4gdGhpcy5zdGF0dXMudHlwZSA9PT0gXCJwZW5kaW5nXCI7XG4gIH1cbn07XG5cbi8vIHNyYy9leHRyYWN0LXJlc3BvbnNlLWhlYWRlcnMudHNcbmZ1bmN0aW9uIGV4dHJhY3RSZXNwb25zZUhlYWRlcnMocmVzcG9uc2UpIHtcbiAgcmV0dXJuIE9iamVjdC5mcm9tRW50cmllcyhbLi4ucmVzcG9uc2UuaGVhZGVyc10pO1xufVxuXG4vLyBzcmMvdWludDgtdXRpbHMudHNcbnZhciB7IGJ0b2EsIGF0b2IgfSA9IGdsb2JhbFRoaXM7XG5mdW5jdGlvbiBjb252ZXJ0QmFzZTY0VG9VaW50OEFycmF5KGJhc2U2NFN0cmluZykge1xuICBjb25zdCBiYXNlNjRVcmwgPSBiYXNlNjRTdHJpbmcucmVwbGFjZSgvLS9nLCBcIitcIikucmVwbGFjZSgvXy9nLCBcIi9cIik7XG4gIGNvbnN0IGxhdGluMXN0cmluZyA9IGF0b2IoYmFzZTY0VXJsKTtcbiAgcmV0dXJuIFVpbnQ4QXJyYXkuZnJvbShsYXRpbjFzdHJpbmcsIChieXRlKSA9PiBieXRlLmNvZGVQb2ludEF0KDApKTtcbn1cbmZ1bmN0aW9uIGNvbnZlcnRVaW50OEFycmF5VG9CYXNlNjQoYXJyYXkpIHtcbiAgbGV0IGxhdGluMXN0cmluZyA9IFwiXCI7XG4gIGZvciAobGV0IGkgPSAwOyBpIDwgYXJyYXkubGVuZ3RoOyBpKyspIHtcbiAgICBsYXRpbjFzdHJpbmcgKz0gU3RyaW5nLmZyb21Db2RlUG9pbnQoYXJyYXlbaV0pO1xuICB9XG4gIHJldHVybiBidG9hKGxhdGluMXN0cmluZyk7XG59XG5mdW5jdGlvbiBjb252ZXJ0VG9CYXNlNjQodmFsdWUpIHtcbiAgcmV0dXJuIHZhbHVlIGluc3RhbmNlb2YgVWludDhBcnJheSA/IGNvbnZlcnRVaW50OEFycmF5VG9CYXNlNjQodmFsdWUpIDogdmFsdWU7XG59XG5cbi8vIHNyYy9jb252ZXJ0LWltYWdlLW1vZGVsLWZpbGUtdG8tZGF0YS11cmkudHNcbmZ1bmN0aW9uIGNvbnZlcnRJbWFnZU1vZGVsRmlsZVRvRGF0YVVyaShmaWxlKSB7XG4gIGlmIChmaWxlLnR5cGUgPT09IFwidXJsXCIpIHJldHVybiBmaWxlLnVybDtcbiAgcmV0dXJuIGBkYXRhOiR7ZmlsZS5tZWRpYVR5cGV9O2Jhc2U2NCwke3R5cGVvZiBmaWxlLmRhdGEgPT09IFwic3RyaW5nXCIgPyBmaWxlLmRhdGEgOiBjb252ZXJ0VWludDhBcnJheVRvQmFzZTY0KGZpbGUuZGF0YSl9YDtcbn1cblxuLy8gc3JjL2NvbnZlcnQtdG8tZm9ybS1kYXRhLnRzXG5mdW5jdGlvbiBjb252ZXJ0VG9Gb3JtRGF0YShpbnB1dCwgb3B0aW9ucyA9IHt9KSB7XG4gIGNvbnN0IHsgdXNlQXJyYXlCcmFja2V0cyA9IHRydWUgfSA9IG9wdGlvbnM7XG4gIGNvbnN0IGZvcm1EYXRhID0gbmV3IEZvcm1EYXRhKCk7XG4gIGZvciAoY29uc3QgW2tleSwgdmFsdWVdIG9mIE9iamVjdC5lbnRyaWVzKGlucHV0KSkge1xuICAgIGlmICh2YWx1ZSA9PSBudWxsKSB7XG4gICAgICBjb250aW51ZTtcbiAgICB9XG4gICAgaWYgKEFycmF5LmlzQXJyYXkodmFsdWUpKSB7XG4gICAgICBpZiAodmFsdWUubGVuZ3RoID09PSAxKSB7XG4gICAgICAgIGZvcm1EYXRhLmFwcGVuZChrZXksIHZhbHVlWzBdKTtcbiAgICAgICAgY29udGludWU7XG4gICAgICB9XG4gICAgICBjb25zdCBhcnJheUtleSA9IHVzZUFycmF5QnJhY2tldHMgPyBgJHtrZXl9W11gIDoga2V5O1xuICAgICAgZm9yIChjb25zdCBpdGVtIG9mIHZhbHVlKSB7XG4gICAgICAgIGZvcm1EYXRhLmFwcGVuZChhcnJheUtleSwgaXRlbSk7XG4gICAgICB9XG4gICAgICBjb250aW51ZTtcbiAgICB9XG4gICAgZm9ybURhdGEuYXBwZW5kKGtleSwgdmFsdWUpO1xuICB9XG4gIHJldHVybiBmb3JtRGF0YTtcbn1cblxuLy8gc3JjL2Rvd25sb2FkLWVycm9yLnRzXG5pbXBvcnQgeyBBSVNES0Vycm9yIH0gZnJvbSBcIkBhaS1zZGsvcHJvdmlkZXJcIjtcbnZhciBuYW1lID0gXCJBSV9Eb3dubG9hZEVycm9yXCI7XG52YXIgbWFya2VyID0gYHZlcmNlbC5haS5lcnJvci4ke25hbWV9YDtcbnZhciBzeW1ib2wgPSBTeW1ib2wuZm9yKG1hcmtlcik7XG52YXIgX2EsIF9iO1xudmFyIERvd25sb2FkRXJyb3IgPSBjbGFzcyBleHRlbmRzIChfYiA9IEFJU0RLRXJyb3IsIF9hID0gc3ltYm9sLCBfYikge1xuICBjb25zdHJ1Y3Rvcih7XG4gICAgdXJsLFxuICAgIHN0YXR1c0NvZGUsXG4gICAgc3RhdHVzVGV4dCxcbiAgICBjYXVzZSxcbiAgICBtZXNzYWdlID0gY2F1c2UgPT0gbnVsbCA/IGBGYWlsZWQgdG8gZG93bmxvYWQgJHt1cmx9OiAke3N0YXR1c0NvZGV9ICR7c3RhdHVzVGV4dH1gIDogYEZhaWxlZCB0byBkb3dubG9hZCAke3VybH06ICR7Y2F1c2V9YFxuICB9KSB7XG4gICAgc3VwZXIoeyBuYW1lLCBtZXNzYWdlLCBjYXVzZSB9KTtcbiAgICB0aGlzW19hXSA9IHRydWU7XG4gICAgdGhpcy51cmwgPSB1cmw7XG4gICAgdGhpcy5zdGF0dXNDb2RlID0gc3RhdHVzQ29kZTtcbiAgICB0aGlzLnN0YXR1c1RleHQgPSBzdGF0dXNUZXh0O1xuICB9XG4gIHN0YXRpYyBpc0luc3RhbmNlKGVycm9yKSB7XG4gICAgcmV0dXJuIEFJU0RLRXJyb3IuaGFzTWFya2VyKGVycm9yLCBtYXJrZXIpO1xuICB9XG59O1xuXG4vLyBzcmMvZG93bmxvYWQtYmxvYi50c1xuYXN5bmMgZnVuY3Rpb24gZG93bmxvYWRCbG9iKHVybCkge1xuICB0cnkge1xuICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZmV0Y2godXJsKTtcbiAgICBpZiAoIXJlc3BvbnNlLm9rKSB7XG4gICAgICB0aHJvdyBuZXcgRG93bmxvYWRFcnJvcih7XG4gICAgICAgIHVybCxcbiAgICAgICAgc3RhdHVzQ29kZTogcmVzcG9uc2Uuc3RhdHVzLFxuICAgICAgICBzdGF0dXNUZXh0OiByZXNwb25zZS5zdGF0dXNUZXh0XG4gICAgICB9KTtcbiAgICB9XG4gICAgcmV0dXJuIGF3YWl0IHJlc3BvbnNlLmJsb2IoKTtcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBpZiAoRG93bmxvYWRFcnJvci5pc0luc3RhbmNlKGVycm9yKSkge1xuICAgICAgdGhyb3cgZXJyb3I7XG4gICAgfVxuICAgIHRocm93IG5ldyBEb3dubG9hZEVycm9yKHsgdXJsLCBjYXVzZTogZXJyb3IgfSk7XG4gIH1cbn1cblxuLy8gc3JjL2dlbmVyYXRlLWlkLnRzXG5pbXBvcnQgeyBJbnZhbGlkQXJndW1lbnRFcnJvciB9IGZyb20gXCJAYWktc2RrL3Byb3ZpZGVyXCI7XG52YXIgY3JlYXRlSWRHZW5lcmF0b3IgPSAoe1xuICBwcmVmaXgsXG4gIHNpemUgPSAxNixcbiAgYWxwaGFiZXQgPSBcIjAxMjM0NTY3ODlBQkNERUZHSElKS0xNTk9QUVJTVFVWV1hZWmFiY2RlZmdoaWprbG1ub3BxcnN0dXZ3eHl6XCIsXG4gIHNlcGFyYXRvciA9IFwiLVwiXG59ID0ge30pID0+IHtcbiAgY29uc3QgZ2VuZXJhdG9yID0gKCkgPT4ge1xuICAgIGNvbnN0IGFscGhhYmV0TGVuZ3RoID0gYWxwaGFiZXQubGVuZ3RoO1xuICAgIGNvbnN0IGNoYXJzID0gbmV3IEFycmF5KHNpemUpO1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgc2l6ZTsgaSsrKSB7XG4gICAgICBjaGFyc1tpXSA9IGFscGhhYmV0W01hdGgucmFuZG9tKCkgKiBhbHBoYWJldExlbmd0aCB8IDBdO1xuICAgIH1cbiAgICByZXR1cm4gY2hhcnMuam9pbihcIlwiKTtcbiAgfTtcbiAgaWYgKHByZWZpeCA9PSBudWxsKSB7XG4gICAgcmV0dXJuIGdlbmVyYXRvcjtcbiAgfVxuICBpZiAoYWxwaGFiZXQuaW5jbHVkZXMoc2VwYXJhdG9yKSkge1xuICAgIHRocm93IG5ldyBJbnZhbGlkQXJndW1lbnRFcnJvcih7XG4gICAgICBhcmd1bWVudDogXCJzZXBhcmF0b3JcIixcbiAgICAgIG1lc3NhZ2U6IGBUaGUgc2VwYXJhdG9yIFwiJHtzZXBhcmF0b3J9XCIgbXVzdCBub3QgYmUgcGFydCBvZiB0aGUgYWxwaGFiZXQgXCIke2FscGhhYmV0fVwiLmBcbiAgICB9KTtcbiAgfVxuICByZXR1cm4gKCkgPT4gYCR7cHJlZml4fSR7c2VwYXJhdG9yfSR7Z2VuZXJhdG9yKCl9YDtcbn07XG52YXIgZ2VuZXJhdGVJZCA9IGNyZWF0ZUlkR2VuZXJhdG9yKCk7XG5cbi8vIHNyYy9nZXQtZXJyb3ItbWVzc2FnZS50c1xuZnVuY3Rpb24gZ2V0RXJyb3JNZXNzYWdlKGVycm9yKSB7XG4gIGlmIChlcnJvciA9PSBudWxsKSB7XG4gICAgcmV0dXJuIFwidW5rbm93biBlcnJvclwiO1xuICB9XG4gIGlmICh0eXBlb2YgZXJyb3IgPT09IFwic3RyaW5nXCIpIHtcbiAgICByZXR1cm4gZXJyb3I7XG4gIH1cbiAgaWYgKGVycm9yIGluc3RhbmNlb2YgRXJyb3IpIHtcbiAgICByZXR1cm4gZXJyb3IubWVzc2FnZTtcbiAgfVxuICByZXR1cm4gSlNPTi5zdHJpbmdpZnkoZXJyb3IpO1xufVxuXG4vLyBzcmMvZ2V0LWZyb20tYXBpLnRzXG5pbXBvcnQgeyBBUElDYWxsRXJyb3IgYXMgQVBJQ2FsbEVycm9yMiB9IGZyb20gXCJAYWktc2RrL3Byb3ZpZGVyXCI7XG5cbi8vIHNyYy9oYW5kbGUtZmV0Y2gtZXJyb3IudHNcbmltcG9ydCB7IEFQSUNhbGxFcnJvciB9IGZyb20gXCJAYWktc2RrL3Byb3ZpZGVyXCI7XG5cbi8vIHNyYy9pcy1hYm9ydC1lcnJvci50c1xuZnVuY3Rpb24gaXNBYm9ydEVycm9yKGVycm9yKSB7XG4gIHJldHVybiAoZXJyb3IgaW5zdGFuY2VvZiBFcnJvciB8fCBlcnJvciBpbnN0YW5jZW9mIERPTUV4Y2VwdGlvbikgJiYgKGVycm9yLm5hbWUgPT09IFwiQWJvcnRFcnJvclwiIHx8IGVycm9yLm5hbWUgPT09IFwiUmVzcG9uc2VBYm9ydGVkXCIgfHwgLy8gTmV4dC5qc1xuICBlcnJvci5uYW1lID09PSBcIlRpbWVvdXRFcnJvclwiKTtcbn1cblxuLy8gc3JjL2hhbmRsZS1mZXRjaC1lcnJvci50c1xudmFyIEZFVENIX0ZBSUxFRF9FUlJPUl9NRVNTQUdFUyA9IFtcImZldGNoIGZhaWxlZFwiLCBcImZhaWxlZCB0byBmZXRjaFwiXTtcbmZ1bmN0aW9uIGhhbmRsZUZldGNoRXJyb3Ioe1xuICBlcnJvcixcbiAgdXJsLFxuICByZXF1ZXN0Qm9keVZhbHVlc1xufSkge1xuICBpZiAoaXNBYm9ydEVycm9yKGVycm9yKSkge1xuICAgIHJldHVybiBlcnJvcjtcbiAgfVxuICBpZiAoZXJyb3IgaW5zdGFuY2VvZiBUeXBlRXJyb3IgJiYgRkVUQ0hfRkFJTEVEX0VSUk9SX01FU1NBR0VTLmluY2x1ZGVzKGVycm9yLm1lc3NhZ2UudG9Mb3dlckNhc2UoKSkpIHtcbiAgICBjb25zdCBjYXVzZSA9IGVycm9yLmNhdXNlO1xuICAgIGlmIChjYXVzZSAhPSBudWxsKSB7XG4gICAgICByZXR1cm4gbmV3IEFQSUNhbGxFcnJvcih7XG4gICAgICAgIG1lc3NhZ2U6IGBDYW5ub3QgY29ubmVjdCB0byBBUEk6ICR7Y2F1c2UubWVzc2FnZX1gLFxuICAgICAgICBjYXVzZSxcbiAgICAgICAgdXJsLFxuICAgICAgICByZXF1ZXN0Qm9keVZhbHVlcyxcbiAgICAgICAgaXNSZXRyeWFibGU6IHRydWVcbiAgICAgICAgLy8gcmV0cnkgd2hlbiBuZXR3b3JrIGVycm9yXG4gICAgICB9KTtcbiAgICB9XG4gIH1cbiAgcmV0dXJuIGVycm9yO1xufVxuXG4vLyBzcmMvZ2V0LXJ1bnRpbWUtZW52aXJvbm1lbnQtdXNlci1hZ2VudC50c1xuZnVuY3Rpb24gZ2V0UnVudGltZUVudmlyb25tZW50VXNlckFnZW50KGdsb2JhbFRoaXNBbnkgPSBnbG9iYWxUaGlzKSB7XG4gIHZhciBfYTIsIF9iMiwgX2M7XG4gIGlmIChnbG9iYWxUaGlzQW55LndpbmRvdykge1xuICAgIHJldHVybiBgcnVudGltZS9icm93c2VyYDtcbiAgfVxuICBpZiAoKF9hMiA9IGdsb2JhbFRoaXNBbnkubmF2aWdhdG9yKSA9PSBudWxsID8gdm9pZCAwIDogX2EyLnVzZXJBZ2VudCkge1xuICAgIHJldHVybiBgcnVudGltZS8ke2dsb2JhbFRoaXNBbnkubmF2aWdhdG9yLnVzZXJBZ2VudC50b0xvd2VyQ2FzZSgpfWA7XG4gIH1cbiAgaWYgKChfYyA9IChfYjIgPSBnbG9iYWxUaGlzQW55LnByb2Nlc3MpID09IG51bGwgPyB2b2lkIDAgOiBfYjIudmVyc2lvbnMpID09IG51bGwgPyB2b2lkIDAgOiBfYy5ub2RlKSB7XG4gICAgcmV0dXJuIGBydW50aW1lL25vZGUuanMvJHtnbG9iYWxUaGlzQW55LnByb2Nlc3MudmVyc2lvbi5zdWJzdHJpbmcoMCl9YDtcbiAgfVxuICBpZiAoZ2xvYmFsVGhpc0FueS5FZGdlUnVudGltZSkge1xuICAgIHJldHVybiBgcnVudGltZS92ZXJjZWwtZWRnZWA7XG4gIH1cbiAgcmV0dXJuIFwicnVudGltZS91bmtub3duXCI7XG59XG5cbi8vIHNyYy9ub3JtYWxpemUtaGVhZGVycy50c1xuZnVuY3Rpb24gbm9ybWFsaXplSGVhZGVycyhoZWFkZXJzKSB7XG4gIGlmIChoZWFkZXJzID09IG51bGwpIHtcbiAgICByZXR1cm4ge307XG4gIH1cbiAgY29uc3Qgbm9ybWFsaXplZCA9IHt9O1xuICBpZiAoaGVhZGVycyBpbnN0YW5jZW9mIEhlYWRlcnMpIHtcbiAgICBoZWFkZXJzLmZvckVhY2goKHZhbHVlLCBrZXkpID0+IHtcbiAgICAgIG5vcm1hbGl6ZWRba2V5LnRvTG93ZXJDYXNlKCldID0gdmFsdWU7XG4gICAgfSk7XG4gIH0gZWxzZSB7XG4gICAgaWYgKCFBcnJheS5pc0FycmF5KGhlYWRlcnMpKSB7XG4gICAgICBoZWFkZXJzID0gT2JqZWN0LmVudHJpZXMoaGVhZGVycyk7XG4gICAgfVxuICAgIGZvciAoY29uc3QgW2tleSwgdmFsdWVdIG9mIGhlYWRlcnMpIHtcbiAgICAgIGlmICh2YWx1ZSAhPSBudWxsKSB7XG4gICAgICAgIG5vcm1hbGl6ZWRba2V5LnRvTG93ZXJDYXNlKCldID0gdmFsdWU7XG4gICAgICB9XG4gICAgfVxuICB9XG4gIHJldHVybiBub3JtYWxpemVkO1xufVxuXG4vLyBzcmMvd2l0aC11c2VyLWFnZW50LXN1ZmZpeC50c1xuZnVuY3Rpb24gd2l0aFVzZXJBZ2VudFN1ZmZpeChoZWFkZXJzLCAuLi51c2VyQWdlbnRTdWZmaXhQYXJ0cykge1xuICBjb25zdCBub3JtYWxpemVkSGVhZGVycyA9IG5ldyBIZWFkZXJzKG5vcm1hbGl6ZUhlYWRlcnMoaGVhZGVycykpO1xuICBjb25zdCBjdXJyZW50VXNlckFnZW50SGVhZGVyID0gbm9ybWFsaXplZEhlYWRlcnMuZ2V0KFwidXNlci1hZ2VudFwiKSB8fCBcIlwiO1xuICBub3JtYWxpemVkSGVhZGVycy5zZXQoXG4gICAgXCJ1c2VyLWFnZW50XCIsXG4gICAgW2N1cnJlbnRVc2VyQWdlbnRIZWFkZXIsIC4uLnVzZXJBZ2VudFN1ZmZpeFBhcnRzXS5maWx0ZXIoQm9vbGVhbikuam9pbihcIiBcIilcbiAgKTtcbiAgcmV0dXJuIE9iamVjdC5mcm9tRW50cmllcyhub3JtYWxpemVkSGVhZGVycy5lbnRyaWVzKCkpO1xufVxuXG4vLyBzcmMvdmVyc2lvbi50c1xudmFyIFZFUlNJT04gPSB0cnVlID8gXCI0LjAuNFwiIDogXCIwLjAuMC10ZXN0XCI7XG5cbi8vIHNyYy9nZXQtZnJvbS1hcGkudHNcbnZhciBnZXRPcmlnaW5hbEZldGNoID0gKCkgPT4gZ2xvYmFsVGhpcy5mZXRjaDtcbnZhciBnZXRGcm9tQXBpID0gYXN5bmMgKHtcbiAgdXJsLFxuICBoZWFkZXJzID0ge30sXG4gIHN1Y2Nlc3NmdWxSZXNwb25zZUhhbmRsZXIsXG4gIGZhaWxlZFJlc3BvbnNlSGFuZGxlcixcbiAgYWJvcnRTaWduYWwsXG4gIGZldGNoOiBmZXRjaDIgPSBnZXRPcmlnaW5hbEZldGNoKClcbn0pID0+IHtcbiAgdHJ5IHtcbiAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGZldGNoMih1cmwsIHtcbiAgICAgIG1ldGhvZDogXCJHRVRcIixcbiAgICAgIGhlYWRlcnM6IHdpdGhVc2VyQWdlbnRTdWZmaXgoXG4gICAgICAgIGhlYWRlcnMsXG4gICAgICAgIGBhaS1zZGsvcHJvdmlkZXItdXRpbHMvJHtWRVJTSU9OfWAsXG4gICAgICAgIGdldFJ1bnRpbWVFbnZpcm9ubWVudFVzZXJBZ2VudCgpXG4gICAgICApLFxuICAgICAgc2lnbmFsOiBhYm9ydFNpZ25hbFxuICAgIH0pO1xuICAgIGNvbnN0IHJlc3BvbnNlSGVhZGVycyA9IGV4dHJhY3RSZXNwb25zZUhlYWRlcnMocmVzcG9uc2UpO1xuICAgIGlmICghcmVzcG9uc2Uub2spIHtcbiAgICAgIGxldCBlcnJvckluZm9ybWF0aW9uO1xuICAgICAgdHJ5IHtcbiAgICAgICAgZXJyb3JJbmZvcm1hdGlvbiA9IGF3YWl0IGZhaWxlZFJlc3BvbnNlSGFuZGxlcih7XG4gICAgICAgICAgcmVzcG9uc2UsXG4gICAgICAgICAgdXJsLFxuICAgICAgICAgIHJlcXVlc3RCb2R5VmFsdWVzOiB7fVxuICAgICAgICB9KTtcbiAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgIGlmIChpc0Fib3J0RXJyb3IoZXJyb3IpIHx8IEFQSUNhbGxFcnJvcjIuaXNJbnN0YW5jZShlcnJvcikpIHtcbiAgICAgICAgICB0aHJvdyBlcnJvcjtcbiAgICAgICAgfVxuICAgICAgICB0aHJvdyBuZXcgQVBJQ2FsbEVycm9yMih7XG4gICAgICAgICAgbWVzc2FnZTogXCJGYWlsZWQgdG8gcHJvY2VzcyBlcnJvciByZXNwb25zZVwiLFxuICAgICAgICAgIGNhdXNlOiBlcnJvcixcbiAgICAgICAgICBzdGF0dXNDb2RlOiByZXNwb25zZS5zdGF0dXMsXG4gICAgICAgICAgdXJsLFxuICAgICAgICAgIHJlc3BvbnNlSGVhZGVycyxcbiAgICAgICAgICByZXF1ZXN0Qm9keVZhbHVlczoge31cbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgICB0aHJvdyBlcnJvckluZm9ybWF0aW9uLnZhbHVlO1xuICAgIH1cbiAgICB0cnkge1xuICAgICAgcmV0dXJuIGF3YWl0IHN1Y2Nlc3NmdWxSZXNwb25zZUhhbmRsZXIoe1xuICAgICAgICByZXNwb25zZSxcbiAgICAgICAgdXJsLFxuICAgICAgICByZXF1ZXN0Qm9keVZhbHVlczoge31cbiAgICAgIH0pO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBpZiAoZXJyb3IgaW5zdGFuY2VvZiBFcnJvcikge1xuICAgICAgICBpZiAoaXNBYm9ydEVycm9yKGVycm9yKSB8fCBBUElDYWxsRXJyb3IyLmlzSW5zdGFuY2UoZXJyb3IpKSB7XG4gICAgICAgICAgdGhyb3cgZXJyb3I7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIHRocm93IG5ldyBBUElDYWxsRXJyb3IyKHtcbiAgICAgICAgbWVzc2FnZTogXCJGYWlsZWQgdG8gcHJvY2VzcyBzdWNjZXNzZnVsIHJlc3BvbnNlXCIsXG4gICAgICAgIGNhdXNlOiBlcnJvcixcbiAgICAgICAgc3RhdHVzQ29kZTogcmVzcG9uc2Uuc3RhdHVzLFxuICAgICAgICB1cmwsXG4gICAgICAgIHJlc3BvbnNlSGVhZGVycyxcbiAgICAgICAgcmVxdWVzdEJvZHlWYWx1ZXM6IHt9XG4gICAgICB9KTtcbiAgICB9XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgdGhyb3cgaGFuZGxlRmV0Y2hFcnJvcih7IGVycm9yLCB1cmwsIHJlcXVlc3RCb2R5VmFsdWVzOiB7fSB9KTtcbiAgfVxufTtcblxuLy8gc3JjL2luamVjdC1qc29uLWluc3RydWN0aW9uLnRzXG52YXIgREVGQVVMVF9TQ0hFTUFfUFJFRklYID0gXCJKU09OIHNjaGVtYTpcIjtcbnZhciBERUZBVUxUX1NDSEVNQV9TVUZGSVggPSBcIllvdSBNVVNUIGFuc3dlciB3aXRoIGEgSlNPTiBvYmplY3QgdGhhdCBtYXRjaGVzIHRoZSBKU09OIHNjaGVtYSBhYm92ZS5cIjtcbnZhciBERUZBVUxUX0dFTkVSSUNfU1VGRklYID0gXCJZb3UgTVVTVCBhbnN3ZXIgd2l0aCBKU09OLlwiO1xuZnVuY3Rpb24gaW5qZWN0SnNvbkluc3RydWN0aW9uKHtcbiAgcHJvbXB0LFxuICBzY2hlbWEsXG4gIHNjaGVtYVByZWZpeCA9IHNjaGVtYSAhPSBudWxsID8gREVGQVVMVF9TQ0hFTUFfUFJFRklYIDogdm9pZCAwLFxuICBzY2hlbWFTdWZmaXggPSBzY2hlbWEgIT0gbnVsbCA/IERFRkFVTFRfU0NIRU1BX1NVRkZJWCA6IERFRkFVTFRfR0VORVJJQ19TVUZGSVhcbn0pIHtcbiAgcmV0dXJuIFtcbiAgICBwcm9tcHQgIT0gbnVsbCAmJiBwcm9tcHQubGVuZ3RoID4gMCA/IHByb21wdCA6IHZvaWQgMCxcbiAgICBwcm9tcHQgIT0gbnVsbCAmJiBwcm9tcHQubGVuZ3RoID4gMCA/IFwiXCIgOiB2b2lkIDAsXG4gICAgLy8gYWRkIGEgbmV3bGluZSBpZiBwcm9tcHQgaXMgbm90IG51bGxcbiAgICBzY2hlbWFQcmVmaXgsXG4gICAgc2NoZW1hICE9IG51bGwgPyBKU09OLnN0cmluZ2lmeShzY2hlbWEpIDogdm9pZCAwLFxuICAgIHNjaGVtYVN1ZmZpeFxuICBdLmZpbHRlcigobGluZSkgPT4gbGluZSAhPSBudWxsKS5qb2luKFwiXFxuXCIpO1xufVxuZnVuY3Rpb24gaW5qZWN0SnNvbkluc3RydWN0aW9uSW50b01lc3NhZ2VzKHtcbiAgbWVzc2FnZXMsXG4gIHNjaGVtYSxcbiAgc2NoZW1hUHJlZml4LFxuICBzY2hlbWFTdWZmaXhcbn0pIHtcbiAgdmFyIF9hMiwgX2IyO1xuICBjb25zdCBzeXN0ZW1NZXNzYWdlID0gKChfYTIgPSBtZXNzYWdlc1swXSkgPT0gbnVsbCA/IHZvaWQgMCA6IF9hMi5yb2xlKSA9PT0gXCJzeXN0ZW1cIiA/IHsgLi4ubWVzc2FnZXNbMF0gfSA6IHsgcm9sZTogXCJzeXN0ZW1cIiwgY29udGVudDogXCJcIiB9O1xuICBzeXN0ZW1NZXNzYWdlLmNvbnRlbnQgPSBpbmplY3RKc29uSW5zdHJ1Y3Rpb24oe1xuICAgIHByb21wdDogc3lzdGVtTWVzc2FnZS5jb250ZW50LFxuICAgIHNjaGVtYSxcbiAgICBzY2hlbWFQcmVmaXgsXG4gICAgc2NoZW1hU3VmZml4XG4gIH0pO1xuICByZXR1cm4gW1xuICAgIHN5c3RlbU1lc3NhZ2UsXG4gICAgLi4uKChfYjIgPSBtZXNzYWdlc1swXSkgPT0gbnVsbCA/IHZvaWQgMCA6IF9iMi5yb2xlKSA9PT0gXCJzeXN0ZW1cIiA/IG1lc3NhZ2VzLnNsaWNlKDEpIDogbWVzc2FnZXNcbiAgXTtcbn1cblxuLy8gc3JjL2lzLW5vbi1udWxsYWJsZS50c1xuZnVuY3Rpb24gaXNOb25OdWxsYWJsZSh2YWx1ZSkge1xuICByZXR1cm4gdmFsdWUgIT0gbnVsbDtcbn1cblxuLy8gc3JjL2lzLXVybC1zdXBwb3J0ZWQudHNcbmZ1bmN0aW9uIGlzVXJsU3VwcG9ydGVkKHtcbiAgbWVkaWFUeXBlLFxuICB1cmwsXG4gIHN1cHBvcnRlZFVybHNcbn0pIHtcbiAgdXJsID0gdXJsLnRvTG93ZXJDYXNlKCk7XG4gIG1lZGlhVHlwZSA9IG1lZGlhVHlwZS50b0xvd2VyQ2FzZSgpO1xuICByZXR1cm4gT2JqZWN0LmVudHJpZXMoc3VwcG9ydGVkVXJscykubWFwKChba2V5LCB2YWx1ZV0pID0+IHtcbiAgICBjb25zdCBtZWRpYVR5cGUyID0ga2V5LnRvTG93ZXJDYXNlKCk7XG4gICAgcmV0dXJuIG1lZGlhVHlwZTIgPT09IFwiKlwiIHx8IG1lZGlhVHlwZTIgPT09IFwiKi8qXCIgPyB7IG1lZGlhVHlwZVByZWZpeDogXCJcIiwgcmVnZXhlczogdmFsdWUgfSA6IHsgbWVkaWFUeXBlUHJlZml4OiBtZWRpYVR5cGUyLnJlcGxhY2UoL1xcKi8sIFwiXCIpLCByZWdleGVzOiB2YWx1ZSB9O1xuICB9KS5maWx0ZXIoKHsgbWVkaWFUeXBlUHJlZml4IH0pID0+IG1lZGlhVHlwZS5zdGFydHNXaXRoKG1lZGlhVHlwZVByZWZpeCkpLmZsYXRNYXAoKHsgcmVnZXhlcyB9KSA9PiByZWdleGVzKS5zb21lKChwYXR0ZXJuKSA9PiBwYXR0ZXJuLnRlc3QodXJsKSk7XG59XG5cbi8vIHNyYy9sb2FkLWFwaS1rZXkudHNcbmltcG9ydCB7IExvYWRBUElLZXlFcnJvciB9IGZyb20gXCJAYWktc2RrL3Byb3ZpZGVyXCI7XG5mdW5jdGlvbiBsb2FkQXBpS2V5KHtcbiAgYXBpS2V5LFxuICBlbnZpcm9ubWVudFZhcmlhYmxlTmFtZSxcbiAgYXBpS2V5UGFyYW1ldGVyTmFtZSA9IFwiYXBpS2V5XCIsXG4gIGRlc2NyaXB0aW9uXG59KSB7XG4gIGlmICh0eXBlb2YgYXBpS2V5ID09PSBcInN0cmluZ1wiKSB7XG4gICAgcmV0dXJuIGFwaUtleTtcbiAgfVxuICBpZiAoYXBpS2V5ICE9IG51bGwpIHtcbiAgICB0aHJvdyBuZXcgTG9hZEFQSUtleUVycm9yKHtcbiAgICAgIG1lc3NhZ2U6IGAke2Rlc2NyaXB0aW9ufSBBUEkga2V5IG11c3QgYmUgYSBzdHJpbmcuYFxuICAgIH0pO1xuICB9XG4gIGlmICh0eXBlb2YgcHJvY2VzcyA9PT0gXCJ1bmRlZmluZWRcIikge1xuICAgIHRocm93IG5ldyBMb2FkQVBJS2V5RXJyb3Ioe1xuICAgICAgbWVzc2FnZTogYCR7ZGVzY3JpcHRpb259IEFQSSBrZXkgaXMgbWlzc2luZy4gUGFzcyBpdCB1c2luZyB0aGUgJyR7YXBpS2V5UGFyYW1ldGVyTmFtZX0nIHBhcmFtZXRlci4gRW52aXJvbm1lbnQgdmFyaWFibGVzIGlzIG5vdCBzdXBwb3J0ZWQgaW4gdGhpcyBlbnZpcm9ubWVudC5gXG4gICAgfSk7XG4gIH1cbiAgYXBpS2V5ID0gcHJvY2Vzcy5lbnZbZW52aXJvbm1lbnRWYXJpYWJsZU5hbWVdO1xuICBpZiAoYXBpS2V5ID09IG51bGwpIHtcbiAgICB0aHJvdyBuZXcgTG9hZEFQSUtleUVycm9yKHtcbiAgICAgIG1lc3NhZ2U6IGAke2Rlc2NyaXB0aW9ufSBBUEkga2V5IGlzIG1pc3NpbmcuIFBhc3MgaXQgdXNpbmcgdGhlICcke2FwaUtleVBhcmFtZXRlck5hbWV9JyBwYXJhbWV0ZXIgb3IgdGhlICR7ZW52aXJvbm1lbnRWYXJpYWJsZU5hbWV9IGVudmlyb25tZW50IHZhcmlhYmxlLmBcbiAgICB9KTtcbiAgfVxuICBpZiAodHlwZW9mIGFwaUtleSAhPT0gXCJzdHJpbmdcIikge1xuICAgIHRocm93IG5ldyBMb2FkQVBJS2V5RXJyb3Ioe1xuICAgICAgbWVzc2FnZTogYCR7ZGVzY3JpcHRpb259IEFQSSBrZXkgbXVzdCBiZSBhIHN0cmluZy4gVGhlIHZhbHVlIG9mIHRoZSAke2Vudmlyb25tZW50VmFyaWFibGVOYW1lfSBlbnZpcm9ubWVudCB2YXJpYWJsZSBpcyBub3QgYSBzdHJpbmcuYFxuICAgIH0pO1xuICB9XG4gIHJldHVybiBhcGlLZXk7XG59XG5cbi8vIHNyYy9sb2FkLW9wdGlvbmFsLXNldHRpbmcudHNcbmZ1bmN0aW9uIGxvYWRPcHRpb25hbFNldHRpbmcoe1xuICBzZXR0aW5nVmFsdWUsXG4gIGVudmlyb25tZW50VmFyaWFibGVOYW1lXG59KSB7XG4gIGlmICh0eXBlb2Ygc2V0dGluZ1ZhbHVlID09PSBcInN0cmluZ1wiKSB7XG4gICAgcmV0dXJuIHNldHRpbmdWYWx1ZTtcbiAgfVxuICBpZiAoc2V0dGluZ1ZhbHVlICE9IG51bGwgfHwgdHlwZW9mIHByb2Nlc3MgPT09IFwidW5kZWZpbmVkXCIpIHtcbiAgICByZXR1cm4gdm9pZCAwO1xuICB9XG4gIHNldHRpbmdWYWx1ZSA9IHByb2Nlc3MuZW52W2Vudmlyb25tZW50VmFyaWFibGVOYW1lXTtcbiAgaWYgKHNldHRpbmdWYWx1ZSA9PSBudWxsIHx8IHR5cGVvZiBzZXR0aW5nVmFsdWUgIT09IFwic3RyaW5nXCIpIHtcbiAgICByZXR1cm4gdm9pZCAwO1xuICB9XG4gIHJldHVybiBzZXR0aW5nVmFsdWU7XG59XG5cbi8vIHNyYy9sb2FkLXNldHRpbmcudHNcbmltcG9ydCB7IExvYWRTZXR0aW5nRXJyb3IgfSBmcm9tIFwiQGFpLXNkay9wcm92aWRlclwiO1xuZnVuY3Rpb24gbG9hZFNldHRpbmcoe1xuICBzZXR0aW5nVmFsdWUsXG4gIGVudmlyb25tZW50VmFyaWFibGVOYW1lLFxuICBzZXR0aW5nTmFtZSxcbiAgZGVzY3JpcHRpb25cbn0pIHtcbiAgaWYgKHR5cGVvZiBzZXR0aW5nVmFsdWUgPT09IFwic3RyaW5nXCIpIHtcbiAgICByZXR1cm4gc2V0dGluZ1ZhbHVlO1xuICB9XG4gIGlmIChzZXR0aW5nVmFsdWUgIT0gbnVsbCkge1xuICAgIHRocm93IG5ldyBMb2FkU2V0dGluZ0Vycm9yKHtcbiAgICAgIG1lc3NhZ2U6IGAke2Rlc2NyaXB0aW9ufSBzZXR0aW5nIG11c3QgYmUgYSBzdHJpbmcuYFxuICAgIH0pO1xuICB9XG4gIGlmICh0eXBlb2YgcHJvY2VzcyA9PT0gXCJ1bmRlZmluZWRcIikge1xuICAgIHRocm93IG5ldyBMb2FkU2V0dGluZ0Vycm9yKHtcbiAgICAgIG1lc3NhZ2U6IGAke2Rlc2NyaXB0aW9ufSBzZXR0aW5nIGlzIG1pc3NpbmcuIFBhc3MgaXQgdXNpbmcgdGhlICcke3NldHRpbmdOYW1lfScgcGFyYW1ldGVyLiBFbnZpcm9ubWVudCB2YXJpYWJsZXMgaXMgbm90IHN1cHBvcnRlZCBpbiB0aGlzIGVudmlyb25tZW50LmBcbiAgICB9KTtcbiAgfVxuICBzZXR0aW5nVmFsdWUgPSBwcm9jZXNzLmVudltlbnZpcm9ubWVudFZhcmlhYmxlTmFtZV07XG4gIGlmIChzZXR0aW5nVmFsdWUgPT0gbnVsbCkge1xuICAgIHRocm93IG5ldyBMb2FkU2V0dGluZ0Vycm9yKHtcbiAgICAgIG1lc3NhZ2U6IGAke2Rlc2NyaXB0aW9ufSBzZXR0aW5nIGlzIG1pc3NpbmcuIFBhc3MgaXQgdXNpbmcgdGhlICcke3NldHRpbmdOYW1lfScgcGFyYW1ldGVyIG9yIHRoZSAke2Vudmlyb25tZW50VmFyaWFibGVOYW1lfSBlbnZpcm9ubWVudCB2YXJpYWJsZS5gXG4gICAgfSk7XG4gIH1cbiAgaWYgKHR5cGVvZiBzZXR0aW5nVmFsdWUgIT09IFwic3RyaW5nXCIpIHtcbiAgICB0aHJvdyBuZXcgTG9hZFNldHRpbmdFcnJvcih7XG4gICAgICBtZXNzYWdlOiBgJHtkZXNjcmlwdGlvbn0gc2V0dGluZyBtdXN0IGJlIGEgc3RyaW5nLiBUaGUgdmFsdWUgb2YgdGhlICR7ZW52aXJvbm1lbnRWYXJpYWJsZU5hbWV9IGVudmlyb25tZW50IHZhcmlhYmxlIGlzIG5vdCBhIHN0cmluZy5gXG4gICAgfSk7XG4gIH1cbiAgcmV0dXJuIHNldHRpbmdWYWx1ZTtcbn1cblxuLy8gc3JjL21lZGlhLXR5cGUtdG8tZXh0ZW5zaW9uLnRzXG5mdW5jdGlvbiBtZWRpYVR5cGVUb0V4dGVuc2lvbihtZWRpYVR5cGUpIHtcbiAgdmFyIF9hMjtcbiAgY29uc3QgW190eXBlLCBzdWJ0eXBlID0gXCJcIl0gPSBtZWRpYVR5cGUudG9Mb3dlckNhc2UoKS5zcGxpdChcIi9cIik7XG4gIHJldHVybiAoX2EyID0ge1xuICAgIG1wZWc6IFwibXAzXCIsXG4gICAgXCJ4LXdhdlwiOiBcIndhdlwiLFxuICAgIG9wdXM6IFwib2dnXCIsXG4gICAgbXA0OiBcIm00YVwiLFxuICAgIFwieC1tNGFcIjogXCJtNGFcIlxuICB9W3N1YnR5cGVdKSAhPSBudWxsID8gX2EyIDogc3VidHlwZTtcbn1cblxuLy8gc3JjL3BhcnNlLWpzb24udHNcbmltcG9ydCB7XG4gIEpTT05QYXJzZUVycm9yLFxuICBUeXBlVmFsaWRhdGlvbkVycm9yIGFzIFR5cGVWYWxpZGF0aW9uRXJyb3IzXG59IGZyb20gXCJAYWktc2RrL3Byb3ZpZGVyXCI7XG5cbi8vIHNyYy9zZWN1cmUtanNvbi1wYXJzZS50c1xudmFyIHN1c3BlY3RQcm90b1J4ID0gL1wiX19wcm90b19fXCJcXHMqOi87XG52YXIgc3VzcGVjdENvbnN0cnVjdG9yUnggPSAvXCJjb25zdHJ1Y3RvclwiXFxzKjovO1xuZnVuY3Rpb24gX3BhcnNlKHRleHQpIHtcbiAgY29uc3Qgb2JqID0gSlNPTi5wYXJzZSh0ZXh0KTtcbiAgaWYgKG9iaiA9PT0gbnVsbCB8fCB0eXBlb2Ygb2JqICE9PSBcIm9iamVjdFwiKSB7XG4gICAgcmV0dXJuIG9iajtcbiAgfVxuICBpZiAoc3VzcGVjdFByb3RvUngudGVzdCh0ZXh0KSA9PT0gZmFsc2UgJiYgc3VzcGVjdENvbnN0cnVjdG9yUngudGVzdCh0ZXh0KSA9PT0gZmFsc2UpIHtcbiAgICByZXR1cm4gb2JqO1xuICB9XG4gIHJldHVybiBmaWx0ZXIob2JqKTtcbn1cbmZ1bmN0aW9uIGZpbHRlcihvYmopIHtcbiAgbGV0IG5leHQgPSBbb2JqXTtcbiAgd2hpbGUgKG5leHQubGVuZ3RoKSB7XG4gICAgY29uc3Qgbm9kZXMgPSBuZXh0O1xuICAgIG5leHQgPSBbXTtcbiAgICBmb3IgKGNvbnN0IG5vZGUgb2Ygbm9kZXMpIHtcbiAgICAgIGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwobm9kZSwgXCJfX3Byb3RvX19cIikpIHtcbiAgICAgICAgdGhyb3cgbmV3IFN5bnRheEVycm9yKFwiT2JqZWN0IGNvbnRhaW5zIGZvcmJpZGRlbiBwcm90b3R5cGUgcHJvcGVydHlcIik7XG4gICAgICB9XG4gICAgICBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG5vZGUsIFwiY29uc3RydWN0b3JcIikgJiYgT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG5vZGUuY29uc3RydWN0b3IsIFwicHJvdG90eXBlXCIpKSB7XG4gICAgICAgIHRocm93IG5ldyBTeW50YXhFcnJvcihcIk9iamVjdCBjb250YWlucyBmb3JiaWRkZW4gcHJvdG90eXBlIHByb3BlcnR5XCIpO1xuICAgICAgfVxuICAgICAgZm9yIChjb25zdCBrZXkgaW4gbm9kZSkge1xuICAgICAgICBjb25zdCB2YWx1ZSA9IG5vZGVba2V5XTtcbiAgICAgICAgaWYgKHZhbHVlICYmIHR5cGVvZiB2YWx1ZSA9PT0gXCJvYmplY3RcIikge1xuICAgICAgICAgIG5leHQucHVzaCh2YWx1ZSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gIH1cbiAgcmV0dXJuIG9iajtcbn1cbmZ1bmN0aW9uIHNlY3VyZUpzb25QYXJzZSh0ZXh0KSB7XG4gIGNvbnN0IHsgc3RhY2tUcmFjZUxpbWl0IH0gPSBFcnJvcjtcbiAgdHJ5IHtcbiAgICBFcnJvci5zdGFja1RyYWNlTGltaXQgPSAwO1xuICB9IGNhdGNoIChlKSB7XG4gICAgcmV0dXJuIF9wYXJzZSh0ZXh0KTtcbiAgfVxuICB0cnkge1xuICAgIHJldHVybiBfcGFyc2UodGV4dCk7XG4gIH0gZmluYWxseSB7XG4gICAgRXJyb3Iuc3RhY2tUcmFjZUxpbWl0ID0gc3RhY2tUcmFjZUxpbWl0O1xuICB9XG59XG5cbi8vIHNyYy92YWxpZGF0ZS10eXBlcy50c1xuaW1wb3J0IHsgVHlwZVZhbGlkYXRpb25FcnJvciBhcyBUeXBlVmFsaWRhdGlvbkVycm9yMiB9IGZyb20gXCJAYWktc2RrL3Byb3ZpZGVyXCI7XG5cbi8vIHNyYy9zY2hlbWEudHNcbmltcG9ydCB7IFR5cGVWYWxpZGF0aW9uRXJyb3IgfSBmcm9tIFwiQGFpLXNkay9wcm92aWRlclwiO1xuaW1wb3J0ICogYXMgejQgZnJvbSBcInpvZC92NFwiO1xuXG4vLyBzcmMvYWRkLWFkZGl0aW9uYWwtcHJvcGVydGllcy10by1qc29uLXNjaGVtYS50c1xuZnVuY3Rpb24gYWRkQWRkaXRpb25hbFByb3BlcnRpZXNUb0pzb25TY2hlbWEoanNvblNjaGVtYTIpIHtcbiAgaWYgKGpzb25TY2hlbWEyLnR5cGUgPT09IFwib2JqZWN0XCIgfHwgQXJyYXkuaXNBcnJheShqc29uU2NoZW1hMi50eXBlKSAmJiBqc29uU2NoZW1hMi50eXBlLmluY2x1ZGVzKFwib2JqZWN0XCIpKSB7XG4gICAganNvblNjaGVtYTIuYWRkaXRpb25hbFByb3BlcnRpZXMgPSBmYWxzZTtcbiAgICBjb25zdCB7IHByb3BlcnRpZXMgfSA9IGpzb25TY2hlbWEyO1xuICAgIGlmIChwcm9wZXJ0aWVzICE9IG51bGwpIHtcbiAgICAgIGZvciAoY29uc3Qga2V5IG9mIE9iamVjdC5rZXlzKHByb3BlcnRpZXMpKSB7XG4gICAgICAgIHByb3BlcnRpZXNba2V5XSA9IHZpc2l0KHByb3BlcnRpZXNba2V5XSk7XG4gICAgICB9XG4gICAgfVxuICB9XG4gIGlmIChqc29uU2NoZW1hMi5pdGVtcyAhPSBudWxsKSB7XG4gICAganNvblNjaGVtYTIuaXRlbXMgPSBBcnJheS5pc0FycmF5KGpzb25TY2hlbWEyLml0ZW1zKSA/IGpzb25TY2hlbWEyLml0ZW1zLm1hcCh2aXNpdCkgOiB2aXNpdChqc29uU2NoZW1hMi5pdGVtcyk7XG4gIH1cbiAgaWYgKGpzb25TY2hlbWEyLmFueU9mICE9IG51bGwpIHtcbiAgICBqc29uU2NoZW1hMi5hbnlPZiA9IGpzb25TY2hlbWEyLmFueU9mLm1hcCh2aXNpdCk7XG4gIH1cbiAgaWYgKGpzb25TY2hlbWEyLmFsbE9mICE9IG51bGwpIHtcbiAgICBqc29uU2NoZW1hMi5hbGxPZiA9IGpzb25TY2hlbWEyLmFsbE9mLm1hcCh2aXNpdCk7XG4gIH1cbiAgaWYgKGpzb25TY2hlbWEyLm9uZU9mICE9IG51bGwpIHtcbiAgICBqc29uU2NoZW1hMi5vbmVPZiA9IGpzb25TY2hlbWEyLm9uZU9mLm1hcCh2aXNpdCk7XG4gIH1cbiAgY29uc3QgeyBkZWZpbml0aW9ucyB9ID0ganNvblNjaGVtYTI7XG4gIGlmIChkZWZpbml0aW9ucyAhPSBudWxsKSB7XG4gICAgZm9yIChjb25zdCBrZXkgb2YgT2JqZWN0LmtleXMoZGVmaW5pdGlvbnMpKSB7XG4gICAgICBkZWZpbml0aW9uc1trZXldID0gdmlzaXQoZGVmaW5pdGlvbnNba2V5XSk7XG4gICAgfVxuICB9XG4gIHJldHVybiBqc29uU2NoZW1hMjtcbn1cbmZ1bmN0aW9uIHZpc2l0KGRlZikge1xuICBpZiAodHlwZW9mIGRlZiA9PT0gXCJib29sZWFuXCIpIHJldHVybiBkZWY7XG4gIHJldHVybiBhZGRBZGRpdGlvbmFsUHJvcGVydGllc1RvSnNvblNjaGVtYShkZWYpO1xufVxuXG4vLyBzcmMvdG8tanNvbi1zY2hlbWEvem9kMy10by1qc29uLXNjaGVtYS9vcHRpb25zLnRzXG52YXIgaWdub3JlT3ZlcnJpZGUgPSBTeW1ib2woXG4gIFwiTGV0IHpvZFRvSnNvblNjaGVtYSBkZWNpZGUgb24gd2hpY2ggcGFyc2VyIHRvIHVzZVwiXG4pO1xudmFyIGRlZmF1bHRPcHRpb25zID0ge1xuICBuYW1lOiB2b2lkIDAsXG4gICRyZWZTdHJhdGVneTogXCJyb290XCIsXG4gIGJhc2VQYXRoOiBbXCIjXCJdLFxuICBlZmZlY3RTdHJhdGVneTogXCJpbnB1dFwiLFxuICBwaXBlU3RyYXRlZ3k6IFwiYWxsXCIsXG4gIGRhdGVTdHJhdGVneTogXCJmb3JtYXQ6ZGF0ZS10aW1lXCIsXG4gIG1hcFN0cmF0ZWd5OiBcImVudHJpZXNcIixcbiAgcmVtb3ZlQWRkaXRpb25hbFN0cmF0ZWd5OiBcInBhc3N0aHJvdWdoXCIsXG4gIGFsbG93ZWRBZGRpdGlvbmFsUHJvcGVydGllczogdHJ1ZSxcbiAgcmVqZWN0ZWRBZGRpdGlvbmFsUHJvcGVydGllczogZmFsc2UsXG4gIGRlZmluaXRpb25QYXRoOiBcImRlZmluaXRpb25zXCIsXG4gIHN0cmljdFVuaW9uczogZmFsc2UsXG4gIGRlZmluaXRpb25zOiB7fSxcbiAgZXJyb3JNZXNzYWdlczogZmFsc2UsXG4gIHBhdHRlcm5TdHJhdGVneTogXCJlc2NhcGVcIixcbiAgYXBwbHlSZWdleEZsYWdzOiBmYWxzZSxcbiAgZW1haWxTdHJhdGVneTogXCJmb3JtYXQ6ZW1haWxcIixcbiAgYmFzZTY0U3RyYXRlZ3k6IFwiY29udGVudEVuY29kaW5nOmJhc2U2NFwiLFxuICBuYW1lU3RyYXRlZ3k6IFwicmVmXCJcbn07XG52YXIgZ2V0RGVmYXVsdE9wdGlvbnMgPSAob3B0aW9ucykgPT4gdHlwZW9mIG9wdGlvbnMgPT09IFwic3RyaW5nXCIgPyB7XG4gIC4uLmRlZmF1bHRPcHRpb25zLFxuICBuYW1lOiBvcHRpb25zXG59IDoge1xuICAuLi5kZWZhdWx0T3B0aW9ucyxcbiAgLi4ub3B0aW9uc1xufTtcblxuLy8gc3JjL3RvLWpzb24tc2NoZW1hL3pvZDMtdG8tanNvbi1zY2hlbWEvc2VsZWN0LXBhcnNlci50c1xuaW1wb3J0IHsgWm9kRmlyc3RQYXJ0eVR5cGVLaW5kIGFzIFpvZEZpcnN0UGFydHlUeXBlS2luZDMgfSBmcm9tIFwiem9kL3YzXCI7XG5cbi8vIHNyYy90by1qc29uLXNjaGVtYS96b2QzLXRvLWpzb24tc2NoZW1hL3BhcnNlcnMvYW55LnRzXG5mdW5jdGlvbiBwYXJzZUFueURlZigpIHtcbiAgcmV0dXJuIHt9O1xufVxuXG4vLyBzcmMvdG8tanNvbi1zY2hlbWEvem9kMy10by1qc29uLXNjaGVtYS9wYXJzZXJzL2FycmF5LnRzXG5pbXBvcnQgeyBab2RGaXJzdFBhcnR5VHlwZUtpbmQgfSBmcm9tIFwiem9kL3YzXCI7XG5mdW5jdGlvbiBwYXJzZUFycmF5RGVmKGRlZiwgcmVmcykge1xuICB2YXIgX2EyLCBfYjIsIF9jO1xuICBjb25zdCByZXMgPSB7XG4gICAgdHlwZTogXCJhcnJheVwiXG4gIH07XG4gIGlmICgoKF9hMiA9IGRlZi50eXBlKSA9PSBudWxsID8gdm9pZCAwIDogX2EyLl9kZWYpICYmICgoX2MgPSAoX2IyID0gZGVmLnR5cGUpID09IG51bGwgPyB2b2lkIDAgOiBfYjIuX2RlZikgPT0gbnVsbCA/IHZvaWQgMCA6IF9jLnR5cGVOYW1lKSAhPT0gWm9kRmlyc3RQYXJ0eVR5cGVLaW5kLlpvZEFueSkge1xuICAgIHJlcy5pdGVtcyA9IHBhcnNlRGVmKGRlZi50eXBlLl9kZWYsIHtcbiAgICAgIC4uLnJlZnMsXG4gICAgICBjdXJyZW50UGF0aDogWy4uLnJlZnMuY3VycmVudFBhdGgsIFwiaXRlbXNcIl1cbiAgICB9KTtcbiAgfVxuICBpZiAoZGVmLm1pbkxlbmd0aCkge1xuICAgIHJlcy5taW5JdGVtcyA9IGRlZi5taW5MZW5ndGgudmFsdWU7XG4gIH1cbiAgaWYgKGRlZi5tYXhMZW5ndGgpIHtcbiAgICByZXMubWF4SXRlbXMgPSBkZWYubWF4TGVuZ3RoLnZhbHVlO1xuICB9XG4gIGlmIChkZWYuZXhhY3RMZW5ndGgpIHtcbiAgICByZXMubWluSXRlbXMgPSBkZWYuZXhhY3RMZW5ndGgudmFsdWU7XG4gICAgcmVzLm1heEl0ZW1zID0gZGVmLmV4YWN0TGVuZ3RoLnZhbHVlO1xuICB9XG4gIHJldHVybiByZXM7XG59XG5cbi8vIHNyYy90by1qc29uLXNjaGVtYS96b2QzLXRvLWpzb24tc2NoZW1hL3BhcnNlcnMvYmlnaW50LnRzXG5mdW5jdGlvbiBwYXJzZUJpZ2ludERlZihkZWYpIHtcbiAgY29uc3QgcmVzID0ge1xuICAgIHR5cGU6IFwiaW50ZWdlclwiLFxuICAgIGZvcm1hdDogXCJpbnQ2NFwiXG4gIH07XG4gIGlmICghZGVmLmNoZWNrcykgcmV0dXJuIHJlcztcbiAgZm9yIChjb25zdCBjaGVjayBvZiBkZWYuY2hlY2tzKSB7XG4gICAgc3dpdGNoIChjaGVjay5raW5kKSB7XG4gICAgICBjYXNlIFwibWluXCI6XG4gICAgICAgIGlmIChjaGVjay5pbmNsdXNpdmUpIHtcbiAgICAgICAgICByZXMubWluaW11bSA9IGNoZWNrLnZhbHVlO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHJlcy5leGNsdXNpdmVNaW5pbXVtID0gY2hlY2sudmFsdWU7XG4gICAgICAgIH1cbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlIFwibWF4XCI6XG4gICAgICAgIGlmIChjaGVjay5pbmNsdXNpdmUpIHtcbiAgICAgICAgICByZXMubWF4aW11bSA9IGNoZWNrLnZhbHVlO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHJlcy5leGNsdXNpdmVNYXhpbXVtID0gY2hlY2sudmFsdWU7XG4gICAgICAgIH1cbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlIFwibXVsdGlwbGVPZlwiOlxuICAgICAgICByZXMubXVsdGlwbGVPZiA9IGNoZWNrLnZhbHVlO1xuICAgICAgICBicmVhaztcbiAgICB9XG4gIH1cbiAgcmV0dXJuIHJlcztcbn1cblxuLy8gc3JjL3RvLWpzb24tc2NoZW1hL3pvZDMtdG8tanNvbi1zY2hlbWEvcGFyc2Vycy9ib29sZWFuLnRzXG5mdW5jdGlvbiBwYXJzZUJvb2xlYW5EZWYoKSB7XG4gIHJldHVybiB7IHR5cGU6IFwiYm9vbGVhblwiIH07XG59XG5cbi8vIHNyYy90by1qc29uLXNjaGVtYS96b2QzLXRvLWpzb24tc2NoZW1hL3BhcnNlcnMvYnJhbmRlZC50c1xuZnVuY3Rpb24gcGFyc2VCcmFuZGVkRGVmKF9kZWYsIHJlZnMpIHtcbiAgcmV0dXJuIHBhcnNlRGVmKF9kZWYudHlwZS5fZGVmLCByZWZzKTtcbn1cblxuLy8gc3JjL3RvLWpzb24tc2NoZW1hL3pvZDMtdG8tanNvbi1zY2hlbWEvcGFyc2Vycy9jYXRjaC50c1xudmFyIHBhcnNlQ2F0Y2hEZWYgPSAoZGVmLCByZWZzKSA9PiB7XG4gIHJldHVybiBwYXJzZURlZihkZWYuaW5uZXJUeXBlLl9kZWYsIHJlZnMpO1xufTtcblxuLy8gc3JjL3RvLWpzb24tc2NoZW1hL3pvZDMtdG8tanNvbi1zY2hlbWEvcGFyc2Vycy9kYXRlLnRzXG5mdW5jdGlvbiBwYXJzZURhdGVEZWYoZGVmLCByZWZzLCBvdmVycmlkZURhdGVTdHJhdGVneSkge1xuICBjb25zdCBzdHJhdGVneSA9IG92ZXJyaWRlRGF0ZVN0cmF0ZWd5ICE9IG51bGwgPyBvdmVycmlkZURhdGVTdHJhdGVneSA6IHJlZnMuZGF0ZVN0cmF0ZWd5O1xuICBpZiAoQXJyYXkuaXNBcnJheShzdHJhdGVneSkpIHtcbiAgICByZXR1cm4ge1xuICAgICAgYW55T2Y6IHN0cmF0ZWd5Lm1hcCgoaXRlbSwgaSkgPT4gcGFyc2VEYXRlRGVmKGRlZiwgcmVmcywgaXRlbSkpXG4gICAgfTtcbiAgfVxuICBzd2l0Y2ggKHN0cmF0ZWd5KSB7XG4gICAgY2FzZSBcInN0cmluZ1wiOlxuICAgIGNhc2UgXCJmb3JtYXQ6ZGF0ZS10aW1lXCI6XG4gICAgICByZXR1cm4ge1xuICAgICAgICB0eXBlOiBcInN0cmluZ1wiLFxuICAgICAgICBmb3JtYXQ6IFwiZGF0ZS10aW1lXCJcbiAgICAgIH07XG4gICAgY2FzZSBcImZvcm1hdDpkYXRlXCI6XG4gICAgICByZXR1cm4ge1xuICAgICAgICB0eXBlOiBcInN0cmluZ1wiLFxuICAgICAgICBmb3JtYXQ6IFwiZGF0ZVwiXG4gICAgICB9O1xuICAgIGNhc2UgXCJpbnRlZ2VyXCI6XG4gICAgICByZXR1cm4gaW50ZWdlckRhdGVQYXJzZXIoZGVmKTtcbiAgfVxufVxudmFyIGludGVnZXJEYXRlUGFyc2VyID0gKGRlZikgPT4ge1xuICBjb25zdCByZXMgPSB7XG4gICAgdHlwZTogXCJpbnRlZ2VyXCIsXG4gICAgZm9ybWF0OiBcInVuaXgtdGltZVwiXG4gIH07XG4gIGZvciAoY29uc3QgY2hlY2sgb2YgZGVmLmNoZWNrcykge1xuICAgIHN3aXRjaCAoY2hlY2sua2luZCkge1xuICAgICAgY2FzZSBcIm1pblwiOlxuICAgICAgICByZXMubWluaW11bSA9IGNoZWNrLnZhbHVlO1xuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgXCJtYXhcIjpcbiAgICAgICAgcmVzLm1heGltdW0gPSBjaGVjay52YWx1ZTtcbiAgICAgICAgYnJlYWs7XG4gICAgfVxuICB9XG4gIHJldHVybiByZXM7XG59O1xuXG4vLyBzcmMvdG8tanNvbi1zY2hlbWEvem9kMy10by1qc29uLXNjaGVtYS9wYXJzZXJzL2RlZmF1bHQudHNcbmZ1bmN0aW9uIHBhcnNlRGVmYXVsdERlZihfZGVmLCByZWZzKSB7XG4gIHJldHVybiB7XG4gICAgLi4ucGFyc2VEZWYoX2RlZi5pbm5lclR5cGUuX2RlZiwgcmVmcyksXG4gICAgZGVmYXVsdDogX2RlZi5kZWZhdWx0VmFsdWUoKVxuICB9O1xufVxuXG4vLyBzcmMvdG8tanNvbi1zY2hlbWEvem9kMy10by1qc29uLXNjaGVtYS9wYXJzZXJzL2VmZmVjdHMudHNcbmZ1bmN0aW9uIHBhcnNlRWZmZWN0c0RlZihfZGVmLCByZWZzKSB7XG4gIHJldHVybiByZWZzLmVmZmVjdFN0cmF0ZWd5ID09PSBcImlucHV0XCIgPyBwYXJzZURlZihfZGVmLnNjaGVtYS5fZGVmLCByZWZzKSA6IHBhcnNlQW55RGVmKCk7XG59XG5cbi8vIHNyYy90by1qc29uLXNjaGVtYS96b2QzLXRvLWpzb24tc2NoZW1hL3BhcnNlcnMvZW51bS50c1xuZnVuY3Rpb24gcGFyc2VFbnVtRGVmKGRlZikge1xuICByZXR1cm4ge1xuICAgIHR5cGU6IFwic3RyaW5nXCIsXG4gICAgZW51bTogQXJyYXkuZnJvbShkZWYudmFsdWVzKVxuICB9O1xufVxuXG4vLyBzcmMvdG8tanNvbi1zY2hlbWEvem9kMy10by1qc29uLXNjaGVtYS9wYXJzZXJzL2ludGVyc2VjdGlvbi50c1xudmFyIGlzSnNvblNjaGVtYTdBbGxPZlR5cGUgPSAodHlwZSkgPT4ge1xuICBpZiAoXCJ0eXBlXCIgaW4gdHlwZSAmJiB0eXBlLnR5cGUgPT09IFwic3RyaW5nXCIpIHJldHVybiBmYWxzZTtcbiAgcmV0dXJuIFwiYWxsT2ZcIiBpbiB0eXBlO1xufTtcbmZ1bmN0aW9uIHBhcnNlSW50ZXJzZWN0aW9uRGVmKGRlZiwgcmVmcykge1xuICBjb25zdCBhbGxPZiA9IFtcbiAgICBwYXJzZURlZihkZWYubGVmdC5fZGVmLCB7XG4gICAgICAuLi5yZWZzLFxuICAgICAgY3VycmVudFBhdGg6IFsuLi5yZWZzLmN1cnJlbnRQYXRoLCBcImFsbE9mXCIsIFwiMFwiXVxuICAgIH0pLFxuICAgIHBhcnNlRGVmKGRlZi5yaWdodC5fZGVmLCB7XG4gICAgICAuLi5yZWZzLFxuICAgICAgY3VycmVudFBhdGg6IFsuLi5yZWZzLmN1cnJlbnRQYXRoLCBcImFsbE9mXCIsIFwiMVwiXVxuICAgIH0pXG4gIF0uZmlsdGVyKCh4KSA9PiAhIXgpO1xuICBjb25zdCBtZXJnZWRBbGxPZiA9IFtdO1xuICBhbGxPZi5mb3JFYWNoKChzY2hlbWEpID0+IHtcbiAgICBpZiAoaXNKc29uU2NoZW1hN0FsbE9mVHlwZShzY2hlbWEpKSB7XG4gICAgICBtZXJnZWRBbGxPZi5wdXNoKC4uLnNjaGVtYS5hbGxPZik7XG4gICAgfSBlbHNlIHtcbiAgICAgIGxldCBuZXN0ZWRTY2hlbWEgPSBzY2hlbWE7XG4gICAgICBpZiAoXCJhZGRpdGlvbmFsUHJvcGVydGllc1wiIGluIHNjaGVtYSAmJiBzY2hlbWEuYWRkaXRpb25hbFByb3BlcnRpZXMgPT09IGZhbHNlKSB7XG4gICAgICAgIGNvbnN0IHsgYWRkaXRpb25hbFByb3BlcnRpZXMsIC4uLnJlc3QgfSA9IHNjaGVtYTtcbiAgICAgICAgbmVzdGVkU2NoZW1hID0gcmVzdDtcbiAgICAgIH1cbiAgICAgIG1lcmdlZEFsbE9mLnB1c2gobmVzdGVkU2NoZW1hKTtcbiAgICB9XG4gIH0pO1xuICByZXR1cm4gbWVyZ2VkQWxsT2YubGVuZ3RoID8geyBhbGxPZjogbWVyZ2VkQWxsT2YgfSA6IHZvaWQgMDtcbn1cblxuLy8gc3JjL3RvLWpzb24tc2NoZW1hL3pvZDMtdG8tanNvbi1zY2hlbWEvcGFyc2Vycy9saXRlcmFsLnRzXG5mdW5jdGlvbiBwYXJzZUxpdGVyYWxEZWYoZGVmKSB7XG4gIGNvbnN0IHBhcnNlZFR5cGUgPSB0eXBlb2YgZGVmLnZhbHVlO1xuICBpZiAocGFyc2VkVHlwZSAhPT0gXCJiaWdpbnRcIiAmJiBwYXJzZWRUeXBlICE9PSBcIm51bWJlclwiICYmIHBhcnNlZFR5cGUgIT09IFwiYm9vbGVhblwiICYmIHBhcnNlZFR5cGUgIT09IFwic3RyaW5nXCIpIHtcbiAgICByZXR1cm4ge1xuICAgICAgdHlwZTogQXJyYXkuaXNBcnJheShkZWYudmFsdWUpID8gXCJhcnJheVwiIDogXCJvYmplY3RcIlxuICAgIH07XG4gIH1cbiAgcmV0dXJuIHtcbiAgICB0eXBlOiBwYXJzZWRUeXBlID09PSBcImJpZ2ludFwiID8gXCJpbnRlZ2VyXCIgOiBwYXJzZWRUeXBlLFxuICAgIGNvbnN0OiBkZWYudmFsdWVcbiAgfTtcbn1cblxuLy8gc3JjL3RvLWpzb24tc2NoZW1hL3pvZDMtdG8tanNvbi1zY2hlbWEvcGFyc2Vycy9yZWNvcmQudHNcbmltcG9ydCB7XG4gIFpvZEZpcnN0UGFydHlUeXBlS2luZCBhcyBab2RGaXJzdFBhcnR5VHlwZUtpbmQyXG59IGZyb20gXCJ6b2QvdjNcIjtcblxuLy8gc3JjL3RvLWpzb24tc2NoZW1hL3pvZDMtdG8tanNvbi1zY2hlbWEvcGFyc2Vycy9zdHJpbmcudHNcbnZhciBlbW9qaVJlZ2V4ID0gdm9pZCAwO1xudmFyIHpvZFBhdHRlcm5zID0ge1xuICAvKipcbiAgICogYGNgIHdhcyBjaGFuZ2VkIHRvIGBbY0NdYCB0byByZXBsaWNhdGUgL2kgZmxhZ1xuICAgKi9cbiAgY3VpZDogL15bY0NdW15cXHMtXXs4LH0kLyxcbiAgY3VpZDI6IC9eWzAtOWEtel0rJC8sXG4gIHVsaWQ6IC9eWzAtOUEtSEpLTU5QLVRWLVpdezI2fSQvLFxuICAvKipcbiAgICogYGEtemAgd2FzIGFkZGVkIHRvIHJlcGxpY2F0ZSAvaSBmbGFnXG4gICAqL1xuICBlbWFpbDogL14oPyFcXC4pKD8hLipcXC5cXC4pKFthLXpBLVowLTlfJytcXC1cXC5dKilbYS16QS1aMC05XystXUAoW2EtekEtWjAtOV1bYS16QS1aMC05XFwtXSpcXC4pK1thLXpBLVpdezIsfSQvLFxuICAvKipcbiAgICogQ29uc3RydWN0ZWQgYSB2YWxpZCBVbmljb2RlIFJlZ0V4cFxuICAgKlxuICAgKiBMYXppbHkgaW5zdGFudGlhdGUgc2luY2UgdGhpcyB0eXBlIG9mIHJlZ2V4IGlzbid0IHN1cHBvcnRlZFxuICAgKiBpbiBhbGwgZW52cyAoZS5nLiBSZWFjdCBOYXRpdmUpLlxuICAgKlxuICAgKiBTZWU6XG4gICAqIGh0dHBzOi8vZ2l0aHViLmNvbS9jb2xpbmhhY2tzL3pvZC9pc3N1ZXMvMjQzM1xuICAgKiBGaXggaW4gWm9kOlxuICAgKiBodHRwczovL2dpdGh1Yi5jb20vY29saW5oYWNrcy96b2QvY29tbWl0LzkzNDBmZDUxZTQ4NTc2YTc1YWRjOTE5YmZmNjVkYmM0YTVkNGM5OWJcbiAgICovXG4gIGVtb2ppOiAoKSA9PiB7XG4gICAgaWYgKGVtb2ppUmVnZXggPT09IHZvaWQgMCkge1xuICAgICAgZW1vamlSZWdleCA9IFJlZ0V4cChcbiAgICAgICAgXCJeKFxcXFxwe0V4dGVuZGVkX1BpY3RvZ3JhcGhpY318XFxcXHB7RW1vamlfQ29tcG9uZW50fSkrJFwiLFxuICAgICAgICBcInVcIlxuICAgICAgKTtcbiAgICB9XG4gICAgcmV0dXJuIGVtb2ppUmVnZXg7XG4gIH0sXG4gIC8qKlxuICAgKiBVbnVzZWRcbiAgICovXG4gIHV1aWQ6IC9eWzAtOWEtZkEtRl17OH1cXGItWzAtOWEtZkEtRl17NH1cXGItWzAtOWEtZkEtRl17NH1cXGItWzAtOWEtZkEtRl17NH1cXGItWzAtOWEtZkEtRl17MTJ9JC8sXG4gIC8qKlxuICAgKiBVbnVzZWRcbiAgICovXG4gIGlwdjQ6IC9eKD86KD86MjVbMC01XXwyWzAtNF1bMC05XXwxWzAtOV1bMC05XXxbMS05XVswLTldfFswLTldKVxcLil7M30oPzoyNVswLTVdfDJbMC00XVswLTldfDFbMC05XVswLTldfFsxLTldWzAtOV18WzAtOV0pJC8sXG4gIGlwdjRDaWRyOiAvXig/Oig/OjI1WzAtNV18MlswLTRdWzAtOV18MVswLTldWzAtOV18WzEtOV1bMC05XXxbMC05XSlcXC4pezN9KD86MjVbMC01XXwyWzAtNF1bMC05XXwxWzAtOV1bMC05XXxbMS05XVswLTldfFswLTldKVxcLygzWzAtMl18WzEyXT9bMC05XSkkLyxcbiAgLyoqXG4gICAqIFVudXNlZFxuICAgKi9cbiAgaXB2NjogL14oKFthLWYwLTldezEsNH06KXs3fXw6OihbYS1mMC05XXsxLDR9Oil7MCw2fXwoW2EtZjAtOV17MSw0fTopezF9OihbYS1mMC05XXsxLDR9Oil7MCw1fXwoW2EtZjAtOV17MSw0fTopezJ9OihbYS1mMC05XXsxLDR9Oil7MCw0fXwoW2EtZjAtOV17MSw0fTopezN9OihbYS1mMC05XXsxLDR9Oil7MCwzfXwoW2EtZjAtOV17MSw0fTopezR9OihbYS1mMC05XXsxLDR9Oil7MCwyfXwoW2EtZjAtOV17MSw0fTopezV9OihbYS1mMC05XXsxLDR9Oil7MCwxfSkoW2EtZjAtOV17MSw0fXwoKCgyNVswLTVdKXwoMlswLTRdWzAtOV0pfCgxWzAtOV17Mn0pfChbMC05XXsxLDJ9KSlcXC4pezN9KCgyNVswLTVdKXwoMlswLTRdWzAtOV0pfCgxWzAtOV17Mn0pfChbMC05XXsxLDJ9KSkpJC8sXG4gIGlwdjZDaWRyOiAvXigoWzAtOWEtZkEtRl17MSw0fTopezcsN31bMC05YS1mQS1GXXsxLDR9fChbMC05YS1mQS1GXXsxLDR9Oil7MSw3fTp8KFswLTlhLWZBLUZdezEsNH06KXsxLDZ9OlswLTlhLWZBLUZdezEsNH18KFswLTlhLWZBLUZdezEsNH06KXsxLDV9KDpbMC05YS1mQS1GXXsxLDR9KXsxLDJ9fChbMC05YS1mQS1GXXsxLDR9Oil7MSw0fSg6WzAtOWEtZkEtRl17MSw0fSl7MSwzfXwoWzAtOWEtZkEtRl17MSw0fTopezEsM30oOlswLTlhLWZBLUZdezEsNH0pezEsNH18KFswLTlhLWZBLUZdezEsNH06KXsxLDJ9KDpbMC05YS1mQS1GXXsxLDR9KXsxLDV9fFswLTlhLWZBLUZdezEsNH06KCg6WzAtOWEtZkEtRl17MSw0fSl7MSw2fSl8OigoOlswLTlhLWZBLUZdezEsNH0pezEsN318Oil8ZmU4MDooOlswLTlhLWZBLUZdezAsNH0pezAsNH0lWzAtOWEtekEtWl17MSx9fDo6KGZmZmYoOjB7MSw0fSl7MCwxfTopezAsMX0oKDI1WzAtNV18KDJbMC00XXwxezAsMX1bMC05XSl7MCwxfVswLTldKVxcLil7MywzfSgyNVswLTVdfCgyWzAtNF18MXswLDF9WzAtOV0pezAsMX1bMC05XSl8KFswLTlhLWZBLUZdezEsNH06KXsxLDR9OigoMjVbMC01XXwoMlswLTRdfDF7MCwxfVswLTldKXswLDF9WzAtOV0pXFwuKXszLDN9KDI1WzAtNV18KDJbMC00XXwxezAsMX1bMC05XSl7MCwxfVswLTldKSlcXC8oMTJbMC04XXwxWzAxXVswLTldfFsxLTldP1swLTldKSQvLFxuICBiYXNlNjQ6IC9eKFswLTlhLXpBLVorL117NH0pKigoWzAtOWEtekEtWisvXXsyfT09KXwoWzAtOWEtekEtWisvXXszfT0pKT8kLyxcbiAgYmFzZTY0dXJsOiAvXihbMC05YS16QS1aLV9dezR9KSooKFswLTlhLXpBLVotX117Mn0oPT0pPyl8KFswLTlhLXpBLVotX117M30oPSk/KSk/JC8sXG4gIG5hbm9pZDogL15bYS16QS1aMC05Xy1dezIxfSQvLFxuICBqd3Q6IC9eW0EtWmEtejAtOS1fXStcXC5bQS1aYS16MC05LV9dK1xcLltBLVphLXowLTktX10qJC9cbn07XG5mdW5jdGlvbiBwYXJzZVN0cmluZ0RlZihkZWYsIHJlZnMpIHtcbiAgY29uc3QgcmVzID0ge1xuICAgIHR5cGU6IFwic3RyaW5nXCJcbiAgfTtcbiAgaWYgKGRlZi5jaGVja3MpIHtcbiAgICBmb3IgKGNvbnN0IGNoZWNrIG9mIGRlZi5jaGVja3MpIHtcbiAgICAgIHN3aXRjaCAoY2hlY2sua2luZCkge1xuICAgICAgICBjYXNlIFwibWluXCI6XG4gICAgICAgICAgcmVzLm1pbkxlbmd0aCA9IHR5cGVvZiByZXMubWluTGVuZ3RoID09PSBcIm51bWJlclwiID8gTWF0aC5tYXgocmVzLm1pbkxlbmd0aCwgY2hlY2sudmFsdWUpIDogY2hlY2sudmFsdWU7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgXCJtYXhcIjpcbiAgICAgICAgICByZXMubWF4TGVuZ3RoID0gdHlwZW9mIHJlcy5tYXhMZW5ndGggPT09IFwibnVtYmVyXCIgPyBNYXRoLm1pbihyZXMubWF4TGVuZ3RoLCBjaGVjay52YWx1ZSkgOiBjaGVjay52YWx1ZTtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSBcImVtYWlsXCI6XG4gICAgICAgICAgc3dpdGNoIChyZWZzLmVtYWlsU3RyYXRlZ3kpIHtcbiAgICAgICAgICAgIGNhc2UgXCJmb3JtYXQ6ZW1haWxcIjpcbiAgICAgICAgICAgICAgYWRkRm9ybWF0KHJlcywgXCJlbWFpbFwiLCBjaGVjay5tZXNzYWdlLCByZWZzKTtcbiAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIFwiZm9ybWF0Omlkbi1lbWFpbFwiOlxuICAgICAgICAgICAgICBhZGRGb3JtYXQocmVzLCBcImlkbi1lbWFpbFwiLCBjaGVjay5tZXNzYWdlLCByZWZzKTtcbiAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIFwicGF0dGVybjp6b2RcIjpcbiAgICAgICAgICAgICAgYWRkUGF0dGVybihyZXMsIHpvZFBhdHRlcm5zLmVtYWlsLCBjaGVjay5tZXNzYWdlLCByZWZzKTtcbiAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgfVxuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlIFwidXJsXCI6XG4gICAgICAgICAgYWRkRm9ybWF0KHJlcywgXCJ1cmlcIiwgY2hlY2subWVzc2FnZSwgcmVmcyk7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgXCJ1dWlkXCI6XG4gICAgICAgICAgYWRkRm9ybWF0KHJlcywgXCJ1dWlkXCIsIGNoZWNrLm1lc3NhZ2UsIHJlZnMpO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlIFwicmVnZXhcIjpcbiAgICAgICAgICBhZGRQYXR0ZXJuKHJlcywgY2hlY2sucmVnZXgsIGNoZWNrLm1lc3NhZ2UsIHJlZnMpO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlIFwiY3VpZFwiOlxuICAgICAgICAgIGFkZFBhdHRlcm4ocmVzLCB6b2RQYXR0ZXJucy5jdWlkLCBjaGVjay5tZXNzYWdlLCByZWZzKTtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSBcImN1aWQyXCI6XG4gICAgICAgICAgYWRkUGF0dGVybihyZXMsIHpvZFBhdHRlcm5zLmN1aWQyLCBjaGVjay5tZXNzYWdlLCByZWZzKTtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSBcInN0YXJ0c1dpdGhcIjpcbiAgICAgICAgICBhZGRQYXR0ZXJuKFxuICAgICAgICAgICAgcmVzLFxuICAgICAgICAgICAgUmVnRXhwKGBeJHtlc2NhcGVMaXRlcmFsQ2hlY2tWYWx1ZShjaGVjay52YWx1ZSwgcmVmcyl9YCksXG4gICAgICAgICAgICBjaGVjay5tZXNzYWdlLFxuICAgICAgICAgICAgcmVmc1xuICAgICAgICAgICk7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgXCJlbmRzV2l0aFwiOlxuICAgICAgICAgIGFkZFBhdHRlcm4oXG4gICAgICAgICAgICByZXMsXG4gICAgICAgICAgICBSZWdFeHAoYCR7ZXNjYXBlTGl0ZXJhbENoZWNrVmFsdWUoY2hlY2sudmFsdWUsIHJlZnMpfSRgKSxcbiAgICAgICAgICAgIGNoZWNrLm1lc3NhZ2UsXG4gICAgICAgICAgICByZWZzXG4gICAgICAgICAgKTtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSBcImRhdGV0aW1lXCI6XG4gICAgICAgICAgYWRkRm9ybWF0KHJlcywgXCJkYXRlLXRpbWVcIiwgY2hlY2subWVzc2FnZSwgcmVmcyk7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgXCJkYXRlXCI6XG4gICAgICAgICAgYWRkRm9ybWF0KHJlcywgXCJkYXRlXCIsIGNoZWNrLm1lc3NhZ2UsIHJlZnMpO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlIFwidGltZVwiOlxuICAgICAgICAgIGFkZEZvcm1hdChyZXMsIFwidGltZVwiLCBjaGVjay5tZXNzYWdlLCByZWZzKTtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSBcImR1cmF0aW9uXCI6XG4gICAgICAgICAgYWRkRm9ybWF0KHJlcywgXCJkdXJhdGlvblwiLCBjaGVjay5tZXNzYWdlLCByZWZzKTtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSBcImxlbmd0aFwiOlxuICAgICAgICAgIHJlcy5taW5MZW5ndGggPSB0eXBlb2YgcmVzLm1pbkxlbmd0aCA9PT0gXCJudW1iZXJcIiA/IE1hdGgubWF4KHJlcy5taW5MZW5ndGgsIGNoZWNrLnZhbHVlKSA6IGNoZWNrLnZhbHVlO1xuICAgICAgICAgIHJlcy5tYXhMZW5ndGggPSB0eXBlb2YgcmVzLm1heExlbmd0aCA9PT0gXCJudW1iZXJcIiA/IE1hdGgubWluKHJlcy5tYXhMZW5ndGgsIGNoZWNrLnZhbHVlKSA6IGNoZWNrLnZhbHVlO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlIFwiaW5jbHVkZXNcIjoge1xuICAgICAgICAgIGFkZFBhdHRlcm4oXG4gICAgICAgICAgICByZXMsXG4gICAgICAgICAgICBSZWdFeHAoZXNjYXBlTGl0ZXJhbENoZWNrVmFsdWUoY2hlY2sudmFsdWUsIHJlZnMpKSxcbiAgICAgICAgICAgIGNoZWNrLm1lc3NhZ2UsXG4gICAgICAgICAgICByZWZzXG4gICAgICAgICAgKTtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgICAgICBjYXNlIFwiaXBcIjoge1xuICAgICAgICAgIGlmIChjaGVjay52ZXJzaW9uICE9PSBcInY2XCIpIHtcbiAgICAgICAgICAgIGFkZEZvcm1hdChyZXMsIFwiaXB2NFwiLCBjaGVjay5tZXNzYWdlLCByZWZzKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgaWYgKGNoZWNrLnZlcnNpb24gIT09IFwidjRcIikge1xuICAgICAgICAgICAgYWRkRm9ybWF0KHJlcywgXCJpcHY2XCIsIGNoZWNrLm1lc3NhZ2UsIHJlZnMpO1xuICAgICAgICAgIH1cbiAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgICAgICBjYXNlIFwiYmFzZTY0dXJsXCI6XG4gICAgICAgICAgYWRkUGF0dGVybihyZXMsIHpvZFBhdHRlcm5zLmJhc2U2NHVybCwgY2hlY2subWVzc2FnZSwgcmVmcyk7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgXCJqd3RcIjpcbiAgICAgICAgICBhZGRQYXR0ZXJuKHJlcywgem9kUGF0dGVybnMuand0LCBjaGVjay5tZXNzYWdlLCByZWZzKTtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSBcImNpZHJcIjoge1xuICAgICAgICAgIGlmIChjaGVjay52ZXJzaW9uICE9PSBcInY2XCIpIHtcbiAgICAgICAgICAgIGFkZFBhdHRlcm4ocmVzLCB6b2RQYXR0ZXJucy5pcHY0Q2lkciwgY2hlY2subWVzc2FnZSwgcmVmcyk7XG4gICAgICAgICAgfVxuICAgICAgICAgIGlmIChjaGVjay52ZXJzaW9uICE9PSBcInY0XCIpIHtcbiAgICAgICAgICAgIGFkZFBhdHRlcm4ocmVzLCB6b2RQYXR0ZXJucy5pcHY2Q2lkciwgY2hlY2subWVzc2FnZSwgcmVmcyk7XG4gICAgICAgICAgfVxuICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgICAgIGNhc2UgXCJlbW9qaVwiOlxuICAgICAgICAgIGFkZFBhdHRlcm4ocmVzLCB6b2RQYXR0ZXJucy5lbW9qaSgpLCBjaGVjay5tZXNzYWdlLCByZWZzKTtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSBcInVsaWRcIjoge1xuICAgICAgICAgIGFkZFBhdHRlcm4ocmVzLCB6b2RQYXR0ZXJucy51bGlkLCBjaGVjay5tZXNzYWdlLCByZWZzKTtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgICAgICBjYXNlIFwiYmFzZTY0XCI6IHtcbiAgICAgICAgICBzd2l0Y2ggKHJlZnMuYmFzZTY0U3RyYXRlZ3kpIHtcbiAgICAgICAgICAgIGNhc2UgXCJmb3JtYXQ6YmluYXJ5XCI6IHtcbiAgICAgICAgICAgICAgYWRkRm9ybWF0KHJlcywgXCJiaW5hcnlcIiwgY2hlY2subWVzc2FnZSwgcmVmcyk7XG4gICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY2FzZSBcImNvbnRlbnRFbmNvZGluZzpiYXNlNjRcIjoge1xuICAgICAgICAgICAgICByZXMuY29udGVudEVuY29kaW5nID0gXCJiYXNlNjRcIjtcbiAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjYXNlIFwicGF0dGVybjp6b2RcIjoge1xuICAgICAgICAgICAgICBhZGRQYXR0ZXJuKHJlcywgem9kUGF0dGVybnMuYmFzZTY0LCBjaGVjay5tZXNzYWdlLCByZWZzKTtcbiAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgICAgIGNhc2UgXCJuYW5vaWRcIjoge1xuICAgICAgICAgIGFkZFBhdHRlcm4ocmVzLCB6b2RQYXR0ZXJucy5uYW5vaWQsIGNoZWNrLm1lc3NhZ2UsIHJlZnMpO1xuICAgICAgICB9XG4gICAgICAgIGNhc2UgXCJ0b0xvd2VyQ2FzZVwiOlxuICAgICAgICBjYXNlIFwidG9VcHBlckNhc2VcIjpcbiAgICAgICAgY2FzZSBcInRyaW1cIjpcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAvKiBAX19QVVJFX18gKi8gKChfKSA9PiB7XG4gICAgICAgICAgfSkoY2hlY2spO1xuICAgICAgfVxuICAgIH1cbiAgfVxuICByZXR1cm4gcmVzO1xufVxuZnVuY3Rpb24gZXNjYXBlTGl0ZXJhbENoZWNrVmFsdWUobGl0ZXJhbCwgcmVmcykge1xuICByZXR1cm4gcmVmcy5wYXR0ZXJuU3RyYXRlZ3kgPT09IFwiZXNjYXBlXCIgPyBlc2NhcGVOb25BbHBoYU51bWVyaWMobGl0ZXJhbCkgOiBsaXRlcmFsO1xufVxudmFyIEFMUEhBX05VTUVSSUMgPSBuZXcgU2V0KFxuICBcIkFCQ0RFRkdISUpLTE1OT1BRUlNUVVZYWVphYmNkZWZnaGlqa2xtbm9wcXJzdHV2eHl6MDEyMzQ1Njc4OVwiXG4pO1xuZnVuY3Rpb24gZXNjYXBlTm9uQWxwaGFOdW1lcmljKHNvdXJjZSkge1xuICBsZXQgcmVzdWx0ID0gXCJcIjtcbiAgZm9yIChsZXQgaSA9IDA7IGkgPCBzb3VyY2UubGVuZ3RoOyBpKyspIHtcbiAgICBpZiAoIUFMUEhBX05VTUVSSUMuaGFzKHNvdXJjZVtpXSkpIHtcbiAgICAgIHJlc3VsdCArPSBcIlxcXFxcIjtcbiAgICB9XG4gICAgcmVzdWx0ICs9IHNvdXJjZVtpXTtcbiAgfVxuICByZXR1cm4gcmVzdWx0O1xufVxuZnVuY3Rpb24gYWRkRm9ybWF0KHNjaGVtYSwgdmFsdWUsIG1lc3NhZ2UsIHJlZnMpIHtcbiAgdmFyIF9hMjtcbiAgaWYgKHNjaGVtYS5mb3JtYXQgfHwgKChfYTIgPSBzY2hlbWEuYW55T2YpID09IG51bGwgPyB2b2lkIDAgOiBfYTIuc29tZSgoeCkgPT4geC5mb3JtYXQpKSkge1xuICAgIGlmICghc2NoZW1hLmFueU9mKSB7XG4gICAgICBzY2hlbWEuYW55T2YgPSBbXTtcbiAgICB9XG4gICAgaWYgKHNjaGVtYS5mb3JtYXQpIHtcbiAgICAgIHNjaGVtYS5hbnlPZi5wdXNoKHtcbiAgICAgICAgZm9ybWF0OiBzY2hlbWEuZm9ybWF0XG4gICAgICB9KTtcbiAgICAgIGRlbGV0ZSBzY2hlbWEuZm9ybWF0O1xuICAgIH1cbiAgICBzY2hlbWEuYW55T2YucHVzaCh7XG4gICAgICBmb3JtYXQ6IHZhbHVlLFxuICAgICAgLi4ubWVzc2FnZSAmJiByZWZzLmVycm9yTWVzc2FnZXMgJiYgeyBlcnJvck1lc3NhZ2U6IHsgZm9ybWF0OiBtZXNzYWdlIH0gfVxuICAgIH0pO1xuICB9IGVsc2Uge1xuICAgIHNjaGVtYS5mb3JtYXQgPSB2YWx1ZTtcbiAgfVxufVxuZnVuY3Rpb24gYWRkUGF0dGVybihzY2hlbWEsIHJlZ2V4LCBtZXNzYWdlLCByZWZzKSB7XG4gIHZhciBfYTI7XG4gIGlmIChzY2hlbWEucGF0dGVybiB8fCAoKF9hMiA9IHNjaGVtYS5hbGxPZikgPT0gbnVsbCA/IHZvaWQgMCA6IF9hMi5zb21lKCh4KSA9PiB4LnBhdHRlcm4pKSkge1xuICAgIGlmICghc2NoZW1hLmFsbE9mKSB7XG4gICAgICBzY2hlbWEuYWxsT2YgPSBbXTtcbiAgICB9XG4gICAgaWYgKHNjaGVtYS5wYXR0ZXJuKSB7XG4gICAgICBzY2hlbWEuYWxsT2YucHVzaCh7XG4gICAgICAgIHBhdHRlcm46IHNjaGVtYS5wYXR0ZXJuXG4gICAgICB9KTtcbiAgICAgIGRlbGV0ZSBzY2hlbWEucGF0dGVybjtcbiAgICB9XG4gICAgc2NoZW1hLmFsbE9mLnB1c2goe1xuICAgICAgcGF0dGVybjogc3RyaW5naWZ5UmVnRXhwV2l0aEZsYWdzKHJlZ2V4LCByZWZzKSxcbiAgICAgIC4uLm1lc3NhZ2UgJiYgcmVmcy5lcnJvck1lc3NhZ2VzICYmIHsgZXJyb3JNZXNzYWdlOiB7IHBhdHRlcm46IG1lc3NhZ2UgfSB9XG4gICAgfSk7XG4gIH0gZWxzZSB7XG4gICAgc2NoZW1hLnBhdHRlcm4gPSBzdHJpbmdpZnlSZWdFeHBXaXRoRmxhZ3MocmVnZXgsIHJlZnMpO1xuICB9XG59XG5mdW5jdGlvbiBzdHJpbmdpZnlSZWdFeHBXaXRoRmxhZ3MocmVnZXgsIHJlZnMpIHtcbiAgdmFyIF9hMjtcbiAgaWYgKCFyZWZzLmFwcGx5UmVnZXhGbGFncyB8fCAhcmVnZXguZmxhZ3MpIHtcbiAgICByZXR1cm4gcmVnZXguc291cmNlO1xuICB9XG4gIGNvbnN0IGZsYWdzID0ge1xuICAgIGk6IHJlZ2V4LmZsYWdzLmluY2x1ZGVzKFwiaVwiKSxcbiAgICAvLyBDYXNlLWluc2Vuc2l0aXZlXG4gICAgbTogcmVnZXguZmxhZ3MuaW5jbHVkZXMoXCJtXCIpLFxuICAgIC8vIGBeYCBhbmQgYCRgIG1hdGNoZXMgYWRqYWNlbnQgdG8gbmV3bGluZSBjaGFyYWN0ZXJzXG4gICAgczogcmVnZXguZmxhZ3MuaW5jbHVkZXMoXCJzXCIpXG4gICAgLy8gYC5gIG1hdGNoZXMgbmV3bGluZXNcbiAgfTtcbiAgY29uc3Qgc291cmNlID0gZmxhZ3MuaSA/IHJlZ2V4LnNvdXJjZS50b0xvd2VyQ2FzZSgpIDogcmVnZXguc291cmNlO1xuICBsZXQgcGF0dGVybiA9IFwiXCI7XG4gIGxldCBpc0VzY2FwZWQgPSBmYWxzZTtcbiAgbGV0IGluQ2hhckdyb3VwID0gZmFsc2U7XG4gIGxldCBpbkNoYXJSYW5nZSA9IGZhbHNlO1xuICBmb3IgKGxldCBpID0gMDsgaSA8IHNvdXJjZS5sZW5ndGg7IGkrKykge1xuICAgIGlmIChpc0VzY2FwZWQpIHtcbiAgICAgIHBhdHRlcm4gKz0gc291cmNlW2ldO1xuICAgICAgaXNFc2NhcGVkID0gZmFsc2U7XG4gICAgICBjb250aW51ZTtcbiAgICB9XG4gICAgaWYgKGZsYWdzLmkpIHtcbiAgICAgIGlmIChpbkNoYXJHcm91cCkge1xuICAgICAgICBpZiAoc291cmNlW2ldLm1hdGNoKC9bYS16XS8pKSB7XG4gICAgICAgICAgaWYgKGluQ2hhclJhbmdlKSB7XG4gICAgICAgICAgICBwYXR0ZXJuICs9IHNvdXJjZVtpXTtcbiAgICAgICAgICAgIHBhdHRlcm4gKz0gYCR7c291cmNlW2kgLSAyXX0tJHtzb3VyY2VbaV19YC50b1VwcGVyQ2FzZSgpO1xuICAgICAgICAgICAgaW5DaGFyUmFuZ2UgPSBmYWxzZTtcbiAgICAgICAgICB9IGVsc2UgaWYgKHNvdXJjZVtpICsgMV0gPT09IFwiLVwiICYmICgoX2EyID0gc291cmNlW2kgKyAyXSkgPT0gbnVsbCA/IHZvaWQgMCA6IF9hMi5tYXRjaCgvW2Etel0vKSkpIHtcbiAgICAgICAgICAgIHBhdHRlcm4gKz0gc291cmNlW2ldO1xuICAgICAgICAgICAgaW5DaGFyUmFuZ2UgPSB0cnVlO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBwYXR0ZXJuICs9IGAke3NvdXJjZVtpXX0ke3NvdXJjZVtpXS50b1VwcGVyQ2FzZSgpfWA7XG4gICAgICAgICAgfVxuICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICB9XG4gICAgICB9IGVsc2UgaWYgKHNvdXJjZVtpXS5tYXRjaCgvW2Etel0vKSkge1xuICAgICAgICBwYXR0ZXJuICs9IGBbJHtzb3VyY2VbaV19JHtzb3VyY2VbaV0udG9VcHBlckNhc2UoKX1dYDtcbiAgICAgICAgY29udGludWU7XG4gICAgICB9XG4gICAgfVxuICAgIGlmIChmbGFncy5tKSB7XG4gICAgICBpZiAoc291cmNlW2ldID09PSBcIl5cIikge1xuICAgICAgICBwYXR0ZXJuICs9IGAoXnwoPzw9W1xcclxuXSkpYDtcbiAgICAgICAgY29udGludWU7XG4gICAgICB9IGVsc2UgaWYgKHNvdXJjZVtpXSA9PT0gXCIkXCIpIHtcbiAgICAgICAgcGF0dGVybiArPSBgKCR8KD89W1xcclxuXSkpYDtcbiAgICAgICAgY29udGludWU7XG4gICAgICB9XG4gICAgfVxuICAgIGlmIChmbGFncy5zICYmIHNvdXJjZVtpXSA9PT0gXCIuXCIpIHtcbiAgICAgIHBhdHRlcm4gKz0gaW5DaGFyR3JvdXAgPyBgJHtzb3VyY2VbaV19XFxyXG5gIDogYFske3NvdXJjZVtpXX1cXHJcbl1gO1xuICAgICAgY29udGludWU7XG4gICAgfVxuICAgIHBhdHRlcm4gKz0gc291cmNlW2ldO1xuICAgIGlmIChzb3VyY2VbaV0gPT09IFwiXFxcXFwiKSB7XG4gICAgICBpc0VzY2FwZWQgPSB0cnVlO1xuICAgIH0gZWxzZSBpZiAoaW5DaGFyR3JvdXAgJiYgc291cmNlW2ldID09PSBcIl1cIikge1xuICAgICAgaW5DaGFyR3JvdXAgPSBmYWxzZTtcbiAgICB9IGVsc2UgaWYgKCFpbkNoYXJHcm91cCAmJiBzb3VyY2VbaV0gPT09IFwiW1wiKSB7XG4gICAgICBpbkNoYXJHcm91cCA9IHRydWU7XG4gICAgfVxuICB9XG4gIHRyeSB7XG4gICAgbmV3IFJlZ0V4cChwYXR0ZXJuKTtcbiAgfSBjYXRjaCAoZSkge1xuICAgIGNvbnNvbGUud2FybihcbiAgICAgIGBDb3VsZCBub3QgY29udmVydCByZWdleCBwYXR0ZXJuIGF0ICR7cmVmcy5jdXJyZW50UGF0aC5qb2luKFxuICAgICAgICBcIi9cIlxuICAgICAgKX0gdG8gYSBmbGFnLWluZGVwZW5kZW50IGZvcm0hIEZhbGxpbmcgYmFjayB0byB0aGUgZmxhZy1pZ25vcmFudCBzb3VyY2VgXG4gICAgKTtcbiAgICByZXR1cm4gcmVnZXguc291cmNlO1xuICB9XG4gIHJldHVybiBwYXR0ZXJuO1xufVxuXG4vLyBzcmMvdG8tanNvbi1zY2hlbWEvem9kMy10by1qc29uLXNjaGVtYS9wYXJzZXJzL3JlY29yZC50c1xuZnVuY3Rpb24gcGFyc2VSZWNvcmREZWYoZGVmLCByZWZzKSB7XG4gIHZhciBfYTIsIF9iMiwgX2MsIF9kLCBfZSwgX2Y7XG4gIGNvbnN0IHNjaGVtYSA9IHtcbiAgICB0eXBlOiBcIm9iamVjdFwiLFxuICAgIGFkZGl0aW9uYWxQcm9wZXJ0aWVzOiAoX2EyID0gcGFyc2VEZWYoZGVmLnZhbHVlVHlwZS5fZGVmLCB7XG4gICAgICAuLi5yZWZzLFxuICAgICAgY3VycmVudFBhdGg6IFsuLi5yZWZzLmN1cnJlbnRQYXRoLCBcImFkZGl0aW9uYWxQcm9wZXJ0aWVzXCJdXG4gICAgfSkpICE9IG51bGwgPyBfYTIgOiByZWZzLmFsbG93ZWRBZGRpdGlvbmFsUHJvcGVydGllc1xuICB9O1xuICBpZiAoKChfYjIgPSBkZWYua2V5VHlwZSkgPT0gbnVsbCA/IHZvaWQgMCA6IF9iMi5fZGVmLnR5cGVOYW1lKSA9PT0gWm9kRmlyc3RQYXJ0eVR5cGVLaW5kMi5ab2RTdHJpbmcgJiYgKChfYyA9IGRlZi5rZXlUeXBlLl9kZWYuY2hlY2tzKSA9PSBudWxsID8gdm9pZCAwIDogX2MubGVuZ3RoKSkge1xuICAgIGNvbnN0IHsgdHlwZSwgLi4ua2V5VHlwZSB9ID0gcGFyc2VTdHJpbmdEZWYoZGVmLmtleVR5cGUuX2RlZiwgcmVmcyk7XG4gICAgcmV0dXJuIHtcbiAgICAgIC4uLnNjaGVtYSxcbiAgICAgIHByb3BlcnR5TmFtZXM6IGtleVR5cGVcbiAgICB9O1xuICB9IGVsc2UgaWYgKCgoX2QgPSBkZWYua2V5VHlwZSkgPT0gbnVsbCA/IHZvaWQgMCA6IF9kLl9kZWYudHlwZU5hbWUpID09PSBab2RGaXJzdFBhcnR5VHlwZUtpbmQyLlpvZEVudW0pIHtcbiAgICByZXR1cm4ge1xuICAgICAgLi4uc2NoZW1hLFxuICAgICAgcHJvcGVydHlOYW1lczoge1xuICAgICAgICBlbnVtOiBkZWYua2V5VHlwZS5fZGVmLnZhbHVlc1xuICAgICAgfVxuICAgIH07XG4gIH0gZWxzZSBpZiAoKChfZSA9IGRlZi5rZXlUeXBlKSA9PSBudWxsID8gdm9pZCAwIDogX2UuX2RlZi50eXBlTmFtZSkgPT09IFpvZEZpcnN0UGFydHlUeXBlS2luZDIuWm9kQnJhbmRlZCAmJiBkZWYua2V5VHlwZS5fZGVmLnR5cGUuX2RlZi50eXBlTmFtZSA9PT0gWm9kRmlyc3RQYXJ0eVR5cGVLaW5kMi5ab2RTdHJpbmcgJiYgKChfZiA9IGRlZi5rZXlUeXBlLl9kZWYudHlwZS5fZGVmLmNoZWNrcykgPT0gbnVsbCA/IHZvaWQgMCA6IF9mLmxlbmd0aCkpIHtcbiAgICBjb25zdCB7IHR5cGUsIC4uLmtleVR5cGUgfSA9IHBhcnNlQnJhbmRlZERlZihcbiAgICAgIGRlZi5rZXlUeXBlLl9kZWYsXG4gICAgICByZWZzXG4gICAgKTtcbiAgICByZXR1cm4ge1xuICAgICAgLi4uc2NoZW1hLFxuICAgICAgcHJvcGVydHlOYW1lczoga2V5VHlwZVxuICAgIH07XG4gIH1cbiAgcmV0dXJuIHNjaGVtYTtcbn1cblxuLy8gc3JjL3RvLWpzb24tc2NoZW1hL3pvZDMtdG8tanNvbi1zY2hlbWEvcGFyc2Vycy9tYXAudHNcbmZ1bmN0aW9uIHBhcnNlTWFwRGVmKGRlZiwgcmVmcykge1xuICBpZiAocmVmcy5tYXBTdHJhdGVneSA9PT0gXCJyZWNvcmRcIikge1xuICAgIHJldHVybiBwYXJzZVJlY29yZERlZihkZWYsIHJlZnMpO1xuICB9XG4gIGNvbnN0IGtleXMgPSBwYXJzZURlZihkZWYua2V5VHlwZS5fZGVmLCB7XG4gICAgLi4ucmVmcyxcbiAgICBjdXJyZW50UGF0aDogWy4uLnJlZnMuY3VycmVudFBhdGgsIFwiaXRlbXNcIiwgXCJpdGVtc1wiLCBcIjBcIl1cbiAgfSkgfHwgcGFyc2VBbnlEZWYoKTtcbiAgY29uc3QgdmFsdWVzID0gcGFyc2VEZWYoZGVmLnZhbHVlVHlwZS5fZGVmLCB7XG4gICAgLi4ucmVmcyxcbiAgICBjdXJyZW50UGF0aDogWy4uLnJlZnMuY3VycmVudFBhdGgsIFwiaXRlbXNcIiwgXCJpdGVtc1wiLCBcIjFcIl1cbiAgfSkgfHwgcGFyc2VBbnlEZWYoKTtcbiAgcmV0dXJuIHtcbiAgICB0eXBlOiBcImFycmF5XCIsXG4gICAgbWF4SXRlbXM6IDEyNSxcbiAgICBpdGVtczoge1xuICAgICAgdHlwZTogXCJhcnJheVwiLFxuICAgICAgaXRlbXM6IFtrZXlzLCB2YWx1ZXNdLFxuICAgICAgbWluSXRlbXM6IDIsXG4gICAgICBtYXhJdGVtczogMlxuICAgIH1cbiAgfTtcbn1cblxuLy8gc3JjL3RvLWpzb24tc2NoZW1hL3pvZDMtdG8tanNvbi1zY2hlbWEvcGFyc2Vycy9uYXRpdmUtZW51bS50c1xuZnVuY3Rpb24gcGFyc2VOYXRpdmVFbnVtRGVmKGRlZikge1xuICBjb25zdCBvYmplY3QgPSBkZWYudmFsdWVzO1xuICBjb25zdCBhY3R1YWxLZXlzID0gT2JqZWN0LmtleXMoZGVmLnZhbHVlcykuZmlsdGVyKChrZXkpID0+IHtcbiAgICByZXR1cm4gdHlwZW9mIG9iamVjdFtvYmplY3Rba2V5XV0gIT09IFwibnVtYmVyXCI7XG4gIH0pO1xuICBjb25zdCBhY3R1YWxWYWx1ZXMgPSBhY3R1YWxLZXlzLm1hcCgoa2V5KSA9PiBvYmplY3Rba2V5XSk7XG4gIGNvbnN0IHBhcnNlZFR5cGVzID0gQXJyYXkuZnJvbShcbiAgICBuZXcgU2V0KGFjdHVhbFZhbHVlcy5tYXAoKHZhbHVlcykgPT4gdHlwZW9mIHZhbHVlcykpXG4gICk7XG4gIHJldHVybiB7XG4gICAgdHlwZTogcGFyc2VkVHlwZXMubGVuZ3RoID09PSAxID8gcGFyc2VkVHlwZXNbMF0gPT09IFwic3RyaW5nXCIgPyBcInN0cmluZ1wiIDogXCJudW1iZXJcIiA6IFtcInN0cmluZ1wiLCBcIm51bWJlclwiXSxcbiAgICBlbnVtOiBhY3R1YWxWYWx1ZXNcbiAgfTtcbn1cblxuLy8gc3JjL3RvLWpzb24tc2NoZW1hL3pvZDMtdG8tanNvbi1zY2hlbWEvcGFyc2Vycy9uZXZlci50c1xuZnVuY3Rpb24gcGFyc2VOZXZlckRlZigpIHtcbiAgcmV0dXJuIHsgbm90OiBwYXJzZUFueURlZigpIH07XG59XG5cbi8vIHNyYy90by1qc29uLXNjaGVtYS96b2QzLXRvLWpzb24tc2NoZW1hL3BhcnNlcnMvbnVsbC50c1xuZnVuY3Rpb24gcGFyc2VOdWxsRGVmKCkge1xuICByZXR1cm4ge1xuICAgIHR5cGU6IFwibnVsbFwiXG4gIH07XG59XG5cbi8vIHNyYy90by1qc29uLXNjaGVtYS96b2QzLXRvLWpzb24tc2NoZW1hL3BhcnNlcnMvdW5pb24udHNcbnZhciBwcmltaXRpdmVNYXBwaW5ncyA9IHtcbiAgWm9kU3RyaW5nOiBcInN0cmluZ1wiLFxuICBab2ROdW1iZXI6IFwibnVtYmVyXCIsXG4gIFpvZEJpZ0ludDogXCJpbnRlZ2VyXCIsXG4gIFpvZEJvb2xlYW46IFwiYm9vbGVhblwiLFxuICBab2ROdWxsOiBcIm51bGxcIlxufTtcbmZ1bmN0aW9uIHBhcnNlVW5pb25EZWYoZGVmLCByZWZzKSB7XG4gIGNvbnN0IG9wdGlvbnMgPSBkZWYub3B0aW9ucyBpbnN0YW5jZW9mIE1hcCA/IEFycmF5LmZyb20oZGVmLm9wdGlvbnMudmFsdWVzKCkpIDogZGVmLm9wdGlvbnM7XG4gIGlmIChvcHRpb25zLmV2ZXJ5KFxuICAgICh4KSA9PiB4Ll9kZWYudHlwZU5hbWUgaW4gcHJpbWl0aXZlTWFwcGluZ3MgJiYgKCF4Ll9kZWYuY2hlY2tzIHx8ICF4Ll9kZWYuY2hlY2tzLmxlbmd0aClcbiAgKSkge1xuICAgIGNvbnN0IHR5cGVzID0gb3B0aW9ucy5yZWR1Y2UoKHR5cGVzMiwgeCkgPT4ge1xuICAgICAgY29uc3QgdHlwZSA9IHByaW1pdGl2ZU1hcHBpbmdzW3guX2RlZi50eXBlTmFtZV07XG4gICAgICByZXR1cm4gdHlwZSAmJiAhdHlwZXMyLmluY2x1ZGVzKHR5cGUpID8gWy4uLnR5cGVzMiwgdHlwZV0gOiB0eXBlczI7XG4gICAgfSwgW10pO1xuICAgIHJldHVybiB7XG4gICAgICB0eXBlOiB0eXBlcy5sZW5ndGggPiAxID8gdHlwZXMgOiB0eXBlc1swXVxuICAgIH07XG4gIH0gZWxzZSBpZiAob3B0aW9ucy5ldmVyeSgoeCkgPT4geC5fZGVmLnR5cGVOYW1lID09PSBcIlpvZExpdGVyYWxcIiAmJiAheC5kZXNjcmlwdGlvbikpIHtcbiAgICBjb25zdCB0eXBlcyA9IG9wdGlvbnMucmVkdWNlKFxuICAgICAgKGFjYywgeCkgPT4ge1xuICAgICAgICBjb25zdCB0eXBlID0gdHlwZW9mIHguX2RlZi52YWx1ZTtcbiAgICAgICAgc3dpdGNoICh0eXBlKSB7XG4gICAgICAgICAgY2FzZSBcInN0cmluZ1wiOlxuICAgICAgICAgIGNhc2UgXCJudW1iZXJcIjpcbiAgICAgICAgICBjYXNlIFwiYm9vbGVhblwiOlxuICAgICAgICAgICAgcmV0dXJuIFsuLi5hY2MsIHR5cGVdO1xuICAgICAgICAgIGNhc2UgXCJiaWdpbnRcIjpcbiAgICAgICAgICAgIHJldHVybiBbLi4uYWNjLCBcImludGVnZXJcIl07XG4gICAgICAgICAgY2FzZSBcIm9iamVjdFwiOlxuICAgICAgICAgICAgaWYgKHguX2RlZi52YWx1ZSA9PT0gbnVsbCkgcmV0dXJuIFsuLi5hY2MsIFwibnVsbFwiXTtcbiAgICAgICAgICBjYXNlIFwic3ltYm9sXCI6XG4gICAgICAgICAgY2FzZSBcInVuZGVmaW5lZFwiOlxuICAgICAgICAgIGNhc2UgXCJmdW5jdGlvblwiOlxuICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICByZXR1cm4gYWNjO1xuICAgICAgICB9XG4gICAgICB9LFxuICAgICAgW11cbiAgICApO1xuICAgIGlmICh0eXBlcy5sZW5ndGggPT09IG9wdGlvbnMubGVuZ3RoKSB7XG4gICAgICBjb25zdCB1bmlxdWVUeXBlcyA9IHR5cGVzLmZpbHRlcigoeCwgaSwgYSkgPT4gYS5pbmRleE9mKHgpID09PSBpKTtcbiAgICAgIHJldHVybiB7XG4gICAgICAgIHR5cGU6IHVuaXF1ZVR5cGVzLmxlbmd0aCA+IDEgPyB1bmlxdWVUeXBlcyA6IHVuaXF1ZVR5cGVzWzBdLFxuICAgICAgICBlbnVtOiBvcHRpb25zLnJlZHVjZShcbiAgICAgICAgICAoYWNjLCB4KSA9PiB7XG4gICAgICAgICAgICByZXR1cm4gYWNjLmluY2x1ZGVzKHguX2RlZi52YWx1ZSkgPyBhY2MgOiBbLi4uYWNjLCB4Ll9kZWYudmFsdWVdO1xuICAgICAgICAgIH0sXG4gICAgICAgICAgW11cbiAgICAgICAgKVxuICAgICAgfTtcbiAgICB9XG4gIH0gZWxzZSBpZiAob3B0aW9ucy5ldmVyeSgoeCkgPT4geC5fZGVmLnR5cGVOYW1lID09PSBcIlpvZEVudW1cIikpIHtcbiAgICByZXR1cm4ge1xuICAgICAgdHlwZTogXCJzdHJpbmdcIixcbiAgICAgIGVudW06IG9wdGlvbnMucmVkdWNlKFxuICAgICAgICAoYWNjLCB4KSA9PiBbXG4gICAgICAgICAgLi4uYWNjLFxuICAgICAgICAgIC4uLnguX2RlZi52YWx1ZXMuZmlsdGVyKCh4MikgPT4gIWFjYy5pbmNsdWRlcyh4MikpXG4gICAgICAgIF0sXG4gICAgICAgIFtdXG4gICAgICApXG4gICAgfTtcbiAgfVxuICByZXR1cm4gYXNBbnlPZihkZWYsIHJlZnMpO1xufVxudmFyIGFzQW55T2YgPSAoZGVmLCByZWZzKSA9PiB7XG4gIGNvbnN0IGFueU9mID0gKGRlZi5vcHRpb25zIGluc3RhbmNlb2YgTWFwID8gQXJyYXkuZnJvbShkZWYub3B0aW9ucy52YWx1ZXMoKSkgOiBkZWYub3B0aW9ucykubWFwKFxuICAgICh4LCBpKSA9PiBwYXJzZURlZih4Ll9kZWYsIHtcbiAgICAgIC4uLnJlZnMsXG4gICAgICBjdXJyZW50UGF0aDogWy4uLnJlZnMuY3VycmVudFBhdGgsIFwiYW55T2ZcIiwgYCR7aX1gXVxuICAgIH0pXG4gICkuZmlsdGVyKFxuICAgICh4KSA9PiAhIXggJiYgKCFyZWZzLnN0cmljdFVuaW9ucyB8fCB0eXBlb2YgeCA9PT0gXCJvYmplY3RcIiAmJiBPYmplY3Qua2V5cyh4KS5sZW5ndGggPiAwKVxuICApO1xuICByZXR1cm4gYW55T2YubGVuZ3RoID8geyBhbnlPZiB9IDogdm9pZCAwO1xufTtcblxuLy8gc3JjL3RvLWpzb24tc2NoZW1hL3pvZDMtdG8tanNvbi1zY2hlbWEvcGFyc2Vycy9udWxsYWJsZS50c1xuZnVuY3Rpb24gcGFyc2VOdWxsYWJsZURlZihkZWYsIHJlZnMpIHtcbiAgaWYgKFtcIlpvZFN0cmluZ1wiLCBcIlpvZE51bWJlclwiLCBcIlpvZEJpZ0ludFwiLCBcIlpvZEJvb2xlYW5cIiwgXCJab2ROdWxsXCJdLmluY2x1ZGVzKFxuICAgIGRlZi5pbm5lclR5cGUuX2RlZi50eXBlTmFtZVxuICApICYmICghZGVmLmlubmVyVHlwZS5fZGVmLmNoZWNrcyB8fCAhZGVmLmlubmVyVHlwZS5fZGVmLmNoZWNrcy5sZW5ndGgpKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIHR5cGU6IFtcbiAgICAgICAgcHJpbWl0aXZlTWFwcGluZ3NbZGVmLmlubmVyVHlwZS5fZGVmLnR5cGVOYW1lXSxcbiAgICAgICAgXCJudWxsXCJcbiAgICAgIF1cbiAgICB9O1xuICB9XG4gIGNvbnN0IGJhc2UgPSBwYXJzZURlZihkZWYuaW5uZXJUeXBlLl9kZWYsIHtcbiAgICAuLi5yZWZzLFxuICAgIGN1cnJlbnRQYXRoOiBbLi4ucmVmcy5jdXJyZW50UGF0aCwgXCJhbnlPZlwiLCBcIjBcIl1cbiAgfSk7XG4gIHJldHVybiBiYXNlICYmIHsgYW55T2Y6IFtiYXNlLCB7IHR5cGU6IFwibnVsbFwiIH1dIH07XG59XG5cbi8vIHNyYy90by1qc29uLXNjaGVtYS96b2QzLXRvLWpzb24tc2NoZW1hL3BhcnNlcnMvbnVtYmVyLnRzXG5mdW5jdGlvbiBwYXJzZU51bWJlckRlZihkZWYpIHtcbiAgY29uc3QgcmVzID0ge1xuICAgIHR5cGU6IFwibnVtYmVyXCJcbiAgfTtcbiAgaWYgKCFkZWYuY2hlY2tzKSByZXR1cm4gcmVzO1xuICBmb3IgKGNvbnN0IGNoZWNrIG9mIGRlZi5jaGVja3MpIHtcbiAgICBzd2l0Y2ggKGNoZWNrLmtpbmQpIHtcbiAgICAgIGNhc2UgXCJpbnRcIjpcbiAgICAgICAgcmVzLnR5cGUgPSBcImludGVnZXJcIjtcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlIFwibWluXCI6XG4gICAgICAgIGlmIChjaGVjay5pbmNsdXNpdmUpIHtcbiAgICAgICAgICByZXMubWluaW11bSA9IGNoZWNrLnZhbHVlO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHJlcy5leGNsdXNpdmVNaW5pbXVtID0gY2hlY2sudmFsdWU7XG4gICAgICAgIH1cbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlIFwibWF4XCI6XG4gICAgICAgIGlmIChjaGVjay5pbmNsdXNpdmUpIHtcbiAgICAgICAgICByZXMubWF4aW11bSA9IGNoZWNrLnZhbHVlO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHJlcy5leGNsdXNpdmVNYXhpbXVtID0gY2hlY2sudmFsdWU7XG4gICAgICAgIH1cbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlIFwibXVsdGlwbGVPZlwiOlxuICAgICAgICByZXMubXVsdGlwbGVPZiA9IGNoZWNrLnZhbHVlO1xuICAgICAgICBicmVhaztcbiAgICB9XG4gIH1cbiAgcmV0dXJuIHJlcztcbn1cblxuLy8gc3JjL3RvLWpzb24tc2NoZW1hL3pvZDMtdG8tanNvbi1zY2hlbWEvcGFyc2Vycy9vYmplY3QudHNcbmZ1bmN0aW9uIHBhcnNlT2JqZWN0RGVmKGRlZiwgcmVmcykge1xuICBjb25zdCByZXN1bHQgPSB7XG4gICAgdHlwZTogXCJvYmplY3RcIixcbiAgICBwcm9wZXJ0aWVzOiB7fVxuICB9O1xuICBjb25zdCByZXF1aXJlZCA9IFtdO1xuICBjb25zdCBzaGFwZSA9IGRlZi5zaGFwZSgpO1xuICBmb3IgKGNvbnN0IHByb3BOYW1lIGluIHNoYXBlKSB7XG4gICAgbGV0IHByb3BEZWYgPSBzaGFwZVtwcm9wTmFtZV07XG4gICAgaWYgKHByb3BEZWYgPT09IHZvaWQgMCB8fCBwcm9wRGVmLl9kZWYgPT09IHZvaWQgMCkge1xuICAgICAgY29udGludWU7XG4gICAgfVxuICAgIGNvbnN0IHByb3BPcHRpb25hbCA9IHNhZmVJc09wdGlvbmFsKHByb3BEZWYpO1xuICAgIGNvbnN0IHBhcnNlZERlZiA9IHBhcnNlRGVmKHByb3BEZWYuX2RlZiwge1xuICAgICAgLi4ucmVmcyxcbiAgICAgIGN1cnJlbnRQYXRoOiBbLi4ucmVmcy5jdXJyZW50UGF0aCwgXCJwcm9wZXJ0aWVzXCIsIHByb3BOYW1lXSxcbiAgICAgIHByb3BlcnR5UGF0aDogWy4uLnJlZnMuY3VycmVudFBhdGgsIFwicHJvcGVydGllc1wiLCBwcm9wTmFtZV1cbiAgICB9KTtcbiAgICBpZiAocGFyc2VkRGVmID09PSB2b2lkIDApIHtcbiAgICAgIGNvbnRpbnVlO1xuICAgIH1cbiAgICByZXN1bHQucHJvcGVydGllc1twcm9wTmFtZV0gPSBwYXJzZWREZWY7XG4gICAgaWYgKCFwcm9wT3B0aW9uYWwpIHtcbiAgICAgIHJlcXVpcmVkLnB1c2gocHJvcE5hbWUpO1xuICAgIH1cbiAgfVxuICBpZiAocmVxdWlyZWQubGVuZ3RoKSB7XG4gICAgcmVzdWx0LnJlcXVpcmVkID0gcmVxdWlyZWQ7XG4gIH1cbiAgY29uc3QgYWRkaXRpb25hbFByb3BlcnRpZXMgPSBkZWNpZGVBZGRpdGlvbmFsUHJvcGVydGllcyhkZWYsIHJlZnMpO1xuICBpZiAoYWRkaXRpb25hbFByb3BlcnRpZXMgIT09IHZvaWQgMCkge1xuICAgIHJlc3VsdC5hZGRpdGlvbmFsUHJvcGVydGllcyA9IGFkZGl0aW9uYWxQcm9wZXJ0aWVzO1xuICB9XG4gIHJldHVybiByZXN1bHQ7XG59XG5mdW5jdGlvbiBkZWNpZGVBZGRpdGlvbmFsUHJvcGVydGllcyhkZWYsIHJlZnMpIHtcbiAgaWYgKGRlZi5jYXRjaGFsbC5fZGVmLnR5cGVOYW1lICE9PSBcIlpvZE5ldmVyXCIpIHtcbiAgICByZXR1cm4gcGFyc2VEZWYoZGVmLmNhdGNoYWxsLl9kZWYsIHtcbiAgICAgIC4uLnJlZnMsXG4gICAgICBjdXJyZW50UGF0aDogWy4uLnJlZnMuY3VycmVudFBhdGgsIFwiYWRkaXRpb25hbFByb3BlcnRpZXNcIl1cbiAgICB9KTtcbiAgfVxuICBzd2l0Y2ggKGRlZi51bmtub3duS2V5cykge1xuICAgIGNhc2UgXCJwYXNzdGhyb3VnaFwiOlxuICAgICAgcmV0dXJuIHJlZnMuYWxsb3dlZEFkZGl0aW9uYWxQcm9wZXJ0aWVzO1xuICAgIGNhc2UgXCJzdHJpY3RcIjpcbiAgICAgIHJldHVybiByZWZzLnJlamVjdGVkQWRkaXRpb25hbFByb3BlcnRpZXM7XG4gICAgY2FzZSBcInN0cmlwXCI6XG4gICAgICByZXR1cm4gcmVmcy5yZW1vdmVBZGRpdGlvbmFsU3RyYXRlZ3kgPT09IFwic3RyaWN0XCIgPyByZWZzLmFsbG93ZWRBZGRpdGlvbmFsUHJvcGVydGllcyA6IHJlZnMucmVqZWN0ZWRBZGRpdGlvbmFsUHJvcGVydGllcztcbiAgfVxufVxuZnVuY3Rpb24gc2FmZUlzT3B0aW9uYWwoc2NoZW1hKSB7XG4gIHRyeSB7XG4gICAgcmV0dXJuIHNjaGVtYS5pc09wdGlvbmFsKCk7XG4gIH0gY2F0Y2ggKGUpIHtcbiAgICByZXR1cm4gdHJ1ZTtcbiAgfVxufVxuXG4vLyBzcmMvdG8tanNvbi1zY2hlbWEvem9kMy10by1qc29uLXNjaGVtYS9wYXJzZXJzL29wdGlvbmFsLnRzXG52YXIgcGFyc2VPcHRpb25hbERlZiA9IChkZWYsIHJlZnMpID0+IHtcbiAgdmFyIF9hMjtcbiAgaWYgKHJlZnMuY3VycmVudFBhdGgudG9TdHJpbmcoKSA9PT0gKChfYTIgPSByZWZzLnByb3BlcnR5UGF0aCkgPT0gbnVsbCA/IHZvaWQgMCA6IF9hMi50b1N0cmluZygpKSkge1xuICAgIHJldHVybiBwYXJzZURlZihkZWYuaW5uZXJUeXBlLl9kZWYsIHJlZnMpO1xuICB9XG4gIGNvbnN0IGlubmVyU2NoZW1hID0gcGFyc2VEZWYoZGVmLmlubmVyVHlwZS5fZGVmLCB7XG4gICAgLi4ucmVmcyxcbiAgICBjdXJyZW50UGF0aDogWy4uLnJlZnMuY3VycmVudFBhdGgsIFwiYW55T2ZcIiwgXCIxXCJdXG4gIH0pO1xuICByZXR1cm4gaW5uZXJTY2hlbWEgPyB7IGFueU9mOiBbeyBub3Q6IHBhcnNlQW55RGVmKCkgfSwgaW5uZXJTY2hlbWFdIH0gOiBwYXJzZUFueURlZigpO1xufTtcblxuLy8gc3JjL3RvLWpzb24tc2NoZW1hL3pvZDMtdG8tanNvbi1zY2hlbWEvcGFyc2Vycy9waXBlbGluZS50c1xudmFyIHBhcnNlUGlwZWxpbmVEZWYgPSAoZGVmLCByZWZzKSA9PiB7XG4gIGlmIChyZWZzLnBpcGVTdHJhdGVneSA9PT0gXCJpbnB1dFwiKSB7XG4gICAgcmV0dXJuIHBhcnNlRGVmKGRlZi5pbi5fZGVmLCByZWZzKTtcbiAgfSBlbHNlIGlmIChyZWZzLnBpcGVTdHJhdGVneSA9PT0gXCJvdXRwdXRcIikge1xuICAgIHJldHVybiBwYXJzZURlZihkZWYub3V0Ll9kZWYsIHJlZnMpO1xuICB9XG4gIGNvbnN0IGEgPSBwYXJzZURlZihkZWYuaW4uX2RlZiwge1xuICAgIC4uLnJlZnMsXG4gICAgY3VycmVudFBhdGg6IFsuLi5yZWZzLmN1cnJlbnRQYXRoLCBcImFsbE9mXCIsIFwiMFwiXVxuICB9KTtcbiAgY29uc3QgYiA9IHBhcnNlRGVmKGRlZi5vdXQuX2RlZiwge1xuICAgIC4uLnJlZnMsXG4gICAgY3VycmVudFBhdGg6IFsuLi5yZWZzLmN1cnJlbnRQYXRoLCBcImFsbE9mXCIsIGEgPyBcIjFcIiA6IFwiMFwiXVxuICB9KTtcbiAgcmV0dXJuIHtcbiAgICBhbGxPZjogW2EsIGJdLmZpbHRlcigoeCkgPT4geCAhPT0gdm9pZCAwKVxuICB9O1xufTtcblxuLy8gc3JjL3RvLWpzb24tc2NoZW1hL3pvZDMtdG8tanNvbi1zY2hlbWEvcGFyc2Vycy9wcm9taXNlLnRzXG5mdW5jdGlvbiBwYXJzZVByb21pc2VEZWYoZGVmLCByZWZzKSB7XG4gIHJldHVybiBwYXJzZURlZihkZWYudHlwZS5fZGVmLCByZWZzKTtcbn1cblxuLy8gc3JjL3RvLWpzb24tc2NoZW1hL3pvZDMtdG8tanNvbi1zY2hlbWEvcGFyc2Vycy9zZXQudHNcbmZ1bmN0aW9uIHBhcnNlU2V0RGVmKGRlZiwgcmVmcykge1xuICBjb25zdCBpdGVtcyA9IHBhcnNlRGVmKGRlZi52YWx1ZVR5cGUuX2RlZiwge1xuICAgIC4uLnJlZnMsXG4gICAgY3VycmVudFBhdGg6IFsuLi5yZWZzLmN1cnJlbnRQYXRoLCBcIml0ZW1zXCJdXG4gIH0pO1xuICBjb25zdCBzY2hlbWEgPSB7XG4gICAgdHlwZTogXCJhcnJheVwiLFxuICAgIHVuaXF1ZUl0ZW1zOiB0cnVlLFxuICAgIGl0ZW1zXG4gIH07XG4gIGlmIChkZWYubWluU2l6ZSkge1xuICAgIHNjaGVtYS5taW5JdGVtcyA9IGRlZi5taW5TaXplLnZhbHVlO1xuICB9XG4gIGlmIChkZWYubWF4U2l6ZSkge1xuICAgIHNjaGVtYS5tYXhJdGVtcyA9IGRlZi5tYXhTaXplLnZhbHVlO1xuICB9XG4gIHJldHVybiBzY2hlbWE7XG59XG5cbi8vIHNyYy90by1qc29uLXNjaGVtYS96b2QzLXRvLWpzb24tc2NoZW1hL3BhcnNlcnMvdHVwbGUudHNcbmZ1bmN0aW9uIHBhcnNlVHVwbGVEZWYoZGVmLCByZWZzKSB7XG4gIGlmIChkZWYucmVzdCkge1xuICAgIHJldHVybiB7XG4gICAgICB0eXBlOiBcImFycmF5XCIsXG4gICAgICBtaW5JdGVtczogZGVmLml0ZW1zLmxlbmd0aCxcbiAgICAgIGl0ZW1zOiBkZWYuaXRlbXMubWFwKFxuICAgICAgICAoeCwgaSkgPT4gcGFyc2VEZWYoeC5fZGVmLCB7XG4gICAgICAgICAgLi4ucmVmcyxcbiAgICAgICAgICBjdXJyZW50UGF0aDogWy4uLnJlZnMuY3VycmVudFBhdGgsIFwiaXRlbXNcIiwgYCR7aX1gXVxuICAgICAgICB9KVxuICAgICAgKS5yZWR1Y2UoXG4gICAgICAgIChhY2MsIHgpID0+IHggPT09IHZvaWQgMCA/IGFjYyA6IFsuLi5hY2MsIHhdLFxuICAgICAgICBbXVxuICAgICAgKSxcbiAgICAgIGFkZGl0aW9uYWxJdGVtczogcGFyc2VEZWYoZGVmLnJlc3QuX2RlZiwge1xuICAgICAgICAuLi5yZWZzLFxuICAgICAgICBjdXJyZW50UGF0aDogWy4uLnJlZnMuY3VycmVudFBhdGgsIFwiYWRkaXRpb25hbEl0ZW1zXCJdXG4gICAgICB9KVxuICAgIH07XG4gIH0gZWxzZSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIHR5cGU6IFwiYXJyYXlcIixcbiAgICAgIG1pbkl0ZW1zOiBkZWYuaXRlbXMubGVuZ3RoLFxuICAgICAgbWF4SXRlbXM6IGRlZi5pdGVtcy5sZW5ndGgsXG4gICAgICBpdGVtczogZGVmLml0ZW1zLm1hcChcbiAgICAgICAgKHgsIGkpID0+IHBhcnNlRGVmKHguX2RlZiwge1xuICAgICAgICAgIC4uLnJlZnMsXG4gICAgICAgICAgY3VycmVudFBhdGg6IFsuLi5yZWZzLmN1cnJlbnRQYXRoLCBcIml0ZW1zXCIsIGAke2l9YF1cbiAgICAgICAgfSlcbiAgICAgICkucmVkdWNlKFxuICAgICAgICAoYWNjLCB4KSA9PiB4ID09PSB2b2lkIDAgPyBhY2MgOiBbLi4uYWNjLCB4XSxcbiAgICAgICAgW11cbiAgICAgIClcbiAgICB9O1xuICB9XG59XG5cbi8vIHNyYy90by1qc29uLXNjaGVtYS96b2QzLXRvLWpzb24tc2NoZW1hL3BhcnNlcnMvdW5kZWZpbmVkLnRzXG5mdW5jdGlvbiBwYXJzZVVuZGVmaW5lZERlZigpIHtcbiAgcmV0dXJuIHtcbiAgICBub3Q6IHBhcnNlQW55RGVmKClcbiAgfTtcbn1cblxuLy8gc3JjL3RvLWpzb24tc2NoZW1hL3pvZDMtdG8tanNvbi1zY2hlbWEvcGFyc2Vycy91bmtub3duLnRzXG5mdW5jdGlvbiBwYXJzZVVua25vd25EZWYoKSB7XG4gIHJldHVybiBwYXJzZUFueURlZigpO1xufVxuXG4vLyBzcmMvdG8tanNvbi1zY2hlbWEvem9kMy10by1qc29uLXNjaGVtYS9wYXJzZXJzL3JlYWRvbmx5LnRzXG52YXIgcGFyc2VSZWFkb25seURlZiA9IChkZWYsIHJlZnMpID0+IHtcbiAgcmV0dXJuIHBhcnNlRGVmKGRlZi5pbm5lclR5cGUuX2RlZiwgcmVmcyk7XG59O1xuXG4vLyBzcmMvdG8tanNvbi1zY2hlbWEvem9kMy10by1qc29uLXNjaGVtYS9zZWxlY3QtcGFyc2VyLnRzXG52YXIgc2VsZWN0UGFyc2VyID0gKGRlZiwgdHlwZU5hbWUsIHJlZnMpID0+IHtcbiAgc3dpdGNoICh0eXBlTmFtZSkge1xuICAgIGNhc2UgWm9kRmlyc3RQYXJ0eVR5cGVLaW5kMy5ab2RTdHJpbmc6XG4gICAgICByZXR1cm4gcGFyc2VTdHJpbmdEZWYoZGVmLCByZWZzKTtcbiAgICBjYXNlIFpvZEZpcnN0UGFydHlUeXBlS2luZDMuWm9kTnVtYmVyOlxuICAgICAgcmV0dXJuIHBhcnNlTnVtYmVyRGVmKGRlZik7XG4gICAgY2FzZSBab2RGaXJzdFBhcnR5VHlwZUtpbmQzLlpvZE9iamVjdDpcbiAgICAgIHJldHVybiBwYXJzZU9iamVjdERlZihkZWYsIHJlZnMpO1xuICAgIGNhc2UgWm9kRmlyc3RQYXJ0eVR5cGVLaW5kMy5ab2RCaWdJbnQ6XG4gICAgICByZXR1cm4gcGFyc2VCaWdpbnREZWYoZGVmKTtcbiAgICBjYXNlIFpvZEZpcnN0UGFydHlUeXBlS2luZDMuWm9kQm9vbGVhbjpcbiAgICAgIHJldHVybiBwYXJzZUJvb2xlYW5EZWYoKTtcbiAgICBjYXNlIFpvZEZpcnN0UGFydHlUeXBlS2luZDMuWm9kRGF0ZTpcbiAgICAgIHJldHVybiBwYXJzZURhdGVEZWYoZGVmLCByZWZzKTtcbiAgICBjYXNlIFpvZEZpcnN0UGFydHlUeXBlS2luZDMuWm9kVW5kZWZpbmVkOlxuICAgICAgcmV0dXJuIHBhcnNlVW5kZWZpbmVkRGVmKCk7XG4gICAgY2FzZSBab2RGaXJzdFBhcnR5VHlwZUtpbmQzLlpvZE51bGw6XG4gICAgICByZXR1cm4gcGFyc2VOdWxsRGVmKCk7XG4gICAgY2FzZSBab2RGaXJzdFBhcnR5VHlwZUtpbmQzLlpvZEFycmF5OlxuICAgICAgcmV0dXJuIHBhcnNlQXJyYXlEZWYoZGVmLCByZWZzKTtcbiAgICBjYXNlIFpvZEZpcnN0UGFydHlUeXBlS2luZDMuWm9kVW5pb246XG4gICAgY2FzZSBab2RGaXJzdFBhcnR5VHlwZUtpbmQzLlpvZERpc2NyaW1pbmF0ZWRVbmlvbjpcbiAgICAgIHJldHVybiBwYXJzZVVuaW9uRGVmKGRlZiwgcmVmcyk7XG4gICAgY2FzZSBab2RGaXJzdFBhcnR5VHlwZUtpbmQzLlpvZEludGVyc2VjdGlvbjpcbiAgICAgIHJldHVybiBwYXJzZUludGVyc2VjdGlvbkRlZihkZWYsIHJlZnMpO1xuICAgIGNhc2UgWm9kRmlyc3RQYXJ0eVR5cGVLaW5kMy5ab2RUdXBsZTpcbiAgICAgIHJldHVybiBwYXJzZVR1cGxlRGVmKGRlZiwgcmVmcyk7XG4gICAgY2FzZSBab2RGaXJzdFBhcnR5VHlwZUtpbmQzLlpvZFJlY29yZDpcbiAgICAgIHJldHVybiBwYXJzZVJlY29yZERlZihkZWYsIHJlZnMpO1xuICAgIGNhc2UgWm9kRmlyc3RQYXJ0eVR5cGVLaW5kMy5ab2RMaXRlcmFsOlxuICAgICAgcmV0dXJuIHBhcnNlTGl0ZXJhbERlZihkZWYpO1xuICAgIGNhc2UgWm9kRmlyc3RQYXJ0eVR5cGVLaW5kMy5ab2RFbnVtOlxuICAgICAgcmV0dXJuIHBhcnNlRW51bURlZihkZWYpO1xuICAgIGNhc2UgWm9kRmlyc3RQYXJ0eVR5cGVLaW5kMy5ab2ROYXRpdmVFbnVtOlxuICAgICAgcmV0dXJuIHBhcnNlTmF0aXZlRW51bURlZihkZWYpO1xuICAgIGNhc2UgWm9kRmlyc3RQYXJ0eVR5cGVLaW5kMy5ab2ROdWxsYWJsZTpcbiAgICAgIHJldHVybiBwYXJzZU51bGxhYmxlRGVmKGRlZiwgcmVmcyk7XG4gICAgY2FzZSBab2RGaXJzdFBhcnR5VHlwZUtpbmQzLlpvZE9wdGlvbmFsOlxuICAgICAgcmV0dXJuIHBhcnNlT3B0aW9uYWxEZWYoZGVmLCByZWZzKTtcbiAgICBjYXNlIFpvZEZpcnN0UGFydHlUeXBlS2luZDMuWm9kTWFwOlxuICAgICAgcmV0dXJuIHBhcnNlTWFwRGVmKGRlZiwgcmVmcyk7XG4gICAgY2FzZSBab2RGaXJzdFBhcnR5VHlwZUtpbmQzLlpvZFNldDpcbiAgICAgIHJldHVybiBwYXJzZVNldERlZihkZWYsIHJlZnMpO1xuICAgIGNhc2UgWm9kRmlyc3RQYXJ0eVR5cGVLaW5kMy5ab2RMYXp5OlxuICAgICAgcmV0dXJuICgpID0+IGRlZi5nZXR0ZXIoKS5fZGVmO1xuICAgIGNhc2UgWm9kRmlyc3RQYXJ0eVR5cGVLaW5kMy5ab2RQcm9taXNlOlxuICAgICAgcmV0dXJuIHBhcnNlUHJvbWlzZURlZihkZWYsIHJlZnMpO1xuICAgIGNhc2UgWm9kRmlyc3RQYXJ0eVR5cGVLaW5kMy5ab2ROYU46XG4gICAgY2FzZSBab2RGaXJzdFBhcnR5VHlwZUtpbmQzLlpvZE5ldmVyOlxuICAgICAgcmV0dXJuIHBhcnNlTmV2ZXJEZWYoKTtcbiAgICBjYXNlIFpvZEZpcnN0UGFydHlUeXBlS2luZDMuWm9kRWZmZWN0czpcbiAgICAgIHJldHVybiBwYXJzZUVmZmVjdHNEZWYoZGVmLCByZWZzKTtcbiAgICBjYXNlIFpvZEZpcnN0UGFydHlUeXBlS2luZDMuWm9kQW55OlxuICAgICAgcmV0dXJuIHBhcnNlQW55RGVmKCk7XG4gICAgY2FzZSBab2RGaXJzdFBhcnR5VHlwZUtpbmQzLlpvZFVua25vd246XG4gICAgICByZXR1cm4gcGFyc2VVbmtub3duRGVmKCk7XG4gICAgY2FzZSBab2RGaXJzdFBhcnR5VHlwZUtpbmQzLlpvZERlZmF1bHQ6XG4gICAgICByZXR1cm4gcGFyc2VEZWZhdWx0RGVmKGRlZiwgcmVmcyk7XG4gICAgY2FzZSBab2RGaXJzdFBhcnR5VHlwZUtpbmQzLlpvZEJyYW5kZWQ6XG4gICAgICByZXR1cm4gcGFyc2VCcmFuZGVkRGVmKGRlZiwgcmVmcyk7XG4gICAgY2FzZSBab2RGaXJzdFBhcnR5VHlwZUtpbmQzLlpvZFJlYWRvbmx5OlxuICAgICAgcmV0dXJuIHBhcnNlUmVhZG9ubHlEZWYoZGVmLCByZWZzKTtcbiAgICBjYXNlIFpvZEZpcnN0UGFydHlUeXBlS2luZDMuWm9kQ2F0Y2g6XG4gICAgICByZXR1cm4gcGFyc2VDYXRjaERlZihkZWYsIHJlZnMpO1xuICAgIGNhc2UgWm9kRmlyc3RQYXJ0eVR5cGVLaW5kMy5ab2RQaXBlbGluZTpcbiAgICAgIHJldHVybiBwYXJzZVBpcGVsaW5lRGVmKGRlZiwgcmVmcyk7XG4gICAgY2FzZSBab2RGaXJzdFBhcnR5VHlwZUtpbmQzLlpvZEZ1bmN0aW9uOlxuICAgIGNhc2UgWm9kRmlyc3RQYXJ0eVR5cGVLaW5kMy5ab2RWb2lkOlxuICAgIGNhc2UgWm9kRmlyc3RQYXJ0eVR5cGVLaW5kMy5ab2RTeW1ib2w6XG4gICAgICByZXR1cm4gdm9pZCAwO1xuICAgIGRlZmF1bHQ6XG4gICAgICByZXR1cm4gLyogQF9fUFVSRV9fICovICgoXykgPT4gdm9pZCAwKSh0eXBlTmFtZSk7XG4gIH1cbn07XG5cbi8vIHNyYy90by1qc29uLXNjaGVtYS96b2QzLXRvLWpzb24tc2NoZW1hL2dldC1yZWxhdGl2ZS1wYXRoLnRzXG52YXIgZ2V0UmVsYXRpdmVQYXRoID0gKHBhdGhBLCBwYXRoQikgPT4ge1xuICBsZXQgaSA9IDA7XG4gIGZvciAoOyBpIDwgcGF0aEEubGVuZ3RoICYmIGkgPCBwYXRoQi5sZW5ndGg7IGkrKykge1xuICAgIGlmIChwYXRoQVtpXSAhPT0gcGF0aEJbaV0pIGJyZWFrO1xuICB9XG4gIHJldHVybiBbKHBhdGhBLmxlbmd0aCAtIGkpLnRvU3RyaW5nKCksIC4uLnBhdGhCLnNsaWNlKGkpXS5qb2luKFwiL1wiKTtcbn07XG5cbi8vIHNyYy90by1qc29uLXNjaGVtYS96b2QzLXRvLWpzb24tc2NoZW1hL3BhcnNlLWRlZi50c1xuZnVuY3Rpb24gcGFyc2VEZWYoZGVmLCByZWZzLCBmb3JjZVJlc29sdXRpb24gPSBmYWxzZSkge1xuICB2YXIgX2EyO1xuICBjb25zdCBzZWVuSXRlbSA9IHJlZnMuc2Vlbi5nZXQoZGVmKTtcbiAgaWYgKHJlZnMub3ZlcnJpZGUpIHtcbiAgICBjb25zdCBvdmVycmlkZVJlc3VsdCA9IChfYTIgPSByZWZzLm92ZXJyaWRlKSA9PSBudWxsID8gdm9pZCAwIDogX2EyLmNhbGwoXG4gICAgICByZWZzLFxuICAgICAgZGVmLFxuICAgICAgcmVmcyxcbiAgICAgIHNlZW5JdGVtLFxuICAgICAgZm9yY2VSZXNvbHV0aW9uXG4gICAgKTtcbiAgICBpZiAob3ZlcnJpZGVSZXN1bHQgIT09IGlnbm9yZU92ZXJyaWRlKSB7XG4gICAgICByZXR1cm4gb3ZlcnJpZGVSZXN1bHQ7XG4gICAgfVxuICB9XG4gIGlmIChzZWVuSXRlbSAmJiAhZm9yY2VSZXNvbHV0aW9uKSB7XG4gICAgY29uc3Qgc2VlblNjaGVtYSA9IGdldCRyZWYoc2Vlbkl0ZW0sIHJlZnMpO1xuICAgIGlmIChzZWVuU2NoZW1hICE9PSB2b2lkIDApIHtcbiAgICAgIHJldHVybiBzZWVuU2NoZW1hO1xuICAgIH1cbiAgfVxuICBjb25zdCBuZXdJdGVtID0geyBkZWYsIHBhdGg6IHJlZnMuY3VycmVudFBhdGgsIGpzb25TY2hlbWE6IHZvaWQgMCB9O1xuICByZWZzLnNlZW4uc2V0KGRlZiwgbmV3SXRlbSk7XG4gIGNvbnN0IGpzb25TY2hlbWFPckdldHRlciA9IHNlbGVjdFBhcnNlcihkZWYsIGRlZi50eXBlTmFtZSwgcmVmcyk7XG4gIGNvbnN0IGpzb25TY2hlbWEyID0gdHlwZW9mIGpzb25TY2hlbWFPckdldHRlciA9PT0gXCJmdW5jdGlvblwiID8gcGFyc2VEZWYoanNvblNjaGVtYU9yR2V0dGVyKCksIHJlZnMpIDoganNvblNjaGVtYU9yR2V0dGVyO1xuICBpZiAoanNvblNjaGVtYTIpIHtcbiAgICBhZGRNZXRhKGRlZiwgcmVmcywganNvblNjaGVtYTIpO1xuICB9XG4gIGlmIChyZWZzLnBvc3RQcm9jZXNzKSB7XG4gICAgY29uc3QgcG9zdFByb2Nlc3NSZXN1bHQgPSByZWZzLnBvc3RQcm9jZXNzKGpzb25TY2hlbWEyLCBkZWYsIHJlZnMpO1xuICAgIG5ld0l0ZW0uanNvblNjaGVtYSA9IGpzb25TY2hlbWEyO1xuICAgIHJldHVybiBwb3N0UHJvY2Vzc1Jlc3VsdDtcbiAgfVxuICBuZXdJdGVtLmpzb25TY2hlbWEgPSBqc29uU2NoZW1hMjtcbiAgcmV0dXJuIGpzb25TY2hlbWEyO1xufVxudmFyIGdldCRyZWYgPSAoaXRlbSwgcmVmcykgPT4ge1xuICBzd2l0Y2ggKHJlZnMuJHJlZlN0cmF0ZWd5KSB7XG4gICAgY2FzZSBcInJvb3RcIjpcbiAgICAgIHJldHVybiB7ICRyZWY6IGl0ZW0ucGF0aC5qb2luKFwiL1wiKSB9O1xuICAgIGNhc2UgXCJyZWxhdGl2ZVwiOlxuICAgICAgcmV0dXJuIHsgJHJlZjogZ2V0UmVsYXRpdmVQYXRoKHJlZnMuY3VycmVudFBhdGgsIGl0ZW0ucGF0aCkgfTtcbiAgICBjYXNlIFwibm9uZVwiOlxuICAgIGNhc2UgXCJzZWVuXCI6IHtcbiAgICAgIGlmIChpdGVtLnBhdGgubGVuZ3RoIDwgcmVmcy5jdXJyZW50UGF0aC5sZW5ndGggJiYgaXRlbS5wYXRoLmV2ZXJ5KCh2YWx1ZSwgaW5kZXgpID0+IHJlZnMuY3VycmVudFBhdGhbaW5kZXhdID09PSB2YWx1ZSkpIHtcbiAgICAgICAgY29uc29sZS53YXJuKFxuICAgICAgICAgIGBSZWN1cnNpdmUgcmVmZXJlbmNlIGRldGVjdGVkIGF0ICR7cmVmcy5jdXJyZW50UGF0aC5qb2luKFxuICAgICAgICAgICAgXCIvXCJcbiAgICAgICAgICApfSEgRGVmYXVsdGluZyB0byBhbnlgXG4gICAgICAgICk7XG4gICAgICAgIHJldHVybiBwYXJzZUFueURlZigpO1xuICAgICAgfVxuICAgICAgcmV0dXJuIHJlZnMuJHJlZlN0cmF0ZWd5ID09PSBcInNlZW5cIiA/IHBhcnNlQW55RGVmKCkgOiB2b2lkIDA7XG4gICAgfVxuICB9XG59O1xudmFyIGFkZE1ldGEgPSAoZGVmLCByZWZzLCBqc29uU2NoZW1hMikgPT4ge1xuICBpZiAoZGVmLmRlc2NyaXB0aW9uKSB7XG4gICAganNvblNjaGVtYTIuZGVzY3JpcHRpb24gPSBkZWYuZGVzY3JpcHRpb247XG4gIH1cbiAgcmV0dXJuIGpzb25TY2hlbWEyO1xufTtcblxuLy8gc3JjL3RvLWpzb24tc2NoZW1hL3pvZDMtdG8tanNvbi1zY2hlbWEvcmVmcy50c1xudmFyIGdldFJlZnMgPSAob3B0aW9ucykgPT4ge1xuICBjb25zdCBfb3B0aW9ucyA9IGdldERlZmF1bHRPcHRpb25zKG9wdGlvbnMpO1xuICBjb25zdCBjdXJyZW50UGF0aCA9IF9vcHRpb25zLm5hbWUgIT09IHZvaWQgMCA/IFsuLi5fb3B0aW9ucy5iYXNlUGF0aCwgX29wdGlvbnMuZGVmaW5pdGlvblBhdGgsIF9vcHRpb25zLm5hbWVdIDogX29wdGlvbnMuYmFzZVBhdGg7XG4gIHJldHVybiB7XG4gICAgLi4uX29wdGlvbnMsXG4gICAgY3VycmVudFBhdGgsXG4gICAgcHJvcGVydHlQYXRoOiB2b2lkIDAsXG4gICAgc2VlbjogbmV3IE1hcChcbiAgICAgIE9iamVjdC5lbnRyaWVzKF9vcHRpb25zLmRlZmluaXRpb25zKS5tYXAoKFtuYW1lMiwgZGVmXSkgPT4gW1xuICAgICAgICBkZWYuX2RlZixcbiAgICAgICAge1xuICAgICAgICAgIGRlZjogZGVmLl9kZWYsXG4gICAgICAgICAgcGF0aDogWy4uLl9vcHRpb25zLmJhc2VQYXRoLCBfb3B0aW9ucy5kZWZpbml0aW9uUGF0aCwgbmFtZTJdLFxuICAgICAgICAgIC8vIFJlc29sdXRpb24gb2YgcmVmZXJlbmNlcyB3aWxsIGJlIGZvcmNlZCBldmVuIHRob3VnaCBzZWVuLCBzbyBpdCdzIG9rIHRoYXQgdGhlIHNjaGVtYSBpcyB1bmRlZmluZWQgaGVyZSBmb3Igbm93LlxuICAgICAgICAgIGpzb25TY2hlbWE6IHZvaWQgMFxuICAgICAgICB9XG4gICAgICBdKVxuICAgIClcbiAgfTtcbn07XG5cbi8vIHNyYy90by1qc29uLXNjaGVtYS96b2QzLXRvLWpzb24tc2NoZW1hL3pvZDMtdG8tanNvbi1zY2hlbWEudHNcbnZhciB6b2QzVG9Kc29uU2NoZW1hID0gKHNjaGVtYSwgb3B0aW9ucykgPT4ge1xuICB2YXIgX2EyO1xuICBjb25zdCByZWZzID0gZ2V0UmVmcyhvcHRpb25zKTtcbiAgbGV0IGRlZmluaXRpb25zID0gdHlwZW9mIG9wdGlvbnMgPT09IFwib2JqZWN0XCIgJiYgb3B0aW9ucy5kZWZpbml0aW9ucyA/IE9iamVjdC5lbnRyaWVzKG9wdGlvbnMuZGVmaW5pdGlvbnMpLnJlZHVjZShcbiAgICAoYWNjLCBbbmFtZTMsIHNjaGVtYTJdKSA9PiB7XG4gICAgICB2YXIgX2EzO1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgLi4uYWNjLFxuICAgICAgICBbbmFtZTNdOiAoX2EzID0gcGFyc2VEZWYoXG4gICAgICAgICAgc2NoZW1hMi5fZGVmLFxuICAgICAgICAgIHtcbiAgICAgICAgICAgIC4uLnJlZnMsXG4gICAgICAgICAgICBjdXJyZW50UGF0aDogWy4uLnJlZnMuYmFzZVBhdGgsIHJlZnMuZGVmaW5pdGlvblBhdGgsIG5hbWUzXVxuICAgICAgICAgIH0sXG4gICAgICAgICAgdHJ1ZVxuICAgICAgICApKSAhPSBudWxsID8gX2EzIDogcGFyc2VBbnlEZWYoKVxuICAgICAgfTtcbiAgICB9LFxuICAgIHt9XG4gICkgOiB2b2lkIDA7XG4gIGNvbnN0IG5hbWUyID0gdHlwZW9mIG9wdGlvbnMgPT09IFwic3RyaW5nXCIgPyBvcHRpb25zIDogKG9wdGlvbnMgPT0gbnVsbCA/IHZvaWQgMCA6IG9wdGlvbnMubmFtZVN0cmF0ZWd5KSA9PT0gXCJ0aXRsZVwiID8gdm9pZCAwIDogb3B0aW9ucyA9PSBudWxsID8gdm9pZCAwIDogb3B0aW9ucy5uYW1lO1xuICBjb25zdCBtYWluID0gKF9hMiA9IHBhcnNlRGVmKFxuICAgIHNjaGVtYS5fZGVmLFxuICAgIG5hbWUyID09PSB2b2lkIDAgPyByZWZzIDoge1xuICAgICAgLi4ucmVmcyxcbiAgICAgIGN1cnJlbnRQYXRoOiBbLi4ucmVmcy5iYXNlUGF0aCwgcmVmcy5kZWZpbml0aW9uUGF0aCwgbmFtZTJdXG4gICAgfSxcbiAgICBmYWxzZVxuICApKSAhPSBudWxsID8gX2EyIDogcGFyc2VBbnlEZWYoKTtcbiAgY29uc3QgdGl0bGUgPSB0eXBlb2Ygb3B0aW9ucyA9PT0gXCJvYmplY3RcIiAmJiBvcHRpb25zLm5hbWUgIT09IHZvaWQgMCAmJiBvcHRpb25zLm5hbWVTdHJhdGVneSA9PT0gXCJ0aXRsZVwiID8gb3B0aW9ucy5uYW1lIDogdm9pZCAwO1xuICBpZiAodGl0bGUgIT09IHZvaWQgMCkge1xuICAgIG1haW4udGl0bGUgPSB0aXRsZTtcbiAgfVxuICBjb25zdCBjb21iaW5lZCA9IG5hbWUyID09PSB2b2lkIDAgPyBkZWZpbml0aW9ucyA/IHtcbiAgICAuLi5tYWluLFxuICAgIFtyZWZzLmRlZmluaXRpb25QYXRoXTogZGVmaW5pdGlvbnNcbiAgfSA6IG1haW4gOiB7XG4gICAgJHJlZjogW1xuICAgICAgLi4ucmVmcy4kcmVmU3RyYXRlZ3kgPT09IFwicmVsYXRpdmVcIiA/IFtdIDogcmVmcy5iYXNlUGF0aCxcbiAgICAgIHJlZnMuZGVmaW5pdGlvblBhdGgsXG4gICAgICBuYW1lMlxuICAgIF0uam9pbihcIi9cIiksXG4gICAgW3JlZnMuZGVmaW5pdGlvblBhdGhdOiB7XG4gICAgICAuLi5kZWZpbml0aW9ucyxcbiAgICAgIFtuYW1lMl06IG1haW5cbiAgICB9XG4gIH07XG4gIGNvbWJpbmVkLiRzY2hlbWEgPSBcImh0dHA6Ly9qc29uLXNjaGVtYS5vcmcvZHJhZnQtMDcvc2NoZW1hI1wiO1xuICByZXR1cm4gY29tYmluZWQ7XG59O1xuXG4vLyBzcmMvc2NoZW1hLnRzXG52YXIgc2NoZW1hU3ltYm9sID0gU3ltYm9sLmZvcihcInZlcmNlbC5haS5zY2hlbWFcIik7XG5mdW5jdGlvbiBsYXp5U2NoZW1hKGNyZWF0ZVNjaGVtYSkge1xuICBsZXQgc2NoZW1hO1xuICByZXR1cm4gKCkgPT4ge1xuICAgIGlmIChzY2hlbWEgPT0gbnVsbCkge1xuICAgICAgc2NoZW1hID0gY3JlYXRlU2NoZW1hKCk7XG4gICAgfVxuICAgIHJldHVybiBzY2hlbWE7XG4gIH07XG59XG5mdW5jdGlvbiBqc29uU2NoZW1hKGpzb25TY2hlbWEyLCB7XG4gIHZhbGlkYXRlXG59ID0ge30pIHtcbiAgcmV0dXJuIHtcbiAgICBbc2NoZW1hU3ltYm9sXTogdHJ1ZSxcbiAgICBfdHlwZTogdm9pZCAwLFxuICAgIC8vIHNob3VsZCBuZXZlciBiZSB1c2VkIGRpcmVjdGx5XG4gICAgZ2V0IGpzb25TY2hlbWEoKSB7XG4gICAgICBpZiAodHlwZW9mIGpzb25TY2hlbWEyID09PSBcImZ1bmN0aW9uXCIpIHtcbiAgICAgICAganNvblNjaGVtYTIgPSBqc29uU2NoZW1hMigpO1xuICAgICAgfVxuICAgICAgcmV0dXJuIGpzb25TY2hlbWEyO1xuICAgIH0sXG4gICAgdmFsaWRhdGVcbiAgfTtcbn1cbmZ1bmN0aW9uIGlzU2NoZW1hKHZhbHVlKSB7XG4gIHJldHVybiB0eXBlb2YgdmFsdWUgPT09IFwib2JqZWN0XCIgJiYgdmFsdWUgIT09IG51bGwgJiYgc2NoZW1hU3ltYm9sIGluIHZhbHVlICYmIHZhbHVlW3NjaGVtYVN5bWJvbF0gPT09IHRydWUgJiYgXCJqc29uU2NoZW1hXCIgaW4gdmFsdWUgJiYgXCJ2YWxpZGF0ZVwiIGluIHZhbHVlO1xufVxuZnVuY3Rpb24gYXNTY2hlbWEoc2NoZW1hKSB7XG4gIHJldHVybiBzY2hlbWEgPT0gbnVsbCA/IGpzb25TY2hlbWEoeyBwcm9wZXJ0aWVzOiB7fSwgYWRkaXRpb25hbFByb3BlcnRpZXM6IGZhbHNlIH0pIDogaXNTY2hlbWEoc2NoZW1hKSA/IHNjaGVtYSA6IFwifnN0YW5kYXJkXCIgaW4gc2NoZW1hID8gc2NoZW1hW1wifnN0YW5kYXJkXCJdLnZlbmRvciA9PT0gXCJ6b2RcIiA/IHpvZFNjaGVtYShzY2hlbWEpIDogc3RhbmRhcmRTY2hlbWEoc2NoZW1hKSA6IHNjaGVtYSgpO1xufVxuZnVuY3Rpb24gc3RhbmRhcmRTY2hlbWEoc3RhbmRhcmRTY2hlbWEyKSB7XG4gIHJldHVybiBqc29uU2NoZW1hKFxuICAgICgpID0+IHN0YW5kYXJkU2NoZW1hMltcIn5zdGFuZGFyZFwiXS5qc29uU2NoZW1hLmlucHV0KHtcbiAgICAgIHRhcmdldDogXCJkcmFmdC0wN1wiXG4gICAgfSksXG4gICAge1xuICAgICAgdmFsaWRhdGU6IGFzeW5jICh2YWx1ZSkgPT4ge1xuICAgICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBzdGFuZGFyZFNjaGVtYTJbXCJ+c3RhbmRhcmRcIl0udmFsaWRhdGUodmFsdWUpO1xuICAgICAgICByZXR1cm4gXCJ2YWx1ZVwiIGluIHJlc3VsdCA/IHsgc3VjY2VzczogdHJ1ZSwgdmFsdWU6IHJlc3VsdC52YWx1ZSB9IDoge1xuICAgICAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxuICAgICAgICAgIGVycm9yOiBuZXcgVHlwZVZhbGlkYXRpb25FcnJvcih7XG4gICAgICAgICAgICB2YWx1ZSxcbiAgICAgICAgICAgIGNhdXNlOiByZXN1bHQuaXNzdWVzXG4gICAgICAgICAgfSlcbiAgICAgICAgfTtcbiAgICAgIH1cbiAgICB9XG4gICk7XG59XG5mdW5jdGlvbiB6b2QzU2NoZW1hKHpvZFNjaGVtYTIsIG9wdGlvbnMpIHtcbiAgdmFyIF9hMjtcbiAgY29uc3QgdXNlUmVmZXJlbmNlcyA9IChfYTIgPSBvcHRpb25zID09IG51bGwgPyB2b2lkIDAgOiBvcHRpb25zLnVzZVJlZmVyZW5jZXMpICE9IG51bGwgPyBfYTIgOiBmYWxzZTtcbiAgcmV0dXJuIGpzb25TY2hlbWEoXG4gICAgLy8gZGVmZXIganNvbiBzY2hlbWEgY3JlYXRpb24gdG8gYXZvaWQgdW5uZWNlc3NhcnkgY29tcHV0YXRpb24gd2hlbiBvbmx5IHZhbGlkYXRpb24gaXMgbmVlZGVkXG4gICAgKCkgPT4gem9kM1RvSnNvblNjaGVtYSh6b2RTY2hlbWEyLCB7XG4gICAgICAkcmVmU3RyYXRlZ3k6IHVzZVJlZmVyZW5jZXMgPyBcInJvb3RcIiA6IFwibm9uZVwiXG4gICAgfSksXG4gICAge1xuICAgICAgdmFsaWRhdGU6IGFzeW5jICh2YWx1ZSkgPT4ge1xuICAgICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCB6b2RTY2hlbWEyLnNhZmVQYXJzZUFzeW5jKHZhbHVlKTtcbiAgICAgICAgcmV0dXJuIHJlc3VsdC5zdWNjZXNzID8geyBzdWNjZXNzOiB0cnVlLCB2YWx1ZTogcmVzdWx0LmRhdGEgfSA6IHsgc3VjY2VzczogZmFsc2UsIGVycm9yOiByZXN1bHQuZXJyb3IgfTtcbiAgICAgIH1cbiAgICB9XG4gICk7XG59XG5mdW5jdGlvbiB6b2Q0U2NoZW1hKHpvZFNjaGVtYTIsIG9wdGlvbnMpIHtcbiAgdmFyIF9hMjtcbiAgY29uc3QgdXNlUmVmZXJlbmNlcyA9IChfYTIgPSBvcHRpb25zID09IG51bGwgPyB2b2lkIDAgOiBvcHRpb25zLnVzZVJlZmVyZW5jZXMpICE9IG51bGwgPyBfYTIgOiBmYWxzZTtcbiAgcmV0dXJuIGpzb25TY2hlbWEoXG4gICAgLy8gZGVmZXIganNvbiBzY2hlbWEgY3JlYXRpb24gdG8gYXZvaWQgdW5uZWNlc3NhcnkgY29tcHV0YXRpb24gd2hlbiBvbmx5IHZhbGlkYXRpb24gaXMgbmVlZGVkXG4gICAgKCkgPT4gYWRkQWRkaXRpb25hbFByb3BlcnRpZXNUb0pzb25TY2hlbWEoXG4gICAgICB6NC50b0pTT05TY2hlbWEoem9kU2NoZW1hMiwge1xuICAgICAgICB0YXJnZXQ6IFwiZHJhZnQtN1wiLFxuICAgICAgICBpbzogXCJpbnB1dFwiLFxuICAgICAgICByZXVzZWQ6IHVzZVJlZmVyZW5jZXMgPyBcInJlZlwiIDogXCJpbmxpbmVcIlxuICAgICAgfSlcbiAgICApLFxuICAgIHtcbiAgICAgIHZhbGlkYXRlOiBhc3luYyAodmFsdWUpID0+IHtcbiAgICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgejQuc2FmZVBhcnNlQXN5bmMoem9kU2NoZW1hMiwgdmFsdWUpO1xuICAgICAgICByZXR1cm4gcmVzdWx0LnN1Y2Nlc3MgPyB7IHN1Y2Nlc3M6IHRydWUsIHZhbHVlOiByZXN1bHQuZGF0YSB9IDogeyBzdWNjZXNzOiBmYWxzZSwgZXJyb3I6IHJlc3VsdC5lcnJvciB9O1xuICAgICAgfVxuICAgIH1cbiAgKTtcbn1cbmZ1bmN0aW9uIGlzWm9kNFNjaGVtYSh6b2RTY2hlbWEyKSB7XG4gIHJldHVybiBcIl96b2RcIiBpbiB6b2RTY2hlbWEyO1xufVxuZnVuY3Rpb24gem9kU2NoZW1hKHpvZFNjaGVtYTIsIG9wdGlvbnMpIHtcbiAgaWYgKGlzWm9kNFNjaGVtYSh6b2RTY2hlbWEyKSkge1xuICAgIHJldHVybiB6b2Q0U2NoZW1hKHpvZFNjaGVtYTIsIG9wdGlvbnMpO1xuICB9IGVsc2Uge1xuICAgIHJldHVybiB6b2QzU2NoZW1hKHpvZFNjaGVtYTIsIG9wdGlvbnMpO1xuICB9XG59XG5cbi8vIHNyYy92YWxpZGF0ZS10eXBlcy50c1xuYXN5bmMgZnVuY3Rpb24gdmFsaWRhdGVUeXBlcyh7XG4gIHZhbHVlLFxuICBzY2hlbWFcbn0pIHtcbiAgY29uc3QgcmVzdWx0ID0gYXdhaXQgc2FmZVZhbGlkYXRlVHlwZXMoeyB2YWx1ZSwgc2NoZW1hIH0pO1xuICBpZiAoIXJlc3VsdC5zdWNjZXNzKSB7XG4gICAgdGhyb3cgVHlwZVZhbGlkYXRpb25FcnJvcjIud3JhcCh7IHZhbHVlLCBjYXVzZTogcmVzdWx0LmVycm9yIH0pO1xuICB9XG4gIHJldHVybiByZXN1bHQudmFsdWU7XG59XG5hc3luYyBmdW5jdGlvbiBzYWZlVmFsaWRhdGVUeXBlcyh7XG4gIHZhbHVlLFxuICBzY2hlbWFcbn0pIHtcbiAgY29uc3QgYWN0dWFsU2NoZW1hID0gYXNTY2hlbWEoc2NoZW1hKTtcbiAgdHJ5IHtcbiAgICBpZiAoYWN0dWFsU2NoZW1hLnZhbGlkYXRlID09IG51bGwpIHtcbiAgICAgIHJldHVybiB7IHN1Y2Nlc3M6IHRydWUsIHZhbHVlLCByYXdWYWx1ZTogdmFsdWUgfTtcbiAgICB9XG4gICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgYWN0dWFsU2NoZW1hLnZhbGlkYXRlKHZhbHVlKTtcbiAgICBpZiAocmVzdWx0LnN1Y2Nlc3MpIHtcbiAgICAgIHJldHVybiB7IHN1Y2Nlc3M6IHRydWUsIHZhbHVlOiByZXN1bHQudmFsdWUsIHJhd1ZhbHVlOiB2YWx1ZSB9O1xuICAgIH1cbiAgICByZXR1cm4ge1xuICAgICAgc3VjY2VzczogZmFsc2UsXG4gICAgICBlcnJvcjogVHlwZVZhbGlkYXRpb25FcnJvcjIud3JhcCh7IHZhbHVlLCBjYXVzZTogcmVzdWx0LmVycm9yIH0pLFxuICAgICAgcmF3VmFsdWU6IHZhbHVlXG4gICAgfTtcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICByZXR1cm4ge1xuICAgICAgc3VjY2VzczogZmFsc2UsXG4gICAgICBlcnJvcjogVHlwZVZhbGlkYXRpb25FcnJvcjIud3JhcCh7IHZhbHVlLCBjYXVzZTogZXJyb3IgfSksXG4gICAgICByYXdWYWx1ZTogdmFsdWVcbiAgICB9O1xuICB9XG59XG5cbi8vIHNyYy9wYXJzZS1qc29uLnRzXG5hc3luYyBmdW5jdGlvbiBwYXJzZUpTT04oe1xuICB0ZXh0LFxuICBzY2hlbWFcbn0pIHtcbiAgdHJ5IHtcbiAgICBjb25zdCB2YWx1ZSA9IHNlY3VyZUpzb25QYXJzZSh0ZXh0KTtcbiAgICBpZiAoc2NoZW1hID09IG51bGwpIHtcbiAgICAgIHJldHVybiB2YWx1ZTtcbiAgICB9XG4gICAgcmV0dXJuIHZhbGlkYXRlVHlwZXMoeyB2YWx1ZSwgc2NoZW1hIH0pO1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGlmIChKU09OUGFyc2VFcnJvci5pc0luc3RhbmNlKGVycm9yKSB8fCBUeXBlVmFsaWRhdGlvbkVycm9yMy5pc0luc3RhbmNlKGVycm9yKSkge1xuICAgICAgdGhyb3cgZXJyb3I7XG4gICAgfVxuICAgIHRocm93IG5ldyBKU09OUGFyc2VFcnJvcih7IHRleHQsIGNhdXNlOiBlcnJvciB9KTtcbiAgfVxufVxuYXN5bmMgZnVuY3Rpb24gc2FmZVBhcnNlSlNPTih7XG4gIHRleHQsXG4gIHNjaGVtYVxufSkge1xuICB0cnkge1xuICAgIGNvbnN0IHZhbHVlID0gc2VjdXJlSnNvblBhcnNlKHRleHQpO1xuICAgIGlmIChzY2hlbWEgPT0gbnVsbCkge1xuICAgICAgcmV0dXJuIHsgc3VjY2VzczogdHJ1ZSwgdmFsdWUsIHJhd1ZhbHVlOiB2YWx1ZSB9O1xuICAgIH1cbiAgICByZXR1cm4gYXdhaXQgc2FmZVZhbGlkYXRlVHlwZXMoeyB2YWx1ZSwgc2NoZW1hIH0pO1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIHJldHVybiB7XG4gICAgICBzdWNjZXNzOiBmYWxzZSxcbiAgICAgIGVycm9yOiBKU09OUGFyc2VFcnJvci5pc0luc3RhbmNlKGVycm9yKSA/IGVycm9yIDogbmV3IEpTT05QYXJzZUVycm9yKHsgdGV4dCwgY2F1c2U6IGVycm9yIH0pLFxuICAgICAgcmF3VmFsdWU6IHZvaWQgMFxuICAgIH07XG4gIH1cbn1cbmZ1bmN0aW9uIGlzUGFyc2FibGVKc29uKGlucHV0KSB7XG4gIHRyeSB7XG4gICAgc2VjdXJlSnNvblBhcnNlKGlucHV0KTtcbiAgICByZXR1cm4gdHJ1ZTtcbiAgfSBjYXRjaCAoZSkge1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxufVxuXG4vLyBzcmMvcGFyc2UtanNvbi1ldmVudC1zdHJlYW0udHNcbmltcG9ydCB7XG4gIEV2ZW50U291cmNlUGFyc2VyU3RyZWFtXG59IGZyb20gXCJldmVudHNvdXJjZS1wYXJzZXIvc3RyZWFtXCI7XG5mdW5jdGlvbiBwYXJzZUpzb25FdmVudFN0cmVhbSh7XG4gIHN0cmVhbSxcbiAgc2NoZW1hXG59KSB7XG4gIHJldHVybiBzdHJlYW0ucGlwZVRocm91Z2gobmV3IFRleHREZWNvZGVyU3RyZWFtKCkpLnBpcGVUaHJvdWdoKG5ldyBFdmVudFNvdXJjZVBhcnNlclN0cmVhbSgpKS5waXBlVGhyb3VnaChcbiAgICBuZXcgVHJhbnNmb3JtU3RyZWFtKHtcbiAgICAgIGFzeW5jIHRyYW5zZm9ybSh7IGRhdGEgfSwgY29udHJvbGxlcikge1xuICAgICAgICBpZiAoZGF0YSA9PT0gXCJbRE9ORV1cIikge1xuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBjb250cm9sbGVyLmVucXVldWUoYXdhaXQgc2FmZVBhcnNlSlNPTih7IHRleHQ6IGRhdGEsIHNjaGVtYSB9KSk7XG4gICAgICB9XG4gICAgfSlcbiAgKTtcbn1cblxuLy8gc3JjL3BhcnNlLXByb3ZpZGVyLW9wdGlvbnMudHNcbmltcG9ydCB7IEludmFsaWRBcmd1bWVudEVycm9yIGFzIEludmFsaWRBcmd1bWVudEVycm9yMiB9IGZyb20gXCJAYWktc2RrL3Byb3ZpZGVyXCI7XG5hc3luYyBmdW5jdGlvbiBwYXJzZVByb3ZpZGVyT3B0aW9ucyh7XG4gIHByb3ZpZGVyLFxuICBwcm92aWRlck9wdGlvbnMsXG4gIHNjaGVtYVxufSkge1xuICBpZiAoKHByb3ZpZGVyT3B0aW9ucyA9PSBudWxsID8gdm9pZCAwIDogcHJvdmlkZXJPcHRpb25zW3Byb3ZpZGVyXSkgPT0gbnVsbCkge1xuICAgIHJldHVybiB2b2lkIDA7XG4gIH1cbiAgY29uc3QgcGFyc2VkUHJvdmlkZXJPcHRpb25zID0gYXdhaXQgc2FmZVZhbGlkYXRlVHlwZXMoe1xuICAgIHZhbHVlOiBwcm92aWRlck9wdGlvbnNbcHJvdmlkZXJdLFxuICAgIHNjaGVtYVxuICB9KTtcbiAgaWYgKCFwYXJzZWRQcm92aWRlck9wdGlvbnMuc3VjY2Vzcykge1xuICAgIHRocm93IG5ldyBJbnZhbGlkQXJndW1lbnRFcnJvcjIoe1xuICAgICAgYXJndW1lbnQ6IFwicHJvdmlkZXJPcHRpb25zXCIsXG4gICAgICBtZXNzYWdlOiBgaW52YWxpZCAke3Byb3ZpZGVyfSBwcm92aWRlciBvcHRpb25zYCxcbiAgICAgIGNhdXNlOiBwYXJzZWRQcm92aWRlck9wdGlvbnMuZXJyb3JcbiAgICB9KTtcbiAgfVxuICByZXR1cm4gcGFyc2VkUHJvdmlkZXJPcHRpb25zLnZhbHVlO1xufVxuXG4vLyBzcmMvcG9zdC10by1hcGkudHNcbmltcG9ydCB7IEFQSUNhbGxFcnJvciBhcyBBUElDYWxsRXJyb3IzIH0gZnJvbSBcIkBhaS1zZGsvcHJvdmlkZXJcIjtcbnZhciBnZXRPcmlnaW5hbEZldGNoMiA9ICgpID0+IGdsb2JhbFRoaXMuZmV0Y2g7XG52YXIgcG9zdEpzb25Ub0FwaSA9IGFzeW5jICh7XG4gIHVybCxcbiAgaGVhZGVycyxcbiAgYm9keSxcbiAgZmFpbGVkUmVzcG9uc2VIYW5kbGVyLFxuICBzdWNjZXNzZnVsUmVzcG9uc2VIYW5kbGVyLFxuICBhYm9ydFNpZ25hbCxcbiAgZmV0Y2g6IGZldGNoMlxufSkgPT4gcG9zdFRvQXBpKHtcbiAgdXJsLFxuICBoZWFkZXJzOiB7XG4gICAgXCJDb250ZW50LVR5cGVcIjogXCJhcHBsaWNhdGlvbi9qc29uXCIsXG4gICAgLi4uaGVhZGVyc1xuICB9LFxuICBib2R5OiB7XG4gICAgY29udGVudDogSlNPTi5zdHJpbmdpZnkoYm9keSksXG4gICAgdmFsdWVzOiBib2R5XG4gIH0sXG4gIGZhaWxlZFJlc3BvbnNlSGFuZGxlcixcbiAgc3VjY2Vzc2Z1bFJlc3BvbnNlSGFuZGxlcixcbiAgYWJvcnRTaWduYWwsXG4gIGZldGNoOiBmZXRjaDJcbn0pO1xudmFyIHBvc3RGb3JtRGF0YVRvQXBpID0gYXN5bmMgKHtcbiAgdXJsLFxuICBoZWFkZXJzLFxuICBmb3JtRGF0YSxcbiAgZmFpbGVkUmVzcG9uc2VIYW5kbGVyLFxuICBzdWNjZXNzZnVsUmVzcG9uc2VIYW5kbGVyLFxuICBhYm9ydFNpZ25hbCxcbiAgZmV0Y2g6IGZldGNoMlxufSkgPT4gcG9zdFRvQXBpKHtcbiAgdXJsLFxuICBoZWFkZXJzLFxuICBib2R5OiB7XG4gICAgY29udGVudDogZm9ybURhdGEsXG4gICAgdmFsdWVzOiBPYmplY3QuZnJvbUVudHJpZXMoZm9ybURhdGEuZW50cmllcygpKVxuICB9LFxuICBmYWlsZWRSZXNwb25zZUhhbmRsZXIsXG4gIHN1Y2Nlc3NmdWxSZXNwb25zZUhhbmRsZXIsXG4gIGFib3J0U2lnbmFsLFxuICBmZXRjaDogZmV0Y2gyXG59KTtcbnZhciBwb3N0VG9BcGkgPSBhc3luYyAoe1xuICB1cmwsXG4gIGhlYWRlcnMgPSB7fSxcbiAgYm9keSxcbiAgc3VjY2Vzc2Z1bFJlc3BvbnNlSGFuZGxlcixcbiAgZmFpbGVkUmVzcG9uc2VIYW5kbGVyLFxuICBhYm9ydFNpZ25hbCxcbiAgZmV0Y2g6IGZldGNoMiA9IGdldE9yaWdpbmFsRmV0Y2gyKClcbn0pID0+IHtcbiAgdHJ5IHtcbiAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGZldGNoMih1cmwsIHtcbiAgICAgIG1ldGhvZDogXCJQT1NUXCIsXG4gICAgICBoZWFkZXJzOiB3aXRoVXNlckFnZW50U3VmZml4KFxuICAgICAgICBoZWFkZXJzLFxuICAgICAgICBgYWktc2RrL3Byb3ZpZGVyLXV0aWxzLyR7VkVSU0lPTn1gLFxuICAgICAgICBnZXRSdW50aW1lRW52aXJvbm1lbnRVc2VyQWdlbnQoKVxuICAgICAgKSxcbiAgICAgIGJvZHk6IGJvZHkuY29udGVudCxcbiAgICAgIHNpZ25hbDogYWJvcnRTaWduYWxcbiAgICB9KTtcbiAgICBjb25zdCByZXNwb25zZUhlYWRlcnMgPSBleHRyYWN0UmVzcG9uc2VIZWFkZXJzKHJlc3BvbnNlKTtcbiAgICBpZiAoIXJlc3BvbnNlLm9rKSB7XG4gICAgICBsZXQgZXJyb3JJbmZvcm1hdGlvbjtcbiAgICAgIHRyeSB7XG4gICAgICAgIGVycm9ySW5mb3JtYXRpb24gPSBhd2FpdCBmYWlsZWRSZXNwb25zZUhhbmRsZXIoe1xuICAgICAgICAgIHJlc3BvbnNlLFxuICAgICAgICAgIHVybCxcbiAgICAgICAgICByZXF1ZXN0Qm9keVZhbHVlczogYm9keS52YWx1ZXNcbiAgICAgICAgfSk7XG4gICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICBpZiAoaXNBYm9ydEVycm9yKGVycm9yKSB8fCBBUElDYWxsRXJyb3IzLmlzSW5zdGFuY2UoZXJyb3IpKSB7XG4gICAgICAgICAgdGhyb3cgZXJyb3I7XG4gICAgICAgIH1cbiAgICAgICAgdGhyb3cgbmV3IEFQSUNhbGxFcnJvcjMoe1xuICAgICAgICAgIG1lc3NhZ2U6IFwiRmFpbGVkIHRvIHByb2Nlc3MgZXJyb3IgcmVzcG9uc2VcIixcbiAgICAgICAgICBjYXVzZTogZXJyb3IsXG4gICAgICAgICAgc3RhdHVzQ29kZTogcmVzcG9uc2Uuc3RhdHVzLFxuICAgICAgICAgIHVybCxcbiAgICAgICAgICByZXNwb25zZUhlYWRlcnMsXG4gICAgICAgICAgcmVxdWVzdEJvZHlWYWx1ZXM6IGJvZHkudmFsdWVzXG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgICAgdGhyb3cgZXJyb3JJbmZvcm1hdGlvbi52YWx1ZTtcbiAgICB9XG4gICAgdHJ5IHtcbiAgICAgIHJldHVybiBhd2FpdCBzdWNjZXNzZnVsUmVzcG9uc2VIYW5kbGVyKHtcbiAgICAgICAgcmVzcG9uc2UsXG4gICAgICAgIHVybCxcbiAgICAgICAgcmVxdWVzdEJvZHlWYWx1ZXM6IGJvZHkudmFsdWVzXG4gICAgICB9KTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgaWYgKGVycm9yIGluc3RhbmNlb2YgRXJyb3IpIHtcbiAgICAgICAgaWYgKGlzQWJvcnRFcnJvcihlcnJvcikgfHwgQVBJQ2FsbEVycm9yMy5pc0luc3RhbmNlKGVycm9yKSkge1xuICAgICAgICAgIHRocm93IGVycm9yO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICB0aHJvdyBuZXcgQVBJQ2FsbEVycm9yMyh7XG4gICAgICAgIG1lc3NhZ2U6IFwiRmFpbGVkIHRvIHByb2Nlc3Mgc3VjY2Vzc2Z1bCByZXNwb25zZVwiLFxuICAgICAgICBjYXVzZTogZXJyb3IsXG4gICAgICAgIHN0YXR1c0NvZGU6IHJlc3BvbnNlLnN0YXR1cyxcbiAgICAgICAgdXJsLFxuICAgICAgICByZXNwb25zZUhlYWRlcnMsXG4gICAgICAgIHJlcXVlc3RCb2R5VmFsdWVzOiBib2R5LnZhbHVlc1xuICAgICAgfSk7XG4gICAgfVxuICB9IGNhdGNoIChlcnJvcikge1xuICAgIHRocm93IGhhbmRsZUZldGNoRXJyb3IoeyBlcnJvciwgdXJsLCByZXF1ZXN0Qm9keVZhbHVlczogYm9keS52YWx1ZXMgfSk7XG4gIH1cbn07XG5cbi8vIHNyYy90eXBlcy90b29sLnRzXG5mdW5jdGlvbiB0b29sKHRvb2wyKSB7XG4gIHJldHVybiB0b29sMjtcbn1cbmZ1bmN0aW9uIGR5bmFtaWNUb29sKHRvb2wyKSB7XG4gIHJldHVybiB7IC4uLnRvb2wyLCB0eXBlOiBcImR5bmFtaWNcIiB9O1xufVxuXG4vLyBzcmMvcHJvdmlkZXItdG9vbC1mYWN0b3J5LnRzXG5mdW5jdGlvbiBjcmVhdGVQcm92aWRlclRvb2xGYWN0b3J5KHtcbiAgaWQsXG4gIGlucHV0U2NoZW1hXG59KSB7XG4gIHJldHVybiAoe1xuICAgIGV4ZWN1dGUsXG4gICAgb3V0cHV0U2NoZW1hLFxuICAgIG5lZWRzQXBwcm92YWwsXG4gICAgdG9Nb2RlbE91dHB1dCxcbiAgICBvbklucHV0U3RhcnQsXG4gICAgb25JbnB1dERlbHRhLFxuICAgIG9uSW5wdXRBdmFpbGFibGUsXG4gICAgLi4uYXJnc1xuICB9KSA9PiB0b29sKHtcbiAgICB0eXBlOiBcInByb3ZpZGVyXCIsXG4gICAgaWQsXG4gICAgYXJncyxcbiAgICBpbnB1dFNjaGVtYSxcbiAgICBvdXRwdXRTY2hlbWEsXG4gICAgZXhlY3V0ZSxcbiAgICBuZWVkc0FwcHJvdmFsLFxuICAgIHRvTW9kZWxPdXRwdXQsXG4gICAgb25JbnB1dFN0YXJ0LFxuICAgIG9uSW5wdXREZWx0YSxcbiAgICBvbklucHV0QXZhaWxhYmxlXG4gIH0pO1xufVxuZnVuY3Rpb24gY3JlYXRlUHJvdmlkZXJUb29sRmFjdG9yeVdpdGhPdXRwdXRTY2hlbWEoe1xuICBpZCxcbiAgaW5wdXRTY2hlbWEsXG4gIG91dHB1dFNjaGVtYSxcbiAgc3VwcG9ydHNEZWZlcnJlZFJlc3VsdHNcbn0pIHtcbiAgcmV0dXJuICh7XG4gICAgZXhlY3V0ZSxcbiAgICBuZWVkc0FwcHJvdmFsLFxuICAgIHRvTW9kZWxPdXRwdXQsXG4gICAgb25JbnB1dFN0YXJ0LFxuICAgIG9uSW5wdXREZWx0YSxcbiAgICBvbklucHV0QXZhaWxhYmxlLFxuICAgIC4uLmFyZ3NcbiAgfSkgPT4gdG9vbCh7XG4gICAgdHlwZTogXCJwcm92aWRlclwiLFxuICAgIGlkLFxuICAgIGFyZ3MsXG4gICAgaW5wdXRTY2hlbWEsXG4gICAgb3V0cHV0U2NoZW1hLFxuICAgIGV4ZWN1dGUsXG4gICAgbmVlZHNBcHByb3ZhbCxcbiAgICB0b01vZGVsT3V0cHV0LFxuICAgIG9uSW5wdXRTdGFydCxcbiAgICBvbklucHV0RGVsdGEsXG4gICAgb25JbnB1dEF2YWlsYWJsZSxcbiAgICBzdXBwb3J0c0RlZmVycmVkUmVzdWx0c1xuICB9KTtcbn1cblxuLy8gc3JjL3JlbW92ZS11bmRlZmluZWQtZW50cmllcy50c1xuZnVuY3Rpb24gcmVtb3ZlVW5kZWZpbmVkRW50cmllcyhyZWNvcmQpIHtcbiAgcmV0dXJuIE9iamVjdC5mcm9tRW50cmllcyhcbiAgICBPYmplY3QuZW50cmllcyhyZWNvcmQpLmZpbHRlcigoW19rZXksIHZhbHVlXSkgPT4gdmFsdWUgIT0gbnVsbClcbiAgKTtcbn1cblxuLy8gc3JjL3Jlc29sdmUudHNcbmFzeW5jIGZ1bmN0aW9uIHJlc29sdmUodmFsdWUpIHtcbiAgaWYgKHR5cGVvZiB2YWx1ZSA9PT0gXCJmdW5jdGlvblwiKSB7XG4gICAgdmFsdWUgPSB2YWx1ZSgpO1xuICB9XG4gIHJldHVybiBQcm9taXNlLnJlc29sdmUodmFsdWUpO1xufVxuXG4vLyBzcmMvcmVzcG9uc2UtaGFuZGxlci50c1xuaW1wb3J0IHsgQVBJQ2FsbEVycm9yIGFzIEFQSUNhbGxFcnJvcjQsIEVtcHR5UmVzcG9uc2VCb2R5RXJyb3IgfSBmcm9tIFwiQGFpLXNkay9wcm92aWRlclwiO1xudmFyIGNyZWF0ZUpzb25FcnJvclJlc3BvbnNlSGFuZGxlciA9ICh7XG4gIGVycm9yU2NoZW1hLFxuICBlcnJvclRvTWVzc2FnZSxcbiAgaXNSZXRyeWFibGVcbn0pID0+IGFzeW5jICh7IHJlc3BvbnNlLCB1cmwsIHJlcXVlc3RCb2R5VmFsdWVzIH0pID0+IHtcbiAgY29uc3QgcmVzcG9uc2VCb2R5ID0gYXdhaXQgcmVzcG9uc2UudGV4dCgpO1xuICBjb25zdCByZXNwb25zZUhlYWRlcnMgPSBleHRyYWN0UmVzcG9uc2VIZWFkZXJzKHJlc3BvbnNlKTtcbiAgaWYgKHJlc3BvbnNlQm9keS50cmltKCkgPT09IFwiXCIpIHtcbiAgICByZXR1cm4ge1xuICAgICAgcmVzcG9uc2VIZWFkZXJzLFxuICAgICAgdmFsdWU6IG5ldyBBUElDYWxsRXJyb3I0KHtcbiAgICAgICAgbWVzc2FnZTogcmVzcG9uc2Uuc3RhdHVzVGV4dCxcbiAgICAgICAgdXJsLFxuICAgICAgICByZXF1ZXN0Qm9keVZhbHVlcyxcbiAgICAgICAgc3RhdHVzQ29kZTogcmVzcG9uc2Uuc3RhdHVzLFxuICAgICAgICByZXNwb25zZUhlYWRlcnMsXG4gICAgICAgIHJlc3BvbnNlQm9keSxcbiAgICAgICAgaXNSZXRyeWFibGU6IGlzUmV0cnlhYmxlID09IG51bGwgPyB2b2lkIDAgOiBpc1JldHJ5YWJsZShyZXNwb25zZSlcbiAgICAgIH0pXG4gICAgfTtcbiAgfVxuICB0cnkge1xuICAgIGNvbnN0IHBhcnNlZEVycm9yID0gYXdhaXQgcGFyc2VKU09OKHtcbiAgICAgIHRleHQ6IHJlc3BvbnNlQm9keSxcbiAgICAgIHNjaGVtYTogZXJyb3JTY2hlbWFcbiAgICB9KTtcbiAgICByZXR1cm4ge1xuICAgICAgcmVzcG9uc2VIZWFkZXJzLFxuICAgICAgdmFsdWU6IG5ldyBBUElDYWxsRXJyb3I0KHtcbiAgICAgICAgbWVzc2FnZTogZXJyb3JUb01lc3NhZ2UocGFyc2VkRXJyb3IpLFxuICAgICAgICB1cmwsXG4gICAgICAgIHJlcXVlc3RCb2R5VmFsdWVzLFxuICAgICAgICBzdGF0dXNDb2RlOiByZXNwb25zZS5zdGF0dXMsXG4gICAgICAgIHJlc3BvbnNlSGVhZGVycyxcbiAgICAgICAgcmVzcG9uc2VCb2R5LFxuICAgICAgICBkYXRhOiBwYXJzZWRFcnJvcixcbiAgICAgICAgaXNSZXRyeWFibGU6IGlzUmV0cnlhYmxlID09IG51bGwgPyB2b2lkIDAgOiBpc1JldHJ5YWJsZShyZXNwb25zZSwgcGFyc2VkRXJyb3IpXG4gICAgICB9KVxuICAgIH07XG4gIH0gY2F0Y2ggKHBhcnNlRXJyb3IpIHtcbiAgICByZXR1cm4ge1xuICAgICAgcmVzcG9uc2VIZWFkZXJzLFxuICAgICAgdmFsdWU6IG5ldyBBUElDYWxsRXJyb3I0KHtcbiAgICAgICAgbWVzc2FnZTogcmVzcG9uc2Uuc3RhdHVzVGV4dCxcbiAgICAgICAgdXJsLFxuICAgICAgICByZXF1ZXN0Qm9keVZhbHVlcyxcbiAgICAgICAgc3RhdHVzQ29kZTogcmVzcG9uc2Uuc3RhdHVzLFxuICAgICAgICByZXNwb25zZUhlYWRlcnMsXG4gICAgICAgIHJlc3BvbnNlQm9keSxcbiAgICAgICAgaXNSZXRyeWFibGU6IGlzUmV0cnlhYmxlID09IG51bGwgPyB2b2lkIDAgOiBpc1JldHJ5YWJsZShyZXNwb25zZSlcbiAgICAgIH0pXG4gICAgfTtcbiAgfVxufTtcbnZhciBjcmVhdGVFdmVudFNvdXJjZVJlc3BvbnNlSGFuZGxlciA9IChjaHVua1NjaGVtYSkgPT4gYXN5bmMgKHsgcmVzcG9uc2UgfSkgPT4ge1xuICBjb25zdCByZXNwb25zZUhlYWRlcnMgPSBleHRyYWN0UmVzcG9uc2VIZWFkZXJzKHJlc3BvbnNlKTtcbiAgaWYgKHJlc3BvbnNlLmJvZHkgPT0gbnVsbCkge1xuICAgIHRocm93IG5ldyBFbXB0eVJlc3BvbnNlQm9keUVycm9yKHt9KTtcbiAgfVxuICByZXR1cm4ge1xuICAgIHJlc3BvbnNlSGVhZGVycyxcbiAgICB2YWx1ZTogcGFyc2VKc29uRXZlbnRTdHJlYW0oe1xuICAgICAgc3RyZWFtOiByZXNwb25zZS5ib2R5LFxuICAgICAgc2NoZW1hOiBjaHVua1NjaGVtYVxuICAgIH0pXG4gIH07XG59O1xudmFyIGNyZWF0ZUpzb25SZXNwb25zZUhhbmRsZXIgPSAocmVzcG9uc2VTY2hlbWEpID0+IGFzeW5jICh7IHJlc3BvbnNlLCB1cmwsIHJlcXVlc3RCb2R5VmFsdWVzIH0pID0+IHtcbiAgY29uc3QgcmVzcG9uc2VCb2R5ID0gYXdhaXQgcmVzcG9uc2UudGV4dCgpO1xuICBjb25zdCBwYXJzZWRSZXN1bHQgPSBhd2FpdCBzYWZlUGFyc2VKU09OKHtcbiAgICB0ZXh0OiByZXNwb25zZUJvZHksXG4gICAgc2NoZW1hOiByZXNwb25zZVNjaGVtYVxuICB9KTtcbiAgY29uc3QgcmVzcG9uc2VIZWFkZXJzID0gZXh0cmFjdFJlc3BvbnNlSGVhZGVycyhyZXNwb25zZSk7XG4gIGlmICghcGFyc2VkUmVzdWx0LnN1Y2Nlc3MpIHtcbiAgICB0aHJvdyBuZXcgQVBJQ2FsbEVycm9yNCh7XG4gICAgICBtZXNzYWdlOiBcIkludmFsaWQgSlNPTiByZXNwb25zZVwiLFxuICAgICAgY2F1c2U6IHBhcnNlZFJlc3VsdC5lcnJvcixcbiAgICAgIHN0YXR1c0NvZGU6IHJlc3BvbnNlLnN0YXR1cyxcbiAgICAgIHJlc3BvbnNlSGVhZGVycyxcbiAgICAgIHJlc3BvbnNlQm9keSxcbiAgICAgIHVybCxcbiAgICAgIHJlcXVlc3RCb2R5VmFsdWVzXG4gICAgfSk7XG4gIH1cbiAgcmV0dXJuIHtcbiAgICByZXNwb25zZUhlYWRlcnMsXG4gICAgdmFsdWU6IHBhcnNlZFJlc3VsdC52YWx1ZSxcbiAgICByYXdWYWx1ZTogcGFyc2VkUmVzdWx0LnJhd1ZhbHVlXG4gIH07XG59O1xudmFyIGNyZWF0ZUJpbmFyeVJlc3BvbnNlSGFuZGxlciA9ICgpID0+IGFzeW5jICh7IHJlc3BvbnNlLCB1cmwsIHJlcXVlc3RCb2R5VmFsdWVzIH0pID0+IHtcbiAgY29uc3QgcmVzcG9uc2VIZWFkZXJzID0gZXh0cmFjdFJlc3BvbnNlSGVhZGVycyhyZXNwb25zZSk7XG4gIGlmICghcmVzcG9uc2UuYm9keSkge1xuICAgIHRocm93IG5ldyBBUElDYWxsRXJyb3I0KHtcbiAgICAgIG1lc3NhZ2U6IFwiUmVzcG9uc2UgYm9keSBpcyBlbXB0eVwiLFxuICAgICAgdXJsLFxuICAgICAgcmVxdWVzdEJvZHlWYWx1ZXMsXG4gICAgICBzdGF0dXNDb2RlOiByZXNwb25zZS5zdGF0dXMsXG4gICAgICByZXNwb25zZUhlYWRlcnMsXG4gICAgICByZXNwb25zZUJvZHk6IHZvaWQgMFxuICAgIH0pO1xuICB9XG4gIHRyeSB7XG4gICAgY29uc3QgYnVmZmVyID0gYXdhaXQgcmVzcG9uc2UuYXJyYXlCdWZmZXIoKTtcbiAgICByZXR1cm4ge1xuICAgICAgcmVzcG9uc2VIZWFkZXJzLFxuICAgICAgdmFsdWU6IG5ldyBVaW50OEFycmF5KGJ1ZmZlcilcbiAgICB9O1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIHRocm93IG5ldyBBUElDYWxsRXJyb3I0KHtcbiAgICAgIG1lc3NhZ2U6IFwiRmFpbGVkIHRvIHJlYWQgcmVzcG9uc2UgYXMgYXJyYXkgYnVmZmVyXCIsXG4gICAgICB1cmwsXG4gICAgICByZXF1ZXN0Qm9keVZhbHVlcyxcbiAgICAgIHN0YXR1c0NvZGU6IHJlc3BvbnNlLnN0YXR1cyxcbiAgICAgIHJlc3BvbnNlSGVhZGVycyxcbiAgICAgIHJlc3BvbnNlQm9keTogdm9pZCAwLFxuICAgICAgY2F1c2U6IGVycm9yXG4gICAgfSk7XG4gIH1cbn07XG52YXIgY3JlYXRlU3RhdHVzQ29kZUVycm9yUmVzcG9uc2VIYW5kbGVyID0gKCkgPT4gYXN5bmMgKHsgcmVzcG9uc2UsIHVybCwgcmVxdWVzdEJvZHlWYWx1ZXMgfSkgPT4ge1xuICBjb25zdCByZXNwb25zZUhlYWRlcnMgPSBleHRyYWN0UmVzcG9uc2VIZWFkZXJzKHJlc3BvbnNlKTtcbiAgY29uc3QgcmVzcG9uc2VCb2R5ID0gYXdhaXQgcmVzcG9uc2UudGV4dCgpO1xuICByZXR1cm4ge1xuICAgIHJlc3BvbnNlSGVhZGVycyxcbiAgICB2YWx1ZTogbmV3IEFQSUNhbGxFcnJvcjQoe1xuICAgICAgbWVzc2FnZTogcmVzcG9uc2Uuc3RhdHVzVGV4dCxcbiAgICAgIHVybCxcbiAgICAgIHJlcXVlc3RCb2R5VmFsdWVzLFxuICAgICAgc3RhdHVzQ29kZTogcmVzcG9uc2Uuc3RhdHVzLFxuICAgICAgcmVzcG9uc2VIZWFkZXJzLFxuICAgICAgcmVzcG9uc2VCb2R5XG4gICAgfSlcbiAgfTtcbn07XG5cbi8vIHNyYy93aXRob3V0LXRyYWlsaW5nLXNsYXNoLnRzXG5mdW5jdGlvbiB3aXRob3V0VHJhaWxpbmdTbGFzaCh1cmwpIHtcbiAgcmV0dXJuIHVybCA9PSBudWxsID8gdm9pZCAwIDogdXJsLnJlcGxhY2UoL1xcLyQvLCBcIlwiKTtcbn1cblxuLy8gc3JjL2lzLWFzeW5jLWl0ZXJhYmxlLnRzXG5mdW5jdGlvbiBpc0FzeW5jSXRlcmFibGUob2JqKSB7XG4gIHJldHVybiBvYmogIT0gbnVsbCAmJiB0eXBlb2Ygb2JqW1N5bWJvbC5hc3luY0l0ZXJhdG9yXSA9PT0gXCJmdW5jdGlvblwiO1xufVxuXG4vLyBzcmMvdHlwZXMvZXhlY3V0ZS10b29sLnRzXG5hc3luYyBmdW5jdGlvbiogZXhlY3V0ZVRvb2woe1xuICBleGVjdXRlLFxuICBpbnB1dCxcbiAgb3B0aW9uc1xufSkge1xuICBjb25zdCByZXN1bHQgPSBleGVjdXRlKGlucHV0LCBvcHRpb25zKTtcbiAgaWYgKGlzQXN5bmNJdGVyYWJsZShyZXN1bHQpKSB7XG4gICAgbGV0IGxhc3RPdXRwdXQ7XG4gICAgZm9yIGF3YWl0IChjb25zdCBvdXRwdXQgb2YgcmVzdWx0KSB7XG4gICAgICBsYXN0T3V0cHV0ID0gb3V0cHV0O1xuICAgICAgeWllbGQgeyB0eXBlOiBcInByZWxpbWluYXJ5XCIsIG91dHB1dCB9O1xuICAgIH1cbiAgICB5aWVsZCB7IHR5cGU6IFwiZmluYWxcIiwgb3V0cHV0OiBsYXN0T3V0cHV0IH07XG4gIH0gZWxzZSB7XG4gICAgeWllbGQgeyB0eXBlOiBcImZpbmFsXCIsIG91dHB1dDogYXdhaXQgcmVzdWx0IH07XG4gIH1cbn1cblxuLy8gc3JjL2luZGV4LnRzXG5leHBvcnQgKiBmcm9tIFwiQHN0YW5kYXJkLXNjaGVtYS9zcGVjXCI7XG5pbXBvcnQge1xuICBFdmVudFNvdXJjZVBhcnNlclN0cmVhbSBhcyBFdmVudFNvdXJjZVBhcnNlclN0cmVhbTJcbn0gZnJvbSBcImV2ZW50c291cmNlLXBhcnNlci9zdHJlYW1cIjtcbmV4cG9ydCB7XG4gIERlbGF5ZWRQcm9taXNlLFxuICBEb3dubG9hZEVycm9yLFxuICBFdmVudFNvdXJjZVBhcnNlclN0cmVhbTIgYXMgRXZlbnRTb3VyY2VQYXJzZXJTdHJlYW0sXG4gIFZFUlNJT04sXG4gIGFzU2NoZW1hLFxuICBjb21iaW5lSGVhZGVycyxcbiAgY29udmVydEFzeW5jSXRlcmF0b3JUb1JlYWRhYmxlU3RyZWFtLFxuICBjb252ZXJ0QmFzZTY0VG9VaW50OEFycmF5LFxuICBjb252ZXJ0SW1hZ2VNb2RlbEZpbGVUb0RhdGFVcmksXG4gIGNvbnZlcnRUb0Jhc2U2NCxcbiAgY29udmVydFRvRm9ybURhdGEsXG4gIGNvbnZlcnRVaW50OEFycmF5VG9CYXNlNjQsXG4gIGNyZWF0ZUJpbmFyeVJlc3BvbnNlSGFuZGxlcixcbiAgY3JlYXRlRXZlbnRTb3VyY2VSZXNwb25zZUhhbmRsZXIsXG4gIGNyZWF0ZUlkR2VuZXJhdG9yLFxuICBjcmVhdGVKc29uRXJyb3JSZXNwb25zZUhhbmRsZXIsXG4gIGNyZWF0ZUpzb25SZXNwb25zZUhhbmRsZXIsXG4gIGNyZWF0ZVByb3ZpZGVyVG9vbEZhY3RvcnksXG4gIGNyZWF0ZVByb3ZpZGVyVG9vbEZhY3RvcnlXaXRoT3V0cHV0U2NoZW1hLFxuICBjcmVhdGVTdGF0dXNDb2RlRXJyb3JSZXNwb25zZUhhbmRsZXIsXG4gIGNyZWF0ZVRvb2xOYW1lTWFwcGluZyxcbiAgZGVsYXksXG4gIGRvd25sb2FkQmxvYixcbiAgZHluYW1pY1Rvb2wsXG4gIGV4ZWN1dGVUb29sLFxuICBleHRyYWN0UmVzcG9uc2VIZWFkZXJzLFxuICBnZW5lcmF0ZUlkLFxuICBnZXRFcnJvck1lc3NhZ2UsXG4gIGdldEZyb21BcGksXG4gIGdldFJ1bnRpbWVFbnZpcm9ubWVudFVzZXJBZ2VudCxcbiAgaW5qZWN0SnNvbkluc3RydWN0aW9uSW50b01lc3NhZ2VzLFxuICBpc0Fib3J0RXJyb3IsXG4gIGlzTm9uTnVsbGFibGUsXG4gIGlzUGFyc2FibGVKc29uLFxuICBpc1VybFN1cHBvcnRlZCxcbiAganNvblNjaGVtYSxcbiAgbGF6eVNjaGVtYSxcbiAgbG9hZEFwaUtleSxcbiAgbG9hZE9wdGlvbmFsU2V0dGluZyxcbiAgbG9hZFNldHRpbmcsXG4gIG1lZGlhVHlwZVRvRXh0ZW5zaW9uLFxuICBub3JtYWxpemVIZWFkZXJzLFxuICBwYXJzZUpTT04sXG4gIHBhcnNlSnNvbkV2ZW50U3RyZWFtLFxuICBwYXJzZVByb3ZpZGVyT3B0aW9ucyxcbiAgcG9zdEZvcm1EYXRhVG9BcGksXG4gIHBvc3RKc29uVG9BcGksXG4gIHBvc3RUb0FwaSxcbiAgcmVtb3ZlVW5kZWZpbmVkRW50cmllcyxcbiAgcmVzb2x2ZSxcbiAgc2FmZVBhcnNlSlNPTixcbiAgc2FmZVZhbGlkYXRlVHlwZXMsXG4gIHRvb2wsXG4gIHZhbGlkYXRlVHlwZXMsXG4gIHdpdGhVc2VyQWdlbnRTdWZmaXgsXG4gIHdpdGhvdXRUcmFpbGluZ1NsYXNoLFxuICB6b2RTY2hlbWFcbn07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1pbmRleC5tanMubWFwIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@ai-sdk/provider-utils/dist/index.mjs\n");

/***/ }),

/***/ "(rsc)/./node_modules/@ai-sdk/provider/dist/index.mjs":
/*!******************************************************!*\
  !*** ./node_modules/@ai-sdk/provider/dist/index.mjs ***!
  \******************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   AISDKError: () => (/* binding */ AISDKError),\n/* harmony export */   APICallError: () => (/* binding */ APICallError),\n/* harmony export */   EmptyResponseBodyError: () => (/* binding */ EmptyResponseBodyError),\n/* harmony export */   InvalidArgumentError: () => (/* binding */ InvalidArgumentError),\n/* harmony export */   InvalidPromptError: () => (/* binding */ InvalidPromptError),\n/* harmony export */   InvalidResponseDataError: () => (/* binding */ InvalidResponseDataError),\n/* harmony export */   JSONParseError: () => (/* binding */ JSONParseError),\n/* harmony export */   LoadAPIKeyError: () => (/* binding */ LoadAPIKeyError),\n/* harmony export */   LoadSettingError: () => (/* binding */ LoadSettingError),\n/* harmony export */   NoContentGeneratedError: () => (/* binding */ NoContentGeneratedError),\n/* harmony export */   NoSuchModelError: () => (/* binding */ NoSuchModelError),\n/* harmony export */   TooManyEmbeddingValuesForCallError: () => (/* binding */ TooManyEmbeddingValuesForCallError),\n/* harmony export */   TypeValidationError: () => (/* binding */ TypeValidationError),\n/* harmony export */   UnsupportedFunctionalityError: () => (/* binding */ UnsupportedFunctionalityError),\n/* harmony export */   getErrorMessage: () => (/* binding */ getErrorMessage),\n/* harmony export */   isJSONArray: () => (/* binding */ isJSONArray),\n/* harmony export */   isJSONObject: () => (/* binding */ isJSONObject),\n/* harmony export */   isJSONValue: () => (/* binding */ isJSONValue)\n/* harmony export */ });\n// src/errors/ai-sdk-error.ts\nvar marker = \"vercel.ai.error\";\nvar symbol = Symbol.for(marker);\nvar _a, _b;\nvar AISDKError = class _AISDKError extends (_b = Error, _a = symbol, _b) {\n  /**\n   * Creates an AI SDK Error.\n   *\n   * @param {Object} params - The parameters for creating the error.\n   * @param {string} params.name - The name of the error.\n   * @param {string} params.message - The error message.\n   * @param {unknown} [params.cause] - The underlying cause of the error.\n   */\n  constructor({\n    name: name14,\n    message,\n    cause\n  }) {\n    super(message);\n    this[_a] = true;\n    this.name = name14;\n    this.cause = cause;\n  }\n  /**\n   * Checks if the given error is an AI SDK Error.\n   * @param {unknown} error - The error to check.\n   * @returns {boolean} True if the error is an AI SDK Error, false otherwise.\n   */\n  static isInstance(error) {\n    return _AISDKError.hasMarker(error, marker);\n  }\n  static hasMarker(error, marker15) {\n    const markerSymbol = Symbol.for(marker15);\n    return error != null && typeof error === \"object\" && markerSymbol in error && typeof error[markerSymbol] === \"boolean\" && error[markerSymbol] === true;\n  }\n};\n\n// src/errors/api-call-error.ts\nvar name = \"AI_APICallError\";\nvar marker2 = `vercel.ai.error.${name}`;\nvar symbol2 = Symbol.for(marker2);\nvar _a2, _b2;\nvar APICallError = class extends (_b2 = AISDKError, _a2 = symbol2, _b2) {\n  constructor({\n    message,\n    url,\n    requestBodyValues,\n    statusCode,\n    responseHeaders,\n    responseBody,\n    cause,\n    isRetryable = statusCode != null && (statusCode === 408 || // request timeout\n    statusCode === 409 || // conflict\n    statusCode === 429 || // too many requests\n    statusCode >= 500),\n    // server error\n    data\n  }) {\n    super({ name, message, cause });\n    this[_a2] = true;\n    this.url = url;\n    this.requestBodyValues = requestBodyValues;\n    this.statusCode = statusCode;\n    this.responseHeaders = responseHeaders;\n    this.responseBody = responseBody;\n    this.isRetryable = isRetryable;\n    this.data = data;\n  }\n  static isInstance(error) {\n    return AISDKError.hasMarker(error, marker2);\n  }\n};\n\n// src/errors/empty-response-body-error.ts\nvar name2 = \"AI_EmptyResponseBodyError\";\nvar marker3 = `vercel.ai.error.${name2}`;\nvar symbol3 = Symbol.for(marker3);\nvar _a3, _b3;\nvar EmptyResponseBodyError = class extends (_b3 = AISDKError, _a3 = symbol3, _b3) {\n  // used in isInstance\n  constructor({ message = \"Empty response body\" } = {}) {\n    super({ name: name2, message });\n    this[_a3] = true;\n  }\n  static isInstance(error) {\n    return AISDKError.hasMarker(error, marker3);\n  }\n};\n\n// src/errors/get-error-message.ts\nfunction getErrorMessage(error) {\n  if (error == null) {\n    return \"unknown error\";\n  }\n  if (typeof error === \"string\") {\n    return error;\n  }\n  if (error instanceof Error) {\n    return error.message;\n  }\n  return JSON.stringify(error);\n}\n\n// src/errors/invalid-argument-error.ts\nvar name3 = \"AI_InvalidArgumentError\";\nvar marker4 = `vercel.ai.error.${name3}`;\nvar symbol4 = Symbol.for(marker4);\nvar _a4, _b4;\nvar InvalidArgumentError = class extends (_b4 = AISDKError, _a4 = symbol4, _b4) {\n  constructor({\n    message,\n    cause,\n    argument\n  }) {\n    super({ name: name3, message, cause });\n    this[_a4] = true;\n    this.argument = argument;\n  }\n  static isInstance(error) {\n    return AISDKError.hasMarker(error, marker4);\n  }\n};\n\n// src/errors/invalid-prompt-error.ts\nvar name4 = \"AI_InvalidPromptError\";\nvar marker5 = `vercel.ai.error.${name4}`;\nvar symbol5 = Symbol.for(marker5);\nvar _a5, _b5;\nvar InvalidPromptError = class extends (_b5 = AISDKError, _a5 = symbol5, _b5) {\n  constructor({\n    prompt,\n    message,\n    cause\n  }) {\n    super({ name: name4, message: `Invalid prompt: ${message}`, cause });\n    this[_a5] = true;\n    this.prompt = prompt;\n  }\n  static isInstance(error) {\n    return AISDKError.hasMarker(error, marker5);\n  }\n};\n\n// src/errors/invalid-response-data-error.ts\nvar name5 = \"AI_InvalidResponseDataError\";\nvar marker6 = `vercel.ai.error.${name5}`;\nvar symbol6 = Symbol.for(marker6);\nvar _a6, _b6;\nvar InvalidResponseDataError = class extends (_b6 = AISDKError, _a6 = symbol6, _b6) {\n  constructor({\n    data,\n    message = `Invalid response data: ${JSON.stringify(data)}.`\n  }) {\n    super({ name: name5, message });\n    this[_a6] = true;\n    this.data = data;\n  }\n  static isInstance(error) {\n    return AISDKError.hasMarker(error, marker6);\n  }\n};\n\n// src/errors/json-parse-error.ts\nvar name6 = \"AI_JSONParseError\";\nvar marker7 = `vercel.ai.error.${name6}`;\nvar symbol7 = Symbol.for(marker7);\nvar _a7, _b7;\nvar JSONParseError = class extends (_b7 = AISDKError, _a7 = symbol7, _b7) {\n  constructor({ text, cause }) {\n    super({\n      name: name6,\n      message: `JSON parsing failed: Text: ${text}.\nError message: ${getErrorMessage(cause)}`,\n      cause\n    });\n    this[_a7] = true;\n    this.text = text;\n  }\n  static isInstance(error) {\n    return AISDKError.hasMarker(error, marker7);\n  }\n};\n\n// src/errors/load-api-key-error.ts\nvar name7 = \"AI_LoadAPIKeyError\";\nvar marker8 = `vercel.ai.error.${name7}`;\nvar symbol8 = Symbol.for(marker8);\nvar _a8, _b8;\nvar LoadAPIKeyError = class extends (_b8 = AISDKError, _a8 = symbol8, _b8) {\n  // used in isInstance\n  constructor({ message }) {\n    super({ name: name7, message });\n    this[_a8] = true;\n  }\n  static isInstance(error) {\n    return AISDKError.hasMarker(error, marker8);\n  }\n};\n\n// src/errors/load-setting-error.ts\nvar name8 = \"AI_LoadSettingError\";\nvar marker9 = `vercel.ai.error.${name8}`;\nvar symbol9 = Symbol.for(marker9);\nvar _a9, _b9;\nvar LoadSettingError = class extends (_b9 = AISDKError, _a9 = symbol9, _b9) {\n  // used in isInstance\n  constructor({ message }) {\n    super({ name: name8, message });\n    this[_a9] = true;\n  }\n  static isInstance(error) {\n    return AISDKError.hasMarker(error, marker9);\n  }\n};\n\n// src/errors/no-content-generated-error.ts\nvar name9 = \"AI_NoContentGeneratedError\";\nvar marker10 = `vercel.ai.error.${name9}`;\nvar symbol10 = Symbol.for(marker10);\nvar _a10, _b10;\nvar NoContentGeneratedError = class extends (_b10 = AISDKError, _a10 = symbol10, _b10) {\n  // used in isInstance\n  constructor({\n    message = \"No content generated.\"\n  } = {}) {\n    super({ name: name9, message });\n    this[_a10] = true;\n  }\n  static isInstance(error) {\n    return AISDKError.hasMarker(error, marker10);\n  }\n};\n\n// src/errors/no-such-model-error.ts\nvar name10 = \"AI_NoSuchModelError\";\nvar marker11 = `vercel.ai.error.${name10}`;\nvar symbol11 = Symbol.for(marker11);\nvar _a11, _b11;\nvar NoSuchModelError = class extends (_b11 = AISDKError, _a11 = symbol11, _b11) {\n  constructor({\n    errorName = name10,\n    modelId,\n    modelType,\n    message = `No such ${modelType}: ${modelId}`\n  }) {\n    super({ name: errorName, message });\n    this[_a11] = true;\n    this.modelId = modelId;\n    this.modelType = modelType;\n  }\n  static isInstance(error) {\n    return AISDKError.hasMarker(error, marker11);\n  }\n};\n\n// src/errors/too-many-embedding-values-for-call-error.ts\nvar name11 = \"AI_TooManyEmbeddingValuesForCallError\";\nvar marker12 = `vercel.ai.error.${name11}`;\nvar symbol12 = Symbol.for(marker12);\nvar _a12, _b12;\nvar TooManyEmbeddingValuesForCallError = class extends (_b12 = AISDKError, _a12 = symbol12, _b12) {\n  constructor(options) {\n    super({\n      name: name11,\n      message: `Too many values for a single embedding call. The ${options.provider} model \"${options.modelId}\" can only embed up to ${options.maxEmbeddingsPerCall} values per call, but ${options.values.length} values were provided.`\n    });\n    this[_a12] = true;\n    this.provider = options.provider;\n    this.modelId = options.modelId;\n    this.maxEmbeddingsPerCall = options.maxEmbeddingsPerCall;\n    this.values = options.values;\n  }\n  static isInstance(error) {\n    return AISDKError.hasMarker(error, marker12);\n  }\n};\n\n// src/errors/type-validation-error.ts\nvar name12 = \"AI_TypeValidationError\";\nvar marker13 = `vercel.ai.error.${name12}`;\nvar symbol13 = Symbol.for(marker13);\nvar _a13, _b13;\nvar TypeValidationError = class _TypeValidationError extends (_b13 = AISDKError, _a13 = symbol13, _b13) {\n  constructor({ value, cause }) {\n    super({\n      name: name12,\n      message: `Type validation failed: Value: ${JSON.stringify(value)}.\nError message: ${getErrorMessage(cause)}`,\n      cause\n    });\n    this[_a13] = true;\n    this.value = value;\n  }\n  static isInstance(error) {\n    return AISDKError.hasMarker(error, marker13);\n  }\n  /**\n   * Wraps an error into a TypeValidationError.\n   * If the cause is already a TypeValidationError with the same value, it returns the cause.\n   * Otherwise, it creates a new TypeValidationError.\n   *\n   * @param {Object} params - The parameters for wrapping the error.\n   * @param {unknown} params.value - The value that failed validation.\n   * @param {unknown} params.cause - The original error or cause of the validation failure.\n   * @returns {TypeValidationError} A TypeValidationError instance.\n   */\n  static wrap({\n    value,\n    cause\n  }) {\n    return _TypeValidationError.isInstance(cause) && cause.value === value ? cause : new _TypeValidationError({ value, cause });\n  }\n};\n\n// src/errors/unsupported-functionality-error.ts\nvar name13 = \"AI_UnsupportedFunctionalityError\";\nvar marker14 = `vercel.ai.error.${name13}`;\nvar symbol14 = Symbol.for(marker14);\nvar _a14, _b14;\nvar UnsupportedFunctionalityError = class extends (_b14 = AISDKError, _a14 = symbol14, _b14) {\n  constructor({\n    functionality,\n    message = `'${functionality}' functionality not supported.`\n  }) {\n    super({ name: name13, message });\n    this[_a14] = true;\n    this.functionality = functionality;\n  }\n  static isInstance(error) {\n    return AISDKError.hasMarker(error, marker14);\n  }\n};\n\n// src/json-value/is-json.ts\nfunction isJSONValue(value) {\n  if (value === null || typeof value === \"string\" || typeof value === \"number\" || typeof value === \"boolean\") {\n    return true;\n  }\n  if (Array.isArray(value)) {\n    return value.every(isJSONValue);\n  }\n  if (typeof value === \"object\") {\n    return Object.entries(value).every(\n      ([key, val]) => typeof key === \"string\" && (val === void 0 || isJSONValue(val))\n    );\n  }\n  return false;\n}\nfunction isJSONArray(value) {\n  return Array.isArray(value) && value.every(isJSONValue);\n}\nfunction isJSONObject(value) {\n  return value != null && typeof value === \"object\" && Object.entries(value).every(\n    ([key, val]) => typeof key === \"string\" && (val === void 0 || isJSONValue(val))\n  );\n}\n\n//# sourceMappingURL=index.mjs.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGFpLXNkay9wcm92aWRlci9kaXN0L2luZGV4Lm1qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYSxRQUFRO0FBQ3JCLGFBQWEsUUFBUTtBQUNyQixhQUFhLFFBQVE7QUFDckIsYUFBYSxTQUFTO0FBQ3RCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhLFNBQVM7QUFDdEIsZUFBZSxTQUFTO0FBQ3hCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsaUNBQWlDLEtBQUs7QUFDdEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSCxZQUFZLHNCQUFzQjtBQUNsQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsaUNBQWlDLE1BQU07QUFDdkM7QUFDQTtBQUNBO0FBQ0E7QUFDQSxnQkFBZ0Isa0NBQWtDLElBQUk7QUFDdEQsWUFBWSxzQkFBc0I7QUFDbEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxpQ0FBaUMsTUFBTTtBQUN2QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSCxZQUFZLDZCQUE2QjtBQUN6QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsaUNBQWlDLE1BQU07QUFDdkM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0gsWUFBWSx5Q0FBeUMsUUFBUSxVQUFVO0FBQ3ZFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxpQ0FBaUMsTUFBTTtBQUN2QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esd0NBQXdDLHFCQUFxQjtBQUM3RCxHQUFHO0FBQ0gsWUFBWSxzQkFBc0I7QUFDbEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLGlDQUFpQyxNQUFNO0FBQ3ZDO0FBQ0E7QUFDQTtBQUNBLGdCQUFnQixhQUFhO0FBQzdCO0FBQ0E7QUFDQSw2Q0FBNkMsS0FBSztBQUNsRCxpQkFBaUIsdUJBQXVCO0FBQ3hDO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxpQ0FBaUMsTUFBTTtBQUN2QztBQUNBO0FBQ0E7QUFDQTtBQUNBLGdCQUFnQixTQUFTO0FBQ3pCLFlBQVksc0JBQXNCO0FBQ2xDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsaUNBQWlDLE1BQU07QUFDdkM7QUFDQTtBQUNBO0FBQ0E7QUFDQSxnQkFBZ0IsU0FBUztBQUN6QixZQUFZLHNCQUFzQjtBQUNsQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLGtDQUFrQyxNQUFNO0FBQ3hDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUksSUFBSTtBQUNSLFlBQVksc0JBQXNCO0FBQ2xDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0Esa0NBQWtDLE9BQU87QUFDekM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx5QkFBeUIsVUFBVSxJQUFJLFFBQVE7QUFDL0MsR0FBRztBQUNILFlBQVksMEJBQTBCO0FBQ3RDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLGtDQUFrQyxPQUFPO0FBQ3pDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG1FQUFtRSxrQkFBa0IsU0FBUyxnQkFBZ0IseUJBQXlCLDhCQUE4Qix1QkFBdUIsdUJBQXVCO0FBQ25OLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0Esa0NBQWtDLE9BQU87QUFDekM7QUFDQTtBQUNBO0FBQ0EsZ0JBQWdCLGNBQWM7QUFDOUI7QUFDQTtBQUNBLGlEQUFpRCxzQkFBc0I7QUFDdkUsaUJBQWlCLHVCQUF1QjtBQUN4QztBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYSxRQUFRO0FBQ3JCLGFBQWEsU0FBUztBQUN0QixhQUFhLFNBQVM7QUFDdEIsZUFBZSxxQkFBcUI7QUFDcEM7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0gsZ0hBQWdILGNBQWM7QUFDOUg7QUFDQTs7QUFFQTtBQUNBO0FBQ0Esa0NBQWtDLE9BQU87QUFDekM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGtCQUFrQixjQUFjO0FBQ2hDLEdBQUc7QUFDSCxZQUFZLHVCQUF1QjtBQUNuQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBb0JFO0FBQ0YiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9lc2ctY2l0eS1hcHAvLi9ub2RlX21vZHVsZXMvQGFpLXNkay9wcm92aWRlci9kaXN0L2luZGV4Lm1qcz9iZmExIl0sInNvdXJjZXNDb250ZW50IjpbIi8vIHNyYy9lcnJvcnMvYWktc2RrLWVycm9yLnRzXG52YXIgbWFya2VyID0gXCJ2ZXJjZWwuYWkuZXJyb3JcIjtcbnZhciBzeW1ib2wgPSBTeW1ib2wuZm9yKG1hcmtlcik7XG52YXIgX2EsIF9iO1xudmFyIEFJU0RLRXJyb3IgPSBjbGFzcyBfQUlTREtFcnJvciBleHRlbmRzIChfYiA9IEVycm9yLCBfYSA9IHN5bWJvbCwgX2IpIHtcbiAgLyoqXG4gICAqIENyZWF0ZXMgYW4gQUkgU0RLIEVycm9yLlxuICAgKlxuICAgKiBAcGFyYW0ge09iamVjdH0gcGFyYW1zIC0gVGhlIHBhcmFtZXRlcnMgZm9yIGNyZWF0aW5nIHRoZSBlcnJvci5cbiAgICogQHBhcmFtIHtzdHJpbmd9IHBhcmFtcy5uYW1lIC0gVGhlIG5hbWUgb2YgdGhlIGVycm9yLlxuICAgKiBAcGFyYW0ge3N0cmluZ30gcGFyYW1zLm1lc3NhZ2UgLSBUaGUgZXJyb3IgbWVzc2FnZS5cbiAgICogQHBhcmFtIHt1bmtub3dufSBbcGFyYW1zLmNhdXNlXSAtIFRoZSB1bmRlcmx5aW5nIGNhdXNlIG9mIHRoZSBlcnJvci5cbiAgICovXG4gIGNvbnN0cnVjdG9yKHtcbiAgICBuYW1lOiBuYW1lMTQsXG4gICAgbWVzc2FnZSxcbiAgICBjYXVzZVxuICB9KSB7XG4gICAgc3VwZXIobWVzc2FnZSk7XG4gICAgdGhpc1tfYV0gPSB0cnVlO1xuICAgIHRoaXMubmFtZSA9IG5hbWUxNDtcbiAgICB0aGlzLmNhdXNlID0gY2F1c2U7XG4gIH1cbiAgLyoqXG4gICAqIENoZWNrcyBpZiB0aGUgZ2l2ZW4gZXJyb3IgaXMgYW4gQUkgU0RLIEVycm9yLlxuICAgKiBAcGFyYW0ge3Vua25vd259IGVycm9yIC0gVGhlIGVycm9yIHRvIGNoZWNrLlxuICAgKiBAcmV0dXJucyB7Ym9vbGVhbn0gVHJ1ZSBpZiB0aGUgZXJyb3IgaXMgYW4gQUkgU0RLIEVycm9yLCBmYWxzZSBvdGhlcndpc2UuXG4gICAqL1xuICBzdGF0aWMgaXNJbnN0YW5jZShlcnJvcikge1xuICAgIHJldHVybiBfQUlTREtFcnJvci5oYXNNYXJrZXIoZXJyb3IsIG1hcmtlcik7XG4gIH1cbiAgc3RhdGljIGhhc01hcmtlcihlcnJvciwgbWFya2VyMTUpIHtcbiAgICBjb25zdCBtYXJrZXJTeW1ib2wgPSBTeW1ib2wuZm9yKG1hcmtlcjE1KTtcbiAgICByZXR1cm4gZXJyb3IgIT0gbnVsbCAmJiB0eXBlb2YgZXJyb3IgPT09IFwib2JqZWN0XCIgJiYgbWFya2VyU3ltYm9sIGluIGVycm9yICYmIHR5cGVvZiBlcnJvclttYXJrZXJTeW1ib2xdID09PSBcImJvb2xlYW5cIiAmJiBlcnJvclttYXJrZXJTeW1ib2xdID09PSB0cnVlO1xuICB9XG59O1xuXG4vLyBzcmMvZXJyb3JzL2FwaS1jYWxsLWVycm9yLnRzXG52YXIgbmFtZSA9IFwiQUlfQVBJQ2FsbEVycm9yXCI7XG52YXIgbWFya2VyMiA9IGB2ZXJjZWwuYWkuZXJyb3IuJHtuYW1lfWA7XG52YXIgc3ltYm9sMiA9IFN5bWJvbC5mb3IobWFya2VyMik7XG52YXIgX2EyLCBfYjI7XG52YXIgQVBJQ2FsbEVycm9yID0gY2xhc3MgZXh0ZW5kcyAoX2IyID0gQUlTREtFcnJvciwgX2EyID0gc3ltYm9sMiwgX2IyKSB7XG4gIGNvbnN0cnVjdG9yKHtcbiAgICBtZXNzYWdlLFxuICAgIHVybCxcbiAgICByZXF1ZXN0Qm9keVZhbHVlcyxcbiAgICBzdGF0dXNDb2RlLFxuICAgIHJlc3BvbnNlSGVhZGVycyxcbiAgICByZXNwb25zZUJvZHksXG4gICAgY2F1c2UsXG4gICAgaXNSZXRyeWFibGUgPSBzdGF0dXNDb2RlICE9IG51bGwgJiYgKHN0YXR1c0NvZGUgPT09IDQwOCB8fCAvLyByZXF1ZXN0IHRpbWVvdXRcbiAgICBzdGF0dXNDb2RlID09PSA0MDkgfHwgLy8gY29uZmxpY3RcbiAgICBzdGF0dXNDb2RlID09PSA0MjkgfHwgLy8gdG9vIG1hbnkgcmVxdWVzdHNcbiAgICBzdGF0dXNDb2RlID49IDUwMCksXG4gICAgLy8gc2VydmVyIGVycm9yXG4gICAgZGF0YVxuICB9KSB7XG4gICAgc3VwZXIoeyBuYW1lLCBtZXNzYWdlLCBjYXVzZSB9KTtcbiAgICB0aGlzW19hMl0gPSB0cnVlO1xuICAgIHRoaXMudXJsID0gdXJsO1xuICAgIHRoaXMucmVxdWVzdEJvZHlWYWx1ZXMgPSByZXF1ZXN0Qm9keVZhbHVlcztcbiAgICB0aGlzLnN0YXR1c0NvZGUgPSBzdGF0dXNDb2RlO1xuICAgIHRoaXMucmVzcG9uc2VIZWFkZXJzID0gcmVzcG9uc2VIZWFkZXJzO1xuICAgIHRoaXMucmVzcG9uc2VCb2R5ID0gcmVzcG9uc2VCb2R5O1xuICAgIHRoaXMuaXNSZXRyeWFibGUgPSBpc1JldHJ5YWJsZTtcbiAgICB0aGlzLmRhdGEgPSBkYXRhO1xuICB9XG4gIHN0YXRpYyBpc0luc3RhbmNlKGVycm9yKSB7XG4gICAgcmV0dXJuIEFJU0RLRXJyb3IuaGFzTWFya2VyKGVycm9yLCBtYXJrZXIyKTtcbiAgfVxufTtcblxuLy8gc3JjL2Vycm9ycy9lbXB0eS1yZXNwb25zZS1ib2R5LWVycm9yLnRzXG52YXIgbmFtZTIgPSBcIkFJX0VtcHR5UmVzcG9uc2VCb2R5RXJyb3JcIjtcbnZhciBtYXJrZXIzID0gYHZlcmNlbC5haS5lcnJvci4ke25hbWUyfWA7XG52YXIgc3ltYm9sMyA9IFN5bWJvbC5mb3IobWFya2VyMyk7XG52YXIgX2EzLCBfYjM7XG52YXIgRW1wdHlSZXNwb25zZUJvZHlFcnJvciA9IGNsYXNzIGV4dGVuZHMgKF9iMyA9IEFJU0RLRXJyb3IsIF9hMyA9IHN5bWJvbDMsIF9iMykge1xuICAvLyB1c2VkIGluIGlzSW5zdGFuY2VcbiAgY29uc3RydWN0b3IoeyBtZXNzYWdlID0gXCJFbXB0eSByZXNwb25zZSBib2R5XCIgfSA9IHt9KSB7XG4gICAgc3VwZXIoeyBuYW1lOiBuYW1lMiwgbWVzc2FnZSB9KTtcbiAgICB0aGlzW19hM10gPSB0cnVlO1xuICB9XG4gIHN0YXRpYyBpc0luc3RhbmNlKGVycm9yKSB7XG4gICAgcmV0dXJuIEFJU0RLRXJyb3IuaGFzTWFya2VyKGVycm9yLCBtYXJrZXIzKTtcbiAgfVxufTtcblxuLy8gc3JjL2Vycm9ycy9nZXQtZXJyb3ItbWVzc2FnZS50c1xuZnVuY3Rpb24gZ2V0RXJyb3JNZXNzYWdlKGVycm9yKSB7XG4gIGlmIChlcnJvciA9PSBudWxsKSB7XG4gICAgcmV0dXJuIFwidW5rbm93biBlcnJvclwiO1xuICB9XG4gIGlmICh0eXBlb2YgZXJyb3IgPT09IFwic3RyaW5nXCIpIHtcbiAgICByZXR1cm4gZXJyb3I7XG4gIH1cbiAgaWYgKGVycm9yIGluc3RhbmNlb2YgRXJyb3IpIHtcbiAgICByZXR1cm4gZXJyb3IubWVzc2FnZTtcbiAgfVxuICByZXR1cm4gSlNPTi5zdHJpbmdpZnkoZXJyb3IpO1xufVxuXG4vLyBzcmMvZXJyb3JzL2ludmFsaWQtYXJndW1lbnQtZXJyb3IudHNcbnZhciBuYW1lMyA9IFwiQUlfSW52YWxpZEFyZ3VtZW50RXJyb3JcIjtcbnZhciBtYXJrZXI0ID0gYHZlcmNlbC5haS5lcnJvci4ke25hbWUzfWA7XG52YXIgc3ltYm9sNCA9IFN5bWJvbC5mb3IobWFya2VyNCk7XG52YXIgX2E0LCBfYjQ7XG52YXIgSW52YWxpZEFyZ3VtZW50RXJyb3IgPSBjbGFzcyBleHRlbmRzIChfYjQgPSBBSVNES0Vycm9yLCBfYTQgPSBzeW1ib2w0LCBfYjQpIHtcbiAgY29uc3RydWN0b3Ioe1xuICAgIG1lc3NhZ2UsXG4gICAgY2F1c2UsXG4gICAgYXJndW1lbnRcbiAgfSkge1xuICAgIHN1cGVyKHsgbmFtZTogbmFtZTMsIG1lc3NhZ2UsIGNhdXNlIH0pO1xuICAgIHRoaXNbX2E0XSA9IHRydWU7XG4gICAgdGhpcy5hcmd1bWVudCA9IGFyZ3VtZW50O1xuICB9XG4gIHN0YXRpYyBpc0luc3RhbmNlKGVycm9yKSB7XG4gICAgcmV0dXJuIEFJU0RLRXJyb3IuaGFzTWFya2VyKGVycm9yLCBtYXJrZXI0KTtcbiAgfVxufTtcblxuLy8gc3JjL2Vycm9ycy9pbnZhbGlkLXByb21wdC1lcnJvci50c1xudmFyIG5hbWU0ID0gXCJBSV9JbnZhbGlkUHJvbXB0RXJyb3JcIjtcbnZhciBtYXJrZXI1ID0gYHZlcmNlbC5haS5lcnJvci4ke25hbWU0fWA7XG52YXIgc3ltYm9sNSA9IFN5bWJvbC5mb3IobWFya2VyNSk7XG52YXIgX2E1LCBfYjU7XG52YXIgSW52YWxpZFByb21wdEVycm9yID0gY2xhc3MgZXh0ZW5kcyAoX2I1ID0gQUlTREtFcnJvciwgX2E1ID0gc3ltYm9sNSwgX2I1KSB7XG4gIGNvbnN0cnVjdG9yKHtcbiAgICBwcm9tcHQsXG4gICAgbWVzc2FnZSxcbiAgICBjYXVzZVxuICB9KSB7XG4gICAgc3VwZXIoeyBuYW1lOiBuYW1lNCwgbWVzc2FnZTogYEludmFsaWQgcHJvbXB0OiAke21lc3NhZ2V9YCwgY2F1c2UgfSk7XG4gICAgdGhpc1tfYTVdID0gdHJ1ZTtcbiAgICB0aGlzLnByb21wdCA9IHByb21wdDtcbiAgfVxuICBzdGF0aWMgaXNJbnN0YW5jZShlcnJvcikge1xuICAgIHJldHVybiBBSVNES0Vycm9yLmhhc01hcmtlcihlcnJvciwgbWFya2VyNSk7XG4gIH1cbn07XG5cbi8vIHNyYy9lcnJvcnMvaW52YWxpZC1yZXNwb25zZS1kYXRhLWVycm9yLnRzXG52YXIgbmFtZTUgPSBcIkFJX0ludmFsaWRSZXNwb25zZURhdGFFcnJvclwiO1xudmFyIG1hcmtlcjYgPSBgdmVyY2VsLmFpLmVycm9yLiR7bmFtZTV9YDtcbnZhciBzeW1ib2w2ID0gU3ltYm9sLmZvcihtYXJrZXI2KTtcbnZhciBfYTYsIF9iNjtcbnZhciBJbnZhbGlkUmVzcG9uc2VEYXRhRXJyb3IgPSBjbGFzcyBleHRlbmRzIChfYjYgPSBBSVNES0Vycm9yLCBfYTYgPSBzeW1ib2w2LCBfYjYpIHtcbiAgY29uc3RydWN0b3Ioe1xuICAgIGRhdGEsXG4gICAgbWVzc2FnZSA9IGBJbnZhbGlkIHJlc3BvbnNlIGRhdGE6ICR7SlNPTi5zdHJpbmdpZnkoZGF0YSl9LmBcbiAgfSkge1xuICAgIHN1cGVyKHsgbmFtZTogbmFtZTUsIG1lc3NhZ2UgfSk7XG4gICAgdGhpc1tfYTZdID0gdHJ1ZTtcbiAgICB0aGlzLmRhdGEgPSBkYXRhO1xuICB9XG4gIHN0YXRpYyBpc0luc3RhbmNlKGVycm9yKSB7XG4gICAgcmV0dXJuIEFJU0RLRXJyb3IuaGFzTWFya2VyKGVycm9yLCBtYXJrZXI2KTtcbiAgfVxufTtcblxuLy8gc3JjL2Vycm9ycy9qc29uLXBhcnNlLWVycm9yLnRzXG52YXIgbmFtZTYgPSBcIkFJX0pTT05QYXJzZUVycm9yXCI7XG52YXIgbWFya2VyNyA9IGB2ZXJjZWwuYWkuZXJyb3IuJHtuYW1lNn1gO1xudmFyIHN5bWJvbDcgPSBTeW1ib2wuZm9yKG1hcmtlcjcpO1xudmFyIF9hNywgX2I3O1xudmFyIEpTT05QYXJzZUVycm9yID0gY2xhc3MgZXh0ZW5kcyAoX2I3ID0gQUlTREtFcnJvciwgX2E3ID0gc3ltYm9sNywgX2I3KSB7XG4gIGNvbnN0cnVjdG9yKHsgdGV4dCwgY2F1c2UgfSkge1xuICAgIHN1cGVyKHtcbiAgICAgIG5hbWU6IG5hbWU2LFxuICAgICAgbWVzc2FnZTogYEpTT04gcGFyc2luZyBmYWlsZWQ6IFRleHQ6ICR7dGV4dH0uXG5FcnJvciBtZXNzYWdlOiAke2dldEVycm9yTWVzc2FnZShjYXVzZSl9YCxcbiAgICAgIGNhdXNlXG4gICAgfSk7XG4gICAgdGhpc1tfYTddID0gdHJ1ZTtcbiAgICB0aGlzLnRleHQgPSB0ZXh0O1xuICB9XG4gIHN0YXRpYyBpc0luc3RhbmNlKGVycm9yKSB7XG4gICAgcmV0dXJuIEFJU0RLRXJyb3IuaGFzTWFya2VyKGVycm9yLCBtYXJrZXI3KTtcbiAgfVxufTtcblxuLy8gc3JjL2Vycm9ycy9sb2FkLWFwaS1rZXktZXJyb3IudHNcbnZhciBuYW1lNyA9IFwiQUlfTG9hZEFQSUtleUVycm9yXCI7XG52YXIgbWFya2VyOCA9IGB2ZXJjZWwuYWkuZXJyb3IuJHtuYW1lN31gO1xudmFyIHN5bWJvbDggPSBTeW1ib2wuZm9yKG1hcmtlcjgpO1xudmFyIF9hOCwgX2I4O1xudmFyIExvYWRBUElLZXlFcnJvciA9IGNsYXNzIGV4dGVuZHMgKF9iOCA9IEFJU0RLRXJyb3IsIF9hOCA9IHN5bWJvbDgsIF9iOCkge1xuICAvLyB1c2VkIGluIGlzSW5zdGFuY2VcbiAgY29uc3RydWN0b3IoeyBtZXNzYWdlIH0pIHtcbiAgICBzdXBlcih7IG5hbWU6IG5hbWU3LCBtZXNzYWdlIH0pO1xuICAgIHRoaXNbX2E4XSA9IHRydWU7XG4gIH1cbiAgc3RhdGljIGlzSW5zdGFuY2UoZXJyb3IpIHtcbiAgICByZXR1cm4gQUlTREtFcnJvci5oYXNNYXJrZXIoZXJyb3IsIG1hcmtlcjgpO1xuICB9XG59O1xuXG4vLyBzcmMvZXJyb3JzL2xvYWQtc2V0dGluZy1lcnJvci50c1xudmFyIG5hbWU4ID0gXCJBSV9Mb2FkU2V0dGluZ0Vycm9yXCI7XG52YXIgbWFya2VyOSA9IGB2ZXJjZWwuYWkuZXJyb3IuJHtuYW1lOH1gO1xudmFyIHN5bWJvbDkgPSBTeW1ib2wuZm9yKG1hcmtlcjkpO1xudmFyIF9hOSwgX2I5O1xudmFyIExvYWRTZXR0aW5nRXJyb3IgPSBjbGFzcyBleHRlbmRzIChfYjkgPSBBSVNES0Vycm9yLCBfYTkgPSBzeW1ib2w5LCBfYjkpIHtcbiAgLy8gdXNlZCBpbiBpc0luc3RhbmNlXG4gIGNvbnN0cnVjdG9yKHsgbWVzc2FnZSB9KSB7XG4gICAgc3VwZXIoeyBuYW1lOiBuYW1lOCwgbWVzc2FnZSB9KTtcbiAgICB0aGlzW19hOV0gPSB0cnVlO1xuICB9XG4gIHN0YXRpYyBpc0luc3RhbmNlKGVycm9yKSB7XG4gICAgcmV0dXJuIEFJU0RLRXJyb3IuaGFzTWFya2VyKGVycm9yLCBtYXJrZXI5KTtcbiAgfVxufTtcblxuLy8gc3JjL2Vycm9ycy9uby1jb250ZW50LWdlbmVyYXRlZC1lcnJvci50c1xudmFyIG5hbWU5ID0gXCJBSV9Ob0NvbnRlbnRHZW5lcmF0ZWRFcnJvclwiO1xudmFyIG1hcmtlcjEwID0gYHZlcmNlbC5haS5lcnJvci4ke25hbWU5fWA7XG52YXIgc3ltYm9sMTAgPSBTeW1ib2wuZm9yKG1hcmtlcjEwKTtcbnZhciBfYTEwLCBfYjEwO1xudmFyIE5vQ29udGVudEdlbmVyYXRlZEVycm9yID0gY2xhc3MgZXh0ZW5kcyAoX2IxMCA9IEFJU0RLRXJyb3IsIF9hMTAgPSBzeW1ib2wxMCwgX2IxMCkge1xuICAvLyB1c2VkIGluIGlzSW5zdGFuY2VcbiAgY29uc3RydWN0b3Ioe1xuICAgIG1lc3NhZ2UgPSBcIk5vIGNvbnRlbnQgZ2VuZXJhdGVkLlwiXG4gIH0gPSB7fSkge1xuICAgIHN1cGVyKHsgbmFtZTogbmFtZTksIG1lc3NhZ2UgfSk7XG4gICAgdGhpc1tfYTEwXSA9IHRydWU7XG4gIH1cbiAgc3RhdGljIGlzSW5zdGFuY2UoZXJyb3IpIHtcbiAgICByZXR1cm4gQUlTREtFcnJvci5oYXNNYXJrZXIoZXJyb3IsIG1hcmtlcjEwKTtcbiAgfVxufTtcblxuLy8gc3JjL2Vycm9ycy9uby1zdWNoLW1vZGVsLWVycm9yLnRzXG52YXIgbmFtZTEwID0gXCJBSV9Ob1N1Y2hNb2RlbEVycm9yXCI7XG52YXIgbWFya2VyMTEgPSBgdmVyY2VsLmFpLmVycm9yLiR7bmFtZTEwfWA7XG52YXIgc3ltYm9sMTEgPSBTeW1ib2wuZm9yKG1hcmtlcjExKTtcbnZhciBfYTExLCBfYjExO1xudmFyIE5vU3VjaE1vZGVsRXJyb3IgPSBjbGFzcyBleHRlbmRzIChfYjExID0gQUlTREtFcnJvciwgX2ExMSA9IHN5bWJvbDExLCBfYjExKSB7XG4gIGNvbnN0cnVjdG9yKHtcbiAgICBlcnJvck5hbWUgPSBuYW1lMTAsXG4gICAgbW9kZWxJZCxcbiAgICBtb2RlbFR5cGUsXG4gICAgbWVzc2FnZSA9IGBObyBzdWNoICR7bW9kZWxUeXBlfTogJHttb2RlbElkfWBcbiAgfSkge1xuICAgIHN1cGVyKHsgbmFtZTogZXJyb3JOYW1lLCBtZXNzYWdlIH0pO1xuICAgIHRoaXNbX2ExMV0gPSB0cnVlO1xuICAgIHRoaXMubW9kZWxJZCA9IG1vZGVsSWQ7XG4gICAgdGhpcy5tb2RlbFR5cGUgPSBtb2RlbFR5cGU7XG4gIH1cbiAgc3RhdGljIGlzSW5zdGFuY2UoZXJyb3IpIHtcbiAgICByZXR1cm4gQUlTREtFcnJvci5oYXNNYXJrZXIoZXJyb3IsIG1hcmtlcjExKTtcbiAgfVxufTtcblxuLy8gc3JjL2Vycm9ycy90b28tbWFueS1lbWJlZGRpbmctdmFsdWVzLWZvci1jYWxsLWVycm9yLnRzXG52YXIgbmFtZTExID0gXCJBSV9Ub29NYW55RW1iZWRkaW5nVmFsdWVzRm9yQ2FsbEVycm9yXCI7XG52YXIgbWFya2VyMTIgPSBgdmVyY2VsLmFpLmVycm9yLiR7bmFtZTExfWA7XG52YXIgc3ltYm9sMTIgPSBTeW1ib2wuZm9yKG1hcmtlcjEyKTtcbnZhciBfYTEyLCBfYjEyO1xudmFyIFRvb01hbnlFbWJlZGRpbmdWYWx1ZXNGb3JDYWxsRXJyb3IgPSBjbGFzcyBleHRlbmRzIChfYjEyID0gQUlTREtFcnJvciwgX2ExMiA9IHN5bWJvbDEyLCBfYjEyKSB7XG4gIGNvbnN0cnVjdG9yKG9wdGlvbnMpIHtcbiAgICBzdXBlcih7XG4gICAgICBuYW1lOiBuYW1lMTEsXG4gICAgICBtZXNzYWdlOiBgVG9vIG1hbnkgdmFsdWVzIGZvciBhIHNpbmdsZSBlbWJlZGRpbmcgY2FsbC4gVGhlICR7b3B0aW9ucy5wcm92aWRlcn0gbW9kZWwgXCIke29wdGlvbnMubW9kZWxJZH1cIiBjYW4gb25seSBlbWJlZCB1cCB0byAke29wdGlvbnMubWF4RW1iZWRkaW5nc1BlckNhbGx9IHZhbHVlcyBwZXIgY2FsbCwgYnV0ICR7b3B0aW9ucy52YWx1ZXMubGVuZ3RofSB2YWx1ZXMgd2VyZSBwcm92aWRlZC5gXG4gICAgfSk7XG4gICAgdGhpc1tfYTEyXSA9IHRydWU7XG4gICAgdGhpcy5wcm92aWRlciA9IG9wdGlvbnMucHJvdmlkZXI7XG4gICAgdGhpcy5tb2RlbElkID0gb3B0aW9ucy5tb2RlbElkO1xuICAgIHRoaXMubWF4RW1iZWRkaW5nc1BlckNhbGwgPSBvcHRpb25zLm1heEVtYmVkZGluZ3NQZXJDYWxsO1xuICAgIHRoaXMudmFsdWVzID0gb3B0aW9ucy52YWx1ZXM7XG4gIH1cbiAgc3RhdGljIGlzSW5zdGFuY2UoZXJyb3IpIHtcbiAgICByZXR1cm4gQUlTREtFcnJvci5oYXNNYXJrZXIoZXJyb3IsIG1hcmtlcjEyKTtcbiAgfVxufTtcblxuLy8gc3JjL2Vycm9ycy90eXBlLXZhbGlkYXRpb24tZXJyb3IudHNcbnZhciBuYW1lMTIgPSBcIkFJX1R5cGVWYWxpZGF0aW9uRXJyb3JcIjtcbnZhciBtYXJrZXIxMyA9IGB2ZXJjZWwuYWkuZXJyb3IuJHtuYW1lMTJ9YDtcbnZhciBzeW1ib2wxMyA9IFN5bWJvbC5mb3IobWFya2VyMTMpO1xudmFyIF9hMTMsIF9iMTM7XG52YXIgVHlwZVZhbGlkYXRpb25FcnJvciA9IGNsYXNzIF9UeXBlVmFsaWRhdGlvbkVycm9yIGV4dGVuZHMgKF9iMTMgPSBBSVNES0Vycm9yLCBfYTEzID0gc3ltYm9sMTMsIF9iMTMpIHtcbiAgY29uc3RydWN0b3IoeyB2YWx1ZSwgY2F1c2UgfSkge1xuICAgIHN1cGVyKHtcbiAgICAgIG5hbWU6IG5hbWUxMixcbiAgICAgIG1lc3NhZ2U6IGBUeXBlIHZhbGlkYXRpb24gZmFpbGVkOiBWYWx1ZTogJHtKU09OLnN0cmluZ2lmeSh2YWx1ZSl9LlxuRXJyb3IgbWVzc2FnZTogJHtnZXRFcnJvck1lc3NhZ2UoY2F1c2UpfWAsXG4gICAgICBjYXVzZVxuICAgIH0pO1xuICAgIHRoaXNbX2ExM10gPSB0cnVlO1xuICAgIHRoaXMudmFsdWUgPSB2YWx1ZTtcbiAgfVxuICBzdGF0aWMgaXNJbnN0YW5jZShlcnJvcikge1xuICAgIHJldHVybiBBSVNES0Vycm9yLmhhc01hcmtlcihlcnJvciwgbWFya2VyMTMpO1xuICB9XG4gIC8qKlxuICAgKiBXcmFwcyBhbiBlcnJvciBpbnRvIGEgVHlwZVZhbGlkYXRpb25FcnJvci5cbiAgICogSWYgdGhlIGNhdXNlIGlzIGFscmVhZHkgYSBUeXBlVmFsaWRhdGlvbkVycm9yIHdpdGggdGhlIHNhbWUgdmFsdWUsIGl0IHJldHVybnMgdGhlIGNhdXNlLlxuICAgKiBPdGhlcndpc2UsIGl0IGNyZWF0ZXMgYSBuZXcgVHlwZVZhbGlkYXRpb25FcnJvci5cbiAgICpcbiAgICogQHBhcmFtIHtPYmplY3R9IHBhcmFtcyAtIFRoZSBwYXJhbWV0ZXJzIGZvciB3cmFwcGluZyB0aGUgZXJyb3IuXG4gICAqIEBwYXJhbSB7dW5rbm93bn0gcGFyYW1zLnZhbHVlIC0gVGhlIHZhbHVlIHRoYXQgZmFpbGVkIHZhbGlkYXRpb24uXG4gICAqIEBwYXJhbSB7dW5rbm93bn0gcGFyYW1zLmNhdXNlIC0gVGhlIG9yaWdpbmFsIGVycm9yIG9yIGNhdXNlIG9mIHRoZSB2YWxpZGF0aW9uIGZhaWx1cmUuXG4gICAqIEByZXR1cm5zIHtUeXBlVmFsaWRhdGlvbkVycm9yfSBBIFR5cGVWYWxpZGF0aW9uRXJyb3IgaW5zdGFuY2UuXG4gICAqL1xuICBzdGF0aWMgd3JhcCh7XG4gICAgdmFsdWUsXG4gICAgY2F1c2VcbiAgfSkge1xuICAgIHJldHVybiBfVHlwZVZhbGlkYXRpb25FcnJvci5pc0luc3RhbmNlKGNhdXNlKSAmJiBjYXVzZS52YWx1ZSA9PT0gdmFsdWUgPyBjYXVzZSA6IG5ldyBfVHlwZVZhbGlkYXRpb25FcnJvcih7IHZhbHVlLCBjYXVzZSB9KTtcbiAgfVxufTtcblxuLy8gc3JjL2Vycm9ycy91bnN1cHBvcnRlZC1mdW5jdGlvbmFsaXR5LWVycm9yLnRzXG52YXIgbmFtZTEzID0gXCJBSV9VbnN1cHBvcnRlZEZ1bmN0aW9uYWxpdHlFcnJvclwiO1xudmFyIG1hcmtlcjE0ID0gYHZlcmNlbC5haS5lcnJvci4ke25hbWUxM31gO1xudmFyIHN5bWJvbDE0ID0gU3ltYm9sLmZvcihtYXJrZXIxNCk7XG52YXIgX2ExNCwgX2IxNDtcbnZhciBVbnN1cHBvcnRlZEZ1bmN0aW9uYWxpdHlFcnJvciA9IGNsYXNzIGV4dGVuZHMgKF9iMTQgPSBBSVNES0Vycm9yLCBfYTE0ID0gc3ltYm9sMTQsIF9iMTQpIHtcbiAgY29uc3RydWN0b3Ioe1xuICAgIGZ1bmN0aW9uYWxpdHksXG4gICAgbWVzc2FnZSA9IGAnJHtmdW5jdGlvbmFsaXR5fScgZnVuY3Rpb25hbGl0eSBub3Qgc3VwcG9ydGVkLmBcbiAgfSkge1xuICAgIHN1cGVyKHsgbmFtZTogbmFtZTEzLCBtZXNzYWdlIH0pO1xuICAgIHRoaXNbX2ExNF0gPSB0cnVlO1xuICAgIHRoaXMuZnVuY3Rpb25hbGl0eSA9IGZ1bmN0aW9uYWxpdHk7XG4gIH1cbiAgc3RhdGljIGlzSW5zdGFuY2UoZXJyb3IpIHtcbiAgICByZXR1cm4gQUlTREtFcnJvci5oYXNNYXJrZXIoZXJyb3IsIG1hcmtlcjE0KTtcbiAgfVxufTtcblxuLy8gc3JjL2pzb24tdmFsdWUvaXMtanNvbi50c1xuZnVuY3Rpb24gaXNKU09OVmFsdWUodmFsdWUpIHtcbiAgaWYgKHZhbHVlID09PSBudWxsIHx8IHR5cGVvZiB2YWx1ZSA9PT0gXCJzdHJpbmdcIiB8fCB0eXBlb2YgdmFsdWUgPT09IFwibnVtYmVyXCIgfHwgdHlwZW9mIHZhbHVlID09PSBcImJvb2xlYW5cIikge1xuICAgIHJldHVybiB0cnVlO1xuICB9XG4gIGlmIChBcnJheS5pc0FycmF5KHZhbHVlKSkge1xuICAgIHJldHVybiB2YWx1ZS5ldmVyeShpc0pTT05WYWx1ZSk7XG4gIH1cbiAgaWYgKHR5cGVvZiB2YWx1ZSA9PT0gXCJvYmplY3RcIikge1xuICAgIHJldHVybiBPYmplY3QuZW50cmllcyh2YWx1ZSkuZXZlcnkoXG4gICAgICAoW2tleSwgdmFsXSkgPT4gdHlwZW9mIGtleSA9PT0gXCJzdHJpbmdcIiAmJiAodmFsID09PSB2b2lkIDAgfHwgaXNKU09OVmFsdWUodmFsKSlcbiAgICApO1xuICB9XG4gIHJldHVybiBmYWxzZTtcbn1cbmZ1bmN0aW9uIGlzSlNPTkFycmF5KHZhbHVlKSB7XG4gIHJldHVybiBBcnJheS5pc0FycmF5KHZhbHVlKSAmJiB2YWx1ZS5ldmVyeShpc0pTT05WYWx1ZSk7XG59XG5mdW5jdGlvbiBpc0pTT05PYmplY3QodmFsdWUpIHtcbiAgcmV0dXJuIHZhbHVlICE9IG51bGwgJiYgdHlwZW9mIHZhbHVlID09PSBcIm9iamVjdFwiICYmIE9iamVjdC5lbnRyaWVzKHZhbHVlKS5ldmVyeShcbiAgICAoW2tleSwgdmFsXSkgPT4gdHlwZW9mIGtleSA9PT0gXCJzdHJpbmdcIiAmJiAodmFsID09PSB2b2lkIDAgfHwgaXNKU09OVmFsdWUodmFsKSlcbiAgKTtcbn1cbmV4cG9ydCB7XG4gIEFJU0RLRXJyb3IsXG4gIEFQSUNhbGxFcnJvcixcbiAgRW1wdHlSZXNwb25zZUJvZHlFcnJvcixcbiAgSW52YWxpZEFyZ3VtZW50RXJyb3IsXG4gIEludmFsaWRQcm9tcHRFcnJvcixcbiAgSW52YWxpZFJlc3BvbnNlRGF0YUVycm9yLFxuICBKU09OUGFyc2VFcnJvcixcbiAgTG9hZEFQSUtleUVycm9yLFxuICBMb2FkU2V0dGluZ0Vycm9yLFxuICBOb0NvbnRlbnRHZW5lcmF0ZWRFcnJvcixcbiAgTm9TdWNoTW9kZWxFcnJvcixcbiAgVG9vTWFueUVtYmVkZGluZ1ZhbHVlc0ZvckNhbGxFcnJvcixcbiAgVHlwZVZhbGlkYXRpb25FcnJvcixcbiAgVW5zdXBwb3J0ZWRGdW5jdGlvbmFsaXR5RXJyb3IsXG4gIGdldEVycm9yTWVzc2FnZSxcbiAgaXNKU09OQXJyYXksXG4gIGlzSlNPTk9iamVjdCxcbiAgaXNKU09OVmFsdWVcbn07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1pbmRleC5tanMubWFwIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@ai-sdk/provider/dist/index.mjs\n");

/***/ })

};
;