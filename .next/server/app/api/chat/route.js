"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "app/api/chat/route";
exports.ids = ["app/api/chat/route"];
exports.modules = {

/***/ "mongodb":
/*!**************************!*\
  !*** external "mongodb" ***!
  \**************************/
/***/ ((module) => {

module.exports = require("mongodb");

/***/ }),

/***/ "next/dist/compiled/next-server/app-page.runtime.dev.js":
/*!*************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-page.runtime.dev.js" ***!
  \*************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/app-page.runtime.dev.js");

/***/ }),

/***/ "next/dist/compiled/next-server/app-route.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-route.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/app-route.runtime.dev.js");

/***/ }),

/***/ "fs":
/*!*********************!*\
  !*** external "fs" ***!
  \*********************/
/***/ ((module) => {

module.exports = require("fs");

/***/ }),

/***/ "os":
/*!*********************!*\
  !*** external "os" ***!
  \*********************/
/***/ ((module) => {

module.exports = require("os");

/***/ }),

/***/ "path":
/*!***********************!*\
  !*** external "path" ***!
  \***********************/
/***/ ((module) => {

module.exports = require("path");

/***/ }),

/***/ "(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fchat%2Froute&page=%2Fapi%2Fchat%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fchat%2Froute.ts&appDir=D%3A%5Cautonomous_hacks_2025%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=D%3A%5Cautonomous_hacks_2025&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!":
/*!************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fchat%2Froute&page=%2Fapi%2Fchat%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fchat%2Froute.ts&appDir=D%3A%5Cautonomous_hacks_2025%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=D%3A%5Cautonomous_hacks_2025&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D! ***!
  \************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   originalPathname: () => (/* binding */ originalPathname),\n/* harmony export */   patchFetch: () => (/* binding */ patchFetch),\n/* harmony export */   requestAsyncStorage: () => (/* binding */ requestAsyncStorage),\n/* harmony export */   routeModule: () => (/* binding */ routeModule),\n/* harmony export */   serverHooks: () => (/* binding */ serverHooks),\n/* harmony export */   staticGenerationAsyncStorage: () => (/* binding */ staticGenerationAsyncStorage)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/future/route-modules/app-route/module.compiled */ \"(rsc)/./node_modules/next/dist/server/future/route-modules/app-route/module.compiled.js\");\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/future/route-kind */ \"(rsc)/./node_modules/next/dist/server/future/route-kind.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/server/lib/patch-fetch */ \"(rsc)/./node_modules/next/dist/server/lib/patch-fetch.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var D_autonomous_hacks_2025_app_api_chat_route_ts__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./app/api/chat/route.ts */ \"(rsc)/./app/api/chat/route.ts\");\n\n\n\n\n// We inject the nextConfigOutput here so that we can use them in the route\n// module.\nconst nextConfigOutput = \"\"\nconst routeModule = new next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__.AppRouteRouteModule({\n    definition: {\n        kind: next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.APP_ROUTE,\n        page: \"/api/chat/route\",\n        pathname: \"/api/chat\",\n        filename: \"route\",\n        bundlePath: \"app/api/chat/route\"\n    },\n    resolvedPagePath: \"D:\\\\autonomous_hacks_2025\\\\app\\\\api\\\\chat\\\\route.ts\",\n    nextConfigOutput,\n    userland: D_autonomous_hacks_2025_app_api_chat_route_ts__WEBPACK_IMPORTED_MODULE_3__\n});\n// Pull out the exports that we need to expose from the module. This should\n// be eliminated when we've moved the other routes to the new format. These\n// are used to hook into the route.\nconst { requestAsyncStorage, staticGenerationAsyncStorage, serverHooks } = routeModule;\nconst originalPathname = \"/api/chat/route\";\nfunction patchFetch() {\n    return (0,next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__.patchFetch)({\n        serverHooks,\n        staticGenerationAsyncStorage\n    });\n}\n\n\n//# sourceMappingURL=app-route.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LWFwcC1sb2FkZXIuanM/bmFtZT1hcHAlMkZhcGklMkZjaGF0JTJGcm91dGUmcGFnZT0lMkZhcGklMkZjaGF0JTJGcm91dGUmYXBwUGF0aHM9JnBhZ2VQYXRoPXByaXZhdGUtbmV4dC1hcHAtZGlyJTJGYXBpJTJGY2hhdCUyRnJvdXRlLnRzJmFwcERpcj1EJTNBJTVDYXV0b25vbW91c19oYWNrc18yMDI1JTVDYXBwJnBhZ2VFeHRlbnNpb25zPXRzeCZwYWdlRXh0ZW5zaW9ucz10cyZwYWdlRXh0ZW5zaW9ucz1qc3gmcGFnZUV4dGVuc2lvbnM9anMmcm9vdERpcj1EJTNBJTVDYXV0b25vbW91c19oYWNrc18yMDI1JmlzRGV2PXRydWUmdHNjb25maWdQYXRoPXRzY29uZmlnLmpzb24mYmFzZVBhdGg9JmFzc2V0UHJlZml4PSZuZXh0Q29uZmlnT3V0cHV0PSZwcmVmZXJyZWRSZWdpb249Jm1pZGRsZXdhcmVDb25maWc9ZTMwJTNEISIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7QUFBc0c7QUFDdkM7QUFDYztBQUNHO0FBQ2hGO0FBQ0E7QUFDQTtBQUNBLHdCQUF3QixnSEFBbUI7QUFDM0M7QUFDQSxjQUFjLHlFQUFTO0FBQ3ZCO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQSxZQUFZO0FBQ1osQ0FBQztBQUNEO0FBQ0E7QUFDQTtBQUNBLFFBQVEsaUVBQWlFO0FBQ3pFO0FBQ0E7QUFDQSxXQUFXLDRFQUFXO0FBQ3RCO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDdUg7O0FBRXZIIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vZXNnLWNpdHktYXBwLz83NjhkIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEFwcFJvdXRlUm91dGVNb2R1bGUgfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9mdXR1cmUvcm91dGUtbW9kdWxlcy9hcHAtcm91dGUvbW9kdWxlLmNvbXBpbGVkXCI7XG5pbXBvcnQgeyBSb3V0ZUtpbmQgfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9mdXR1cmUvcm91dGUta2luZFwiO1xuaW1wb3J0IHsgcGF0Y2hGZXRjaCBhcyBfcGF0Y2hGZXRjaCB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL2xpYi9wYXRjaC1mZXRjaFwiO1xuaW1wb3J0ICogYXMgdXNlcmxhbmQgZnJvbSBcIkQ6XFxcXGF1dG9ub21vdXNfaGFja3NfMjAyNVxcXFxhcHBcXFxcYXBpXFxcXGNoYXRcXFxccm91dGUudHNcIjtcbi8vIFdlIGluamVjdCB0aGUgbmV4dENvbmZpZ091dHB1dCBoZXJlIHNvIHRoYXQgd2UgY2FuIHVzZSB0aGVtIGluIHRoZSByb3V0ZVxuLy8gbW9kdWxlLlxuY29uc3QgbmV4dENvbmZpZ091dHB1dCA9IFwiXCJcbmNvbnN0IHJvdXRlTW9kdWxlID0gbmV3IEFwcFJvdXRlUm91dGVNb2R1bGUoe1xuICAgIGRlZmluaXRpb246IHtcbiAgICAgICAga2luZDogUm91dGVLaW5kLkFQUF9ST1VURSxcbiAgICAgICAgcGFnZTogXCIvYXBpL2NoYXQvcm91dGVcIixcbiAgICAgICAgcGF0aG5hbWU6IFwiL2FwaS9jaGF0XCIsXG4gICAgICAgIGZpbGVuYW1lOiBcInJvdXRlXCIsXG4gICAgICAgIGJ1bmRsZVBhdGg6IFwiYXBwL2FwaS9jaGF0L3JvdXRlXCJcbiAgICB9LFxuICAgIHJlc29sdmVkUGFnZVBhdGg6IFwiRDpcXFxcYXV0b25vbW91c19oYWNrc18yMDI1XFxcXGFwcFxcXFxhcGlcXFxcY2hhdFxcXFxyb3V0ZS50c1wiLFxuICAgIG5leHRDb25maWdPdXRwdXQsXG4gICAgdXNlcmxhbmRcbn0pO1xuLy8gUHVsbCBvdXQgdGhlIGV4cG9ydHMgdGhhdCB3ZSBuZWVkIHRvIGV4cG9zZSBmcm9tIHRoZSBtb2R1bGUuIFRoaXMgc2hvdWxkXG4vLyBiZSBlbGltaW5hdGVkIHdoZW4gd2UndmUgbW92ZWQgdGhlIG90aGVyIHJvdXRlcyB0byB0aGUgbmV3IGZvcm1hdC4gVGhlc2Vcbi8vIGFyZSB1c2VkIHRvIGhvb2sgaW50byB0aGUgcm91dGUuXG5jb25zdCB7IHJlcXVlc3RBc3luY1N0b3JhZ2UsIHN0YXRpY0dlbmVyYXRpb25Bc3luY1N0b3JhZ2UsIHNlcnZlckhvb2tzIH0gPSByb3V0ZU1vZHVsZTtcbmNvbnN0IG9yaWdpbmFsUGF0aG5hbWUgPSBcIi9hcGkvY2hhdC9yb3V0ZVwiO1xuZnVuY3Rpb24gcGF0Y2hGZXRjaCgpIHtcbiAgICByZXR1cm4gX3BhdGNoRmV0Y2goe1xuICAgICAgICBzZXJ2ZXJIb29rcyxcbiAgICAgICAgc3RhdGljR2VuZXJhdGlvbkFzeW5jU3RvcmFnZVxuICAgIH0pO1xufVxuZXhwb3J0IHsgcm91dGVNb2R1bGUsIHJlcXVlc3RBc3luY1N0b3JhZ2UsIHN0YXRpY0dlbmVyYXRpb25Bc3luY1N0b3JhZ2UsIHNlcnZlckhvb2tzLCBvcmlnaW5hbFBhdGhuYW1lLCBwYXRjaEZldGNoLCAgfTtcblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9YXBwLXJvdXRlLmpzLm1hcCJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fchat%2Froute&page=%2Fapi%2Fchat%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fchat%2Froute.ts&appDir=D%3A%5Cautonomous_hacks_2025%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=D%3A%5Cautonomous_hacks_2025&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!\n");

/***/ }),

/***/ "(rsc)/./app/api/chat/route.ts":
/*!*******************************!*\
  !*** ./app/api/chat/route.ts ***!
  \*******************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   POST: () => (/* binding */ POST)\n/* harmony export */ });\n/* harmony import */ var ai__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ai */ \"(rsc)/./node_modules/ai/dist/index.mjs\");\n/* harmony import */ var _ai_sdk_openai__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @ai-sdk/openai */ \"(rsc)/./node_modules/@ai-sdk/openai/dist/index.mjs\");\n/* harmony import */ var _lib_mongodbClient__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @/lib/mongodbClient */ \"(rsc)/./lib/mongodbClient.ts\");\n\n\n\nasync function POST(req) {\n    try {\n        const { messages, cityName = \"Mumbai\" } = await req.json();\n        // Get real-time city data for context\n        const db = await (0,_lib_mongodbClient__WEBPACK_IMPORTED_MODULE_0__.getDatabase)();\n        let metrics = null;\n        let recommendations = [];\n        let alerts = [];\n        if (db) {\n            metrics = await db.collection(\"esgmetrics\").findOne({\n                cityName\n            });\n            recommendations = await db.collection(\"recommendations\").find({\n                cityName,\n                status: \"pending\"\n            }).limit(5).toArray();\n            alerts = await db.collection(\"esgalerts\").find({\n                cityName,\n                active: true\n            }).limit(3).toArray();\n        } else {\n            // Use fallback defaults if DB unavailable\n            metrics = null;\n            recommendations = [];\n            alerts = [];\n        }\n        // Build context for AI\n        const contextData = {\n            cityName,\n            esgScore: metrics?.overall || 72,\n            environment: {\n                aqi: metrics?.environment?.aqi || 156,\n                waterQuality: metrics?.environment?.waterQuality || 75,\n                wasteRecycling: metrics?.environment?.wasteRecycling || 45\n            },\n            social: {\n                healthcare: metrics?.social?.healthcare || 71,\n                education: metrics?.social?.education || 82,\n                safety: metrics?.social?.safety || 79\n            },\n            governance: {\n                transparency: metrics?.governance?.transparency || 78,\n                compliance: metrics?.governance?.compliance || 82\n            },\n            topRecommendations: recommendations.map((r)=>({\n                    title: r.title,\n                    priority: r.priority,\n                    impact: r.estimatedImpact\n                })),\n            activeAlerts: alerts.map((a)=>({\n                    message: a.message,\n                    severity: a.severity\n                }))\n        };\n        const systemPrompt = `You are an AI sustainability assistant for ${cityName}'s ESG platform. \r\n\r\nCurrent City Context:\r\n- ESG Score: ${contextData.esgScore}/100\r\n- AQI Level: ${contextData.environment.aqi} (Target: <100)\r\n- Water Quality: ${contextData.environment.waterQuality}%\r\n- Waste Recycling: ${contextData.environment.wasteRecycling}%\r\n- Healthcare Access: ${contextData.social.healthcare}%\r\n- Education Score: ${contextData.social.education}%\r\n- Safety Index: ${contextData.social.safety}%\r\n\r\nActive Alerts:\r\n${contextData.activeAlerts.map((a)=>`- [${a.severity}] ${a.message}`).join(\"\\n\")}\r\n\r\nTop Recommendations:\r\n${contextData.topRecommendations.map((r)=>`- [${r.priority}] ${r.title} (Impact: +${r.impact})`).join(\"\\n\")}\r\n\r\nYour role:\r\n1. Provide data-driven insights based on real city metrics\r\n2. Explain ESG concepts in simple language for non-technical users\r\n3. Suggest actionable interventions with clear ROI\r\n4. Answer questions about pollution, water, energy, social issues\r\n5. Be conversational, helpful, and focused on sustainability\r\n\r\nKeep responses concise (2-3 sentences) unless asked for detailed analysis.`;\n        const result = await (0,ai__WEBPACK_IMPORTED_MODULE_1__.streamText)({\n            model: (0,_ai_sdk_openai__WEBPACK_IMPORTED_MODULE_2__.openai)(\"gpt-4-turbo-preview\"),\n            messages: [\n                {\n                    role: \"system\",\n                    content: systemPrompt\n                },\n                ...messages\n            ],\n            temperature: 0.7\n        });\n        return result.toTextStreamResponse();\n    } catch (error) {\n        console.error(\"OpenAI API Error:\", error);\n        // Fallback to intelligent mock responses if OpenAI fails\n        if (error.message?.includes(\"API key\")) {\n            return new Response(JSON.stringify({\n                error: \"OpenAI API key not configured. Add OPENAI_API_KEY to .env.local\",\n                fallback: true,\n                message: \"I can see your city's ESG score is 72/100. The main issues are high AQI (156) in Zone-1 and low waste recycling (45%). I recommend deploying electric buses and improving waste segregation campaigns.\"\n            }), {\n                status: 200,\n                headers: {\n                    \"Content-Type\": \"application/json\"\n                }\n            });\n        }\n        return new Response(JSON.stringify({\n            error: error.message\n        }), {\n            status: 500,\n            headers: {\n                \"Content-Type\": \"application/json\"\n            }\n        });\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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RUFBRUYsRUFBRUMsS0FBSyxDQUFDLFdBQVcsRUFBRUQsRUFBRUcsTUFBTSxDQUFDLENBQUMsQ0FBQyxFQUFFTyxJQUFJLENBQUMsTUFBTTs7Ozs7Ozs7OzBFQVNsQyxDQUFDO1FBRXZFLE1BQU1DLFNBQVMsTUFBTTlDLDhDQUFVQSxDQUFDO1lBQzlCK0MsT0FBTzlDLHNEQUFNQSxDQUFDO1lBQ2RJLFVBQVU7Z0JBQ1I7b0JBQUUyQyxNQUFNO29CQUFVQyxTQUFTTDtnQkFBYTttQkFDckN2QzthQUNKO1lBQ0Q2QyxhQUFhO1FBQ2Y7UUFFQSxPQUFPSixPQUFPSyxvQkFBb0I7SUFFcEMsRUFBRSxPQUFPQyxPQUFZO1FBQ25CQyxRQUFRRCxLQUFLLENBQUMscUJBQXFCQTtRQUVuQyx5REFBeUQ7UUFDekQsSUFBSUEsTUFBTVYsT0FBTyxFQUFFWSxTQUFTLFlBQVk7WUFDdEMsT0FBTyxJQUFJQyxTQUNUQyxLQUFLQyxTQUFTLENBQUM7Z0JBQ2JMLE9BQU87Z0JBQ1BNLFVBQVU7Z0JBQ1ZoQixTQUFTO1lBQ1gsSUFDQTtnQkFBRTNCLFFBQVE7Z0JBQUs0QyxTQUFTO29CQUFFLGdCQUFnQjtnQkFBbUI7WUFBRTtRQUVuRTtRQUVBLE9BQU8sSUFBSUosU0FBU0MsS0FBS0MsU0FBUyxDQUFDO1lBQUVMLE9BQU9BLE1BQU1WLE9BQU87UUFBQyxJQUFJO1lBQzVEM0IsUUFBUTtZQUNSNEMsU0FBUztnQkFBRSxnQkFBZ0I7WUFBbUI7UUFDaEQ7SUFDRjtBQUNGIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vZXNnLWNpdHktYXBwLy4vYXBwL2FwaS9jaGF0L3JvdXRlLnRzP2RlNDYiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgTmV4dFJlcXVlc3QgfSBmcm9tICduZXh0L3NlcnZlcidcclxuaW1wb3J0IHsgc3RyZWFtVGV4dCB9IGZyb20gJ2FpJ1xyXG5pbXBvcnQgeyBvcGVuYWkgfSBmcm9tICdAYWktc2RrL29wZW5haSdcclxuaW1wb3J0IHsgZ2V0RGF0YWJhc2UgfSBmcm9tICdAL2xpYi9tb25nb2RiQ2xpZW50J1xyXG5cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIFBPU1QocmVxOiBOZXh0UmVxdWVzdCkge1xyXG4gIHRyeSB7XHJcbiAgICBjb25zdCB7IG1lc3NhZ2VzLCBjaXR5TmFtZSA9ICdNdW1iYWknIH0gPSBhd2FpdCByZXEuanNvbigpXHJcblxyXG4gICAgLy8gR2V0IHJlYWwtdGltZSBjaXR5IGRhdGEgZm9yIGNvbnRleHRcclxuICAgIGNvbnN0IGRiID0gYXdhaXQgZ2V0RGF0YWJhc2UoKVxyXG5cclxuICAgIGxldCBtZXRyaWNzOiBhbnkgPSBudWxsXHJcbiAgICBsZXQgcmVjb21tZW5kYXRpb25zOiBhbnlbXSA9IFtdXHJcbiAgICBsZXQgYWxlcnRzOiBhbnlbXSA9IFtdXHJcblxyXG4gICAgaWYgKGRiKSB7XHJcbiAgICAgIG1ldHJpY3MgPSBhd2FpdCBkYi5jb2xsZWN0aW9uKCdlc2dtZXRyaWNzJykuZmluZE9uZSh7IGNpdHlOYW1lIH0pXHJcbiAgICAgIHJlY29tbWVuZGF0aW9ucyA9IGF3YWl0IGRiLmNvbGxlY3Rpb24oJ3JlY29tbWVuZGF0aW9ucycpXHJcbiAgICAgICAgLmZpbmQoeyBjaXR5TmFtZSwgc3RhdHVzOiAncGVuZGluZycgfSlcclxuICAgICAgICAubGltaXQoNSlcclxuICAgICAgICAudG9BcnJheSgpXHJcbiAgICAgIGFsZXJ0cyA9IGF3YWl0IGRiLmNvbGxlY3Rpb24oJ2VzZ2FsZXJ0cycpXHJcbiAgICAgICAgLmZpbmQoeyBjaXR5TmFtZSwgYWN0aXZlOiB0cnVlIH0pXHJcbiAgICAgICAgLmxpbWl0KDMpXHJcbiAgICAgICAgLnRvQXJyYXkoKVxyXG4gICAgfSBlbHNlIHtcclxuICAgICAgLy8gVXNlIGZhbGxiYWNrIGRlZmF1bHRzIGlmIERCIHVuYXZhaWxhYmxlXHJcbiAgICAgIG1ldHJpY3MgPSBudWxsXHJcbiAgICAgIHJlY29tbWVuZGF0aW9ucyA9IFtdXHJcbiAgICAgIGFsZXJ0cyA9IFtdXHJcbiAgICB9XHJcblxyXG4gICAgLy8gQnVpbGQgY29udGV4dCBmb3IgQUlcclxuICAgIGNvbnN0IGNvbnRleHREYXRhID0ge1xyXG4gICAgICBjaXR5TmFtZSxcclxuICAgICAgZXNnU2NvcmU6IG1ldHJpY3M/Lm92ZXJhbGwgfHwgNzIsXHJcbiAgICAgIGVudmlyb25tZW50OiB7XHJcbiAgICAgICAgYXFpOiBtZXRyaWNzPy5lbnZpcm9ubWVudD8uYXFpIHx8IDE1NixcclxuICAgICAgICB3YXRlclF1YWxpdHk6IG1ldHJpY3M/LmVudmlyb25tZW50Py53YXRlclF1YWxpdHkgfHwgNzUsXHJcbiAgICAgICAgd2FzdGVSZWN5Y2xpbmc6IG1ldHJpY3M/LmVudmlyb25tZW50Py53YXN0ZVJlY3ljbGluZyB8fCA0NVxyXG4gICAgICB9LFxyXG4gICAgICBzb2NpYWw6IHtcclxuICAgICAgICBoZWFsdGhjYXJlOiBtZXRyaWNzPy5zb2NpYWw/LmhlYWx0aGNhcmUgfHwgNzEsXHJcbiAgICAgICAgZWR1Y2F0aW9uOiBtZXRyaWNzPy5zb2NpYWw/LmVkdWNhdGlvbiB8fCA4MixcclxuICAgICAgICBzYWZldHk6IG1ldHJpY3M/LnNvY2lhbD8uc2FmZXR5IHx8IDc5XHJcbiAgICAgIH0sXHJcbiAgICAgIGdvdmVybmFuY2U6IHtcclxuICAgICAgICB0cmFuc3BhcmVuY3k6IG1ldHJpY3M/LmdvdmVybmFuY2U/LnRyYW5zcGFyZW5jeSB8fCA3OCxcclxuICAgICAgICBjb21wbGlhbmNlOiBtZXRyaWNzPy5nb3Zlcm5hbmNlPy5jb21wbGlhbmNlIHx8IDgyXHJcbiAgICAgIH0sXHJcbiAgICAgIHRvcFJlY29tbWVuZGF0aW9uczogcmVjb21tZW5kYXRpb25zLm1hcChyID0+ICh7XHJcbiAgICAgICAgdGl0bGU6IHIudGl0bGUsXHJcbiAgICAgICAgcHJpb3JpdHk6IHIucHJpb3JpdHksXHJcbiAgICAgICAgaW1wYWN0OiByLmVzdGltYXRlZEltcGFjdFxyXG4gICAgICB9KSksXHJcbiAgICAgIGFjdGl2ZUFsZXJ0czogYWxlcnRzLm1hcChhID0+ICh7XHJcbiAgICAgICAgbWVzc2FnZTogYS5tZXNzYWdlLFxyXG4gICAgICAgIHNldmVyaXR5OiBhLnNldmVyaXR5XHJcbiAgICAgIH0pKVxyXG4gICAgfVxyXG5cclxuICAgIGNvbnN0IHN5c3RlbVByb21wdCA9IGBZb3UgYXJlIGFuIEFJIHN1c3RhaW5hYmlsaXR5IGFzc2lzdGFudCBmb3IgJHtjaXR5TmFtZX0ncyBFU0cgcGxhdGZvcm0uIFxyXG5cclxuQ3VycmVudCBDaXR5IENvbnRleHQ6XHJcbi0gRVNHIFNjb3JlOiAke2NvbnRleHREYXRhLmVzZ1Njb3JlfS8xMDBcclxuLSBBUUkgTGV2ZWw6ICR7Y29udGV4dERhdGEuZW52aXJvbm1lbnQuYXFpfSAoVGFyZ2V0OiA8MTAwKVxyXG4tIFdhdGVyIFF1YWxpdHk6ICR7Y29udGV4dERhdGEuZW52aXJvbm1lbnQud2F0ZXJRdWFsaXR5fSVcclxuLSBXYXN0ZSBSZWN5Y2xpbmc6ICR7Y29udGV4dERhdGEuZW52aXJvbm1lbnQud2FzdGVSZWN5Y2xpbmd9JVxyXG4tIEhlYWx0aGNhcmUgQWNjZXNzOiAke2NvbnRleHREYXRhLnNvY2lhbC5oZWFsdGhjYXJlfSVcclxuLSBFZHVjYXRpb24gU2NvcmU6ICR7Y29udGV4dERhdGEuc29jaWFsLmVkdWNhdGlvbn0lXHJcbi0gU2FmZXR5IEluZGV4OiAke2NvbnRleHREYXRhLnNvY2lhbC5zYWZldHl9JVxyXG5cclxuQWN0aXZlIEFsZXJ0czpcclxuJHtjb250ZXh0RGF0YS5hY3RpdmVBbGVydHMubWFwKGEgPT4gYC0gWyR7YS5zZXZlcml0eX1dICR7YS5tZXNzYWdlfWApLmpvaW4oJ1xcbicpfVxyXG5cclxuVG9wIFJlY29tbWVuZGF0aW9uczpcclxuJHtjb250ZXh0RGF0YS50b3BSZWNvbW1lbmRhdGlvbnMubWFwKHIgPT4gYC0gWyR7ci5wcmlvcml0eX1dICR7ci50aXRsZX0gKEltcGFjdDogKyR7ci5pbXBhY3R9KWApLmpvaW4oJ1xcbicpfVxyXG5cclxuWW91ciByb2xlOlxyXG4xLiBQcm92aWRlIGRhdGEtZHJpdmVuIGluc2lnaHRzIGJhc2VkIG9uIHJlYWwgY2l0eSBtZXRyaWNzXHJcbjIuIEV4cGxhaW4gRVNHIGNvbmNlcHRzIGluIHNpbXBsZSBsYW5ndWFnZSBmb3Igbm9uLXRlY2huaWNhbCB1c2Vyc1xyXG4zLiBTdWdnZXN0IGFjdGlvbmFibGUgaW50ZXJ2ZW50aW9ucyB3aXRoIGNsZWFyIFJPSVxyXG40LiBBbnN3ZXIgcXVlc3Rpb25zIGFib3V0IHBvbGx1dGlvbiwgd2F0ZXIsIGVuZXJneSwgc29jaWFsIGlzc3Vlc1xyXG41LiBCZSBjb252ZXJzYXRpb25hbCwgaGVscGZ1bCwgYW5kIGZvY3VzZWQgb24gc3VzdGFpbmFiaWxpdHlcclxuXHJcbktlZXAgcmVzcG9uc2VzIGNvbmNpc2UgKDItMyBzZW50ZW5jZXMpIHVubGVzcyBhc2tlZCBmb3IgZGV0YWlsZWQgYW5hbHlzaXMuYFxyXG5cclxuICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHN0cmVhbVRleHQoe1xyXG4gICAgICBtb2RlbDogb3BlbmFpKCdncHQtNC10dXJiby1wcmV2aWV3JyksXHJcbiAgICAgIG1lc3NhZ2VzOiBbXHJcbiAgICAgICAgeyByb2xlOiAnc3lzdGVtJywgY29udGVudDogc3lzdGVtUHJvbXB0IH0sXHJcbiAgICAgICAgLi4ubWVzc2FnZXNcclxuICAgICAgXSxcclxuICAgICAgdGVtcGVyYXR1cmU6IDAuNyxcclxuICAgIH0pXHJcblxyXG4gICAgcmV0dXJuIHJlc3VsdC50b1RleHRTdHJlYW1SZXNwb25zZSgpXHJcblxyXG4gIH0gY2F0Y2ggKGVycm9yOiBhbnkpIHtcclxuICAgIGNvbnNvbGUuZXJyb3IoJ09wZW5BSSBBUEkgRXJyb3I6JywgZXJyb3IpXHJcbiAgICBcclxuICAgIC8vIEZhbGxiYWNrIHRvIGludGVsbGlnZW50IG1vY2sgcmVzcG9uc2VzIGlmIE9wZW5BSSBmYWlsc1xyXG4gICAgaWYgKGVycm9yLm1lc3NhZ2U/LmluY2x1ZGVzKCdBUEkga2V5JykpIHtcclxuICAgICAgcmV0dXJuIG5ldyBSZXNwb25zZShcclxuICAgICAgICBKU09OLnN0cmluZ2lmeSh7IFxyXG4gICAgICAgICAgZXJyb3I6ICdPcGVuQUkgQVBJIGtleSBub3QgY29uZmlndXJlZC4gQWRkIE9QRU5BSV9BUElfS0VZIHRvIC5lbnYubG9jYWwnLFxyXG4gICAgICAgICAgZmFsbGJhY2s6IHRydWUsXHJcbiAgICAgICAgICBtZXNzYWdlOiBcIkkgY2FuIHNlZSB5b3VyIGNpdHkncyBFU0cgc2NvcmUgaXMgNzIvMTAwLiBUaGUgbWFpbiBpc3N1ZXMgYXJlIGhpZ2ggQVFJICgxNTYpIGluIFpvbmUtMSBhbmQgbG93IHdhc3RlIHJlY3ljbGluZyAoNDUlKS4gSSByZWNvbW1lbmQgZGVwbG95aW5nIGVsZWN0cmljIGJ1c2VzIGFuZCBpbXByb3Zpbmcgd2FzdGUgc2VncmVnYXRpb24gY2FtcGFpZ25zLlwiXHJcbiAgICAgICAgfSksIFxyXG4gICAgICAgIHsgc3RhdHVzOiAyMDAsIGhlYWRlcnM6IHsgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJyB9IH1cclxuICAgICAgKVxyXG4gICAgfVxyXG5cclxuICAgIHJldHVybiBuZXcgUmVzcG9uc2UoSlNPTi5zdHJpbmdpZnkoeyBlcnJvcjogZXJyb3IubWVzc2FnZSB9KSwgeyBcclxuICAgICAgc3RhdHVzOiA1MDAsXHJcbiAgICAgIGhlYWRlcnM6IHsgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJyB9XHJcbiAgICB9KVxyXG4gIH1cclxufVxyXG4iXSwibmFtZXMiOlsic3RyZWFtVGV4dCIsIm9wZW5haSIsImdldERhdGFiYXNlIiwiUE9TVCIsInJlcSIsIm1lc3NhZ2VzIiwiY2l0eU5hbWUiLCJqc29uIiwiZGIiLCJtZXRyaWNzIiwicmVjb21tZW5kYXRpb25zIiwiYWxlcnRzIiwiY29sbGVjdGlvbiIsImZpbmRPbmUiLCJmaW5kIiwic3RhdHVzIiwibGltaXQiLCJ0b0FycmF5IiwiYWN0aXZlIiwiY29udGV4dERhdGEiLCJlc2dTY29yZSIsIm92ZXJhbGwiLCJlbnZpcm9ubWVudCIsImFxaSIsIndhdGVyUXVhbGl0eSIsIndhc3RlUmVjeWNsaW5nIiwic29jaWFsIiwiaGVhbHRoY2FyZSIsImVkdWNhdGlvbiIsInNhZmV0eSIsImdvdmVybmFuY2UiLCJ0cmFuc3BhcmVuY3kiLCJjb21wbGlhbmNlIiwidG9wUmVjb21tZW5kYXRpb25zIiwibWFwIiwiciIsInRpdGxlIiwicHJpb3JpdHkiLCJpbXBhY3QiLCJlc3RpbWF0ZWRJbXBhY3QiLCJhY3RpdmVBbGVydHMiLCJhIiwibWVzc2FnZSIsInNldmVyaXR5Iiwic3lzdGVtUHJvbXB0Iiwiam9pbiIsInJlc3VsdCIsIm1vZGVsIiwicm9sZSIsImNvbnRlbnQiLCJ0ZW1wZXJhdHVyZSIsInRvVGV4dFN0cmVhbVJlc3BvbnNlIiwiZXJyb3IiLCJjb25zb2xlIiwiaW5jbHVkZXMiLCJSZXNwb25zZSIsIkpTT04iLCJzdHJpbmdpZnkiLCJmYWxsYmFjayIsImhlYWRlcnMiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./app/api/chat/route.ts\n");

/***/ }),

/***/ "(rsc)/./lib/mongodbClient.ts":
/*!******************************!*\
  !*** ./lib/mongodbClient.ts ***!
  \******************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   getDatabase: () => (/* binding */ getDatabase)\n/* harmony export */ });\n// Lazy-loaded MongoDB client to avoid build-time imports\nlet _MongoClient = null;\nlet _clientPromise = null;\nasync function loadMongoClient() {\n    if (_MongoClient) return _MongoClient;\n    try {\n        const mongodb = await Promise.resolve(/*! import() */).then(__webpack_require__.t.bind(__webpack_require__, /*! mongodb */ \"mongodb\", 23));\n        _MongoClient = mongodb.MongoClient;\n        return _MongoClient;\n    } catch (error) {\n        console.error(\"Failed to load MongoDB module:\", error);\n        return null;\n    }\n}\nasync function getClientPromise() {\n    if (_clientPromise) return _clientPromise;\n    const uri = process.env.MONGODB_URI || \"mongodb://localhost:27017\";\n    const MongoClient = await loadMongoClient();\n    if (!MongoClient) {\n        _clientPromise = Promise.resolve(null);\n        return _clientPromise;\n    }\n    if (true) {\n        let globalWithMongo = global;\n        if (!globalWithMongo._mongoClientPromise) {\n            const client = new MongoClient(uri, {});\n            globalWithMongo._mongoClientPromise = client.connect().catch((err)=>{\n                console.warn(\"MongoDB connection failed:\", err.message);\n                return null;\n            });\n        }\n        _clientPromise = globalWithMongo._mongoClientPromise || Promise.resolve(null);\n    } else {}\n    return _clientPromise;\n}\nasync function getDatabase() {\n    try {\n        const client = await getClientPromise();\n        if (!client) return null;\n        return client.db(process.env.MONGODB_DB || \"test\");\n    } catch  {\n        return null;\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9saWIvbW9uZ29kYkNsaWVudC50cyIsIm1hcHBpbmdzIjoiOzs7O0FBQUEseURBQXlEO0FBR3pELElBQUlBLGVBQW9CO0FBQ3hCLElBQUlDLGlCQUFzQztBQUUxQyxlQUFlQztJQUNiLElBQUlGLGNBQWMsT0FBT0E7SUFFekIsSUFBSTtRQUNGLE1BQU1HLFVBQVUsTUFBTSxvSEFBTztRQUM3QkgsZUFBZUcsUUFBUUMsV0FBVztRQUNsQyxPQUFPSjtJQUNULEVBQUUsT0FBT0ssT0FBTztRQUNkQyxRQUFRRCxLQUFLLENBQUMsa0NBQWtDQTtRQUNoRCxPQUFPO0lBQ1Q7QUFDRjtBQUVBLGVBQWVFO0lBQ2IsSUFBSU4sZ0JBQWdCLE9BQU9BO0lBRTNCLE1BQU1PLE1BQU1DLFFBQVFDLEdBQUcsQ0FBQ0MsV0FBVyxJQUFJO0lBQ3ZDLE1BQU1QLGNBQWMsTUFBTUY7SUFFMUIsSUFBSSxDQUFDRSxhQUFhO1FBQ2hCSCxpQkFBaUJXLFFBQVFDLE9BQU8sQ0FBQztRQUNqQyxPQUFPWjtJQUNUO0lBRUEsSUFBSVEsSUFBeUIsRUFBZTtRQUMxQyxJQUFJSyxrQkFBa0JDO1FBSXRCLElBQUksQ0FBQ0QsZ0JBQWdCRSxtQkFBbUIsRUFBRTtZQUN4QyxNQUFNQyxTQUFTLElBQUliLFlBQVlJLEtBQUssQ0FBQztZQUNyQ00sZ0JBQWdCRSxtQkFBbUIsR0FBR0MsT0FBT0MsT0FBTyxHQUNqREMsS0FBSyxDQUFDLENBQUNDO2dCQUNOZCxRQUFRZSxJQUFJLENBQUMsOEJBQThCRCxJQUFJRSxPQUFPO2dCQUN0RCxPQUFPO1lBQ1Q7UUFDSjtRQUNBckIsaUJBQWlCYSxnQkFBZ0JFLG1CQUFtQixJQUFJSixRQUFRQyxPQUFPLENBQUM7SUFDMUUsT0FBTyxFQU1OO0lBRUQsT0FBT1o7QUFDVDtBQUVPLGVBQWVzQjtJQUNwQixJQUFJO1FBQ0YsTUFBTU4sU0FBUyxNQUFNVjtRQUNyQixJQUFJLENBQUNVLFFBQVEsT0FBTztRQUNwQixPQUFPQSxPQUFPTyxFQUFFLENBQUNmLFFBQVFDLEdBQUcsQ0FBQ2UsVUFBVSxJQUFJO0lBQzdDLEVBQUUsT0FBTTtRQUNOLE9BQU87SUFDVDtBQUNGIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vZXNnLWNpdHktYXBwLy4vbGliL21vbmdvZGJDbGllbnQudHM/ZTM1ZSJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBMYXp5LWxvYWRlZCBNb25nb0RCIGNsaWVudCB0byBhdm9pZCBidWlsZC10aW1lIGltcG9ydHNcclxuaW1wb3J0IHR5cGUgeyBEYiB9IGZyb20gJ21vbmdvZGInXHJcblxyXG5sZXQgX01vbmdvQ2xpZW50OiBhbnkgPSBudWxsXHJcbmxldCBfY2xpZW50UHJvbWlzZTogUHJvbWlzZTxhbnk+IHwgbnVsbCA9IG51bGxcclxuXHJcbmFzeW5jIGZ1bmN0aW9uIGxvYWRNb25nb0NsaWVudCgpIHtcclxuICBpZiAoX01vbmdvQ2xpZW50KSByZXR1cm4gX01vbmdvQ2xpZW50XHJcbiAgXHJcbiAgdHJ5IHtcclxuICAgIGNvbnN0IG1vbmdvZGIgPSBhd2FpdCBpbXBvcnQoJ21vbmdvZGInKVxyXG4gICAgX01vbmdvQ2xpZW50ID0gbW9uZ29kYi5Nb25nb0NsaWVudFxyXG4gICAgcmV0dXJuIF9Nb25nb0NsaWVudFxyXG4gIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICBjb25zb2xlLmVycm9yKCdGYWlsZWQgdG8gbG9hZCBNb25nb0RCIG1vZHVsZTonLCBlcnJvcilcclxuICAgIHJldHVybiBudWxsXHJcbiAgfVxyXG59XHJcblxyXG5hc3luYyBmdW5jdGlvbiBnZXRDbGllbnRQcm9taXNlKCk6IFByb21pc2U8YW55IHwgbnVsbD4ge1xyXG4gIGlmIChfY2xpZW50UHJvbWlzZSkgcmV0dXJuIF9jbGllbnRQcm9taXNlXHJcblxyXG4gIGNvbnN0IHVyaSA9IHByb2Nlc3MuZW52Lk1PTkdPREJfVVJJIHx8ICdtb25nb2RiOi8vbG9jYWxob3N0OjI3MDE3J1xyXG4gIGNvbnN0IE1vbmdvQ2xpZW50ID0gYXdhaXQgbG9hZE1vbmdvQ2xpZW50KClcclxuICBcclxuICBpZiAoIU1vbmdvQ2xpZW50KSB7XHJcbiAgICBfY2xpZW50UHJvbWlzZSA9IFByb21pc2UucmVzb2x2ZShudWxsKVxyXG4gICAgcmV0dXJuIF9jbGllbnRQcm9taXNlXHJcbiAgfVxyXG5cclxuICBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgPT09ICdkZXZlbG9wbWVudCcpIHtcclxuICAgIGxldCBnbG9iYWxXaXRoTW9uZ28gPSBnbG9iYWwgYXMgdHlwZW9mIGdsb2JhbFRoaXMgJiB7XHJcbiAgICAgIF9tb25nb0NsaWVudFByb21pc2U/OiBQcm9taXNlPGFueT5cclxuICAgIH1cclxuXHJcbiAgICBpZiAoIWdsb2JhbFdpdGhNb25nby5fbW9uZ29DbGllbnRQcm9taXNlKSB7XHJcbiAgICAgIGNvbnN0IGNsaWVudCA9IG5ldyBNb25nb0NsaWVudCh1cmksIHt9KVxyXG4gICAgICBnbG9iYWxXaXRoTW9uZ28uX21vbmdvQ2xpZW50UHJvbWlzZSA9IGNsaWVudC5jb25uZWN0KClcclxuICAgICAgICAuY2F0Y2goKGVycjogRXJyb3IpID0+IHtcclxuICAgICAgICAgIGNvbnNvbGUud2FybignTW9uZ29EQiBjb25uZWN0aW9uIGZhaWxlZDonLCBlcnIubWVzc2FnZSlcclxuICAgICAgICAgIHJldHVybiBudWxsXHJcbiAgICAgICAgfSlcclxuICAgIH1cclxuICAgIF9jbGllbnRQcm9taXNlID0gZ2xvYmFsV2l0aE1vbmdvLl9tb25nb0NsaWVudFByb21pc2UgfHwgUHJvbWlzZS5yZXNvbHZlKG51bGwpXHJcbiAgfSBlbHNlIHtcclxuICAgIGNvbnN0IGNsaWVudCA9IG5ldyBNb25nb0NsaWVudCh1cmksIHt9KVxyXG4gICAgX2NsaWVudFByb21pc2UgPSBjbGllbnQuY29ubmVjdCgpLmNhdGNoKChlcnI6IEVycm9yKSA9PiB7XHJcbiAgICAgIGNvbnNvbGUud2FybignTW9uZ29EQiBjb25uZWN0aW9uIGZhaWxlZDonLCBlcnIubWVzc2FnZSlcclxuICAgICAgcmV0dXJuIG51bGxcclxuICAgIH0pXHJcbiAgfVxyXG5cclxuICByZXR1cm4gX2NsaWVudFByb21pc2VcclxufVxyXG5cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGdldERhdGFiYXNlKCk6IFByb21pc2U8RGIgfCBudWxsPiB7XHJcbiAgdHJ5IHtcclxuICAgIGNvbnN0IGNsaWVudCA9IGF3YWl0IGdldENsaWVudFByb21pc2UoKVxyXG4gICAgaWYgKCFjbGllbnQpIHJldHVybiBudWxsXHJcbiAgICByZXR1cm4gY2xpZW50LmRiKHByb2Nlc3MuZW52Lk1PTkdPREJfREIgfHwgJ3Rlc3QnKVxyXG4gIH0gY2F0Y2gge1xyXG4gICAgcmV0dXJuIG51bGxcclxuICB9XHJcbn1cclxuIl0sIm5hbWVzIjpbIl9Nb25nb0NsaWVudCIsIl9jbGllbnRQcm9taXNlIiwibG9hZE1vbmdvQ2xpZW50IiwibW9uZ29kYiIsIk1vbmdvQ2xpZW50IiwiZXJyb3IiLCJjb25zb2xlIiwiZ2V0Q2xpZW50UHJvbWlzZSIsInVyaSIsInByb2Nlc3MiLCJlbnYiLCJNT05HT0RCX1VSSSIsIlByb21pc2UiLCJyZXNvbHZlIiwiZ2xvYmFsV2l0aE1vbmdvIiwiZ2xvYmFsIiwiX21vbmdvQ2xpZW50UHJvbWlzZSIsImNsaWVudCIsImNvbm5lY3QiLCJjYXRjaCIsImVyciIsIndhcm4iLCJtZXNzYWdlIiwiZ2V0RGF0YWJhc2UiLCJkYiIsIk1PTkdPREJfREIiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./lib/mongodbClient.ts\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../../webpack-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next","vendor-chunks/@opentelemetry","vendor-chunks/@vercel","vendor-chunks/zod","vendor-chunks/@ai-sdk","vendor-chunks/eventsource-parser","vendor-chunks/ai"], () => (__webpack_exec__("(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fchat%2Froute&page=%2Fapi%2Fchat%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fchat%2Froute.ts&appDir=D%3A%5Cautonomous_hacks_2025%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=D%3A%5Cautonomous_hacks_2025&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!")));
module.exports = __webpack_exports__;

})();